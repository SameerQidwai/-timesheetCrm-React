(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[0],{299:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASUAAABiCAYAAAAWTcUXAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAZ25vbWUtc2NyZWVuc2hvdO8Dvz4AACAASURBVHic7Z1rkF1Xded/e+9zzn327bfUUrek1luWZMlPbMvCwWBk8FPGBFKhEgaoGTJFTc1kQvJlKlXjVM23CcxkSAiQQCUMTIYMDmDLYIOxwdhY8Uu2LFuWZL1bj1a/7/O89p4Pp9VS21Krb+ue2y31/VWpLHf3OWvdqz7/u9faa68lcrmcoUGDBg3mCHK2HWjQoEGD82mIUoMGDeYUDVFq0KDBnMKabQcazBJWCmmlEXYOYaUQMoGQNkYYhBGgPXToYvwCOihgghKE7mx73WAe0BClWcQIibAyKKcFkWhG2c0IOwNYCDuNMAYdlIEAExQJvVGMO0rojWCCIsLoadkRVhYrsxTVvByVW4aV7EI4rQg7i1QOSAuBAiURGowEQg06RBsfE7qYII+uDBEWTxAWjhDkDxIWTmB0Oc63qME8RFw5u28CIwRCSIwOwWiEEDW6t0ImWxBOGyrVgbRbkE7z+GoiOfGgau0hvDJhMBaJgzuAdgfR7gho79KvwEpH4tC0HDu3EpFdjEp0IKw00koAEiHGI+qzr82Y8f9oQKMDFxOUCL1BzNgJ/PxBgvwBwtJxjF8894rS3Thtm7E6NmFle1HJNoS0J93LGB29NnHhXwFhBEaCQIz7c86/UFfQxTME+XfxB18nGHqT0B2YyZvfoMEk5pQoCSuFdDpQqQXIZDvCySFUAqEc0BpQoCyMrgAKYUJM6EXhhTtMWD5D6PajK8NTCpZRNnZmKap5NVZuNXZmKSLZhnSySOkghAVCRA8jkSCJ8UWJwUQPsQ4x2kd7RbQ3Qlg6TjhyEG9sL2H+cBTuANJpwWrbiNN+A1bzGqxkJ8JyonvpENAYzIT4XPpNOuuXREgFgA5dQncAf2gvunwCu3UjVvMqlN0ExmBMMC5EtUMYEa2shIURhrA8TDD2Dt7JF/CGXpskkA0aVMPsipKwUE1LsXOrUOnFGGWDX0RXBgjLZzD+GNrPY/wSEE48WAIBUoF0kFYW4TQhE+2oRAcy2QJCob0RgrF3CUf2o4MCCAu7eS121804zZtQmUUoKwNSTjy4OihjgtK4zSI6LIP2MIEbCZWVQloJhMognCxSZZB2GqEsQILWhLqMLp3BH34LpMBpvw6VaAchMCaAUE9emYyv/kCeW5G8V1DNWSE0nF3hnC9iZwUCqaLVjdGRrekKXQ0QYlygMATFPtzTL+D1/ZKw0l83HxpcHcyKKKmm5Tjtm5GphRivEIUf+cMElTPTzpNMhbCyyMwinOwK7PZNaOOikouwm1ciVQoYX12UzxAUjxCOHSIoHCYs96Mrg5iwggm992nDOQM2WA7KbkWkO7EyS1BNy3Car0GlOsaFJkrXGe1PWqVIVCSoQkAYEAZFtDuKCcZzRX4RgvK5sE2AUCmEncGyWiGVQ1hN0QpSzs2UoJAKKWwCbwiv71eUjv8UXW6IU4PpUTdREjKB03EjVvsGTFjBH3qTYPgdTFiKxZ5MLSTZ81GSi+7ESneCEWhdIRw7jjf0Gv7g6/hj72KCQk3sOV1byfZ+Gpld+L5QSUgVrSK0T1geICgcxB/dRzh2mLB0EuPnMWFlWnaMkNgt68is/Tx207LxEHBuIoRESJuwMkS572dUjj7RCOsaXJL4RUk6OF1bsFs2ogtHcPtfRFfOxGcu1UFq6f04iz6E7bSCMISlISpDr+Kfeg5/+G2Mrt3Wtt16LelVn8JuWQ/ocyIhBELZoEPCQh/u4Cv4Z3YR5g9F4eQMMAhS3XeRWv4JrEQHmrkrSOdzVpyCscMUD3wfb+Cl2XapwRwmVlFyOm7GXnALQeEg7snnwM/HZQqkRWrxNpIrtmOnFgIQlPspn/gl3olnCEunampOOM2kV36a5OIPR/U92h//hkBKh9Av4A/uonLiGfzhPZdd46NSi0mv/SzJzpsxhHN6hXQxhLIwRuMe/yXFA9/H+GOz7VKDOUgsoiQzi0kuvRfcPOW+JzHucK1NTELlVpBd/Yc47ZsRQhJUhnCP/4LK8Sdj2aa2268nu+7z2JklhNoFExUcCssh9PK4p39D5diThIUjNbGXWPhBMmv/DSrZhr7CCxiFEUgrgVc4RHHPt/BH35ptlxrMMWouSonuj2C1rKPS93PCkX21vPX7MEBy6T1kl/8eKtmMDn0q/S9QPvDPhKVjtbcnJOneh0mveDjKEZkAIKr/CQMqp5+nfOTHNRMjhE1m5e+TWn5fZP8KXB1dDCFtdFimtO+7VI4/OdvuNJhD1E6U7CbSK34X449SPvzYtIoJLwdhZcms/TzJng8hUQSFkxQO/G+807+JyV4T2fX/jmTXVrT2ot2x8VDNH91P4cD3CQZ31c6g3URuw5dILLwV47sXLXC8khFCglCUjzxGcd934QrJkTWIl5qIkpXtJbl8O+7JX+MPvFoLv6ZEphfTtOE/kGhbH+Uo+ndS2Pv3sSXQVWoh2Y3/iUTrNYTju2RnV0rlYzsov/vDmu4iilQHuY1/gtO67ooP1y7F2bC3fOJZim9/Y9q7kA2uXi670MVpvw5n0e9QOvgDdPFELXyaEtW0iqbNf4yT6SEMXcoHH6V46Ac1qW+6oL3MEnKbv4xqWkIYjAuS5RAW+ym+/S28wVdqak+mF9N87Z+iWpahg6tbkCA64mJCl1T3nQhpk9/zvxoHf+c5lyVKzsLbcDpuoPjOd+qyk6Ja1tB87Z9ipRcQuGPk930L/8SvqdUJuPfZyy4jt/nPsNKL0EEUjkqVwB98i7E9f4Uun66pPZlsJ7fpy6jmZZgg3vB3rqGDCqmurSAg/2ZDmOYzMxYlZ9FWnJaNFPb+XV1+gVRu9YQgheUh8rv/J/5wDXM470GkFpLb/OVIkPQ5QaqcfI7C3m/UvgjQbqLp2i9j55bPixXShQjDCsmurZjAo7Dnr2nkmOYnM2ryZnfcFAnSvu/UR5AyS2ja/CeodCdheYjRN/8yXkGyc+Su/c+obPeEIAnLoXzs5+Tf/KvaC5J0yG780rzIIV0KHVRIdd9JevXvz7YrDWaJqldKVvNanAW3Utz37boIknRaaNr4x9jpLkJ3lLE3/5Jg6M0YDVpkN/57nJY1EysWpZIUjzxBYe+3ENR+Fyy15jOkOm+ZVUESGqSnJ3VEmAojQTvxNC41gUd62YPo4kkqJ34Ri40Gc5eqREmmFpBceg/F/f8w0ZojVoRNdt0fYbeswPgVCm99PV5BAtIrfo9k560TAiFVgtKJZyi+8+1YBCnR9SEyPfdGOaS4kmOXQIQGJPzu59ZwXW8OfYnuAgLBcNHnv3/7bXTBf39Xg8vECINAk1nzWYLCUYKxmdW7ffGLX2TLli1oPf1NECklX//613nxxRdnZLMalFL8xV/8Bd3d3ZjL7OggpWTXrl189atfrZF357jjjjv4whe+UNX7OBWPPPIIhw8fvuj3py9K0iG98lOUDz+GqQzVwLVLk1rxMIlFt4LWFA58D68/3l8UZ8EtpHofmBSyuQOvU3z7GzBeKFlLVGYJmTV/iBEaZqkOSQQakVD88R9t4EsfWTLt60aKPl/57jsYDUbV3i9jNMJOk73m3zL2yiMzOi942223sX379qqve+KJJ+oiSlJK7rnnHlasWFGT+915551873vfo7+/th0ZvvjFL3LffffV7H5f+9rXphSlaa+/U0sfwB/aQ5g/UAu/LonTfh2Z3ocAqPT9kvKRx2K1pxIdZNZ+LmoOZwxCWIT5ExTe+lo8tTPCJn3NF1CJlvEGdvVHlUOSi9J89c9vrEqQACq+iWHdOBmjfZzm1aRWfnpG1/u+P6PrarUimA6uW7uQvbm5mbvuuqtm9wNYvHgxt99+e03vean3d1qiZLVfC8km3BPP1MSpSyGsJlJrP4e0kvij75Lf/51aRwiTMEBq9WewUgujoxxCQOCR3/u36HI8LV6TPdtItm2eWJXVE+lpRGi44e4eHv9vt3H/ps66+zBddOCS6t6G037dbLtyRfDQQw/V9H7btm2jtbW1pve8FJcM34SVJtl1J8UD362HPwAkVz5MoqmX0C9S3PttiLkHT2LBrSS7PngujyQdCke+F1v+SqW7SK34BIS1DwkvhggN0tNoW7Dounb+9BMreeCGuStGZzHCIIVNatVn8Ef2Niq+L8Ftt91Gb2/vlOFRNcwk/L1cLrlSSvZswxt4NfaT/mdRudWku7dhMJSP/wx/ZE+s9oSVJr3y0xPvhJQO3tBuyod/HJvN1IpPYiXaYu2HdHY3TZVDVEWjmh02fbSbrzxyM7985ANXhCCdRRsfp3kVie6PzrYrc56mpibuvvvumtxr5cqV3HLLLTW5VzVMuVKS6cWo9CJKR35Sl40hIyTpFZ9COVm80cOUDz4au81k993YTb3RKkkIdFCm8M4/gplZPuJSWLk1JDu3xrrbJjTIjEVHb5aNy3N88JpWfmddG8vak/EYrAPGBKSW3Yd36jm0NzLb7sxptm/fzje/+c3L3tG79957SafTNfJq+kwpSsmeu6iceDa2c2XvxWm/jkTH9ZgwoHT4hzVrVXsxhJ0jteTuiRYkUjoUj/4stmS+AdK9DyEsJ9ZckiqH/M79S/nG59cj40zG1RGjQ6zUAhJLPkb53X+abXfmNDfeeCPr1q3j7bffnvE9lFKzErrBFOGbyi5DiATByMxfWDUYIUn2PoC0HLyRvXinn4/dZqr7o6h0lNyWKMLyAJUYwzY7twa78/q6JLcTjrhqBGmCMCC5+E6k3TzbnsxpEokE999//2Xd49prr2XTpk018qg6LipKiYVbcU89VzdHnNaNJFo2RI3aju0AHW8SWFpZnMV3TqySUBaVvifRXnw1WImebUiViO3+51PH6Up1QxOtlpxFd8y2K3Oe++67D9u2Z3z9Aw88cFnXXw4XFCWR6kDYGYLRd+rmSKLnLqRKEowexD39r7HbsxbchNW0eGKVFFQGKPc9HZs9mVpAouOmc728G8wIo0NSiz4E0pltV+Y0GzZsYPPmzTO6NplM1rRYslouKEqJtpvwh3dD7OVx406kunBaN2MIKZ98OrYk81kMgsTiD40PdwSUhXfq+Vh3GJ2FW7CSLTWfVDvfMCZA5ZZit26YbVfmNJZl8eCDD87o2ptvvpk1a9bU2KPp835REhZWrhd/6I26OZFYcCtWsgVdGsDr3xm7PTu7DCe3FsIAYQTaL1E5+avY7BmpcBbcio45JJ0vCGHhLKxtlfHVyD333EMqlar6uu3bt0859j5u3idKMtdL6A7VbWigQWAvvBmQeAOv16Ueyu68CWWlor7XysIf3kuQPxSbPSuzHLup91z+qsHlEQY47deC3TTbnsxpZlJnlMvlalbnNFPeJ0qJlg0EI3vr5oCV6cHKLENrD3cg/lUSRmJ3XIc2UeGiEBJ34Lex1mEl2q9HqSu3RmiuoQmxEh3Yretm25U5jRCi6hBu69atLFlS3TnIWjNZlIxEpBcQjh2smwNW6wYspwldHsSrQ/mBSndhZ5ZFqxYhCN1R/ME4Q1WB3XHthAg2qBFSYrfNLJE7n9i2bRvNzdMvoaj12bmZMEmUZLoDQnfGY6VnQqJlIwhFkH833gm646iW1UgnO9EJICgeJSzXttXD+chUOyLbA3UWJUu9f+0XasNYKWD3sQIvH7qyp9MaHWI3rwV52bMvrmp6enrYunXrtH62s7OTD3/4wzF7dGkm/YuqzFJ0jcdbT4VQSVTTMkDjDddnUqrdcm7JL4UiGNoTa+imMr1YdnNdSwG0I3l57wh//uh+RosBo6WAoVGfgVGX4aEK4aky627r4rE/u6FuPtUaQ4hKLUQmO9Glk7PtzpzmoYceYseOHZf8ubvuuouOjo46eDQ1k0TJyizBH61fPkmluhDpdnToEozF36fJILCyyyYmzWod4MVci2U1rUAKRUgdRckWnN41zD+9PDjxNSMBITBKoCoay7rCq72NQdoZrOxSvIYoTcmHP/xhFixYcMnmb5/4xCfq5NHUTA7fEs2EldqODZoKlV6MUilCd7Qun3Yy0YJMLQA0QkhCP09YOh6rTdW8bFZqk7QtCFNq4o9OKLQjMUpEAnUVIIVCZZfNthtznvb2dj7ykY9M+TO9vb1s2bKlTh5NzblfT2EDCuPWL9cgM90IaWPKg4R1mBsnkx0oKzsuEhIqQ5hKjCfOhYWV6GoUTMaEFhqV6Z5tN64ILpXAvvvuu8lms3XyZmomREk4WYwIYulFfVHjqYUIBKF3pi6dCKxEJ0JFxxOEkFGCO8bXK+0sItEMNEQpFoxGOZ2Y2Zq4MEuEYUilUl2zuy1btrBs2YVXlUKIqnfd8vk8+Xw8G1MToiStLMarw4SS81DJNgyGMKaWs+9FJNvPTd4QgsA9E689pxmhUueOszSoLVojks0Ia37VgBWLRX79619XdU1TUxMf+9jHLvi99evXc8MN1W16vPjiixw9erSqa6bLuZWSlUab+rUaNUIi7Ghr3rijdbGpnJaJvwsEphJv9bhwskjLiSrHG9QcgwE7hbCqP0pxJSOlZMeOHVUPRnjwwQcveHzkvvvuI5GornvFo48+ShDEE2WcyylZKYRfP1GS0kGI6I0wdahPgkgkzkcH8eaxpJVlhkOIG0wTKWyEVf/uiLOJ4zi88sor7NtX3Ty8G2+8kbVr1076mm3bVfdeGhwc5Fe/+hWOE0+nhnPhm7AxdZzQaqRCWA5GaHS9msGf1+5CmxD8cqzmhJUGOb/yHfVEaBDSQoj5Fb5JKRkeHuapp56q6roLtSS5/vrrWb9+fVX3eeaZZ+jr60OpGAb+MWmllKSen+rCCBAStMaY+oihsJOTup/FHlZdbZ0f5yRiXr7PSil27NhR9Yy6+++/H8s6V564ffv2qsXlxz+OrzsrnK9CJrg62xWez1X+8hrMHyzL4vXXX696lNLGjRsnmr9lMhk+/vGPV3V9f38/v/nNb2JtbXJOlAIPc4HzUnFhhBk/fyYnckuxEwaTCgcbCegGVypSSjzP4+c//3lV153f/G3Lli1Vjwx/+umnGRoaii10g/NESRsXKeu3iyF0iAlcQEZhVR0woRuFjUR1SoKYexBf7SvPOYGZ1+/z448/XvUopXvuuQfbtnnggQeqtvfYY49VfU21nLdSKiPruIuhtYcJo0RztEtVB5vhuTosgUCqTKz2TFBq1CjFiJFgdAC6fhs0c42XX36ZQ4eqa1C4cuVKHnzwQe64o7oBDH19fTz/fPxThs6JklccT3bXB2F01N1SCKTdVheb55ceGAwy2TLFT9fAnlegUc0dLyb00WF9uqTORUqlUtUhnJSSRx55pOpmbk8//TQjI/EPAp0QpTAYA+nUNRdsvGEEApVqr4+98uCk/xeJeNs0mKCICfx5uTtUD4SQ0Wo7iLe0Y64zkxCup6enqryQMYaf/OQn1bo2I87llILy+Kol3pDmfILKaQwGkerEiPjLEbQ3NNEn2xiNlV4QqwiH3jAmLCPm2dmsumEE2h9FB/Ur+p2LvPrqq7Ed+TjLkSNH+O1vfxurjbOcO2aCwQQlpFOfUApAF/ow2kcm2lBW/FNPg3I/OqhEyW4TIpIdsYqw8Ytod4RGVXdMKIkpDSDmea1HoVDg6afjm1kIUehWKNSnI+2kpyWs9Ne1FURQPIb2y1hWMzK7KHZ7xh1CV4ZBSdAm6q+UXBCjwYDQPY2owypwPiKNJCjG2w/rSmEmIdx0Mcbwox/9KJZ7X4jJolQ4hkr31M24rpxBVwYRTgIrtyp2eyasEJZOIFAYYVAqhZVdHqvNYOxwQ5RiQpuQsBhv2HKlsHPnzthCuIMHD/Lyyy/Hcu8LMelp0cXjyEQrEF9h1PmYsIJfPARI7LZr6mIzGDswSSSsmO2GY4cak0ziQAi0XyQoHJltT+YEcYZwTz75JKVS/doaTRIlE5QhrKAyi+vmQDC0B0yI1bQKYefitze8Fz0+FtyYACe3DhHjTLagcJjQG2vswNUYgUKXT6PL8fbEupJ4/PHHa35PrXXsZ93ey/viimD0AHZrdaeGLwdvZA+Bn8dKtGO3xL9aCoqHCMsDSBRGh6jMQlTzytjs6coAunAMIRqjgGqJkAp/5J26dkqd67z00kscO3aspvfcv38/r732Wk3veSneJ0re6Fuo7LK6tRgNiycIxw4jpI2zoLoRwzPB+EX8oT2gIpEQ0sZe8IE4LeIN7W7klWqMMRpv+PVY7u26V2aF+NjYGM8++2xN77ljx466vx/v+/g23igmKGFnlxMU4p+UK4zGPfMiifZrsds3IZ02tDcUq01v4CWS3XcCUQiXbLuJiv2DqMI8DnuDu9ArHkYY0TgEXAOEkOjyIP5wPOPAHn74YdauXVuzk/BSSn7xi1/UJVn82GOP8Qd/8Ac1uVcYhtOaF1drLhhT+AOvYS+4qS6iBOD3v0TQ+0nsVCd21624R5+I197gm4Sl06h0J0aHWJlF2O034J16LhZ7Yf4QQf4IdstKCBvhxuUipI079EZsE5W3b9/O9u3ba3rPSqVSF1F68cUXOX78OD09l7+LvmfPHl5/PZ7V6FRcMKbwR/aiku1IJ96zYWcJy6fxBl8DJKlFd07qEBkHJizinnlpIs9jMKQWfwQTVzLaBPj9O5EX/gxoUCVGh3j9L8y2G1VRbT/tmTI6OsozzzxTk3s98cQTdfP7fC6S6AjxB9/AWTi9GeS1wD3+C8KwjJ1bSaLz5tjteSd+hQ7KUUilfay29SRaN8Vmzz39PEFlpJFbukyEsPCLR/CH3pxtV+YstWgv4vs+P/3pT2vgTfVc9AnxzryMauoFu6kujngjb+EPvI5QFoll944Px4wPP39w3F5kRwoLZ/l9EFOCPyyfxj/zCkLG3MPpKkdIhdv3LGhvtl2Zs+zcuZOTJy9v4vQbb7zB7t27a+RRdVxUlIx28QdfIdU99bjfWiEwVI4+jg5cnNZ1JBbFu0oTAspHH0cbH2EEWnskW6/D6bgpNpvlvicJdWWi0VyDKpGSoNwfW+7vamFkZKTquXDv5YknniAMZ6fod8pYwu3fiUovQqXqU0zpDr2B1/8KUlikex+OfZXmjezBPfMq2NHqRSBJrfxUbMWU/ug+/P5XJuw1qA4lHCrHn0Z78ff0udK5nDYjlUplVnbdzjKlKAmjKfX9nNTSe+tyDltgKB3+Z0I3j920hMzyh2O2B+VDj2L8aPWijY/TvIrksnvjsSegdPQn6PPa8jaYHkIq/PJp3L7qxgrNV55//nlOnTo1o2t37drF3r3xlFtMh0tmXfXoAbQ7RHLhB+vhD8HYu1SOPwlAasnHsVuvjdVeOLafyolnEVa042e0T2rZg1i5eKq8w5F9uCeen7DXYHpIYVM+8nhjlTRNhoeHZ1xI+dhjj8XWcWA6TGsrqHz8CeyO65GphXH7E9k79CjeyLtIK0lm3ecQMffwLh/8fwSlUwipMEajrCyZ1V9AxDRIoXzonwncIZCNnbjpIJSFO7oft6+6tq/znZnswpXL5VnbdTvLtJ4KE5QpH3uc1PLfxaj48yE6KFDc9x20V8LOrSCz5nOxHnvR3hClA/8HhJhIejvt15Ba85l47JVPUz78L8iYdxivCoTA6JDyge9h6jVJ+SrhhRdeoL+/v6prXnnlFQ4erE/R9MWY9kd1OHaQYOgNMr2fjNOfCfzh3RSO/BCMIdV9J+llta2wfS+Vk7+mfPy8MC7wyPR8nGTP3fHYO/ok/pndyJgLRa90lExQPv4U3uCu2XblimNoaIjnnqtup/LHP/7xrIZuUGWfVvfUrzE6INXzsbj8mUTl4L9QOf0CQirSqz5Nouv22GwJAaV9/4BXOISQNkYYDCGZNZ/FjqNMwPiMHfgWoTuKrFP/qvOR8vJWnkk7/s7jQtp4o+9SOfB/Z3S9PYd2Oc8flX0+iUT1g1gty5r2ubxq2pm4rstTT01/I2EmvkN0FnAqqj73UDr8QzKrP4vddTv+qbhnQIUU3voGylmA3baazDVfJPSLBDF9apogT2H339B8458j7TRGhwhl07T+S+R3fwV/uLbFZDp/jOKBf6Rp45cQQf0O6xolODVY5tFX+me0qyqA4YKP9vWkicO1RAiJ8UsU3/omOphZb+idO3di2/asf/ILIdi3b9/7vq615qmnnqKnp6cqH7XW5PPTO/f37LPP8oMf/IB0Oj2lDSEE+/fvn/YYcK01P/vZz+ju7q76/R0eHp7y+yKXy1X/LyYdMms/hz/4Ol7/i1VfXi0qtZimG/4LTraHsDzE6Jt/SRDjMQO763aaN/xHEFGLDCEsQj9P/s2vEAzWvso1ve4LZJbehw7r2CLCGKQ/84fVSDBWbIqExCL/9t9SaSS35x0qkUj816qvMiHB8NukureBnSYsxNsn2QR5gtF3cNpvQKbbsTtvQOePEZYvr5T+YujCMXRYwem4gWgstEaqFHbnDQT5I+jyzOo/LoY/tAfVtBw7uxRTr9a5QmDUzP9wmeHfVEiVoHjkR5QP/0tsNhrMXWYmSgDGxxveTWLxnahUF8HYgdp69h60O4w/+g522yasZAd2501ob4QwX93I4ukSjO7DCInTsQmMjoTJSuIsuAVTGSEo1NCuCQkG38BqXY+VXlg/YZqDKJWk3PcMxb1/D/N8dNJ8ZeaiBGBCvMFdOB3XkWi/EX/0HYjxgdLuIP7wHuzWDdipzmgloxL4I29FwlFj/KHdCCycto1MrJikhbPwZrCS+ENvU6ux3Ea7+ENvYLesR6U7QM8/YZIqQaX/RYpv/Q2Y+rfMaDA3uDxRIkp6BsNvIe1mkkvuQRdPYPyx2nh3AYw3gnfmZWSuFyu9CKflGlR2BcHofswME6IXQwiBP7wbo32ctk0IIaIckwanbSNW8yqC0Xdr9npNUMQf3IXduh4r1TmvVkxKJXFPv0hhz1816pHmOZctSmcJi0fR7gCpZQ8gVJqgcDi2LWMTlPD6dyLsJqymsZliBgAABohJREFU5ThNS7AXfADtjxKMHan54JBgZC+6PIjVsQlpORijMSbEznSTWHgb2lQIxg7VZFKrCYp4A69h51ZhpbuuemESRiCtBOUTz1J4668bgtSgdqIEYNxhvKHXcdo3k1h0B6YyGN9ZJe3jnXkJ7Q4jc6uicK7zA1hNy9HFvprbDQqH8Ef34TRdg0q2YkyIMSHCSpDs+ABW8xqC8mlMZeCybZmghNu/E5lZjN3Ui6lRiDjXEEKCtCgf+QnFt/+uEbI1AGosSkCUtB15G+OPkuzZhmpaTlg5BUG5pmbOEuQP4g/uQiUXYGUWYzctxVp4G9JpJiyewAS1G6Kny/1UBv81spVbhjBm8qqp63ZUuouw3I/xRi/TmBetBmUCu3kdQgqY5XqbWiKkjdYuxXe+Q/nQD2kktRucpfaiNI52h3DPvIyymkh2b0Oluwm9AaihSJzFeKO4p36DcYeQme5o1dR6Dc7CLQinBV0+gwlq1GQ+KOGe+i3aK2DlVqGc7MSqCSlxmlfjLNyKzPZgvDxhZXDmYazR+IO7CEqnsFvXI53MFZ8AF0agrCRB4Sj5N/9HXercGlxZxCZKEB3dCEt9eAOvIhPNpBbdidW8DqM9tDtCbT8dDcHYu7inX8CYAJnsQiVbSbSux158O1a2F6M9jDcC+jInighDMLYPd/BVlN2KlV2CUBJ0tGoSysLJrSLRtRWnfRNCJNBBYcaJ+LBwBG/gVVRyEXa2h+h9u/JWFmcHNZT6niL/5v9CF4/PskcN5iIzq+ieIcaA07wOu/M6ZKIVv3CEcHQfQf5ozXsuy+QiMmt+n2TX1uj0PwodugSFPryRNwjO7CLIv1uT3JPTdj2plZ/Ezq3CnCcWwghQFkJIQncMP7+fYHA3/shewsJxTFj9nLlE90dI934Cmeq4YsI5ISRSOvhjhygc/D5+/0uz7VKDOUxdRWmSYSuL1boOO7cK6bRgvDxB4ThBqQ/tnokGQ05zJLMxIO0UItGKSnWh0t2oRHuU3yoeAytFsusO7KblSDsDgNYeoTtEWDhGMHaQoHAYXT6FqYwQBnmM9hEXqH0yREKjVAbptCBTC1DpRditm7DbN0QCKCQgMSY4JxxCIEQkUCbwCL0hwtJJguJxwtIJTHmQ0BuBsILR7sR1AgEyAVYSZecQyRYSnTdjd1w/50VJCBnljirDlPp+SuXoE7EN/Gxw9TBrojQJ6aDSi7AyS1DpRUgrixESQ4AJyhD6aB09rEJHTb+QCaSVAJlACAeExOgyujJIWDxBUDz6nmSzwsqtxF5wI07bdahsN5bdBGL8hL4O0IFLGBQwQTkKtYIKRkdb1AaDwEFYKYSdQVoZcNJIK4kkOo1uTIAOXXTxFIE/hNW8CstqwugQdDjpwK0QEoSaGLlkdIghxIQ+RvuTxExig20jUFEjOh1Ggvce5soEXiEVUtgE7hDuiecoH9+BLlfX16fB/GVuiNKFkE708KssqATCSSFRGGGih8+voI0LQQkdFNB+adp1QkZIrHQ3qmU1dm41KrsMK9mJsLMIOxG1EhEKgZh0Cl5oxsMzjdEhWntor4BxhwiLffijBwhG9xEWj2LCCiqzBKfrFuz2G7Azy6LOA8JEAmX0hVc640VW5zcGMZgL/mwUHkqQKmpOF7pI6WAwk1dpdUAIOZEz8ovHqZx+Lpqt1xCjBlUyd0WpjhgE0m5CJtuRThsq2YawmxBOJnrQzLgQotFhCe3loTJM4A5i/GG0OzplqGkQWNml2K3rsVs3oLJLkYk2pJU6N5xyvLyA8ZWOGI8cJ0TRjIeF46JljMYEFUJ3kDB/BH/kLfyR/djNK3G6tmDlVqKszPh9g+jeNeR8QQTQpRH8/Dt4J5/HH9w143YjDRo0RGkWECqJTHaiMotRmW5UcgHSbkEkcmAnEUZNDK2McluGUJci8fNGCStnCIvHCUun0OXT76uCNgZUbgl267U47Zuxsr2oROu5exoNjK/UtJk65BMiWrUJAchz4WbgElYGCMYO4A29jj/0JrpyJo63q8E8oyFKcwhjoqJCpEQQdRfUxo9KDbQ/4+Mzws5hZZYgm5ZiZ5ej0l2IRBvSSoOdREobjJhYhSHGw0VjMGGADksYr0jonYnyZYVDBPnD6NLJmhanNmgADVGalxgD0kpGIaqdRcrUeA4vGSXSQx9jXIxfwQQljF+MwrHGqOwGdaAhSg0aNJhTNAaPNWjQYE7REKUGDRrMKf4/opStMHr27XAAAAAASUVORK5CYII="},324:function(e,t,a){e.exports=a(573)},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},336:function(e,t,a){},497:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},556:function(e,t,a){},557:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},572:function(e,t,a){},573:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(46),r=a.n(i),s=(a(329),a(22)),o=a(55),c=a(11),d=a(12),u=a(14),m=a(13),f=a(581),g=a(594),p=a(576),b=a(577),h=a(615),y=a(616),k=(a(330),a(299)),E=a.n(k),v=a(94),S=a(600),C=a(207),j=a(601),P=a(602),O=a(603),I=a(604),D=(a(331),"http://54.91.49.138:8000/api/v1"),T={L:"Lead",TR:"Tender Released",BS:"Bid Submitted"},F={O:"Open",L:"Lost",P:"Open",NB:"Not Bid",DNP:"Did Not Proceed",C:"Completed"},z={1:"Milestone",2:"Time"},x=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e).replace(/^(\D+)/,"$1 ")},A=function(e){localStorage.setItem("accessToken",null!==e&&void 0!==e?e:M().accessToken),localStorage.setItem("jwtTimer",(new Date).getTime())},M=function(){for(var e={},t=Object.keys(localStorage),a=t.length;a--;)e[t[a]]=localStorage.getItem(t[a]);return e},R=function(e){if("Authentication Expired or Invalid"===e){var t=M().jwtExpired;t?(console.log("jwtExpired",t),localStorage.clear(),window.location.href="/login"):localStorage.setItem("jwtExpired",!0)}},N=function(){return{"content-type":"application/json",Authorization:"".concat(M().accessToken)}},w=function(e){return"pdf"===e?"/icons/pdf.png":"doc"===e||"docx"===e?"/icons/doc.png":"xls"===e||"xlsx"===e?"/icons/xls.png":"ppt"===e||"pptx"===e?"/icons/ppt.png":"csv"===e?"/icons/csv.png":/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(e)?"/icons/img.png":"/icons/default.png"},B=v.a.SubMenu,L=[{text:"Dashboard",icon:l.a.createElement(S.a,null),link:"/calender",key:"/calender"},{text:"Timesheets",icon:l.a.createElement(C.a,null),link:"/time-sheet",key:"TIMESHEETS",permissions:{module:"TIMESHEETS",key:"READ"}},{text:"Timesheets Approval",icon:l.a.createElement(j.a,null),link:"/time-sheet-approval",key:"TIMESHEETS APPROVAl",permissions:{module:"TIMESHEETS",key:"APPROVAL"}},{text:"Time Offs",icon:l.a.createElement(P.a,null),link:"/time-off",key:"/time-off"},{text:"Reporting",icon:l.a.createElement(O.a,null),key:"Reporting",subMenu:[{text:"Report 1",icon:l.a.createElement(I.a,null),link:"/Report-3",key:"/Report-3"},{text:"Report 2",icon:l.a.createElement(I.a,null),link:"/Report-1",key:"/Report-1"},{text:"TimeOffs",icon:l.a.createElement(I.a,null),link:"/Report-2",key:"/Report-2"}]}],Y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getAllowedMenu()},e.getAllowedMenu=function(){var t=M().permissions;t=t?JSON.parse(t):[];var a=e.state.allowedMenu;L.map((function(e){e.permissions&&t[e.permissions.module]&&t[e.permissions.module][e.permissions.key]&&a.push(e)})),e.setState({allowedMenu:a})},e.MenuRender=function(){return e.state.allowedMenu.map((function(t,a){return t.subMenu?l.a.createElement(B,{key:t.key,icon:t.icon,title:t.text},t.subMenu.map((function(t,a){return l.a.createElement(v.a.Item,{key:t.key,icon:t.icon,className:e.highlightRow(t.link)},l.a.createElement(s.b,{to:t.link,className:"nav-link"},t.text))}))):l.a.createElement(v.a.Item,{key:t.key,icon:t.icon,className:e.highlightRow(t.link)},l.a.createElement(s.b,{to:t.link,className:"nav-link"},t.text))}))},e.state={allowedMenu:[]},e}return Object(d.a)(a,[{key:"highlightRow",value:function(e){if(this.props.location.pathname===e)return"ant-menu-item-selected"}},{key:"render",value:function(){var e=this.props.location;return l.a.createElement(v.a,{theme:"dark",mode:"inline",defaultSelectedKeys:e.pathname},this.MenuRender())}}]),a}(n.Component),q=Object(o.h)(Y),V=a(193),H=a(315),U=a(597),_=a(317),K=a(605),W=a(606),G=a(607),J=a(110),Q=(a(336),[{text:"Contacts",items:[{text:"Organisations",link:"/organisations",key:"ORGANIZATIONS"},{text:"Contact",link:"/contact",key:"CONTACT_PERSONS"}],key:"CHILDRENS"},{text:"Opportunities",link:"/opportunities",key:"OPPORTUNITIES"},{text:"Resources",items:[{text:"Employees",link:"/Employees",key:"USERS"},{text:"Sub Contractors",link:"/sub-contractors",key:"USERS"}],key:"CHILDRENS"},{text:"Projects",link:"/projects",key:"PROJECTS"}]),Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getAllowedItems()},e.getAllowedItems=function(){var t=M().permissions;t=t?JSON.parse(t):[];var a=e.state.allowedNavItem;Q.map((function(e){if("CHILDRENS"===e.key){var n=[];e.items.map((function(e){t[e.key]&&t[e.key].READ&&n.push(e)})),n.length>0&&(e.items=n,a.push(e))}else t[e.key]&&t[e.key].READ&&a.push(e)})),e.setState({allowedNavItem:a,permissions:t})},e.getNavMenuItems=function(t){return t?t.map((function(t,a){return e.getSubMenuOrItem(t,a)})):[]},e.getDropMenu=function(e,t){return l.a.createElement(v.a,null,e.map((function(e,a){return l.a.createElement(v.a.Item,{key:"".concat(a+t),icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))})))},e.getSubMenuOrItem=function(t,a){return t.items?l.a.createElement(V.a,{overlay:e.getDropMenu(t.items,a),key:a},l.a.createElement("span",{className:"navItem"},t.text," ",l.a.createElement("span",null," ",l.a.createElement(_.a,null)," "))):l.a.createElement("span",{className:"navItem",key:a},l.a.createElement(s.b,{to:t.link,className:"nav-link"},t.text))},e.logOut=function(){H.b.loading({content:"Loading...",key:"logout"}),localStorage.clear(),e.setState({logout:!0},(function(){H.b.info({content:"Logout successfully!",key:"logout"})}))},e.state={logout:!1,allowedNavItem:[],permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.logout,a=e.allowedNavItem,n=e.permissions,i=l.a.createElement(v.a,{onClick:this.handleMenuClick},l.a.createElement(v.a.Item,{key:"profile"},l.a.createElement(s.b,{to:"/profile",className:"nav-link"},"Profile ",l.a.createElement(K.a,null))),l.a.createElement(v.a.Item,{key:"logout",onClick:this.logOut},"Logout ",l.a.createElement(W.a,null)));return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark rounded "},l.a.createElement("div",{className:"collapse navbar-collapse justify-content-md-center",id:"navbarsExample10"},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,this.getNavMenuItems(a)),n.ADMIN_OPTIONS&&n.ADMIN_OPTIONS.READ?l.a.createElement(b.a,{xs:{span:2},md:{span:2}},l.a.createElement(U.b,{size:"large"},l.a.createElement(s.b,{to:"/admin/global-settings"},l.a.createElement(G.a,null)),l.a.createElement(V.a,{overlay:i,placement:"bottomCenter"},l.a.createElement(J.a,{style:{color:"#1890ff",cursor:"pointer"}})))):l.a.createElement(b.a,{xs:{span:1},md:{span:1}},l.a.createElement(V.a,{overlay:i,placement:"bottomCenter"},l.a.createElement(J.a,{style:{color:"#1890ff",cursor:"pointer"}}))))),t&&l.a.createElement(o.a,{to:{pathname:"/"}}))}}]),a}(n.Component),X=Object(o.h)(Z),$=a(38),ee=a(608),te=a(609),ae=a(610),ne=a(611),le=a(612),ie=a(613),re=v.a.SubMenu,se=[{text:"Global Settings",icon:l.a.createElement(ee.a,null),link:"/admin/global-settings",key:"/admin/global-settings"},{text:"Holidays Types",icon:l.a.createElement(C.a,null),link:"/admin/holiday-types",key:"/admin/holiday-types"},{text:"Calendars",icon:l.a.createElement(C.a,null),link:"/admin/calenders",key:"/admin/calenders"},{text:"Leave Categories",icon:l.a.createElement(P.a,null),link:"/admin/leave-categories",key:"/admin/leave-categories"},{text:"Leave Policies",icon:l.a.createElement(te.a,null),link:"/admin/leave-policies",key:"/admin/leave-policies"},{text:"Role & Permissions",icon:l.a.createElement(ae.a,null),link:"/admin/roles",key:"/admin/roles"},{text:"Standard Levels",icon:l.a.createElement(ne.a,null),link:"/admin/standard-levels",key:"/admin/standard-levels"},{text:"Standard Skills",icon:l.a.createElement(le.a,null),link:"/admin/skills",key:"/admin/skills"},{text:"Panels",icon:l.a.createElement(ie.a,null),link:"/admin/panels",key:"/admin/panels"}],oe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).componentDidMount=function(){},e.MenuRender=function(){return se.map((function(e,t){return e.subMenu?l.a.createElement(re,{key:e.key,icon:e.icon,title:e.text},e.subMenu.map((function(e,t){return l.a.createElement(v.a.Item,{key:e.key,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))}))):l.a.createElement(v.a.Item,{key:e.key,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))}))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.location.pathname;return l.a.createElement(v.a,{theme:"light",mode:"inline",defaultSelectedKeys:[e]},this.MenuRender())}}]),a}(n.Component),ce=Object(o.h)(oe),de=a(593),ue=a(28),me=a(197),fe=a(79),ge=a(580),pe=a(57),be=a(85),he=a.n(be),ye=a(9),ke=a.n(ye),Ee="".concat(D,"/global-setting"),ve=function(){return ke.a.get(Ee,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Se=a(10),Ce=a(585),je=a(589),Pe=a(248),Oe=a(578),Ie=a(586),De=a(71),Te=a(591),Fe=a(588),ze=a(113),xe=a(598),Ae=a(153),Me=a(162),Re=a(579),Ne=Ce.a.Item,we=je.a.Dragger,Be=Pe.a.RangePicker,Le=Oe.a.RangePicker,Ye=Ie.a.Title,qe=Ie.a.Text,Ve=function(e){return Array.isArray(e)?e:e&&e.fileList},He=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).multipleUpload=function(e,t,a,l){console.log(e,t,a,l);var i=n.state.uploadKeys;return console.log("multipleUpload",e,a,l,i),n.state.uploadKeys[a]=e,n.setState({uploadKeys:Object(Se.a)({},i)},(function(){console.log(n.state)})),!1},n.formatter=function(e,t){return"$"===t?"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):"ABN"===t?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," "):t?"".concat(e).concat(t):"".concat(e)},n.parser=function(e,t){return"$"===t?e.replace(/\$\s?|(,*)/g,""):"ABN"===t?e.replace(/\$\s?|(\s*)/g,""):t?e.replace(t,""):e},n.onFinish=function(e){n.props.Callback(e)},n.content=function(){return n.props.FormFields.map((function(e,t){return l.a.createElement(b.a,{span:e.fieldCol,offset:e.filedOffset,key:t+1,style:e.style},l.a.createElement(Ne,Object.assign({},e.layout,{name:[e.object,e.key],extra:e.hint,labelAlign:e.labelAlign,label:e.label,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules,valuePropName:e.valuePropName,getValueFromEvent:e.getValue&&Ve,hidden:!0===e.hidden,style:e.itemStyle,noStyle:e.noStyle}),n.filedformat(e.type,e.Placeholder,e.data,e.mode,e.rangeMin,e.rangeMax,e.showTime,e.shape,e.size,e.fieldStyle,e.disabled,e.readOnly,e.onChange,e.onClick,e.onBlur,e.onClear,e.tooltip,e.tooltipTitle,e.tooltipTrigger)))}))},n.filedformat=function(e,t,a,i,r,s,o,c,d,u,m,f,g,p,b,h,y,k,E){var v=null;switch(e){case"Title":v=l.a.createElement(Ye,{level:i,size:d,style:u},y?l.a.createElement(De.a,{title:k,trigger:E}," ",t):t);break;case"Text":v=l.a.createElement(qe,{strong:i,onClick:p,style:u,disabled:m},y?l.a.createElement(De.a,{title:k,trigger:E}," ",t):t,r&&l.a.createElement("span",{style:{color:"red"}}," * "));break;case"Password":v=l.a.createElement(Te.a.Password,{placeholder:t,visibilityToggle:i,size:d,style:u});break;case"Textarea":v=l.a.createElement(Te.a.TextArea,{placeholder:t,allowClear:!0,autoSize:i,asize:d,style:u,prefix:i,disabled:m,readOnly:f});break;case"InputNumber":v=l.a.createElement(Fe.a,{placeholder:t,min:r,max:s,size:d,formatter:function(e){return n.formatter(e,c)},parser:function(e){return n.parser(e,c)},style:u,onBlur:b,onChange:g,disabled:m,readOnly:f});break;case"Select":v=l.a.createElement(ze.a,{placeholder:t,options:a,mode:i,showArrow:!0,showSearch:!0,size:d,allowClear:!0,onChange:g,onClear:h,style:u,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},disabled:m});break;case"Switch":v=l.a.createElement(xe.a,{size:d,style:u});break;case"Radio":v=l.a.createElement(Ae.a.Group,{options:a,optionType:i,buttonStyle:c,size:d,style:u});break;case"Checkbox":v=l.a.createElement(Me.a,{options:a,size:d,style:u,onChange:g});break;case"CheckboxGroup":v=l.a.createElement(Me.a.Group,{options:a,size:d,style:u,onChange:g});break;case"DatePicker":v=l.a.createElement(Pe.a,{picker:i,showTime:o,disabledDate:null!==r&&void 0!==r?r:s,size:d,style:u,onBlur:b,onChange:g,format:"DD/MM/YYYY",disabled:m});break;case"TimePicker":v=l.a.createElement(Oe.a,{format:o,use12Hours:"use12Hours"===i,size:d,style:u,disabled:m});break;case"TimeRange":v=l.a.createElement(Le,{format:o,use12Hours:"use12Hours"===i,size:d,style:u});break;case"RangePicker":v=l.a.createElement(Be,{picker:i,showTime:o,size:d,style:u,format:"DD/MM/YYYY"});break;case"Divider":v=l.a.createElement(Re.a,{type:i,style:u});break;case"Button":v=l.a.createElement(pe.a,{type:i,shape:c,block:s,style:u,onClick:p,size:d},t);break;case"Upload":v=l.a.createElement(je.a,{name:"logo",action:i,listType:"text",multiple:s,style:u},t);break;case"Dragger":v=l.a.createElement(we,{name:"logo",action:i,listType:"text",multiple:!0,style:u,beforeUpload:function(){return!1}},t);break;default:v=l.a.createElement(Te.a,{placeholder:t,style:u,size:d,disabled:m,readOnly:f,onBlur:b,onChange:g})}return v},n}return Object(d.a)(a,[{key:"render",value:function(){return this.content()}}]),a}(n.Component),Ue=["ACT","NSW","VIC","QLD","SA","WA","NT","TSA"];var _e=function(e){var t=Object(be.useForm)(),a=Object($.a)(t,1)[0],i=Object(n.useState)([{fieldCol:6,Placeholder:"Rate",type:"Title",mode:4,fieldStyle:{textAlign:"right"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Start Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Finish Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:24,Placeholder:"Sale Tax",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"GST:",type:"Text",itemStyle:{textAlign:"center"}},{object:"gst",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"gst",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"gst",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"on Cost Rate",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"Superannuation:",type:"Text",itemStyle:{textAlign:"center"}},{object:"superannuation",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"superannuation",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"superannuation",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"Payroll Tax",type:"Text",itemStyle:{paddingLeft:"5%"}}]),r=Object($.a)(i,2),s=(r[0],r[1]),o=[{fieldCol:24,Placeholder:"General Settings",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,size:"small",Placeholder:"Records Per Page",type:"Text",labelAlign:"right"},{object:"global",fieldCol:20,key:"recordsPerPage",size:"small",type:"InputNumber",labelCol:{span:4},labelAlign:"right",itemStyle:{marginBottom:20}},{fieldCol:4,size:"small",Placeholder:"Display Email",rangeMin:!0,type:"Text",labelAlign:"left"},{object:"global",fieldCol:20,key:"displayEmail",Placeholder:"Display Name In Email",size:"small",type:"input",labelCol:{span:3},labelAlign:"right",itemStyle:{marginBottom:20}},{fieldCol:4,size:"small",Placeholder:"From Email",rangeMin:!0,type:"Text",labelAlign:"left"},{object:"global",fieldCol:20,key:"fromEmail",Placeholder:"From Email Address",size:"small",type:"input",labelCol:{span:3},labelAlign:"right",itemStyle:{marginBottom:20}},Object(fe.a)({fieldCol:20,mode:"horizontal",type:"Divider",itemStyle:{padding:"0px",margin:"0px"}},"itemStyle",{marginBottom:20})];Object(n.useEffect)((function(){c(),d()}),[]);var c=function(){ve().then((function(e){e.success&&a.setFieldsValue({global:e.data})}))},d=function(){var e,t,a=[],n=Object(me.a)(Ue);try{for(n.s();!(e=n.n()).done;){var l=e.value;a.push.apply(a,Object(ue.a)([{fieldCol:4,Placeholder:t=l,type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%",marginBottom:10}},{object:t,fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:t,fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:t,fieldCol:10,key:"finish",size:"small",shape:"%",type:"DatePicker"}]))}}catch(i){n.e(i)}finally{n.f()}Ue.length>0&&s((function(e){return[].concat(Object(ue.a)(e),a,[{fieldCol:20,mode:"horizontal",type:"Divider",itemStyle:{padding:"0px",margin:"0px"}}])}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a,{id:"my-form",form:a,scrollToFirstError:!0,onFinish:function(e){delete e[void 0];var t,a=e.global;(t=a,H.b.loading({content:"Loading...",key:1},5),ke.a.post(Ee,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return R(n),H.b.success({content:n,key:1},5),a&&A(e.headers&&e.headers.authorization),{success:a,data:l}})).catch((function(e){return H.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success}))},size:"small",layout:"inline",style:{padding:"20px 50px 20px 50px"}},l.a.createElement(He,{FormFields:o})),l.a.createElement(p.a,{justify:"end"},l.a.createElement(U.b,{size:"large"},l.a.createElement(ge.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return a.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(pe.a,{type:"primary",size:"small"},"Save")),l.a.createElement(pe.a,{size:"small",onClick:function(){return a.resetFields()}},"Cancel"))))},Ke=["ACT","NSW","VIC","QLD","SA","WA","NT","TSA"];var We=function(e){var t=this,a=Object(be.useForm)(),i=Object($.a)(a,1)[0],r=Object(n.useState)([{fieldCol:6,Placeholder:"Rate",type:"Title",mode:4,fieldStyle:{textAlign:"right"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Start Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Finish Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:24,Placeholder:"Sale Tax",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"GST:",type:"Text",itemStyle:{textAlign:"center"}},{object:"gst",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"gst",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"gst",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"on Cost Rate",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"Superannuation:",type:"Text",itemStyle:{textAlign:"center"}},{object:"superannuation",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"superannuation",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"superannuation",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"Payroll Tax",type:"Text",itemStyle:{paddingLeft:"5%"}}]),s=Object($.a)(r,2),o=s[0],c=s[1];Object(n.useEffect)((function(){d()}),[]);var d=function(){var e,t,a=[],n=Object(me.a)(Ke);try{for(n.s();!(e=n.n()).done;){var l=e.value;a.push.apply(a,Object(ue.a)([{fieldCol:4,Placeholder:t=l,type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%",marginBottom:10}},{object:t,fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:t,fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:t,fieldCol:10,key:"finish",size:"small",shape:"%",type:"DatePicker"}]))}}catch(i){n.e(i)}finally{n.f()}Ke.length>0&&c((function(e){return[].concat(Object(ue.a)(e),a,[{fieldCol:20,mode:"horizontal",type:"Divider",itemStyle:{padding:"0px",margin:"0px"}}])}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(he.a,{id:"my-form",form:i,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(He,{FormFields:o})),l.a.createElement(p.a,{justify:"end"},l.a.createElement(U.b,{size:"large"},l.a.createElement(ge.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return t.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(pe.a,{type:"primary",size:"small"},"Save")),l.a.createElement(pe.a,{size:"small",onClick:function(){return t.reset()}},"Cancel"))))},Ge=a(583),Je=a(590),Qe=a(614),Ze=a(77),Xe=Ce.a.Item,$e=je.a.Dragger,et=Pe.a.RangePicker,tt=Oe.a.RangePicker,at=Ie.a.Title,nt=Ie.a.Text,lt={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}},it=function(e){return Array.isArray(e)?e:e&&e.fileList},rt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).multipleUpload=function(e,t,a,l){var i=n.state.uploadKeys;return n.state.uploadKeys[a]=e,n.setState({uploadKeys:Object(Se.a)({},i)}),!1},n.formatter=function(e,t){return"$"===t?"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):"ABN"===t?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," "):t?"".concat(e).concat(t):"".concat(e)},n.parser=function(e,t){return"$"===t?e.replace(/\$\s?|(,*)/g,""):"ABN"===t?e.replace(/\$\s?|(\s*)/g,""):t?e.replace(t,""):e},n.onFinishs=function(e){n.props.Callback(e)},n.content=function(){var e=n.props.FormFields,t=e.fields,a=e.btns?e.btns:{},i=a.btn?a.btn:[];return l.a.createElement(b.a,{span:e.FormCol},l.a.createElement(Ce.a,Object.assign({id:e.formId,ref:e.formId,style:e.Formstyle,name:"nest-messages",onFinish:n.onFinishs,validateMessages:lt,scrollToFirstError:!0,size:e.size,layout:e.FormLayout},e.layout,{initialValues:e.initialValues,preserve:!1!==e.preserve}),e.fields?l.a.createElement(l.a.Fragment,null,t.map((function(e,t){return l.a.createElement(b.a,{span:e.fieldCol,offset:e.filedOffset,key:t+1,hidden:!0===e.hidden,style:e.style},l.a.createElement(Xe,Object.assign({},e.layout,{name:[e.object,e.key],extra:e.hint,labelAlign:e.labelAlign,label:e.label,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules,valuePropName:e.valuePropName,getValueFromEvent:e.getValue&&it,hidden:!0===e.hidden,style:e.itemStyle,noStyle:e.noStyle}),n.filedformat(e.type,e.Placeholder,e.data,e.mode,e.rangeMin,e.rangeMax,e.showTime,e.shape,e.size,e.fieldStyle,e.disabled,e.readOnly,e.onChange,e.onClick,e.onBlur,e.onClear,e.tooltip,e.tooltipTitle,e.tooltipTrigger)))}))):l.a.createElement("span",null),a.btn?l.a.createElement(b.a,{span:a.fieldCol,offset:a.filedOffset},l.a.createElement(p.a,{justify:a.justify,style:a.backstyle},l.a.createElement(Xe,{style:a.style},l.a.createElement(U.b,{size:a.size},i.map((function(e,t){return l.a.createElement(pe.a,{key:t,type:e.type,htmlType:e.htmlType,size:e.size,hidden:e.hidden,s:!0},e.placeholder)})))))):l.a.createElement("span",null)))},n.filedformat=function(e,t,a,i,r,s,o,c,d,u,m,f,g,p,b,h,y,k,E){var v=null;switch(e){case"Title":v=l.a.createElement(at,{level:i,size:d,style:u},y?l.a.createElement(De.a,{title:k,trigger:E}," ",t):t);break;case"Text":v=l.a.createElement(nt,{strong:i,onClick:p,style:u,disabled:m},y?l.a.createElement(De.a,{title:k,trigger:E}," ",t):t,r&&l.a.createElement("span",{style:{color:"red"}}," * "));break;case"Password":v=l.a.createElement(Te.a.Password,{placeholder:t,visibilityToggle:i,size:d,style:u});break;case"Textarea":v=l.a.createElement(Te.a.TextArea,{placeholder:t,allowClear:!0,autoSize:i,asize:d,style:u,prefix:i});break;case"InputNumber":v=l.a.createElement(Fe.a,{placeholder:t,min:r,max:s,size:d,formatter:function(e){return n.formatter(e,c)},parser:function(e){return n.parser(e,c)},style:u,onBlur:b,onChange:g,disabled:m,readOnly:f});break;case"Select":v=l.a.createElement(ze.a,{placeholder:t,options:a,mode:i,showArrow:!0,showSearch:!0,size:d,allowClear:!0,onChange:g,onClear:h,style:u,optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},disabled:m});break;case"Switch":v=l.a.createElement(xe.a,{size:d,style:u});break;case"Radio":v=l.a.createElement(Ae.a.Group,{options:a,optionType:i,buttonStyle:c,size:d,style:u});break;case"Checkbox":v=l.a.createElement(Me.a,{options:a,size:d,style:u,onChange:g});break;case"CheckboxGroup":v=l.a.createElement(Me.a.Group,{options:a,size:d,style:u,onChange:g});break;case"DatePicker":v=l.a.createElement(Pe.a,{picker:i,showTime:o,disabledDate:null!==r&&void 0!==r?r:s,size:d,style:u,onBlur:b,onChange:g,format:"DD/MM/YYYY"});break;case"TimePicker":v=l.a.createElement(Oe.a,{format:o,use12Hours:"use12Hours"===i,size:d,minuteStep:r,showNow:s,style:u});break;case"TimeRange":v=l.a.createElement(tt,{format:o,use12Hours:"use12Hours"===i,minuteStep:r,size:d,showNow:s,style:u});break;case"RangePicker":v=l.a.createElement(et,{picker:i,showTime:o,size:d,style:u,format:"DD/MM/YYYY"});break;case"Divider":v=l.a.createElement(Re.a,{type:i,style:u});break;case"Button":v=l.a.createElement(pe.a,{type:i,shape:c,block:s,style:u,onClick:p,size:d},t);break;case"Upload":v=l.a.createElement(je.a,{name:"logo",action:i,listType:"text",multiple:s,style:u},t);break;case"Dragger":v=l.a.createElement($e,{name:"logo",action:i,listType:"text",multiple:!0,style:u,beforeUpload:function(){return!1}},t);break;default:v=l.a.createElement(Te.a,{placeholder:t,style:u,size:d,disabled:m,readOnly:f,onBlur:b,onChange:g})}return v},n}return Object(d.a)(a,[{key:"render",value:function(){return this.content()}}]),a}(n.Component),st=a(5),ot=a.n(st),ct=(a(63),"".concat(D,"/calendar-holidays")),dt=Ie.a.Title,ut=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(e){(function(e){return ke.a.get(ct+"?calendarId=".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(n.map((function(e){e.label=e.holidayType.label})),A(e.headers&&e.headers.authorization)),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(n.state.calendarId).then((function(e){e.success&&n.setState({data:e.data,openModal:!1,editTimeoff:!1,loading:!1})}))},n.handleDelete=function(e){(function(e){return ke.a.delete(ct+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;if(R(n),A(e.headers&&e.headers.authorization),a)return a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){if(e){var t=n.state.FormFields;ke.a.get("".concat(D,"/holiday-types"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(n.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),A(e.headers&&e.headers.authorization)),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&(t.fields[0].data=a.data,n.setState({FormFields:t,openModal:e}))}))}else n.setState({openModal:e,editTimeoff:!1})},n.Callback=function(e){var t=n.state.calendarId;e.obj.date=ot()(e.obj.date).valueOf(),console.log(e);var a={calendarId:t,holidayTypeId:e.obj.holidayTypeId,date:e.obj.date.valueOf()};n.state.editTimeoff?n.editRecord(a):n.addType(a)},n.addType=function(e){var t;n.setState({loading:!0}),(t=e,H.b.loading({content:"Loading...",key:1}),ke.a.post(ct,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e){console.log(e);var t={id:e.id,holidayTypeId:e.holidayTypeId,date:ot()(e.date)};n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:t}}),editTimeoff:t.id},(function(){n.toggelModal(!0)}))},n.editRecord=function(e){var t,a=n.state.editTimeoff;n.setState({loading:!0}),e.id=a,(t=e,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(ct+"/".concat(t.id),t,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t.id}),n&&A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.submit=function(){n.holidayForm.current.refs.form.submit()},n.holidayForm=l.a.createRef(),n.columns=[{title:"Title",dataIndex:"label",key:"label"},{title:"Date",dataIndex:"date",key:"date",align:"right",render:function(e,t){return ot()(e).format("DD-MMM-YYYY")}},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={calendarId:!1,data:[],openModal:!1,editTimeoff:!1,FormFields:{formId:"form",justify:"center",FormCol:12,layout:{labelCol:{span:6}},justifyField:"center",size:"small",fields:[{object:"obj",fieldCol:24,key:"holidayTypeId",label:"Title",size:"small",type:"Select",data:[],labelAlign:"right"},{object:"obj",fieldCol:24,key:"date",label:"Date",size:"small",mode:"date",type:"DatePicker",labelAlign:"right",fieldStyle:{width:"100%"}}]}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({calendarId:t},(function(){return e.getData(t)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editTimeoff,r=t.FormFields,s=t.loading,o=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(dt,{level:4},"Holidays")),l.a.createElement(b.a,{span:"2"},l.a.createElement(Pe.a,{size:"small",mode:"year",picker:"year",format:"YYYY",defaultValue:ot()(new Date)})),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.toggelModal(!0)}},l.a.createElement(Qe.a,null)," Add Holiday")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:o,dataSource:a,size:"small",rowKey:function(e){return e.id}}))),n?l.a.createElement(Je.a,{title:i?"Edit Holiday":"Add New Holiday",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},onCancel:function(){e.toggelModal(!1)},okButtonProps:{disabled:s},okText:s?l.a.createElement(Ze.a,null):"Save",width:500,bodyStyle:{padding:"10px 0px 0px 0px"}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(rt,{ref:this.holidayForm,Callback:this.Callback,FormFields:r}))):null)}}]),a}(n.Component),mt=a(316),ft="".concat(D,"/calendars"),gt=Ie.a.Title,pt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){ke.a.get(ft,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editTimeoff:!1,loading:!1})}))},n.toggelModal=function(e){e?n.setState({openModal:e}):n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editTimeoff:!1})},n.Callback=function(e){n.state.editTimeoff?n.editRecord(e.obj):n.addCal(e.obj)},n.addCal=function(e){var t;n.setState({loading:!0}),(t=e,H.b.loading({content:"Loading...",key:1}),ke.a.post(ft,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;if(R(n),H.b.success({content:n,key:1}),A(e.headers&&e.headers.authorization),a)return a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e,t){n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editTimeoff:e.id,openModal:!0})},n.editRecord=function(e){var t,a=n.state.editTimeoff;n.setState({loading:!0}),e.id=a,(t=e,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(ft+"/".concat(t.id),t,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t.id},5),n&&A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.submit=function(){n.state.calenderForm.current.refs.calenderId.submit()},n.columns=[{title:"Title",dataIndex:"label",key:"label"},{title:"Status",dataIndex:"isActive",key:"isActive",align:"right",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(mt.a,{color:e?"green":"#7d7b7b",key:e},e?"Enabled":"Disabled"))}},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(e,t)}},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/admin/calenders/holidays/".concat(e.id)},className:"nav-link"},"Holidays")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],calenderForm:l.a.createRef(),openModal:!1,FormFields:{formId:"calenderId",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",initialValues:{obj:{isActive:!0}},fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"},{object:"obj",fieldCol:20,key:"isActive",label:"Status",size:"small",type:"Switch",layout:{labelCol:{span:4}},labelAlign:"left",valuePropName:"checked"}]}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editTimeoff,r=t.loading,s=t.calenderForm,o=t.FormFields,c=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(gt,{level:4},"Calenders")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(Qe.a,null),"Add Calender")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:c,dataSource:a,size:"small",rowKey:function(e){return e.id}}))),n?l.a.createElement(Je.a,{title:i?"Edit Calender":"Add New Calender",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:r},okText:r?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:600},l.a.createElement(rt,{ref:s,Callback:this.Callback,FormFields:o})):null)}}]),a}(n.Component),bt="".concat(D,"/holiday-types"),ht=Ie.a.Title,yt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.getData=function(){ke.a.get(bt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data:t.data,isVisible:!1,editType:!1})}))},e.handleDelete=function(t){(function(e){return ke.a.delete(bt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.HalForm.current.refs.type_form.submit()},e.Callback=function(t){e.state.editType?e.editRecord(t.obj):e.addType(t.obj)},e.addType=function(t){var a;e.setState({loading:!1}),(a=t,H.b.loading({content:"Loading...",key:1}),ke.a.post(bt,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.HalForm.current.refs.type_form.resetFields(),e.getData())}))},e.getRecord=function(t){var a=Object.assign({},t);e.setState({FormFields:Object(Se.a)(Object(Se.a)({},e.state.FormFields),{},{initialValues:{obj:a}}),editType:a.id,isVisible:!0})},e.editRecord=function(t){var a,n=e.state.editType;e.setState({loading:!1}),t.id=n,(a=t,H.b.loading({content:"Loading...",key:a.id}),ke.a.put(bt+"/".concat(a.id),a,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a.id}),A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.HalForm.current.refs.type_form.resetFields(),e.getData())}))},e.HalForm=l.a.createRef(),e.columns=[{title:"Types",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(t,a){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){return e.getRecord(t,a)}},"Edit"),l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t.id)}},"Delete")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={isVisible:!1,newType:"",data:[],editType:!1,FormFields:{formId:"type_form",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",labelAlign:"right",type:"Input",size:"small"}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isVisible,i=t.editType,r=t.FormFields,s=t.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(ht,{level:3},"Holiday Types")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({isVisible:!0})}},l.a.createElement(Qe.a,null)," Holiday Type"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:this.columns,dataSource:a,size:"small",rowKey:function(e){return e.id}}),n&&l.a.createElement(Je.a,{title:i?"Edit Type":"Add Type",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:s},okText:s?l.a.createElement(Ze.a,null):"Save",width:400,onCancel:function(){delete r.initialValues,e.setState({isVisible:!1,FormFields:r})},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(rt,{ref:this.HalForm,Callback:this.Callback,FormFields:r}))))}}]),a}(n.Component),kt="".concat(D,"/time-off-types"),Et=Ie.a.Title,vt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){ke.a.get(kt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,openModal:!1,editTimeoff:!1,loading:!1,FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}})})}))},n.handleDelete=function(e){(function(e){return ke.a.delete(kt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){e?n.setState({openModal:e}):n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:e,editTimeoff:!1})},n.submit=function(){n.dynamoForm.current.refs.time_off.submit()},n.Callback=function(e){n.state.editTimeoff?n.editRecord(e.obj):n.addType(e.obj)},n.addType=function(e){var t;n.setState({loading:!0}),console.log(e),(t=e,H.b.loading({content:"Loading...",key:1}),ke.a.post(kt,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:"Success!",key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e){n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editTimeoff:e.id,openModal:!0})},n.editRecord=function(e){var t;n.setState({loading:!0}),e.id=n.state.editTimeoff,(t=e,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(kt+"/".concat(t.id),t,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:"Success!",key:t.id}),n&&A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.dynamoForm=l.a.createRef(),n.columns=[{title:"Title",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editTimeoff:!1,loading:!1,FormFields:{formId:"time_off",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"}]}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.editTimeoff,i=t.openModal,r=t.loading,s=t.FormFields,o=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Et,{level:4},"Leave Categories")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(Qe.a,null),"Add Leave Category")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:o,dataSource:a,size:"small",rowKey:function(e){return e.id}}))),i?l.a.createElement(Je.a,{title:n?"Edit Leave Category":"Add Leave Category",maskClosable:!1,centered:!0,visible:i,onOk:function(){e.submit()},okButtonProps:{disabled:r},okText:r?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:600},l.a.createElement(rt,{ref:this.dynamoForm,Callback:this.Callback,FormFields:s})):null)}}]),a}(n.Component),St=a(60),Ct=a(83),jt="".concat(D,"/time-off-policies"),Pt=Ie.a.Title,Ot=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.timeOff(),n.getData()},n.timeOff=function(){ke.a.get("".concat(D,"/time-off-types"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(n.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),A(e.headers&&e.headers.authorization)),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({timeoff:e.data})}))},n.getData=function(){ke.a.get(jt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,openModal:!1,editTimeoff:!1,FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),FormFields_1:Object(Se.a)(Object(Se.a)({},n.state.FormFields_1),{},{initialValues:{},fields:[]}),mergeObj:{},loading:!1})}))},n.newField=function(e){var t=n.state.timeoff,a=["category".concat(e),"earnHours".concat(e),"earnEvery".concat(e),"resetEvery".concat(e),"resetHours".concat(e),"threshold".concat(e),e];return[{object:"obj",fieldCol:6,layout:{wrapperCol:{span:23}},key:a[0],size:"small",type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"},data:t},{object:"obj",fieldCol:3,layout:{wrapperCol:{span:20,offset:2}},key:a[1],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:23}},key:a[2],size:"small",type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"},data:[{value:"M",label:"Monthly"},{value:"Y",label:"Yearly"},{value:"A",label:"Anniversary"},{value:"MA",label:"Monthly Anniversary"},{value:"N",label:"NEVER"}]},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:23}},key:a[3],size:"small",type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"},data:[{value:"M",label:"Monthly"},{value:"Y",label:"Yearly"},{value:"A",label:"Anniversary"},{value:"MA",label:"Monthly Anniversary"},{value:"N",label:"NEVER"}]},{object:"obj",fieldCol:3,layout:{wrapperCol:{span:23}},key:a[4],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"},data:[]},{object:"obj",fieldCol:3,layout:{wrapperCol:{span:23}},key:a[5],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"},data:[]},{fieldCol:1,size:"small",Placeholder:l.a.createElement(Ct.a,null),key:a[6],type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){this.state.FormFields_1.fields=this.state.FormFields_1.fields.filter((function(e){return e.key!==a[0]&&e.key!==a[1]&&e.key!==a[2]&&e.key!==a[3]&&e.key!==a[4]&&e.key!==a[5]&&e.key!==a[6]})),this.setState({FormFields_1:this.state.FormFields_1})}.bind(Object(St.a)(n))}]},n.handleDelete=function(e){(function(e){return ke.a.delete(jt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){var t=n.state.FormFields_1;e?n.setState({openModal:e,FormFields_1:Object(Se.a)(Object(Se.a)({},t),{},{fields:n.newField(0)})}):(delete n.state.FormFields.initialValues,delete n.state.FormFields_1.initialValues,n.setState({FormFields:n.state.FormFields,FormFields_1:Object(Se.a)(Object(Se.a)({},n.state.FormFields_1),{},{fields:[]}),openModal:!1,editTimeoff:!1}))},n.submit=function(){n.dynamoForm_1.current.refs.title_form.submit(),n.dynamoForm_2.current.refs.hours_form.submit()},n.Callback=function(e){n.setState({mergeObj:Object(Se.a)(Object(Se.a)({},n.state.mergeObj),{},{label:e.obj.label}),form1Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editTimeoff?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.Callback2=function(e){for(var t=e.obj,a=[],l=Object.keys(t).length/6,i=0;i<l;i++)t["category".concat(i)]&&a.push({timeOffTypeId:t["category".concat(i)],earnHours:t["earnHours".concat(i)],earnEvery:t["earnEvery".concat(i)],resetEvery:t["resetEvery".concat(i)],resetHours:t["resetHours".concat(i)],threshold:t["threshold".concat(i)]});n.setState({mergeObj:Object(Se.a)(Object(Se.a)({},n.state.mergeObj),{},{timeOffPolicyTimeOffTypes:a}),form2Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editTimeoff?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.getRecord=function(e,t){for(var a={},l=e.timeOffPolicyTimeOffTypes,i=l.length,r=0;r<i;r++){n.state.FormFields_1.fields=n.state.FormFields_1.fields.concat(n.newField(r));var s=l[r];a["category".concat(r)]=s.timeOffType.id,a["earnHours".concat(r)]=s.earnHours,a["earnEvery".concat(r)]=s.earnEvery,a["resetEvery".concat(r)]=s.resetEvery,a["resetHours".concat(r)]=s.resetHours,a["threshold".concat(r)]=s.threshold}var o={label:e.label};n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:o}}),FormFields_1:Object(Se.a)(Object(Se.a)({},n.state.FormFields_1),{},{initialValues:{obj:a}}),editTimeoff:e.id,openModal:!0})},n.editRecord=function(){var e,t=n.state.mergeObj;t.id=n.state.editTimeoff,n.setState({loading:!0}),(e=t,H.b.loading({content:"Loading...",key:e.id}),ke.a.put(jt+"/".concat(e.id),e,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e.id}),n&&A(t.headers&&t.headers.authorization),n})).catch((function(t){return H.b.error({content:t.message,key:e.id}),{error:"Please login again!",status:!1,message:t.message}}))).then((function(e){e&&(n.getData(),n.toggelModal(!1))}))},n.renderTable=function(){var e,t=n.state.mergeObj;n.setState({loading:!0}),console.log(t),(e=t,H.b.loading({content:"Loading...",key:1}),ke.a.post(jt,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){n.getData()}))},n.dynamoForm_1=l.a.createRef(),n.dynamoForm_2=l.a.createRef(),n.columns=[{title:"Title",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(t,e)}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={timeoff:[],data:[],openModal:!1,mergeObj:{},form1Submitted:!1,form2Submitted:!1,loading:!1,FormFields:{formId:"title_form",justify:"center",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:8}},justifyField:"center",FormLayout:"inline",size:"small",fields:[{object:"obj",fieldCol:24,layout:{wrapperCol:{span:22}},key:"label",label:"Policy Title",size:"small",rules:[{required:!0,message:"Policy Title is Required"}],type:"input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,layout:{wrapperCol:{span:0}},Placeholder:"Insert Time Off",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",onClick:function(e,t){var a,n=this.state.FormFields_1.fields[this.state.FormFields_1.fields.length-1],l=n?parseInt(n.key)+1:0;this.state.FormFields_1.fields=(a=this.state.FormFields_1.fields).concat.apply(a,Object(ue.a)(this.newField(l))),this.setState({FormFields_1:this.state.FormFields_1})}.bind(Object(St.a)(n)),itemStyle:{marginBottom:5}},{fieldCol:6,Placeholder:"Categories",type:"Text",size:"small"},{fieldCol:3,layout:{wrapperCol:{offset:1}},Placeholder:"Earn Hours",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},Placeholder:"Earn Every",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},Placeholder:"Reset Every",type:"Text",size:"small"},{fieldCol:3,layout:{wrapperCol:{offset:1}},Placeholder:"Rest Hours",type:"Text",size:"small"},{fieldCol:3,layout:{wrapperCol:{offset:1}},Placeholder:"Threshold",type:"Text",size:"small"}]},FormFields_1:{formId:"hours_form",justify:"space-between",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:12}},FormLayout:"inline",size:"small",fields:[]},editTimeoff:!1},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editTimeoff,r=t.FormFields,s=t.FormFields_1,o=t.loading,c=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Pt,{level:4},"Leave Policies ")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(Qe.a,null),"Add Leave Policy")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:c,dataSource:a,size:"small"}))),n?l.a.createElement(Je.a,{title:i?"Edit Leave Policy":"Add Leave Policy",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:900},l.a.createElement(p.a,null,l.a.createElement(rt,{ref:this.dynamoForm_1,Callback:this.Callback,FormFields:r})),l.a.createElement(p.a,{style:{maxHeight:"115px",overflowY:"auto"}},l.a.createElement(rt,{ref:this.dynamoForm_2,Callback:this.Callback2,FormFields:s}))):null)}}]),a}(n.Component),It="".concat(D,"/roles"),Dt={ADMIN_OPTIONS:{label:"Admin Options",len:1},CONTACT_PERSONS:{label:"Contact Persons",len:1},ORGANIZATIONS:{label:"Organisations",len:1},USERS:{label:"Users",len:1},PROJECTS:{label:"Projects",len:3},OPPORTUNITIES:{label:"Opportunities",len:3},TIMESHEETS:{label:"Timesheets",len:3},PROFILE:{label:"Profile",len:1}},Tt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.handleRawDtata()},n.changePermission=function(e,t,a){var l=n.state.permissions;l[a][t]=e,n.setState({permissions:Object(ue.a)(l)})},n.setPermissions=function(){var e,t,a=n.state.permissions,l=n.props,i=l.eidtPer,r=l.Callback,s=[];n.setState({loading:!0}),a.forEach((function(e,t){for(var a=0;a<=Dt[e.key].len;a++)e.ADD&&e.ADD[a]&&s.push({resource:e.key,action:"ADD",grant:e.ADD[a]}),e.DELETE&&e.DELETE[a]&&s.push({resource:e.key,action:"DELETE",grant:e.DELETE[a]}),e.UPDATE&&e.UPDATE[a]&&s.push({resource:e.key,action:"UPDATE",grant:e.UPDATE[a]}),e.READ&&e.READ[a]&&s.push({resource:e.key,action:"READ",grant:e.READ[a]}),e.APPROVAL&&e.APPROVAL[a]&&s.push({resource:e.key,action:"APPROVAL",grant:e.APPROVAL[a]})})),(e=i,t=s,H.b.loading({content:"Loading...",key:e}),ke.a.put(It+"/".concat(e,"/update-permissions"),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.data,i=a.message;return R(i),H.b.success({content:i,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n,data:l}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))).then((function(e){e.success&&r(e.data)}))},n.handleRawDtata=function(){var e=n.state.permissions,t=n.props.perData;e.forEach((function(e,a){t.forEach((function(t,a){e.key===t.resource&&(e[t.action]?e[t.action].push(t.grant):e[t.action]=[t.grant])}))})),n.setState({permissions:Object(ue.a)(e)})},n.perColumns=[{title:"Category",dataIndex:"category",key:"category"},{title:"Create",key:"ADD",dataIndex:"ADD",render:function(e,t,a){return"TIMESHEETS"===t.key?l.a.createElement(Me.a.Group,{name:"ADD",value:e,options:["ANY","MANAGE","OWN"],onChange:function(e){return n.changePermission(e,"ADD",a)}}):"PROFILE"===t.key?null:l.a.createElement(Me.a.Group,{name:"ADD",value:e,options:["ANY"],onChange:function(e){return n.changePermission(e,"ADD",a)}})}},{title:"Update",key:"UPDATE",dataIndex:"UPDATE",render:function(e,t,a){return"PROJECTS"===t.key||"OPPORTUNITIES"===t.key?l.a.createElement(Me.a.Group,{name:"UPDATE",value:e,options:["ANY","MANAGE"],onChange:function(e){return n.changePermission(e,"UPDATE",a)}}):"TIMESHEETS"===t.key?l.a.createElement(Me.a.Group,{name:"UPDATE",value:e,options:["ANY","MANAGE","OWN"],onChange:function(e){return n.changePermission(e,"UPDATE",a)}}):"PROFILE"===t.key?l.a.createElement(Me.a.Group,{name:"UPDATE",value:e,options:["OWN"],onChange:function(e){return n.changePermission(e,"UPDATE",a)}}):l.a.createElement(Me.a.Group,{name:"UPDATE",value:e,options:["ANY"],onChange:function(e){return n.changePermission(e,"UPDATE",a)}})}},{title:"Read",key:"READ",dataIndex:"READ",render:function(e,t,a){return"PROJECTS"===t.key||"TIMESHEETS"===t.key?l.a.createElement(Me.a.Group,{name:"READ",value:e,options:["ANY","MANAGE","OWN"],onChange:function(e){return n.changePermission(e,"READ",a)}}):"OPPORTUNITIES"===t.key?l.a.createElement(Me.a.Group,{name:"READ",value:e,options:["ANY","MANAGE"],onChange:function(e){return n.changePermission(e,"READ",a)}}):"PROFILE"===t.key?null:l.a.createElement(Me.a.Group,{name:"READ",value:e,options:["ANY"],onChange:function(e){return n.changePermission(e,"READ",a)}})}},{title:"Delete",key:"DELETE",dataIndex:"DELETE",render:function(e,t,a){return"PROFILE"===t.key?null:l.a.createElement(Me.a.Group,{name:"DELETE",value:e,options:["ANY"],onChange:function(e){return n.changePermission(e,"DELETE",a)}})}},{title:"Approval",key:"APPROVAL",dataIndex:"APPROVAL",render:function(e,t,a){return"TIMESHEETS"===t.key&&l.a.createElement(Me.a.Group,{name:"APPROVAL",value:e,options:["ANY","MANAGE"],onChange:function(e){return n.changePermission(e,"APPROVAL",a)}})}}],n.state={loading:!1,permissions:[{key:"ADMIN_OPTIONS",category:"Admin Options"},{key:"CONTACT_PERSONS",category:"Contact Persons"},{key:"ORGANIZATIONS",category:"Organisations"},{key:"USERS",category:"Users"},{key:"PROJECTS",category:"Projects"},{key:"OPPORTUNITIES",category:"Opportunities"},{key:"TIMESHEETS",category:"Timesheets"},{key:"PROFILE",category:"Profile"}]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.permissions,n=this.props,i=n.closeModal,r=n.isSystem;return l.a.createElement(Je.a,{title:"Edit Permission",maskClosable:!1,centered:!0,visible:this.props.isVisible,onOk:this.setPermissions,okButtonProps:{disabled:t||r},okText:t?l.a.createElement(Ze.a,null):"Save",onCancel:function(){i()},width:700},l.a.createElement(Ge.a,{rowKey:"key",columns:this.perColumns,dataSource:a,size:"small",pagination:!1}))}}]),a}(n.Component),Ft=Ie.a.Title,zt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getRoles()},n.getRoles=function(){ke.a.get(It,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,openModal:!1,editRole:!1})}))},n.closeModal=function(){n.roleForm.current.refs.role_form.resetFields(),n.setState({openModal:!1,editRole:!1})},n.Callback=function(e){n.state.editRole?n.editRecord(e.obj):n.addRecord(e.obj)},n.addRecord=function(e){(function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.post(It,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),H.b.success({content:l,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e.success&&n.setState({data:[].concat(Object(ue.a)(n.state.data),[e.data]),openModal:!1})}))},n.getRecord=function(e,t){n.setState({editRole:e.id,openModal:!0,roleIndex:t},(function(){n.roleForm.current.refs.role_form.setFieldsValue({obj:e})}))},n.editRecord=function(e){var t=n.state,a=t.editRole,l=t.roleIndex,i=t.data;(function(e,t){return H.b.loading({content:"Loading...",key:e}),ke.a.put(It+"/".concat(e),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.data,i=a.message;return R(i),H.b.success({content:i,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n,data:l}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(a,e).then((function(e){e.success&&(i[l]=e.data,console.log(i),n.setState({data:Object(ue.a)(i),editRole:!1,openModal:!1,roleIndex:!1}))}))},n.callPermission=function(e,t){var a;console.log(e),n.setState({perModal:!0,editRole:e.id,roleIndex:t,permissions:null!==(a=e.permissions)&&void 0!==a?a:[],isSystem:e.isSystem})},n.updatePermission=function(e){var t=n.state,a=t.roleIndex,l=t.data;l[a]=e,console.log(l),n.setState({data:Object(ue.a)(l),editRole:!1,openModal:!1,roleIndex:!1,perModal:!1})},n.perColse=function(){n.setState({perModal:!1,editRole:!1,openModal:!1,roleIndex:!1})},n.roleForm=l.a.createRef(),n.columns=[{title:"Title",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(e,t,a){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{disabled:e.isSystem,onClick:function(){n.getRecord(e,a)}}," Edit "),l.a.createElement(v.a.Item,{onClick:function(){return n.callPermission(e,a)}}," Permissions "))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editRole:!1,perModal:!1,permissions:!1,isSystem:!1,loading:!1,FormFields:{formId:"role_form",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"}]}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editRole,r=t.FormFields,s=t.perModal,o=t.loading,c=t.permissions,d=t.isSystem,u=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Ft,{level:4},"Roles")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({openModal:!0})},size:"small"}," ",l.a.createElement(Qe.a,null)," Add Roles ")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:"id",columns:u,dataSource:a,size:"small"}))),n&&l.a.createElement(Je.a,{title:i?"Edit Role":"Add New Role",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:o,htmlType:"submit",form:"role_form"},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.closeModal()},width:600},l.a.createElement(rt,{ref:this.roleForm,Callback:this.Callback,FormFields:r})),s&&l.a.createElement(Tt,{isVisible:s,Callback:this.updatePermission,perData:c,isSystem:d,eidtPer:i,closeModal:this.perColse}))}}]),a}(n.Component),xt="".concat(D,"/panels"),At=Ie.a.Title,Mt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){ke.a.get(xt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editPanel:!1})}))},n.handleDelete=function(e){(function(e){return ke.a.delete(xt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){e?n.setState({openModal:e,loading:!1}):n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:e,editPanel:!1,loading:!1})},n.submit=function(){n.dynamoForm.current.refs.time_off.submit()},n.Callback=function(e){n.state.editPanel?n.editRecord(e.obj):n.addType(e.obj)},n.addType=function(e){var t;n.setState({loading:!0}),(t=e,H.b.loading({content:"Loading...",key:1}),ke.a.post(xt,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e){console.log(e);var t={id:e.id,label:e.label};n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:t}}),editPanel:t.id,openModal:!0})},n.editRecord=function(e){n.setState({loading:!0});var t,a=n.state.editPanel;e.id=a,(t=e,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(xt+"/".concat(t.id),t,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t.id}),n&&A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.dynamoForm=l.a.createRef(),n.columns=[{title:"Name",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(t)}},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/admin/panels/skills/".concat(t.id)}},"Skills")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editPanel:!1,FormFields:{formId:"time_off",justify:"center",FormCol:20,layout:{labelCol:{span:6}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",size:"small",type:"input",labelAlign:"right"}]}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editPanel,r=t.FormFields,s=t.loading,o=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(At,{level:4},"Panels")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(Qe.a,null),"Add Panels")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:o,dataSource:a,size:"small"}))),n?l.a.createElement(Je.a,{title:i?"Edit Panel":"Add New Panel",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:s},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:400},l.a.createElement(rt,{ref:this.dynamoForm,Callback:this.Callback,FormFields:r})):null)}}]),a}(n.Component),Rt="".concat(D,"/panel-skills"),Nt=function(){return ke.a.get("".concat(D,"/states"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];if(n.map((function(e){l.push({value:e.id,label:e.label})})),A(e.headers&&e.headers.authorization),a)return{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},wt=function(e){return ke.a.get("".concat(D,"/").concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Bt=function(e){return ke.a.get("".concat(D,"/Organizations"),{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.data,i=[];if(l.map((function(t){i.push({value:t.id,label:t.name,disabled:t.id===e&&!0})})),A(t.headers&&t.headers.authorization),n)return{success:n,data:i}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Lt=function(){return ke.a.get("".concat(D,"/panels"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];if(n.map((function(e){l.push({value:e.id,label:e.label})})),A(e.headers&&e.headers.authorization),a)return{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Yt=function(e){return ke.a.get("".concat(D,"/panel-skills?panelId=").concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];if(n.map((function(e){l.push({value:e.id,label:e.label,levels:e.panelSkillStandardLevels.map((function(e){return{value:e.id,label:e.levelLabel}}))})})),A(e.headers&&e.headers.authorization),a)return{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},qt=function(){return ke.a.get("".concat(D,"/projects"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];return a&&(n.map((function(e){l.push({value:e.id,label:e.title})})),A(e.headers&&e.headers.authorization)),{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Vt=function(e){return ke.a.get("".concat(D,"/helpers/levels-by-skill?").concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(a)return A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ht=function(){return ke.a.get("".concat(D,"/helpers/roles"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(a)return A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ut=function(e){return ke.a.get("".concat(D,"/").concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),console.log(n),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},_t=Ie.a.Title,Kt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getSkills=function(){ke.a.get("".concat(D,"/standard-skills"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(A(e.headers&&e.headers.authorization),n.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt,delete e.standardSkillStandardLevels}))),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){if(e.success){var t=n.state.FormFields;t.fields[3].data=e.data,n.setState({FormFields:t})}}))},n.getData=function(){var e,t=n.state,a=t.panelId,l=t.FormFields,i=t.FormFields_1;(e=a,console.log(e),ke.a.get(Rt+"?panelId=".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(e){e.success&&n.setState({data:e.data,FormFields:Object(Se.a)(Object(Se.a)({},l),{},{initialValues:{}}),FormFields_1:Object(Se.a)(Object(Se.a)({},i),{},{fields:[],initialValues:{}}),mergeObj:{},openModal:!1,editPS:!1,form1Submitted:!1,form2Submitted:!1,loading:!1})}))},n.newField=function(e){var t=n.state.skill_pirority,a=["level".concat(e),"pirority".concat(e),"stceil".concat(e),"ltceil".concat(e),"id".concat(e),e];return[{object:"obj",fieldCol:8,layout:{wrapperCol:{span:20}},key:a[0],size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:7,layout:{wrapperCol:{span:20}},key:a[1],size:"small",data:t,type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:20}},key:a[2],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:20}},key:a[3],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:6,key:a[4],hidden:!0,size:"small",type:"Input"},{fieldCol:1,size:"small",Placeholder:l.a.createElement(Ct.a,null),key:a[5],type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){n.state.FormFields_1.fields=n.state.FormFields_1.fields.filter((function(e){return e.key!==a[0]&&e.key!==a[1]&&e.key!==a[2]&&e.key!==a[3]&&e.key!==a[4]&&e.key!==a[5]})),n.setState({FormFields_1:n.state.FormFields_1})}}]},n.handleDelete=function(e){(function(e){return ke.a.delete(Rt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){var t=n.state,a=t.FormFields_1,l=t.FormFields;e?n.setState({openModal:e,FormFields_1:Object(Se.a)(Object(Se.a)({},a),{},{fields:n.newField(0)}),editPS:!1,loading:!1}):n.setState({FormFields:Object(Se.a)(Object(Se.a)({},l),{},{initialValues:{}}),FormFields_1:Object(Se.a)(Object(Se.a)({},a),{},{fields:[],initialValues:{}}),openModal:!1,editPS:!1,form1Submitted:!1,form2Submitted:!1,loading:!1})},n.submit=function(){n.dynamoForm_1.current.refs.title_form.submit(),n.dynamoForm_2.current.refs.hours_form.submit()},n.Callback=function(e){var t=n.state.panelId;n.setState({mergeObj:Object(Se.a)(Object(Se.a)({},n.state.mergeObj),{},{label:e.obj.label,standardSkillId:e.obj.standard,panelId:t}),form1Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editPS?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.Callback2=function(e){for(var t=e.obj,a=[],l=Object.keys(t).length/5,i=0;i<l;i++){var r;if(t["pirority".concat(i)])a.push({id:null!==(r=t["id".concat(i)])&&void 0!==r?r:0,levelLabel:t["level".concat(i)],standardLevelId:t["pirority".concat(i)],shortTermCeil:t["stceil".concat(i)],longTermCeil:t["ltceil".concat(i)]})}console.log(a),n.setState({mergeObj:Object(Se.a)(Object(Se.a)({},n.state.mergeObj),{},{panelSkillStandardLevels:a}),form2Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editPS?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.renderTable=function(){var e,t=n.state.mergeObj;n.setState({loading:!0}),(e=t,H.b.loading({content:"Loading...",key:1}),ke.a.post(Rt,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){n.getData()}))},n.getRecord=function(e,t){var a={},l=e.panelSkillStandardLevels,i={key:e.id,label:e.label,standard:e.standardSkill.id};Vt("skill=".concat(i.standard)).then((function(t){t.success&&n.setState({skill_pirority:t.data},(function(){for(var t=l.length,r=0;r<t;r++){n.state.FormFields_1.fields=n.state.FormFields_1.fields.concat(n.newField(r));var s=l[r];a["id".concat(r)]=s.id,a["level".concat(r)]=s.levelLabel,a["pirority".concat(r)]=s.standardLevel.id,a["stceil".concat(r)]=s.shortTermCeil,a["ltceil".concat(r)]=s.longTermCeil}n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:i}}),FormFields_1:Object(Se.a)(Object(Se.a)({},n.state.FormFields_1),{},{initialValues:{obj:a}}),editPS:e.id,openModal:!0})}))}))},n.editRecord=function(){var e,t=n.state,a=t.mergeObj,l=t.editPS;n.setState({loading:!0}),a.id=l,(e=a,H.b.loading({content:"Loading...",key:e.id}),ke.a.put(Rt+"/".concat(e.id),e,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e.id}),n&&A(t.headers&&t.headers.authorization),n})).catch((function(t){return H.b.error({content:t.message,key:e.id}),{error:"Please login again!",status:!1,message:t.message}}))).then((function(e){e&&n.getData()}))},n.dynamoForm_1=l.a.createRef(),n.dynamoForm_2=l.a.createRef(),n.columns=[{title:"Skill",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(e,t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={openModal:!1,mergeObj:{},form1Submitted:!1,form2Submitted:!1,editPS:!1,panelId:!1,skill_select:!1,skill_pirority:!1,loading:!1,data:[],FormFields:{formId:"title_form",justify:"center",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:4}},justifyField:"center",FormLayout:"inline",size:"small",fields:[{fieldCol:12,Placeholder:"Panel Skill",type:"Text",size:"small"},{fieldCol:12,Placeholder:"Generic Skill",type:"Text",size:"small"},{object:"obj",fieldCol:12,key:"label",size:"small",rules:[{required:!0,message:"Panel Skill is Required"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:12,key:"standard",size:"small",rules:[{required:!0,message:"Generic Skill is Required"}],type:"Select",data:[],onChange:function(e,t){if(e){var a="skill=".concat(t.value);Vt(a).then((function(e){if(e.success){var t=n.state.FormFields_1,a=t.fields;a.map((function(t,a){return 1!==a&&a%6!==1||(t.data=e.data),t})),n.setState({skill_pirority:e.data,FormFields_1:Object(Se.a)(Object(Se.a)({},t),{},{fields:a})})}}))}},labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,Placeholder:"Add Level",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",itemStyle:{marginBottom:"10px"},onClick:function(e,t){var a,l=n.state.FormFields_1.fields[n.state.FormFields_1.fields.length-1],i=l?parseInt(l.key)+1:0;n.state.FormFields_1.fields=(a=n.state.FormFields_1.fields).concat.apply(a,Object(ue.a)(n.newField(i))),n.setState({FormFields_1:n.state.FormFields_1})}},{fieldCol:8,Placeholder:"Panel Level",type:"Text",size:"small"},{fieldCol:7,layout:{wrapperCol:{offset:1}},Placeholder:"Generic Level",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},Placeholder:"ST Ceil",tooltip:!0,tooltipTitle:"Short Term Ceiling Rate (ex GST)",tooltipTrigger:"hover",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},tooltip:!0,tooltipTitle:"Long Term Ceiling Rate (ex GST)",tooltipTrigger:"hover",Placeholder:"LT Ceil",type:"Text",size:"small"}]},FormFields_1:{formId:"hours_form",justify:"center",preserve:!1,FormCol:24,justifyField:"center",FormLayout:"inline",size:"small",fields:[]}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({panelId:this.props.match.params.id},(function(){e.getData(),e.getSkills()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editPS,r=t.FormFields,s=t.FormFields_1,o=t.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(_t,{level:4},"Panel Information")),l.a.createElement(b.a,{style:{textAlign:"end"}},l.a.createElement(pe.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(Qe.a,null),"Add Skill"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"small"}),n?l.a.createElement(Je.a,{title:i?"Edit Skill":"Add Skill",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:700},l.a.createElement(p.a,null,l.a.createElement(rt,{ref:this.dynamoForm_1,Callback:this.Callback,FormFields:r})),l.a.createElement(p.a,{style:{maxHeight:"145px",overflowY:"auto"}},l.a.createElement(rt,{ref:this.dynamoForm_2,Callback:this.Callback2,FormFields:s}))):null)}}]),a}(n.Component),Wt="".concat(D,"/standard-levels"),Gt=Ie.a.Title,Jt=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.getData=function(){ke.a.get(Wt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data:t.data,isVisible:!1,editLevel:!1,FormFields:Object(Se.a)(Object(Se.a)({},e.state.FormFields),{},{initialValues:{}})})}))},e.handleDelete=function(t){(function(e){return ke.a.delete(Wt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;if(R(n),A(e.headers&&e.headers.authorization),a)return a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.levelForm.current.refs.level_form.submit()},e.Callback=function(t){e.state.editLevel?e.editRecord(t.obj):e.addType(t.obj)},e.addType=function(t){var a;e.setState({loading:!0}),(a=t,H.b.loading({content:"Loading...",key:1},5),ke.a.post(Wt,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1},5),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.getRecord=function(t){var a=Object.assign({},t);e.setState({FormFields:Object(Se.a)(Object(Se.a)({},e.state.FormFields),{},{initialValues:{obj:a}}),editLevel:a.id,isVisible:!0})},e.editRecord=function(t){e.setState({loading:!0});var a,n=e.state.editLevel;t.id=n,(a=t,H.b.loading({content:"Loading...",key:a.id}),ke.a.put(Wt+"/".concat(a.id),a,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;if(R(l),H.b.success({content:l,key:a.id},5),A(e.headers&&e.headers.authorization),n)return n})).catch((function(e){return H.b.error({content:"Error!",key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.levelForm=l.a.createRef(),e.columns=[{title:"Level Name",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(t,a){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){return e.getRecord(t,a)}},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t.id)}},"Delete")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={isVisible:!1,newSkill:"",data:[],editLevel:!1,loading:!1,FormFields:{formId:"level_form",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",labelAlign:"right",type:"Input",size:"small"}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isVisible,i=t.editLevel,r=t.FormFields;t.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Gt,{level:3},"Standard Levels")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({isVisible:!0})}},l.a.createElement(Qe.a,null)," Add Level"))),l.a.createElement(Ge.a,{rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"small"}),n&&l.a.createElement(Je.a,{title:i?"Edit Level":"Add Level",maskClosable:!1,centered:!0,visible:n,okText:"Save",width:400,onCancel:function(){e.setState({isVisible:!1,FormFields:Object(Se.a)(Object(Se.a)({},r),{},{initialValues:{}})})},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(rt,{ref:this.levelForm,Callback:this.Callback,FormFields:r}))))}}]),a}(n.Component),Qt="".concat(D,"/standard-skills"),Zt=Ie.a.Title,Xt=[{component:_e,link:"/admin/global-settings"},{component:We,link:"/admin/tax-rates"},{component:yt,link:"/admin/holiday-types"},{component:pt,link:"/admin/calenders"},{component:ut,link:"/admin/calenders/holidays/:id"},{component:vt,link:"/admin/leave-categories"},{component:Ot,link:"/admin/leave-policies"},{component:zt,link:"/admin/roles"},{component:Mt,link:"/admin/panels"},{component:Kt,link:"/admin/panels/skills/:id"},{component:aa,link:"/admin/check"},{component:Jt,link:"/admin/standard-levels"},{component:function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getLevel(),e.getData()},e.getLevel=function(){ke.a.get("".concat(D,"/standard-levels"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(n.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({level_data:t.data})}))},e.getData=function(){ke.a.get(Qt,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data_skill:t.data,isVisible:!1,editSkill:!1,skillFields:Object(Se.a)(Object(Se.a)({},e.state.skillFields),{},{initialValues:{}}),LevelFields:Object(Se.a)(Object(Se.a)({},e.state.LevelFields),{},{initialValues:{},fields:[]}),mergeObj:{}})}))},e.newField=function(t){var a=e.state.level_data,n=["level".concat(t),"priority".concat(t),t];return[{object:"obj",fieldCol:15,layout:{wrapperCol:{span:23}},key:"level".concat(t),size:"small",data:a,type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:7,layout:{wrapperCol:{span:20}},key:"priority".concat(t),size:"small",data:e.priority_data,type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:1,size:"small",Placeholder:l.a.createElement(Ct.a,null),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){this.state.LevelFields.fields=this.state.LevelFields.fields.filter((function(e){return e.key!==n[0]&&e.key!==n[1]&&e.key!==n[2]&&e.key!==n[3]&&e.key!==n[4]})),this.setState({LevelFields:this.state.LevelFields})}.bind(Object(St.a)(e))}]},e.toggelModal=function(t){e.state.FormFields_1;t?e.setState({isVisible:t,loading:!1,LevelFields:Object(Se.a)(Object(Se.a)({},e.state.LevelFields),{},{fields:e.newField(0)})}):e.setState({skillFields:Object(Se.a)(Object(Se.a)({},e.state.skillFields),{},{initialValues:{}}),LevelFields:Object(Se.a)(Object(Se.a)({},e.state.LevelFields),{},{fields:[],initialValues:{}}),isVisible:!1,editSkill:!1,formSubmitted:!1,levelSubmitted:!1,loading:!1})},e.handleDelete=function(t){(function(e){return ke.a.delete(Qt+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.skillForm.current.refs.skill_form.submit(),e.levelForm.current.refs.level_form.submit()},e.skillCall=function(t){e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),{},{label:t.obj.label}),formSubmitted:!0},(function(){e.state.formSubmitted&&e.state.levelSubmitted&&(e.state.editSkill?(console.log("edit"),e.editRecord(e.state.mergeObj)):(console.log("emes"),e.addSkill(e.state.mergeObj)))}))},e.levelCall=function(t){for(var a=t.obj,n=[],l=Object.keys(a).length/2,i=0;i<l;i++)a["level".concat(i)]&&n.push({standardLevelId:a["level".concat(i)],priority:a["priority".concat(i)]});e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),{},{standardSkillStandardLevels:n}),levelSubmitted:!0},(function(){e.state.formSubmitted&&e.state.levelSubmitted&&(e.state.editSkill?(console.log("edit"),e.editRecord(e.state.mergeObj)):(console.log("emes"),e.addSkill(e.state.mergeObj)))}))},e.addSkill=function(t){e.setState({loading:!0});var a,n=e.state.mergeObj;console.log({mergeObj:n}),(a=n,H.b.loading({content:"Loading...",key:1}),ke.a.post(Qt,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),a})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){e.getData()}))},e.getRecord=function(t){for(var a={},n=t.standardSkillStandardLevels,l=n.length,i=0;i<l;i++){e.state.LevelFields.fields=e.state.LevelFields.fields.concat(e.newField(i));var r=n[i];a["level".concat(i)]=r.standardLevel.id,a["priority".concat(i)]=r.priority}var s={label:t.label};e.setState({skillFields:Object(Se.a)(Object(Se.a)({},e.state.skillFields),{},{initialValues:{obj:s}}),LevelFields:Object(Se.a)(Object(Se.a)({},e.state.LevelFields),{},{initialValues:{obj:a}}),editSkill:t.id,isVisible:!0})},e.editRecord=function(){e.setState({loading:!0});var t,a=e.state,n=a.mergeObj,l=a.editSkill;n.id=l,console.log(n),(t=n,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(Qt+"/".concat(t.id),t,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t.id}),n&&A(e.headers&&e.headers.authorization),n})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.getData(),e.toggelModal(!1))}))},e.skillForm=l.a.createRef(),e.levelForm=l.a.createRef(),e.columns=[{title:"Skill Name",dataIndex:"label",key:"label"},{title:"Action",key:"action",align:"right",render:function(t,a){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return e.getRecord(t,a)}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.priority_data=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],e.level_data=[{val:1,value:"Superstar",label:"Superstar"},{key:2,value:"Senior",label:"Senior"},{key:3,value:"Middle",label:"Middle"},{key:4,value:"Junior",label:"Junior"},{key:5,value:"Trainee",label:"Trainee"}],e.state={isVisible:!1,editSkill:!1,mergeObj:{},formSubmitted:!1,levelSubmitted:!1,level_data:!1,loading:!1,data_skill:[],skillFields:{formId:"skill_form",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:4}},justifyField:"center",FormLayout:"inline",size:"small",fields:[{object:"obj",fieldCol:24,layout:{wrapperCol:{span:20}},key:"label",label:"Name",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,Placeholder:"Add Skill",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",itemStyle:{marginBottom:"10px"},onClick:function(e,t){var a,n=this.state.LevelFields.fields[this.state.LevelFields.fields.length-1],l=n?parseInt(n.key)+1:0;this.state.LevelFields.fields=(a=this.state.LevelFields.fields).concat.apply(a,Object(ue.a)(this.newField(l))),this.setState({LevelFields:this.state.LevelFields})}.bind(Object(St.a)(e))},{fieldCol:15,Placeholder:"Level Name",type:"Text",size:"small"},{fieldCol:7,layout:{wrapperCol:{offset:1}},Placeholder:"priority",type:"Text",size:"small"}]},LevelFields:{formId:"level_form",FormCol:24,justifyField:"center",FormLayout:"inline",size:"small",fields:[]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data_skill,n=t.isVisible,i=t.editSkill,r=t.LevelFields,s=t.skillFields,o=t.loading;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Zt,{level:3},"Standard Skills")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.toggelModal(!0)}},l.a.createElement(Qe.a,null)," Add Skill"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:this.columns,dataSource:a,size:"small"}),n&&l.a.createElement(Je.a,{title:i?"Edit Skill":"Add Skill",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",width:400,onCancel:function(){e.toggelModal(!1)},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(rt,{ref:this.skillForm,Callback:this.skillCall,FormFields:s})),l.a.createElement(p.a,{style:{maxHeight:"85px",overflowY:"auto"}},l.a.createElement(rt,{ref:this.levelForm,Callback:this.levelCall,FormFields:r}))))}}]),a}(n.Component),link:"/admin/skills"}],$t=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={bread:[]},e.getPageLink=function(){return Xt.map((function(e,t){return l.a.createElement(o.b,{exact:!0,path:e.link,component:e.component,key:t})}))},e.getbreadcrums=function(){var t=e.props.location;return(t=t.split("/")).map((function(e,t){return""!==e&&isNaN(e)?l.a.createElement(de.a.Item,{key:t},e):null}))},e}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,null,l.a.createElement(de.a,{style:{margin:"0px 0px 16px 10px"},itemRender:this.itemRender,routes:this.routes},this.getbreadcrums())),l.a.createElement(b.a,{span:24},this.getPageLink()))}}]),a}(n.Component),ea=(a(497),f.a.Sider),ta=f.a.Content,aa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).state={collapsed:!0},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.collapsed;return l.a.createElement(f.a,null,l.a.createElement(ta,{style:{padding:"0 0px"}},l.a.createElement(f.a,{className:"site-layout-background",style:{padding:"0px 0"}},l.a.createElement(ea,{className:"site-layout-background",width:200,trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(ce,null)),l.a.createElement(ta,{style:{padding:"0 0px",minHeight:640}},l.a.createElement(p.a,{style:{paddingLeft:"10px"}},l.a.createElement("span",{className:"admin-trigger",onClick:this.toggle},e?l.a.createElement(h.a,null):l.a.createElement(y.a,null)),l.a.createElement($t,{location:this.props.location.pathname}))))))}}]),a}(n.Component),na=a(617),la=a(584),ia=a(305),ra=a.n(ia),sa="".concat(D,"/organizations"),oa=function(e){var t,a=e,n=e.delegateContactPerson;return{basic:{name:a.name,title:a.title,parent:a.parentOrganization&&a.parentOrganization.id,phone:a.phoneNumber,delegate_cp:a.delegateContactPersonId,delegate_contactPerson:n&&"".concat(n.firstName," ").concat(n.lastName," - ").concat(null!==(t=n.phoneNumber)&&void 0!==t?t:""),email:a.email,EBA:a.expectedBusinessAmount,address:a.address,website:a.website,businessType:a.businessType},billing:{ABN:a.abn,tax_Code:a.taxCode,invoice_email:a.invoiceEmail,invoice_number:a.invoiceContactNumber,CTI:a.cti},insured:{insurer_PI:a.piInsurer,insurer_PL:a.plInsurer,insurer_WC:a.wcInsurer,policy_PI:a.piPolicyNumber,policy_PL:a.plPolicyNumber,policy_WC:a.wcPolicyNumber,SumIns_PI:a.piSumInsured,SumIns_PL:a.plSumInsured,SumIns_WC:a.wcSumInsured,expiry_PI:a.piInsuranceExpiry?ot()(a.piInsuranceExpiry):null,expiry_PL:a.piInsuranceExpiry?ot()(a.plInsuranceExpiry):null,expiry_WC:a.piInsuranceExpiry?ot()(a.wcInsuranceExpiry):null},bank:{bankName:a.bankAccounts[0]&&a.bankAccounts[0].name,bankAccountNo:a.bankAccounts[0]&&a.bankAccounts[0].accountNo,bankBsb:a.bankAccounts[0]&&a.bankAccounts[0].bsb},future:{currentForecast:a.currentFinancialYearTotalForecast,nextForecast:a.nextFinancialYearTotalForecast}}},ca=function(e){return ke.a.get(sa+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=oa(n),r=i.basic,s=i.billing,o=i.insured,c=i.bank,d=i.future;return A(e.headers&&e.headers.authorization),{success:a,basic:r,billing:s,insured:o,bank:c,future:d,data:n}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},da=function(e){return ke.a.delete(sa+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},ua=la.a.TabPane,ma=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e,n,i;return Object(c.a)(this,a),(i=t.call(this)).componentDidMount=function(){var e=i.props.editOrg;e?i.fetchAll():(i.getOrgs(e),i.callAdd_Edit())},i.fetchAll=function(){var e=i.props.editOrg,t="helpers/contact-persons?organizationId=".concat(e,"&associated=1");Promise.all([Bt(e),wt(t)]).then((function(t){var a=i.state.BasicFields;a.fields[5].data=t[0].data,a.fields[13].data=t[1].data,i.setState({BasicFields:a}),i.getRecord(e)})).catch((function(e){console.log(e)}))},i.getOrgs=function(e){Bt(e).then((function(e){if(e.success){var t=i.state.BasicFields;t.fields[5].data=e.data,i.setState({BasicFields:t})}}))},i.callAdd_Edit=function(){var e=i.state.BasicFields;i.setState({BasicFields:Object(Se.a)(Object(Se.a)({},e),{},{fields:e.fields.filter((function(e){return"Business Type"===e.Placeholder?(e.fieldCol=24,e):"Delegate Contact person"!==e.Placeholder&&"delegate_cp"!==e.key?e:void 0}))})})},i.submit=function(){i.basicRef.current.refs.basic_form.submit(),i.billingRef.current&&i.billingRef.current.refs.billing_form.submit(),i.insuredRef.current&&i.insuredRef.current.refs.insured_form.submit(),i.bankRef.current&&i.bankRef.current.refs.bank_form.submit(),i.futureRef.current&&i.futureRef.current.refs.future_form.submit()},i.BasicCall=function(e){var t;e=e.obj,i.setState({mergeObj:Object(Se.a)(Object(Se.a)({},i.state.mergeObj),{name:e.name?e.name:"",title:null!==(t=e.title)&&void 0!==t?t:"",parentOrganizationId:e.parent?e.parent:null,phoneNumber:e.phone?e.phone:"",delegateContactPersonId:e.delegate_cp?e.delegate_cp:null,email:e.email?e.email:"",expectedBusinessAmount:e.EBA?e.EBA:0,address:e.address?e.address:"",website:e.website?e.website:"",businessType:e.businessType?e.businessType:void 0}),basicSubmitted:!0},(function(){i.state.basicSubmitted&&i.state.billingSubmitted&&i.state.insuredSubmitted&&i.state.bankSubmitted&&i.state.futureSubmitted&&(i.props.editOrg?i.editRecord(i.state.mergeObj):i.addOrganization(i.state.mergeObj))}))},i.BillingCall=function(e){e=e.obj,i.setState({mergeObj:Object(Se.a)(Object(Se.a)({},i.state.mergeObj),{abn:e.ABN?e.ABN:"",taxCode:e.tax_Code?e.tax_Code:"",invoiceEmail:e.invoice_email?e.invoice_email:"",invoiceContactNumber:e.invoice_number?e.invoice_number:"",cti:e.CTI?e.CTI:""}),billingSubmitted:!0},(function(){i.state.basicSubmitted&&i.state.billingSubmitted&&i.state.insuredSubmitted&&i.state.bankSubmitted&&i.state.futureSubmitted&&(i.props.editOrg?i.editRecord(i.state.mergeObj):i.addOrganization(i.state.mergeObj))}))},i.InsuredCall=function(e){e=e.obj,i.setState({mergeObj:Object(Se.a)(Object(Se.a)({},i.state.mergeObj),{piInsurer:e.insurer_PI?e.insurer_PI:"",plInsurer:e.insurer_PL?e.insurer_PL:"",wcInsurer:e.insurer_WC?e.insurer_WC:"",piPolicyNumber:e.policy_PI?e.policy_PI:"",plPolicyNumber:e.policy_PL?e.policy_PL:"",wcPolicyNumber:e.policy_WC?e.policy_WC:"",piSumInsured:e.SumIns_PI?e.SumIns_PI:0,plSumInsured:e.SumIns_PL?e.SumIns_PL:0,wcSumInsured:e.SumIns_WC?e.SumIns_WC:0,piInsuranceExpiry:e.expiry_PI?e.expiry_PI:null,plInsuranceExpiry:e.expiry_PL?e.expiry_PL:null,wcInsuranceExpiry:e.expiry_WC?e.expiry_WC:null}),insuredSubmitted:!0},(function(){i.state.basicSubmitted&&i.state.billingSubmitted&&i.state.insuredSubmitted&&i.state.bankSubmitted&&i.state.futureSubmitted&&(i.props.editOrg?i.editRecord(i.state.mergeObj):i.addOrganization(i.state.mergeObj))}))},i.BankCall=function(e){e=e.obj,i.setState({mergeObj:Object(Se.a)(Object(Se.a)({},i.state.mergeObj),{bankName:e.bankName?e.bankName:"",bankAccountNo:e.bankAccountNo?e.bankAccountNo:"",bankBsb:e.bankBsb?e.bankBsb:""}),bankSubmitted:!0},(function(){i.state.basicSubmitted&&i.state.billingSubmitted&&i.state.insuredSubmitted&&i.state.bankSubmitted&&i.state.futureSubmitted&&(i.props.editOrg?i.editRecord(i.state.mergeObj):i.addOrganization(i.state.mergeObj))}))},i.FutureCall=function(e){e=e.obj,console.log(e),i.setState({mergeObj:Object(Se.a)(Object(Se.a)({},i.state.mergeObj),{currentFinancialYearTotalForecast:e.currentForecast?e.currentForecast:0,nextFinancialYearTotalForecast:e.nextForecast?e.nextForecast:0}),futureSubmitted:!0},(function(){i.state.basicSubmitted&&i.state.billingSubmitted&&i.state.insuredSubmitted&&i.state.bankSubmitted&&i.state.futureSubmitted&&(i.props.editOrg?i.editRecord(i.state.mergeObj):i.addOrganization(i.state.mergeObj))}))},i.addOrganization=function(e){var t,a=i.props.callBack;console.log(e),i.setState({basicSubmitted:!1,billingSubmitted:!1,insuredSubmitted:!1,bankSubmitted:!1,futureSubmitted:!1,loading:!0}),(t=e,H.b.loading({content:"Loading...",key:1}),ke.a.post(sa,t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success?a():i.setState({loading:!1})}))},i.getRecord=function(e){ca(e).then((function(e){if(e.success){var t=e.basic,a=e.billing,n=e.insured,l=e.bank,r=e.future;e.data;i.basicRef.current.refs.basic_form.setFieldsValue({obj:t}),i.billingRef.current.refs.billing_form.setFieldsValue({obj:a}),i.insuredRef.current.refs.insured_form.setFieldsValue({obj:n}),i.bankRef.current.refs.bank_form.setFieldsValue({obj:l}),i.futureRef.current.refs.future_form.setFieldsValue({obj:r})}}))},i.editRecord=function(e){var t,a=i.props,n=a.editOrg,l=a.callBack;e.id=n,console.log(e),i.setState({basicSubmitted:!1,billingSubmitted:!1,insuredSubmitted:!1,bankSubmitted:!1,futureSubmitted:!1,loading:!1}),(t=e,H.b.loading({content:"Loading...",key:t.id}),ke.a.put(sa+"/".concat(t.id),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;if(R(n),H.b.success({content:n,key:l.id}),a){var i=oa(l),r=i.basic,s=i.billing,o=i.insured,c=i.bank,d=i.future;return A(e.headers&&e.headers.authorization),{success:a,basic:r,billing:s,insured:o,bank:c,future:d,data:l}}return{success:a,data:l}})).catch((function(e){return H.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success?l(e):i.setState({loading:!1})}))},i.onDrag=function(e,t){var a,n,l,r,s=null===(a=window)||void 0===a||null===(n=a.document)||void 0===n?void 0:n.documentElement,o=s.clientWidth,c=s.clientHeight,d=null===(l=i.draggleRef)||void 0===l||null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect();i.setState({bounds:{left:-(null===d||void 0===d?void 0:d.left)+(null===t||void 0===t?void 0:t.x),right:o-((null===d||void 0===d?void 0:d.right)-(null===t||void 0===t?void 0:t.x)),top:-(null===d||void 0===d?void 0:d.top)+(null===t||void 0===t?void 0:t.y),bottom:c-((null===d||void 0===d?void 0:d.bottom)-(null===t||void 0===t?void 0:t.y))}})},i.basicRef=l.a.createRef(),i.billingRef=l.a.createRef(),i.bankRef=l.a.createRef(),i.insuredRef=l.a.createRef(),i.futureRef=l.a.createRef(),i.draggleRef=l.a.createRef(),i.state={editOrg:!1,basicSubmitted:!1,billingSubmitted:!1,bankSubmitted:!1,insuredSubmitted:!1,futureSubmitted:!1,check:!1,bounds:{left:0,top:0,bottom:0,right:0},dragDisable:!0,BasicFields:{formId:"basic_form",FormCol:24,justifyField:"center",FormLayout:"inline",contactPerson:[],layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"Name",rangeMin:!0,fieldCol:9,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Title",fieldCol:3,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Parent",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:9,key:"name",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input",itemStyle:{marginBottom:1}},{object:"obj",fieldCol:3,key:"title",size:"small",type:"Input",itemStyle:{marginBottom:1}},{object:"obj",fieldCol:12,key:"parent",size:"small",data:[],type:"Select"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"phone",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"email",size:"small",type:"Input"},{Placeholder:"Business Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Delegate Contact person",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"businessType",size:"small",rules:[{required:!0,message:"Business Type is Required"}],type:"Select",data:[{label:"Sole Trader",value:1},{label:"Partnership",value:2},{label:"Company",value:3},{label:"Trust",value:4}]},{object:"obj",fieldCol:12,key:"delegate_cp",size:"small",data:i.state?i.state.contactPerson:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"},{Placeholder:"Website",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"website",size:"small",type:"Input",itemStyle:{marginBottom:"20px"}}]},BillingFields:{formId:"billing_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"ABN",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax Code",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"ABN",shape:"ABN",size:"small",type:"InputNumber",rules:[function(e){e.getFieldValue;return{validator:function(e,t){if(t){var a=t.toString(),n=new Array(10,1,3,5,7,9,11,13,15,17,19);if(11===a.length){var l=0;return n.forEach((function(e,t){var n=a[t]-(t?0:1);l+=e*n})),console.log(l%89),l%89===0?Promise.resolve():Promise.reject(new Error("ABN is not valid"))}return Promise.reject(new Error("Must contain 11 digits"))}return Promise.resolve()}}}],fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"tax_Code",size:"small",type:"Select",data:[{value:"GST",label:"GST - Goods & Services Tax Registered"},{value:"EXP",label:"EXP - GST Free Exports/Overseas Org"},{value:"GNR",label:"GNR - GST Non-Registered"},{value:"UNG",label:"UNG - No ABN"}]},{Placeholder:"Email for Invoices",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contact Number for Invoices",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"invoice_email",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"invoice_number",size:"small",type:"Input"}]},InsuredFields:{formId:"insured_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[{Placeholder:" Professional Indemnity",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right"},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_PI",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"10px"},onChange:function(e){var t=e.target.value,a=i.state.InsuredFields,n=a.fields;t?(n[2].rangeMin=!0,n[3].rangeMin=!0,n[4].rangeMin=!0,n[6].rules=[{required:!0,message:"Policy Number is required"}],n[7].rules=[{required:!0,message:"Sum Insured is required"}],n[8].rules=[{required:!0,message:"Expiry Date is required"}]):(n[2].rangeMin=!1,n[3].rangeMin=!1,n[4].rangeMin=!1,n[6].rules=[{required:!1,message:""}],n[7].rules=[{required:!1,message:""}],n[8].rules=[{required:!1,message:""}]),i.setState({InsuredFields:Object(Se.a)(Object(Se.a)({},a),{},{fields:Object(ue.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_PI",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",key:"SumIns_PI",fieldCol:6,size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_PI",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{Placeholder:"Public Liability",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right",itemStyle:{marginTop:20}},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_PL",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10},onChange:function(e){var t=e.target.value,a=i.state.InsuredFields,n=a.fields;t?(n[11].rangeMin=!0,n[12].rangeMin=!0,n[13].rangeMin=!0,n[15].rules=[{required:!0,message:"Policy Number is required"}],n[16].rules=[{required:!0,message:"Sum Insured is required"}],n[17].rules=[{required:!0,message:"Expiry Date is required"}]):(n[11].rangeMin=!1,n[12].rangeMin=!1,n[13].rangeMin=!1,n[15].rules=[{required:!1,message:""}],n[16].rules=[{required:!1,message:""}],n[17].rules=[{required:!1,message:""}]),i.setState({InsuredFields:Object(Se.a)(Object(Se.a)({},a),{},{fields:Object(ue.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_PL",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"SumIns_PL",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_PL",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{Placeholder:"Worker\u2019s Compensation",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right",itemStyle:{marginTop:20}},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_WC",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10},onChange:function(e){var t=e.target.value,a=i.state.InsuredFields,n=a.fields;t?(n[20].rangeMin=!0,n[21].rangeMin=!0,n[22].rangeMin=!0,n[24].rules=[{required:!0,message:"Policy Number is required"}],n[25].rules=[{required:!0,message:"Sum Insured is required"}],n[26].rules=[{required:!0,message:"Expiry Date is required"}]):(n[20].rangeMin=!1,n[21].rangeMin=!1,n[22].rangeMin=!1,n[24].rules=[{required:!1,message:""}],n[25].rules=[{required:!1,message:""}],n[26].rules=[{required:!1,message:""}]),i.setState({InsuredFields:Object(Se.a)(Object(Se.a)({},a),{},{fields:Object(ue.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_WC",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{object:"obj",fieldCol:6,key:"SumIns_WC",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_WC",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}}]},BankFields:{formId:"bank_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"Bank Account Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"bankName",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"bankBsb",size:"small",type:"Input"},{Placeholder:"Bank Account Number",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input"}]},FutureFields:{formId:"future_form",FormCol:24,justifyField:"center",FormLayout:"inline",contactPerson:[],size:"middle",fields:[{Placeholder:"Current Financial Year Total Forecast",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Next Financial Year Total Forecast",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},(e={object:"obj",fieldCol:12,key:"currentForecast",size:"small",type:"Input",shape:"$"},Object(fe.a)(e,"type","InputNumber"),Object(fe.a)(e,"fieldStyle",{width:"100%"}),e),(n={object:"obj",fieldCol:12,key:"nextForecast",size:"small",type:"Input",shape:"$"},Object(fe.a)(n,"type","InputNumber"),Object(fe.a)(n,"fieldStyle",{width:"100%"}),n)]}},i}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editOrg,n=t.visible,i=this.state,r=i.bounds,s=i.dragDisable,o=i.BasicFields,c=i.BillingFields,d=i.InsuredFields,u=i.BankFields,m=i.FutureFields,f=i.loading;return l.a.createElement(Je.a,{title:l.a.createElement("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){s&&e.setState({dragDisable:!1})},onMouseOut:function(){e.setState({dragDisable:!0})}},a?"Edit Organisation":"Add Organisation"),maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:f},okText:f?l.a.createElement(Ze.a,null):"Save",onCancel:this.props.close,width:900,destroyOnClose:!0,modalRender:function(t){return l.a.createElement(ra.a,{bounds:r,disabled:s,onStart:function(t,a){return e.onDrag(t,a)}},l.a.createElement("div",{ref:e.draggleRef},t))}},l.a.createElement(la.a,{type:"card"},l.a.createElement(ua,{tab:"General Details",key:"general_details",forceRender:!0},l.a.createElement(rt,{ref:this.basicRef,Callback:this.BasicCall,FormFields:o})),l.a.createElement(ua,{tab:"Billing Details",key:"billing_details",forceRender:!0},l.a.createElement(rt,{ref:this.billingRef,Callback:this.BillingCall,FormFields:c})),l.a.createElement(ua,{tab:"Insurance Details",key:"insurance_detail",forceRender:!0},l.a.createElement(rt,{ref:this.insuredRef,Callback:this.InsuredCall,FormFields:d})),l.a.createElement(ua,{tab:"Bank Details",key:"bank_detail",forceRender:!0},l.a.createElement(rt,{ref:this.bankRef,Callback:this.BankCall,FormFields:u})),l.a.createElement(ua,{tab:"Work In Future",key:"future",forceRender:!0},l.a.createElement(rt,{ref:this.futureRef,Callback:this.FutureCall,FormFields:m}))))}}]),a}(n.Component),fa=Ie.a.Title,ga=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){var e=JSON.parse(M().permissions).ORGANIZATIONS;ke.a.get(sa,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&n.setState({data:t.data,infoModal:!1,editOrg:!1,permissions:e})}))},n.handleDelete=function(e){da(e).then((function(e){e.success&&n.getData()}))},n.closeModal=function(){n.setState({infoModal:!1,editOrg:!1})},n.callBack=function(){n.getData()},n.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"ORG-00".concat(e)}},{title:"Name",dataIndex:"name",key:"name",width:500},{title:"Parent Organisation",dataIndex:"parentOrganization",key:"parentOrganization",width:500,render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){n.setState({infoModal:!0,editOrg:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit "),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},"View ")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={infoModal:!1,editOrg:!1,data:[],permissions:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.editOrg,r=t.permissions,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(fa,{level:4},"Organisations")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"},l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(Qe.a,null),"Organisations")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:a,size:"small"}))),n&&l.a.createElement(ma,{visible:n,editOrg:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),pa=a(595),ba=a(59),ha=a.n(ba),ya=a(75),ka=a(582),Ea=a(599),va=a(318),Sa=a(618),Ca=a(319),ja=a(619),Pa="".concat(D,"/attachments/"),Oa=function(e,t){return ke.a.post("".concat(D,"/files"),e,{headers:{"content-type":"multipart/form-data",Authorization:M().accessToken}}).then((function(e){if(200===e.status){var t=e.data,a=t.success,n=t.data,l=t.message;R(l);var i={fileId:n[0].id,uid:n[0]&&n[0].uniqueName,name:n[0]&&n[0].originalName,type:n[0]&&n[0].type,url:"".concat(D,"/files/").concat(n[0]&&n[0].uniqueName),thumbUrl:w(n[0].type)};return A(e.headers&&e.headers.authorization),{success:a,file:i}}return{success:!1}})).catch((function(e){return console.log(e),{}}))},Ia=function(e,t,a){return ke.a.post("".concat(Pa).concat(e,"/").concat(t),a,{headers:N()}).then((function(e){if(200===e.status){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),n={id:n[0].id,createdAt:n[0].createdAt,fileId:n[0].fileId,status:n[0].status,targetId:n[0].targetId,targetType:n[0].type,uid:n[0]&&n[0].file.uniqueName,name:n[0]&&n[0].file.originalName,type:n[0]&&n[0].file.type,url:"".concat(D,"/files/").concat(n[0]&&n[0].file.uniqueName),thumbUrl:w(n[0].file.type)},A(e.headers&&e.headers.authorization),{success:a,data:n}}return{success:!1}})).catch((function(e){return console.log(e),{}}))},Da=function(e,t){return ke.a.get("".concat(Pa).concat(e,"/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=[],r=[];return n.map((function(e){i.push(e.id),r.push({id:e.id,createdAt:e.createdAt,fileId:e.fileId,status:e.status,targetId:e.targetId,targetType:e.targetType,uid:e.file.uniqueName,name:e.file.originalName,type:"png"===e.file.type?"image/png":e.file.type,url:"".concat(D,"/files/").concat(e.file.uniqueName),thumbUrl:w(e.file.type)})})),A(e.headers&&e.headers.authorization),{success:a,fileList:r,fileIds:i}}return{success:!1}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ta="".concat(D,"/comments/"),Fa=(a(501),Te.a.TextArea),za=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getComments=function(t,a){(function(e,t){return ke.a.get("".concat(Ta).concat(e,"/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(t,a).then((function(t){var a;t&&t.success&&e.setState({data:null!==(a=t.data)&&void 0!==a?a:[]})}))},e.scrollToBottom=function(){e.messagesEnd.current.scrollIntoView({behavior:"smooth"})},e.deleteIcon=function(t,a){e.setState((function(e){return{isHovered:Object(Se.a)(Object(Se.a)({},e.isHovered),{},Object(fe.a)({},t,a))}}))},e.handleDelete=function(t){(function(e){return ke.a.delete("".concat(Ta).concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;if(R(n),A(e.headers&&e.headers.authorization),a)return{success:a}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(t).then((function(a){a.success&&e.setState({data:e.state.data.filter((function(e){return e.id!==t}))})}))},e.handelEmpty=function(t){var a=e.state.value;13!==t.keyCode||a||t.preventDefault()},e.comChange=function(t){e.setState({value:t.target.value})},e.addComent=function(t){var a=e.state,n=a.value,l=a.data,i=a.fileList,r=a.fileIds;if(!t.shiftKey&&(n||i.length>0)){var s={content:n,files:i,attachments:r},o=e.props;(function(e,t,a){return ke.a.post("".concat(Ta).concat(e,"/").concat(t),a,{headers:N()}).then((function(e){if(200===e.status){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),A(e.headers&&e.headers.authorization),{success:a,data:n}}})).catch((function(e){return console.log(e),{}}))})(o.targetType,o.targetId,s).then((function(t){t.success&&e.setState({data:[].concat(Object(ue.a)(l),[t.data]),value:null,fileList:[],fileIds:[]},(function(){setTimeout((function(){e.scrollToBottom(),e.setState({value:null})}),0)}))}))}},e.logScroll=function(t){var a=t.target,n=a.scrollHeight,l=a.scrollTop,i=a.clientHeight;l?n-l===i&&(t.persist(t.target),setTimeout((function(){n-l===i&&console.log("I will get rendered now")}),1e3)):(t.persist(l),setTimeout((function(){var t=e.state.data;!l&&t.length<500||console.log("Empty")}),1e3))},e.actions=function(e){return e.map((function(e){return l.a.createElement("span",null,l.a.createElement(va.a,null)," ",l.a.createElement("a",{href:"".concat(D,"/files/").concat(e.uid),download:e.name,target:"_blank",rel:"noopener noreferrer"},e.name))}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[].concat(Object(ue.a)(e.state.fileList),[t.file]),fileIds:[].concat(Object(ue.a)(e.state.fileIds),[t.file.fileId])});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))},e.commentRender=function(t,a,n){var i,r=t.attachments&&e.actions(t.attachments);return l.a.createElement(ka.a,{key:t.id,author:l.a.createElement("a",null," ",t.author?t.authorId==parseInt(M().id)?"".concat(t.author," (Me)"):t.author:"?????"," "),avatar:l.a.createElement(g.a,{style:{backgroundColor:xa[a.toString()[a.toString().length-1]]},alt:null!==(i=t.author)&&void 0!==i?i:"??????"},t.author?t.author[0].toUpperCase():"?"),actions:r,content:l.a.createElement("p",null,t.content),datetime:l.a.createElement(l.a.Fragment,null,l.a.createElement(De.a,{title:ot()(t.createdAt).format("YYYY-MM-DD HH:mm:ss")},l.a.createElement("span",null,ot()(t.createdAt).fromNow())),l.a.createElement(De.a,{key:"comment-basic-delete",title:"Delete"},l.a.createElement("span",{style:Aa.delCol,onMouseOver:function(){e.deleteIcon(a,!0)},onMouseLeave:function(){e.deleteIcon(a,!1)}},l.a.createElement(ge.a,{title:"You Want to delete comment?",onConfirm:function(){e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},n[a]?l.a.createElement(Sa.a,{style:Aa.delIcon}):l.a.createElement(Ca.a,null)))))})},e.messagesEnd=l.a.createRef(),e.UploadRef=l.a.createRef(),e.state={isHovered:{},fileList:[],fileIds:[],data:[],value:null},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom();var e=this.props,t=e.targetType,a=e.targetId;this.getComments(t,a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isHovered,i=t.value,r=t.fileList;return l.a.createElement(p.a,{justify:"space-around"},l.a.createElement(b.a,{style:Aa.cSec,span:24,onScroll:this.logScroll},l.a.createElement(Ea.b,{itemLayout:"horizontal",dataSource:a,renderItem:function(t,a){return l.a.createElement("li",null,e.commentRender(t,a,n))}}),l.a.createElement("div",{ref:this.messagesEnd})),l.a.createElement(b.a,{span:23,style:Aa.cBox},l.a.createElement(Ce.a.Item,{colon:!1,label:l.a.createElement(va.a,{style:n.attachIcon?Aa.attachIconHoverd:Aa.sendIcon,onMouseOver:function(){e.deleteIcon("attachIcon",!0)},onMouseOut:function(){e.deleteIcon("attachIcon",!1)},onClick:function(){e.UploadRef.current.click()}})},l.a.createElement(Fa,{placeholder:"Enter Your Comment....",autoSize:{minRows:1,maxRows:5},onPressEnter:this.addComent,onChange:this.comChange,onKeyDown:this.handelEmpty,value:i}),l.a.createElement(je.a,{listType:"text",multiple:!0,customRequest:this.handleUpload,onRemove:this.onRemove,fileList:r,style:{backgroundColor:"rosybrown"},className:"upload-list-inline"},l.a.createElement(va.a,{ref:this.UploadRef,style:{fontSize:0}})))),l.a.createElement(b.a,{span:1,style:{alignSelf:"flex-end",marginBottom:r.length>2?30*r.length/4+1:25}},l.a.createElement(Ce.a.Item,null,l.a.createElement(ja.a,{onClick:this.addComent,className:"sendIcon",style:n.sendIcon?Aa.sendIconHoverd:Aa.sendIcon,onMouseOver:function(){e.deleteIcon("sendIcon",!0)},onMouseOut:function(){e.deleteIcon("sendIcon",!1)}}))))}}]),a}(n.Component),xa=["#f56a00","#7265e6","#ffbf00","#0000ff","#b8860b","#907849","#80afe2","#FAAB14","#b17401","#42a3f3","#ce8785"],Aa={cSec:{maxHeight:500,overflowY:"auto",minHeight:500},delCol:{paddingLeft:"10px",cursor:"pointer",textAlignLast:"right"},cBox:{paddingLeft:"40px"},sendBox:{alignSelf:"flex-end",maxHeight:"100px",backgroundColor:"yellow"},sendIcon:{fontSize:"24px",paddingLeft:"10px"},sendIconHoverd:{fontSize:"24px",paddingLeft:"10px",color:"blue"},attachIconHoverd:{fontSize:"24px",paddingLeft:"10px",color:"#40a9ff"},delIcon:{fontSize:"18px"},sendAvatar:{backgroundColor:"#"+Math.floor(16777216*Math.random()).toString(16)}},Ma=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getEntityProjects()},e.getEntityProjects=function(){var t=JSON.parse(M().permissions).PROJECTS,a=e.props,n=a.customUrl,l=a.showColumn;Ut(n).then((function(a){a.success&&e.setState({permissions:t,projects:a.data,columns:l?e.columns.filter((function(e){return"organization"!==e.dataIndex})):e.columns})}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title"},{title:"Organisation Name",dataIndex:"organization",key:"organization",width:300,render:function(e){return e&&e.name}},{title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(x(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{disabled:e.state&&!e.state.permissions.READ},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={projects:[],permissions:{},columns:[]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.projects,a=e.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:a,dataSource:t,size:"small"}))}}]),a}(n.Component),Ra=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.getList=function(){var t=JSON.parse(M().permissions).OPPORTUNITIES,a=e.props,n=a.customUrl,l=a.showColumn;e.state.data;Ut(n).then((function(a){e.setState({data:a.success?a.data:[],permissions:t,columns:l?e.columns.filter((function(e){return"organization"!==e.dataIndex})):e.columns})}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title"},{title:"Organisation Name",dataIndex:"organization",key:"organization",width:300,render:function(e){return e&&e.name}},{title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(x(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Bid Date",dataIndex:"bidDate",key:"bidDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return e}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{disabled:e.state&&!e.state.permissions.READ},l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={data:[],columns:[],permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},columns:a,dataSource:t,size:"small"}))}}]),a}(n.Component),Na=pa.b.Item,wa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n,l;return Object(c.a)(this,a),(l=t.call(this,e)).componentDidMount=function(){console.log(l.props.bank)},l.state={data:null!==(n=e.bank)&&void 0!==n?n:{}},l}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.data,t=this.props.targetType;return l.a.createElement(pa.b,{title:"Bank Account Detail",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Na,{label:"Bank Account Name"},e.bankName," "),l.a.createElement(Na,{label:"Account Number"},e.bankAccountNo," "),l.a.createElement(Na,{label:"BSB"},e.bankBsb),"EMP"===t&&l.a.createElement(Na,{label:"Tax File Number"},e.tfn))}}]),a}(n.Component),Ba=a(620),La=(a(502),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.targetType,n=t.targetId;e.getRecord(a,n)},e.getRecord=function(t,a){Da(t,a).then((function(t){t.success&&e.setState({fileList:t.fileList,fileIds:t.fileIds})}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),e.setState({loading:!0}),Oa(s).then((function(t,a){if(t.success){n("Ok");var i=e.props,r=i.targetType,s=i.targetId,o={files:[t.file.fileId]};Ia(r,s,o).then((function(a){a.success&&e.setState({fileList:[].concat(Object(ue.a)(e.state.fileList),[a.data]),fileIds:[].concat(Object(ue.a)(e.state.fileIds),[t.file.fileId]),loading:!1})}))}else{console.log("Eroor: ",a);new Error("Some error");e.setState({loading:!1}),l({err:a})}}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){var a;(a=t.id,ke.a.delete("".concat(Pa).concat(a),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(a){a.success&&e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))}))},e.UploadRef=Object(n.createRef)(),e.state={fileList:[],fileIds:[],loading:!1},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fileList,a=e.loading;return l.a.createElement(p.a,null,l.a.createElement(b.a,{span:"24"},l.a.createElement(je.a,{multiple:!0,showUploadList:{showRemoveIcon:!0},listType:"picture",fileList:t,customRequest:this.handleUpload,onRemove:this.onRemove,style:{backgroundColor:"rosybrown"}},l.a.createElement(pe.a,{type:"ghost",loading:a},l.a.createElement(Ba.a,null)," Upload new File"))))}}]),a}(n.Component)),Ya=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props.id)},n.columns=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/organizations/info/".concat(t&&t.key)},className:"nav-link"},e)}},{title:"Parent",dataIndex:"parent",key:"parent",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/organizations/info/".concat(t&&t.key)},className:"nav-link"},e)}}],n.state={data:[]},n}return Object(d.a)(a,[{key:"componentWillReceiveProps",value:function(e){console.log(e),window.location.reload(!1)}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement(Ge.a,{columns:this.columns,dataSource:e,size:"small"})}}]),a}(n.Component),qa=(Object(o.h)(Ya),pa.b.Item),Va=la.a.TabPane,Ha=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).closeModal=function(){e.setState({infoModal:!1,editOrg:!1})},e.callBack=function(t){t.success&&e.setState({data:t.data,basic:t.basic,bank:t.bank,infoModal:!1,editOrg:!1})},e.componentDidMount=function(){var t=e.props.match.params.id;e.getOrgRecord(t)},e.getOrgRecord=function(t){ca(t).then((function(a){var n,l,i;a.success&&e.setState({data:null!==(n=a.data)&&void 0!==n?n:{},basic:null!==(l=a.basic)&&void 0!==l?l:{},bank:null!==(i=a.bank)&&void 0!==i?i:{},organizationId:t})}))},e.handleDelete=function(e){da(e).then((function(e){e.success&&(window.location.href="/organizations")}))},e.state={infoModal:!1,editOrg:!1,data:{},bank:{},basic:{},organizationId:!1},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.bank,i=t.infoModal,r=t.editOrg,o=t.organizationId,c=t.basic,d=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,a&&a.name),l.a.createElement(b.a,null,l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(a.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0,editOrg:a.id})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:d,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(qa,{label:"Contact"},a.phoneNumber),l.a.createElement(qa,{label:"Email"},a.email),l.a.createElement(qa,{label:"Address"},a.address),l.a.createElement(qa,{label:"Website"},l.a.createElement(s.b,{to:{pathname:"https://".concat(a.website)},target:"_blank"},a.website)),l.a.createElement(qa,{label:"EBA"},a.expectedBusinessAmount),l.a.createElement(qa,{label:"Contact Person"},c?c.delegate_contactPerson:null)),o&&l.a.createElement(la.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Va,{tab:"Project",key:"project"},l.a.createElement(Ma,{targetId:o,showColumn:!0,customUrl:"helpers/work?type=P&organization=".concat(o)})),l.a.createElement(Va,{tab:"Opportunity",key:"opportunity"},l.a.createElement(Ra,{targetId:o,showColumn:!0,customUrl:"helpers/work?type=O&organization=".concat(o)})),l.a.createElement(Va,{tab:"Attachments",key:"attachments"},l.a.createElement(La,{targetId:o,targetType:"ORG"})),l.a.createElement(Va,{tab:"Comments",key:"comments"},l.a.createElement(za,{targetId:o,targetType:"ORG"})),l.a.createElement(Va,{tab:"Bank Account",key:"Bank"},l.a.createElement(wa,{targetId:o,title:a.name,bank:n}))),i&&l.a.createElement(ma,{visible:i,editOrg:r,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Ua=a(322),_a="".concat(D,"/contactpersons"),Ka=function(e){return ke.a.get(_a+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Wa="".concat(D,"/employees"),Ga=function(e){return ke.a.get(Wa+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=Qa(n);return{success:a,data:n,basic:i.basic,detail:i.detail,kin:i.kin,bank:i.bank,billing:i.billing,train:i.train}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Ja=function(e){return ke.a.delete(Wa+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))};function Qa(e){var t=e.contactPersonOrganization?e.contactPersonOrganization.contactPerson:{},a={cpCode:"Emp-00".concat(t.id),firstName:t.firstName,lastName:t.lastName,gender:t.gender,dateOfBirth:t.dateOfBirth?ot()(t.dateOfBirth):null,phoneNumber:t.phoneNumber,email:t.email,address:t.address,stateId:t.stateId,username:e.username,password:e.password,roleId:e.roleId},n={superannuationName:e.superannuationName,superannuationBankName:e.superannuationBankName,superannuationBankAccountOrMembershipNumber:e.superannuationBankAccountOrMembershipNumber,superannuationAbnOrUsi:e.superannuationAbnOrUsi,superannuationBankBsb:e.superannuationBankBsb,superannuationAddress:e.superannuationAddress,superannuationType:e.superannuationType},l={nextOfKinDateOfBirth:e.nextOfKinDateOfBirth?ot()(e.nextOfKinDateOfBirth):null,nextOfKinEmail:e.nextOfKinEmail,nextOfKinGender:e.nextOfKinGender,nextOfKinName:e.nextOfKinName,nextOfKinPhoneNumber:e.nextOfKinPhoneNumber,nextOfKinRelation:e.nextOfKinRelation},i=e.bankAccounts.length>0?e.bankAccounts[0]:{},r={bankName:i.name,bankAccountNo:i.accountNo,bankBsb:i.bsb,tfn:e.tfn,taxFreeThreshold:e.taxFreeThreshold,helpHECS:e.helpHECS},s=e.employmentContracts.length>0?e.employmentContracts[0]:{};return{basic:a,detail:n,kin:l,bank:r,billing:{employmentContractId:s.id,employeeId:s.employeeId,payslipEmail:s.payslipEmail,membershipAccountNo:s.membershipAccountNo,payFrequency:s.payFrequency,startDate:s.startDate?ot()(s.startDate):null,endDate:s.endDate?ot()(s.endDate):null,type:s.type,noOfHours:s.noOfHours,noOfHoursPer:s.noOfHoursPer,remunerationAmount:s.remunerationAmount,remunerationAmountPer:s.remunerationAmountPer,comments:s.comments,fileId:s.fileId,file:s.fileId?[{id:s.file.id,createdAt:s.file.createdAt,fileId:s.file.id,uid:s.file.uniqueName,name:s.file.originalName,type:s.file.type,url:"".concat(D,"/files/").concat(s.file.uniqueName),thumbUrl:w(s.file.type)}]:[]},train:{training:e.training}}}var Za=la.a.TabPane,Xa=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.editEmp;e.fetchAll(t)},e.fetchAll=function(t){var a=e.props.editEmp;Promise.all([Nt(),Ht(),t?e.getRecord(a):wt("helpers/contact-persons?organizationId=1&active=0&associated=1")]).then((function(a){var n=e.state.BasicFields;n[15].data=a[0].data,n[17].data=a[1].data,e.setState({BasicFields:n,CONTACT:t?[]:a[2].data})})).catch((function(e){console.log(e)}))},e.setBankReq=function(){var t=e.formRef.current.getFieldsValue().bank,a=t.bankAccountNo,n=t.bankBsb,l=t.bankName,i=t.tfn,r=e.state.BankFields;a||n||l||i?(r[0].rangeMin=!0,r[1].rangeMin=!0,r[4].rangeMin=!0,r[5].rangeMin=!0,r[2].rules=[{required:!0,message:"Account Name is required"}],r[3].rules=[{required:!0,message:"Account Number is required"}],r[6].rules=[{required:!0,message:"BSB Number is required"}],r[7].rules=[{required:!0,message:"Tax File Number is required"}]):(r[0].rangeMin=!1,r[1].rangeMin=!1,r[4].rangeMin=!1,r[5].rangeMin=!1,r[2].rules=[{required:!1,message:""}],r[3].rules=[{required:!1,message:""}],r[6].rules=[{required:!1,message:""}],r[7].rules=[{required:!1,message:""}]),e.setState({BankFields:Object(ue.a)(r)})},e.addEmployee=function(t){console.log("addEmployee",t);var a=e.props.callBack,n=e.state.sContact;t.contactPersonId=n,e.setState({loading:!0}),function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.post(Wa,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return R(n),H.b.success({content:n,key:1}),a?{success:a,data:l,billing:Qa(l).billing}:{success:a,data:l}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))}(t).then((function(e){console.log(e),e.success&&a(e.data,!1)}))},e.getRecord=function(t){return Ga(t).then((function(t){if(t.success)return e.formRef.current.setFieldsValue({basic:t.basic,detail:t.detail,bank:t.bank,kin:t.kin,billing:t.billing,train:t.train}),e.setState({fileIds:t.billing.fileId,fileList:t.billing.file}),e.onFundType(t.detail&&t.detail),!0}))},e.editRecord=function(t){var a,n,l=e.props,i=l.editEmp,r=l.callBack;e.setState({loading:!0}),(a=i,n=t,H.b.loading({content:"Loading...",key:a}),ke.a.put(Wa+"/".concat(a),n,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message,i=t.data;if(R(l),H.b.success({content:l,key:a}),n){var r=Qa(i).billing;return A(e.headers&&e.headers.authorization),{success:n,data:i,billing:r}}return{success:n,data:i}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&r()}))},e.onContact=function(t){t?Ka(t).then((function(a){a.success&&(console.log(a.data),a.data.cpCode="Emp-00".concat(a.data.id),a.data.dateOfBirth=a.data.dateOfBirth&&ot()(a.data.dateOfBirth),e.formRef.current.setFieldsValue({basic:a.data}),e.setState({sContact:t}))})):e.formRef.current.resetFields()},e.onFundType=function(t){var a=[{Placeholder:"SMSF ABN",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"ESA Address",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",shape:"ABN",size:"small",type:"Input",rules:[{required:!0,message:"SMSF ABN is required"},function(e){e.getFieldValue;return{validator:function(e,t){var a=t.toString(),n=new Array(10,1,3,5,7,9,11,13,15,17,19);if(11===a.length){var l=0;return n.forEach((function(e,t){var n=a[t]-(t?0:1);l+=e*n})),console.log(l%89),l%89===0?Promise.resolve():Promise.reject(new Error("ABN is not valid"))}return Promise.reject(new Error("Must contain 11 digits"))}}}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationAddress",size:"small",type:"Input",rules:[{required:!0,message:"ESA Address is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Bank Account Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankName",size:"small",type:"Input",rules:[{required:!0,message:"Account Name is required"}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationBankBsb",size:"small",type:"Input",rules:[{required:!0,message:"BSB Number is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Bank Account Number",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Account Number is required"}],itemStyle:{marginBottom:"10px"}}],n=e.state.DetailFields,l=e.formRef.current.getFieldsValue().detail,i=l.superAnnuationName,r=l.superannuationType;"P"===r?(n.splice(4,n.length),n=n.concat([{Placeholder:"Membership / Account",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"USI Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Membership / Account is required"}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"USI Number is required"}],itemStyle:{marginBottom:10}}])):"S"===r?(n.splice(4,n.length),n=n.concat(a)):n.splice(4,n.length);var s={superAnnuationName:i,superannuationType:r};e.formRef.current.setFieldsValue({detail:s}),e.setState({DetailFields:Object(ue.a)(n)})},e.onFinish=function(t){var a,n,l,i,r=e.state.fileIds;e.setState({loading:!0}),t.billing.type&&(1===t.billing.type?t.billing.remunerationAmountPer=1:t.billing.remunerationAmountPer=7),t.billing.fileId=r;var s=Object(Se.a)(Object(Se.a)(Object(Se.a)(Object(Se.a)(Object(Se.a)({},t.basic),t.detail),t.kin),{bankName:null!==(a=t.bank.bankName)&&void 0!==a?a:"",bankAccountNo:null!==(n=t.bank.bankAccountNo)&&void 0!==n?n:"",bankBsb:null!==(l=t.bank.bankBsb)&&void 0!==l?l:"",tfn:null!==(i=t.bank.tfn)&&void 0!==i?i:"",taxFreeThreshold:t.bank.taxFreeThreshold,helpHECS:t.bank.helpHECS}),{},{latestEmploymentContract:t.billing});e.props.editEmp?(console.log("edit"),e.editRecord(s)):(console.log("emes"),e.addEmployee(s))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFinishFailed=function(t){t.values;var a=t.errorFields;t.outOfDate;e.setState({activeKey:a[0].name[0]})},e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editEmp:!1,loading:!1,CONTACT:[],data:{},imgLoading:!1,fileList:[],fileIds:null,activeKey:"basic",BasicFields:[{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{object:"basic",fieldCol:12,key:"cpCode",size:"small",readOnly:!0,rules:[{required:!0,message:"Select Contact Person !!"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:5}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",type:"Input",disabled:!1,itemStyle:{marginBottom:10}},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],itemStyle:{marginBottom:10},type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Role",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"roleId",rules:[{required:!0,message:"Role is required!!"}],size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}}],DetailFields:[{Placeholder:"Superannuation Fund/ SMSF Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationName",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}},{object:"detail",fieldCol:12,key:"superannuationType",size:"small",data:[{label:"Public",value:"P"},{label:"SMSF",value:"S"}],type:"Select",itemStyle:{marginBottom:10},onChange:function(t){e.onFundType(t)}}],KinFields:[{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Employee",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}],BankFields:[{Placeholder:"Bank Account Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Bank Account Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankName",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax File Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankBsb",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"tfn",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{Placeholder:"Tax-free Threshold",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"HELP (HECS)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"taxFreeThreshold",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"helpHECS",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:10}}],BillingFields:[{Placeholder:"Employment Status",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",onChange:function(t){var a=e.state.BillingFields;1===t?(a[10].Placeholder="Hourly Base Salary",e.setState({BillingFields:a})):(a[10].Placeholder="Annual Base Salary",e.setState({BillingFields:a})),console.log("this.formRef.current.getFieldsValue()",e.formRef.current.getFieldsValue())},rules:[{required:!0,message:"Status is Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"payslipEmail",size:"small",type:"input",itemStyle:{marginBottom:10}},{Placeholder:"Full Work Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:6,key:"noOfHoursPer",size:"small",type:"Select",data:[{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:10},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Salary is Required"}],itemStyle:{marginBottom:10}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"payFrequency",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}],TrainFields:[{Placeholder:"Training",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"train",fieldCol:24,key:"training",size:"small",mode:{minRows:8,maxRows:12},type:"Textarea"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editEmp,n=t.visible,i=t.close,r=this.state,s=r.BasicFields,o=r.DetailFields,c=r.KinFields,d=r.BankFields,u=r.BillingFields,m=r.TrainFields,f=r.CONTACT,g=r.loading,p=r.fileList,h=r.activeKey;return l.a.createElement(Je.a,{title:a?"Edit Employee":"Add Employee",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:g,htmlType:"submit",form:"my-form"},okText:g?l.a.createElement(Ze.a,null):"Save",onCancel:function(){return i()},width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{startDate:null}}},!a&&l.a.createElement(b.a,{span:8,style:{marginBottom:10}},l.a.createElement(Ce.a.Item,{name:["basic","contactPersonId"]},l.a.createElement(ze.a,{placeholder:"Contact Person",options:f,showArrow:!0,showSearch:!0,size:"small",allowClear:!0,onClear:this.onContact,onChange:this.onContact,optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),l.a.createElement(b.a,{span:8,style:{marginLeft:"auto",marginBottom:10}},l.a.createElement(Ce.a.Item,{name:["basic","username"],rules:[{required:!0,message:"Email/Username is requrired"}]},l.a.createElement(Te.a,{placeholder:"Email",size:"small",type:"email",style:{width:"100%"}}))),l.a.createElement(la.a,{type:"card",activeKey:h,onChange:function(t){e.setState({activeKey:t})}},l.a.createElement(Za,{tab:"Personal Details",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:s})),l.a.createElement(Za,{tab:" Employment Contracts",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:u}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(je.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:p,onRemove:this.onRemove},p.length<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(Ua.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(Za,{tab:"Superannuation",key:"detail",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:o})),l.a.createElement(Za,{tab:"Next of Kin",key:"kin",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:c})),l.a.createElement(Za,{tab:"Banking/Tax Details",key:"bank",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:d})),l.a.createElement(Za,{tab:"Training Detail",key:"train",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:m})))))}}]),a}(n.Component),$a=Ie.a.Title,en=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.getList=function(){var t=JSON.parse(M().permissions).USERS;ke.a.get(Wa,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&e.setState({data:a.data,infoModal:!1,editEmp:!1,permissions:t})}))},e.handleDelete=function(t){Ja(t).then((function(t){t.success&&e.getList()}))},e.closeModal=function(){e.setState({infoModal:!1,editEmp:!1})},e.callBack=function(t){e.getList()},e.columns=[{title:"Code",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return"Emp-00".concat(e&&e.contactPersonId)}},{title:"First Name",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.firstName}},{title:"Last Name",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.lastName}},{title:"Phone",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.phoneNumber}},{title:"Email",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.email}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0,editEmp:t.id})},disabled:e.state&&!e.state.permissions.UPDATE},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/Employees/".concat(t.id,"/info")},className:"nav-link"},"View")),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(t.id,"/contracts")},className:"nav-link"},"Contracts")),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(t.id,"/novated-lease")},className:"nav-link"},"Novated Lease")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={infoModal:!1,editEmp:!1,data:[],permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.editEmp,r=t.permissions,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement($a,{level:4},"Employees")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"}," ",l.a.createElement(na.a,null)," Filter ")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(Qe.a,null),"Employees")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:a,size:"small"}))),n&&l.a.createElement(Xa,{visible:n,editEmp:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),tn=pa.b.Item,an=la.a.TabPane,nn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.getRecord(t)},e.getRecord=function(t){Ga(t).then((function(a){a.success&&e.setState({data:a.basic,bank:a.bank,emp:t})}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){Ja(t).then((function(t){t.success&&e.props.history.push("/Employees")}))},e.callBack=function(){var t=e.state.emp;e.getRecord(t)},e.state={infoModal:!1,emp:!1,data:{},bank:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.emp,r=t.bank,o=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,"Basic Information"),l.a.createElement(b.a,null,l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0})}},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(i,"/contracts")},className:"nav-link"},"Contracts")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:o,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(tn,{label:"First Name"},a.firstName),l.a.createElement(tn,{label:"Last Name"},a.lastName),l.a.createElement(tn,{label:"Phone"},a.phoneNumber," "),l.a.createElement(tn,{label:"Email"},a.email),l.a.createElement(tn,{label:"Address"},a.address),l.a.createElement(tn,{label:"Date Of Birth"},a.dateOfBirth?ot()(a.dateOfBirth).format("DD MM YYYY"):null),l.a.createElement(tn,{label:"Gender"},a.gender)),i&&l.a.createElement(la.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(an,{tab:"Project",key:"project"},l.a.createElement(Ma,{targetId:i,customUrl:"helpers/work?type=P&employee=".concat(i)})),l.a.createElement(an,{tab:"Comments",key:"comments"},l.a.createElement(za,{targetType:"EMP",targetId:i})),l.a.createElement(an,{tab:"Attachments",key:"attachments"},l.a.createElement(La,{targetType:"EMP",targetId:i})),l.a.createElement(an,{tab:"Bank Account",key:"account"},l.a.createElement(wa,{targetType:"EMP",targetId:i,title:a.name,bank:r}))),n&&l.a.createElement(Xa,{visible:n,editEmp:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),ln="".concat(D,"/employment-contracts"),rn=function(e){return ke.a.get(ln+"?employeeId=".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},sn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.editCntrct;t&&e.getRecord(t)},e.onFinish=function(t){var a=e.props,n=a.editCntrct,l=a.editEmp,i=e.state.fileIds,r=t.billing;r.noOfHoursPer=1,1===r.type?r.remunerationAmountPer=1:r.remunerationAmountPer=7,r.startDate=r.startDate?ot()(r.startDate).valueOf():null,r.endDate=r.endDate?ot()(r.endDate).valueOf():null,r.employeeId=l,r.fileId=i,n?(console.log("edit"),e.editRecord(r)):(console.log("emes"),e.addContract(r))},e.addContract=function(t){e.setState({loading:!0});var a=e.props.callBack;console.log(t),function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.post(ln,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))}(t).then((function(e){console.log(e),e.success&&a()}))},e.getRecord=function(t){var a;(a=t,ke.a.get(ln+"/".concat(a),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(A(e.headers&&e.headers.authorization),n.file=n.fileId?[{id:n.file.id,createdAt:n.file.createdAt,fileId:n.file.id,uid:n.file.uniqueName,name:n.file.originalName,type:n.file.type,url:"".concat(D,"/files/").concat(n.file.uniqueName),thumbUrl:w(n.file.type)}]:[]),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){var a=t.success,n=t.data;a&&(n.startDate=n.startDate&&ot()(n.startDate),n.endDate=n.endDate&&ot()(n.endDate),e.formRef.current.setFieldsValue({billing:n}),e.setState({fileIds:n.fileId,fileList:n.file}))}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editCntrct,l=a.callBack;(function(e,t){return H.b.loading({content:"Loading...",key:e}),ke.a.put(ln+"/".concat(e),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(n,t).then((function(e){e.success&&l()}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editCntrct:!1,loading:!1,imgLoading:!1,fileList:[],fileIds:null,data:{},BillingFields:[{Placeholder:"Employment Status",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",rules:[{required:!0,message:"Status is Required"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"payslipEmail",size:"small",type:"input",itemStyle:{marginBottom:1}},{Placeholder:"Full Work Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfHoursPer",size:"small",type:"Select",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:1},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Salary is Required"}],itemStyle:{marginBottom:1}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"payFrequency",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],itemStyle:{marginBottom:1}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editCntrct,a=e.visible,n=e.close,i=this.state,r=i.BillingFields,s=i.loading,o=i.fileList;return l.a.createElement(Je.a,{title:t?"Edit Billing":"Add Billing",maskClosable:!1,centered:!0,visible:a,okButtonProps:{readOnly:s,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{entryDate:ot()(new Date)}}},l.a.createElement(He,{FormFields:r})),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(je.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:o,onRemove:this.onRemove},o.length<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(Ua.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))}}]),a}(n.Component),on=(Ie.a.Title,pa.b.Item),cn={1:"Casual",2:"Part Time",3:"Full Time"},dn={1:"Hourly",2:"Daily",3:"Weekly",4:"Fortnightly",5:"Monthly"},un=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([rn(t),Ga(t)]).then((function(t){e.setState({data:t[0].data,intro:t[1].basic,billModal:!1,editCntrct:!1})})).catch((function(e){console.log(e)}))},e.getList=function(t){rn(t).then((function(t){t.success&&e.setState({data:t.data,billModal:!1,editCntrct:!1})}))},e.callBack=function(){var t=e.props.match.params.id;e.getList(t)},e.handleDelete=function(t){(function(e){return ke.a.delete(ln+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){var a=e.props.match.params.id;e.getList(a)}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"Job Type",dataIndex:"type",key:"type",render:function(e){return cn[e]}},{title:"Rate",dataIndex:"remunerationAmount",key:"remunerationAmount",render:function(e){return"".concat(x(e))}},{title:"Rate Duration",dataIndex:"remunerationAmountPer",key:"remunerationAmountPer",render:function(e){return dn[e]}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){e.setState({billModal:!0,editCntrct:t.id})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={intro:{},data:[],billModal:!1,editCntrct:!1},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.billModal,n=t.editCntrct,i=t.data,r=t.intro,s=this.props.match.params.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:"Contract Information",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(on,null,"Code: ",l.a.createElement("b",null,r.cpCode)),l.a.createElement(on,null,"First Name: ",l.a.createElement("b",null,r.firstName)),l.a.createElement(on,null,"Last Name: ",l.a.createElement("b",null,r.lastName)),l.a.createElement(on,{style:{textAlign:"right"}},l.a.createElement(pe.a,{size:"small",type:"primary",onClick:function(){return e.setState({billModal:!0})}},l.a.createElement(Qe.a,null)," Contract"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:i,size:"small"}),a&&l.a.createElement(sn,{visible:a,editCntrct:n,close:function(){return e.setState({billModal:!1,editCntrct:!1})},callBack:this.callBack,editEmp:s}))}}]),a}(n.Component),mn="".concat(D,"/employees/"),fn=function(e){return ke.a.get(mn+"".concat(e,"/leases"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},gn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editLease,n=t.empId;a&&e.getRecord(n,a)},e.submit=function(){e.leaseRef.current&&e.leaseRef.current.refs.lease_form.submit()},e.LeaseCall=function(t){var a=e.props,n=a.editLease,l=a.empId,i=t.obj;i.employeeId=l,n?(console.log("edit"),e.editRecord(i)):(console.log("emes"),e.addContract(i))},e.addContract=function(t){e.setState({loading:!0});var a=e.props,n=a.callBack;(function(e,t){return H.b.loading({content:"Loading...",key:e}),ke.a.post(mn+"".concat(e,"/leases"),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(a.empId,t).then((function(e){console.log(e),e.success&&n()}))},e.getRecord=function(t,a){(function(e,t){return ke.a.get(mn+"".concat(e,"/leases/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&(n.startDate=n.startDate&&ot()(n.startDate),n.endDate=n.endDate&&ot()(n.endDate),n.totalDeduction=(n.preTaxDeductionAmount?n.preTaxDeductionAmount:0)+(n.postTaxDeductionAmount?n.postTaxDeductionAmount:0),A(e.headers&&e.headers.authorization)),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t,a).then((function(t){var a=t.success,n=t.data;a&&(e.leaseRef.current.refs.lease_form.setFieldsValue({obj:n}),console.log(n))}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editLease,l=a.callBack;(function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.put(mn+"".concat(e,"/leases/").concat(t),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))})(a.empId,n,t).then((function(e){e.success&&l()}))},e.leaseRef=l.a.createRef(),e.state={leaseSubmitted:!1,loading:!1,LeaseFields:{formId:"lease_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"Leasing Company Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Lease Start Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"companyName",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},rangeMin:function(t){var a=e.leaseRef.current.refs.lease_form.getFieldValue().obj;return a.endDate&&t>a.endDate}},{Placeholder:"Lease End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"MV Rego Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},rangeMax:function(t){var a=e.leaseRef.current.refs.lease_form.getFieldValue().obj;return a.startDate&&t<a.startDate}},{object:"obj",fieldCol:12,key:"vehicleRegistrationNo",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{Placeholder:"MV Make & Model",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Financer Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"vehicleMakeModel",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"financerName",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{Placeholder:"Amount Financed",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Installment Frequency",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"financedAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"installmentFrequency",size:"small",data:[{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5},{label:"Quarterly",value:6}],type:"Select",itemStyle:{marginBottom:1}},{Placeholder:"Pre Tax Deduction",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Post Tax Deduction",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"preTaxDeductionAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},onChange:function(){var t=e.leaseRef.current.refs.lease_form.getFieldsValue().obj;t.totalDeduction=(t.preTaxDeductionAmount?t.preTaxDeductionAmount:0)+(t.postTaxDeductionAmount?t.postTaxDeductionAmount:0),e.leaseRef.current.refs.lease_form.setFieldsValue({obj:t})}},{object:"obj",fieldCol:12,key:"postTaxDeductionAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},onChange:function(){var t=e.leaseRef.current.refs.lease_form.getFieldsValue().obj;t.totalDeduction=(t.preTaxDeductionAmount?t.preTaxDeductionAmount:0)+(t.postTaxDeductionAmount?t.postTaxDeductionAmount:0),e.leaseRef.current.refs.lease_form.setFieldsValue({obj:t})}},{Placeholder:"Total Deduction",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"totalDeduction",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editLease,n=t.visible,i=t.close,r=this.state,s=r.LeaseFields,o=r.loading;return l.a.createElement(Je.a,{title:a?"Edit Novated Lease":"Add Novated Lease",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:i,width:900},l.a.createElement(rt,{ref:this.leaseRef,Callback:this.LeaseCall,FormFields:s}))}}]),a}(n.Component),pn=Ie.a.Title,bn=pa.b.Item,hn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([fn(t),Ga(t)]).then((function(a){console.log(a[0].data),e.setState({data:a[0].data,employee:a[1].basic?a[1].basic:{},infoModal:!1,empId:t,editLease:!1})})).catch((function(e){console.log(e)}))},e.getList=function(){var t=e.state.empId;fn(t).then((function(t){e.setState({data:t.data,infoModal:!1,editLease:!1})}))},e.handleDelete=function(t){console.log(t),function(e,t){return ke.a.delete(mn+"".concat(e,"/leases/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))}(e.state.empId,t).then((function(t){t.success&&e.getList()}))},e.closeModal=function(){e.setState({infoModal:!1,editLease:!1})},e.callBack=function(t){e.getList()},e.columns=[{title:"Company Name",dataIndex:"companyName",key:"companyName"},{title:"Financer Name",dataIndex:"financerName",key:"financerName"},{title:"Finance Amount",dataIndex:"financedAmount",key:"financedAmount",render:function(e){return"".concat(x(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM YYYY")}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&ot()(e).format("ddd DD MM YYYY")}},{title:"Action",key:"id",dataIndex:"id",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0,editLease:t})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={infoModal:!1,empId:!1,data:[],employee:{},editLease:!1},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.empId,r=t.employee,s=t.editLease,o=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:"Employee Information",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(bn,{label:"First Name"},r.firstName),l.a.createElement(bn,{label:"Last Name"},r.lastName),l.a.createElement(bn,{label:"Phone"},r.phoneNumber," "),l.a.createElement(bn,{label:"Email"},r.email),l.a.createElement(bn,{label:"Address"},r.address),l.a.createElement(bn,{label:"Date Of Birth"},r.dateOfBirth?ot()(r.dateOfBirth).format("DD MM YYYY"):null),l.a.createElement(bn,{label:"Gender"},r.gender)),l.a.createElement(p.a,{justify:"space-between",style:{paddingTop:30}},l.a.createElement(b.a,null,l.a.createElement(pn,{level:4},"Novated Lease")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({infoModal:!0,editLease:!1})},size:"small"},l.a.createElement(Qe.a,null),"Novated Lease")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:o,dataSource:a,size:"small"}))),n&&l.a.createElement(gn,{visible:n,empId:i,editLease:s,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),yn="".concat(D,"/sub-contractors"),kn=function(e){return ke.a.get(yn+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=function(e){var t=e.contactPersonOrganization?e.contactPersonOrganization.contactPerson:{},a={cpCode:"Sub-00".concat(t.id),firstName:t.firstName,lastName:t.lastName,gender:t.gender,dateOfBirth:t.dateOfBirth?ot()(t.dateOfBirth):null,phoneNumber:t.phoneNumber,email:t.email,address:t.address,stateId:t.stateId,username:e.username,roleId:e.roleId},n={nextOfKinDateOfBirth:e.nextOfKinDateOfBirth?ot()(e.nextOfKinDateOfBirth):null,nextOfKinEmail:e.nextOfKinEmail,nextOfKinGender:e.nextOfKinGender,nextOfKinName:e.nextOfKinName,nextOfKinPhoneNumber:e.nextOfKinPhoneNumber,nextOfKinRelation:e.nextOfKinRelation},l=e.employmentContracts.length>0?e.employmentContracts[0]:{},i={employeeId:l.employeeId,payslipEmail:l.payslipEmail,startDate:l.startDate?ot()(l.startDate):null,endDate:l.endDate?ot()(l.endDate):null,noOfHours:l.noOfHours,noOfHoursPer:l.noOfHoursPer,remunerationAmount:l.remunerationAmount,remunerationAmountPer:l.remunerationAmountPer,comments:l.comments,fileId:l.fileId,file:l.fileId?[{id:l.file.id,createdAt:l.file.createdAt,fileId:l.file.id,uid:l.file.uniqueName,name:l.file.originalName,type:l.file.type,url:"".concat(D,"/files/").concat(l.file.uniqueName),thumbUrl:w(l.file.type)}]:[]};return{basic:a,kin:n,billing:i}}(n),r=i.basic,s=i.kin,o=i.billing;return A(e.headers&&e.headers.authorization),{success:a,data:n,basic:r,billing:o,kin:s}}return{success:!1}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))};var En=la.a.TabPane,vn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.state.editCont;t&&e.getRecord(t),Bt().then((function(t){t.success&&e.setState({ORGS:t.data.filter((function(e){return 1!==e.value}))})}))},e.componentDidMount=function(){var t=e.props.editCont;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([Nt(),Ht(),t?e.getRecord(t):Bt()]).then((function(a){var n=e.state.BasicFields;n[15].data=a[0].data,n[17].data=a[1].data,e.setState({BasicFields:n,sUsername:t?a[2].username:null,ORGS:t?[]:a[2].data.filter((function(e){return 1!==e.value}))})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a=e.props.editCont;e.setState({loading:!0});var n=e.state.fileIds,l=t.basic,i=t.billing,r=t.kin;i.fileId=n;var s=Object(Se.a)(Object(Se.a)(Object(Se.a)({},l),r),{},{latestContract:i});a?e.editRecord(s):e.addContactor(s)},e.addContactor=function(t){var a=e.props.callBack,n=e.state;n.sContact,n.sOrg;e.setState({loading:!0}),console.log(t),function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.post(yn,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a?(A(e.headers&&e.headers.authorization),{success:a,data:e.data}):{success:!1}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))}(t).then((function(e){e.success&&a()}))},e.getRecord=function(t){return kn(t).then((function(t){if(t.success){var a=t.basic,n=t.kin,l=t.billing;return e.formRef.current.setFieldsValue({basic:a,kin:n,billing:l}),e.setState({fileIds:l.fileId,fileList:l.file}),{username:a.username}}}))},e.editRecord=function(t){var a,n,l=e.props,i=l.editCont,r=l.callBack;e.setState({loading:!0}),(a=i,n=t,H.b.loading({content:"Loading...",key:a}),ke.a.put(yn+"/".concat(a),n,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&r()}))},e.onCancel=function(){e.props.close()},e.onOrg=function(t){var a="helpers/contact-persons?organizationId=".concat(t,"&active=0&associated=1");wt(a).then((function(a){a.success&&e.setState({sOrg:t,CONTACTS:a.data})}))},e.onPerson=function(t){Ka(t).then((function(a){a.success&&(a.data.cpCode="Con-00".concat(a.data.id),a.data.dateOfBirth=a.data.dateOfBirth&&ot()(a.data.dateOfBirth),e.formRef.current.setFieldsValue({basic:a.data}),e.setState({sContact:t}))}))},e.onClear=function(t,a){e.setState({sContact:a,sOrg:t},(function(){e.formRef.current.resetFields()}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.onFinishFailed=function(t){t.values;var a=t.errorFields;t.outOfDate;e.setState({activeKey:a[0].name[0]})},e.formRef=l.a.createRef(),e.state={editCont:!1,CONTACTS:[],sContact:null,ORGS:[],sOrg:null,sUsername:null,loading:!1,activeKey:"basic",fileIds:null,fileList:[],data:{},BasicFields:[{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{object:"basic",fieldCol:12,key:"cpCode",size:"small",rules:[{required:!0,message:"Code is Required"}],type:"Input",readOnly:!0,labelAlign:"left",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{fieldCol:12,size:"small",Placeholder:"Last Name",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:5}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",type:"Input",disabled:!1,itemStyle:{marginBottom:10}},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Others",value:"O"}],itemStyle:{marginBottom:10},type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Role",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"roleId",size:"small",rules:[{required:!0,message:"Role is required!!"}],type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}}],KinFields:[{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:1}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:1}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Contractor",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}],BillingFields:[{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:1},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t<a.endDate}},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"End Date is Required"}],itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{Placeholder:"Contract Payment Basis",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Total Fee",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"remunerationAmountPer",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is Required"}],onChange:function(t,a){var n=e.state.BillingFields;n[5].Placeholder="Total Fee ".concat(t?a.label:""),e.setState({BillingFields:n})},itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Total Fee is Required"}],itemStyle:{marginBottom:1}},{Placeholder:"Full Work Hours",fieldCol:24,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hour is Reqired"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfHoursPer",size:"small",type:"Select",data:[{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Frequency is Required"}],itemStyle:{marginBottom:1}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editCont,n=t.visible,i=this.state,r=i.BasicFields,s=i.BillingFields,o=i.KinFields,c=i.sContact,d=i.CONTACTS,u=i.ORGS,m=i.sOrg,f=i.fileIds,g=i.loading,p=i.fileList,h=i.activeKey;return l.a.createElement(Je.a,{title:a?"Edit Contractor":"Add Contractor",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:g,htmlType:"submit",form:"my-form"},okText:g?l.a.createElement(Ze.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{startDate:null}}},!a&&l.a.createElement(b.a,{span:7,style:{marginBottom:"1em"}},l.a.createElement(Ce.a.Item,{name:["basic","organizationId"]},l.a.createElement(ze.a,{value:m,placeholder:"Organization",options:u,showArrow:!0,showSearch:!0,size:"small",allowClear:!0,onChange:this.onOrg,onClear:function(){return e.onClear(null,null)},optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),!a&&l.a.createElement(b.a,{span:7,style:{marginLeft:"auto"}},l.a.createElement(Ce.a.Item,{name:["basic","contactPersonId"]},l.a.createElement(ze.a,{value:c,placeholder:"Contact Person",options:d,showArrow:!0,showSearch:!0,disabled:!m,size:"small",allowClear:!0,onChange:this.onPerson,onClear:function(){return e.onClear(m,null)},optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),l.a.createElement(b.a,{span:7,style:{marginLeft:"auto"}},l.a.createElement(Ce.a.Item,{name:["basic","username"],rules:[{required:!0,type:"email",message:"Email is Required"}]},l.a.createElement(Te.a,{placeholder:"Email",size:"small",style:{width:"100%"}}))),l.a.createElement(la.a,{type:"card",activeKey:h,onChange:function(t){e.setState({activeKey:t})}},l.a.createElement(En,{tab:"Contractor Details",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:r})),l.a.createElement(En,{tab:"Subcontractor Contracts",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:s}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(je.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:p,onRemove:this.onRemove},!f&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(Ua.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(En,{tab:"Next of Kin",key:"kin",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:o})))))}}]),a}(n.Component),Sn=Ie.a.Title,Cn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.getList=function(){var t=JSON.parse(M().permissions).USERS;ke.a.get(yn,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&e.setState({data:a.data,infoModal:!1,editCont:!1,permissions:t})}))},e.callBack=function(){e.getList()},e.handleDelete=function(t){var a=Object(ue.a)(e.state.data);e.setState({data:a.filter((function(e){return e.code!==t}))})},e.closeModal=function(){e.setState({infoModal:!1,editCont:!1})},e.columns=[{title:"Code",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&"Sub-00".concat(e.contactPerson.id)}},{title:"First Name",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.firstName}},{title:"Last Name",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.lastName}},{title:"Organisation",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.organization&&e.organization.name}},{title:"Phone",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.phoneNumber}},{title:"Email",dataIndex:"contactPersonOrganization",key:"contactPersonOrganization",render:function(e){return e&&e.contactPerson&&e.contactPerson.email}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0,editCont:t.id})},disabled:e.state&&!e.state.permissions.UPDATE},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(t.id,"/info")},className:"nav-link"},"View")),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(t.id,"/contracts")},className:"nav-link"},"Contracts")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={infoModal:!1,editCont:!1,data:[],permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.editCont,r=t.permissions,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Sn,{level:4},"Contractors")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"},l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(Qe.a,null),"Contactors")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:a,size:"small"}))),n&&l.a.createElement(vn,{visible:n,editCont:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),jn=pa.b.Item,Pn=la.a.TabPane,On=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(M().permissions).USERS;kn(t).then((function(n){n.success&&e.setState({data:n.basic,editCont:t,permissions:a})}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){(function(e){return ke.a.delete(yn+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t.success&&e.props.history.push("/sub-contractors")}))},e.callBack=function(){var t=e.state.editCont;e.getRecord(t)},e.state={infoModal:!1,editCont:!1,data:{},permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.editCont,r=t.permissions,o=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,"Basic Information"),l.a.createElement(b.a,null,l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0})},disabled:r.UPDATE},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(i,"/contracts")},className:"nav-link"},"Contracts")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:o,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(jn,{label:"First Name"},a.firstName),l.a.createElement(jn,{label:"Last Name"},a.lastName),l.a.createElement(jn,{label:"Phone"},a.phoneNumber," "),l.a.createElement(jn,{label:"Email"},a.email),l.a.createElement(jn,{label:"Address"},a.address),l.a.createElement(jn,{label:"Date Of Birth"},a.dateOfBirth?ot()(a.dateOfBirth).format("DD MM YYYY"):null),l.a.createElement(jn,{label:"Gender"},a.gender)),i&&l.a.createElement(la.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Pn,{tab:"Projects",key:"projects"},l.a.createElement(Ma,{targetId:i,customUrl:"helpers/work?type=P&employee=".concat(i)})),l.a.createElement(Pn,{tab:"Comments",key:"comments"},l.a.createElement(za,{targetType:"CON",targetId:i})),l.a.createElement(Pn,{tab:"Attachments",key:"attachments"},l.a.createElement(La,{targetType:"CON",targetId:i}))),n&&l.a.createElement(vn,{visible:n,editCont:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),In="".concat(D,"/sub-contractors-contracts"),Dn=function(e){return ke.a.get(In+"?subContractorId=".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Tn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.editCntrct;t&&e.getRecord(t)},e.onFinish=function(t){var a=e.state.fileIds,n=e.props,l=n.editCntrct,i=n.editEmp,r=t.billing;r.noOfHoursPer=1,r.startDate=r.startDate?ot()(r.startDate).valueOf():null,r.endDate=r.endDate?ot()(r.endDate).valueOf():null,r.subContractorId=i,r.fileId=a,l?(console.log("edit"),e.editRecord(r)):(console.log("emes"),e.addContract(r))},e.addContract=function(t){e.setState({loading:!0}),console.log(t);var a=e.props.callBack;(function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.post(In,e,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(e){console.log(e),e.success&&a()}))},e.getRecord=function(t){var a;(a=t,ke.a.get(In+"/".concat(a),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;return a&&(A(e.headers&&e.headers.authorization),n.file=n.fileId?[{id:n.file.id,createdAt:n.file.createdAt,fileId:n.file.id,uid:n.file.uniqueName,name:n.file.originalName,type:n.file.type,url:"".concat(D,"/files/").concat(n.file.uniqueName),thumbUrl:w(n.file.type)}]:[]),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){var a=t.success,n=t.data;console.log(t),a&&(n.startDate=n.startDate&&ot()(n.startDate),n.endDate=n.endDate&&ot()(n.endDate),e.formRef.current.setFieldsValue({billing:n}),e.setState({fileIds:n.fileId,fileList:n.file}))}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editCntrct,l=a.callBack;(function(e,t){return H.b.loading({content:"Loading...",key:e}),ke.a.put(In+"/".concat(e),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(n,t).then((function(e){e.success&&l()}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editCntrct:!1,loading:!1,fileList:[],fileIds:null,data:{},BillingFields:[{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is required"}],labelAlign:"right",rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{Placeholder:"Contract Payment Basis",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Total Fee",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"remunerationAmountPer",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],onChange:function(t,a){var n=e.state.BillingFields;n[5].Placeholder="Total Fee ".concat(t?a.label:""),e.setState({BillingFields:n})}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Total Fee is Required"}]},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editCntrct,a=e.visible,n=e.close,i=this.state,r=i.BillingFields,s=i.loading,o=i.fileIds,c=i.fileList;return l.a.createElement(Je.a,{title:t?"Edit Billing":"Add Billing",maskClosable:!1,centered:!0,visible:a,okButtonProps:{readOnly:s,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{entryDate:ot()(new Date)}}},l.a.createElement(He,{FormFields:r})),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(je.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:c,onRemove:this.onRemove},!o&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(Ua.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))}}]),a}(n.Component),Fn=(Ie.a.Title,pa.b.Item),zn={1:"Hourly",2:"Daily",3:"Weekly",4:"Fortnightly",5:"Monthly"},xn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([Dn(t),kn(t)]).then((function(t){e.setState({data:t[0].data,intro:t[1].basic,billModal:!1,editCntrct:!1})})).catch((function(e){console.log(e)}))},e.getList=function(t){Dn(t).then((function(t){t.success&&e.setState({data:t.data,billModal:!1,editCntrct:!1})}))},e.callBack=function(){var t=e.props.match.params.id;e.getList(t)},e.handleDelete=function(t){(function(e){return ke.a.delete(In+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){var a=e.props.match.params.id;e.getList(a)}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"Rate",dataIndex:"remunerationAmount",key:"remunerationAmount",render:function(e){return"".concat(x(e))}},{title:"Rate Duration",dataIndex:"remunerationAmountPer",key:"remunerationAmountPer",render:function(e){return zn[e]}},{title:"Action",key:"action",align:"right",render:function(t){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return e.handleDelete(t.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){e.setState({billModal:!0,editCntrct:t.id})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={intro:{},data:[],billModal:!1,editCntrct:!1},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.billModal,n=t.editCntrct,i=t.data,r=t.intro,s=this.props.match.params.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:"Contract Information",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Fn,null,"Code: ",l.a.createElement("b",null,r.cpCode)),l.a.createElement(Fn,null,"First Name: ",l.a.createElement("b",null,r.firstName)),l.a.createElement(Fn,null,"Last Name: ",l.a.createElement("b",null,r.lastName)),l.a.createElement(Fn,{style:{textAlign:"right"}},l.a.createElement(pe.a,{size:"small",type:"primary",onClick:function(){return e.setState({billModal:!0})}},l.a.createElement(Qe.a,null)," Contract"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:i,size:"small"}),a&&l.a.createElement(Tn,{visible:a,editCntrct:n,close:function(){return e.setState({billModal:!1,editCntrct:!1})},callBack:this.callBack,editEmp:s}))}}]),a}(n.Component),An=a(621),Mn=la.a.TabPane,Rn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.editCP;Promise.all([Nt(),ke.a.get("".concat(D,"/standard-skills"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];if(n.map((function(e){l.push({value:e.id,label:e.label,levels:e.standardSkillStandardLevels.map((function(e){return{value:e.id,label:e.standardLevel.label}}))})})),A(e.headers&&e.headers.authorization),a)return{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})),Bt()]).then((function(a){var n=e.state,l=n.BasicFields,i=n.SecurityFields;l.fields[11].data=a[0].data,i.fields[7].data=a[2].data,e.setState({BasicFields:l,SecurityFields:i,skill_data:a[1].data,orgs_data:a[2].data},(function(){t?e.getRecord(t):e.setState({associateFields:Object(Se.a)(Object(Se.a)({},e.state.associateFields),{},{fields:e.newAssociateField(0)}),SkillFields:Object(Se.a)(Object(Se.a)({},e.state.SkillFields),{},{fields:e.newSkillField(0)})})}))})).catch((function(e){console.log(e)}))},e.insertSkill=function(){var t,a=e.state.SkillFields,n=a.fields[a.fields.length-1],l=n?parseInt(n.key)+1:0;a.fields=(t=a.fields).concat.apply(t,Object(ue.a)(e.newSkillField(l))),e.setState({SkillFields:a})},e.newSkillField=function(t,a){var n=e.state.skill_data,i=["skill".concat(t),"level".concat(t),t];return[{object:"skill",fieldCol:11,layout:{wrapperCol:{span:23}},key:i[0],size:"small",data:n||[],type:"Select",labelAlign:"left",onChange:function(e,t){var a=this.state.SkillFields;a.fields.map((function(e){return e.key===i[1]?(e.data=t?t.levels:[],e):e}));var n=this.skillRef.current.refs.skill_form.getFieldsValue().skill;delete n[i[1]],this.skillRef.current.refs.skill_form.setFieldsValue({skill:n}),this.setState({SkillFields:a})}.bind(Object(St.a)(e))},{object:"skill",fieldCol:11,layout:{wrapperCol:{span:20}},key:i[1],size:"small",data:a||[],type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:2,size:"small",Placeholder:l.a.createElement(Ct.a,null),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){var a=this.state.SkillFields;a.fields=a.fields.filter((function(e){return e.key!==i[0]&&e.key!==i[1]&&e.key!==i[2]}));var n=this.skillRef.current.refs.skill_form.getFieldsValue().skill;delete n[i[0]],delete n[i[1]],delete n[i[2]],this.skillRef.current.refs.skill_form.setFieldsValue({skill:n}),this.setState({SkillFields:a})}.bind(Object(St.a)(e))}]},e.insertAssociate=function(){var t,a=e.state.associateFields,n=a.fields[a.fields.length-1],l=n?parseInt(n.key)+1:0;a.fields=(t=a.fields).concat.apply(t,Object(ue.a)(e.newAssociateField(l))),e.setState({associateFields:a})},e.newAssociateField=function(t){var a=e.state.orgs_data,n=["organizationId".concat(t),"designation".concat(t),"startDate".concat(t),"endDate".concat(t),"id".concat(t),t];return[{object:"asso",fieldCol:6,layout:{wrapperCol:{span:23}},key:n[0],size:"small",data:a,type:"Select"},{object:"asso",fieldCol:6,layout:{wrapperCol:{span:23}},key:n[1],size:"small",type:"Input"},{object:"asso",fieldCol:5,layout:{wrapperCol:{span:23}},key:n[2],size:"small",type:"DatePicker"},{object:"asso",fieldCol:5,layout:{wrapperCol:{span:23}},key:n[3],size:"small",type:"DatePicker"},{object:"asso",fieldCol:6,key:n[4],hidden:!0,size:"small",type:"Input"},{fieldCol:2,size:"small",Placeholder:l.a.createElement(Ct.a,null),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(t,a){var l=e.state.associateFields;l.fields=l.fields.filter((function(e){return e.key!==n[0]&&e.key!==n[1]&&e.key!==n[2]&&e.key!==n[3]&&e.key!==n[4]&&e.key!==n[5]})),e.setState({associateFields:l})}}]},e.submit=function(){e.basicRef.current&&e.basicRef.current.refs.basic_form.submit(),e.associateRef.current&&e.associateRef.current.refs.associate_form.submit(),e.skillRef.current&&e.skillRef.current.refs.skill_form.submit(),e.securityRef.current&&e.securityRef.current.refs.security_form.submit()},e.BasicCall=function(t){e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),t.basic),basicSubmitted:!0},(function(){var t=e.state,a=t.basicSubmitted,n=t.associateSubmitted,l=t.skillSubmitted,i=t.securitySubmitted,r=t.mergeObj;a&&n&&l&&i&&(e.props.editCP?(console.log("edit"),e.editRecord(r)):e.addPerson(r))}))},e.AssociateCall=function(t){var a=t.asso,n=[],l=a?Object.keys(a).length/5:0;if(a&&Object.keys(a).length>0)for(var i=0;i<l;i++){var r;if(a["organizationId".concat(i)])n.push({id:null!==(r=a["id".concat(i)])&&void 0!==r?r:0,designation:a["designation".concat(i)],organizationId:a["organizationId".concat(i)],startDate:a["startDate".concat(i)],endDate:a["endDate".concat(i)]})}e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),{},{contactPersonOrganizations:n}),associateSubmitted:!0},(function(){return e.validateForm()}))},e.SkillCall=function(t){var a=t.skill,n=[],l=a?Object.keys(a).length/2:0;if(a&&Object.keys(a).length>0)for(var i=0;i<l;i++)n.push(a["level".concat(i)]);e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),{},{standardSkillStandardLevelIds:n}),skillSubmitted:!0},(function(){return e.validateForm()}))},e.SecurityCall=function(t){e.setState({mergeObj:Object(Se.a)(Object(Se.a)({},e.state.mergeObj),t.sec),securitySubmitted:!0},(function(){return e.validateForm()}))},e.validateForm=function(){var t=e.state,a=t.basicSubmitted,n=t.associateSubmitted,l=t.skillSubmitted,i=t.securitySubmitted,r=t.mergeObj;a&&n&&l&&i&&(e.props.editCP?(console.log("edit"),e.editRecord(r)):e.addPerson(r))},e.addPerson=function(t){var a,n=e.props.callBack;console.log(t),e.setState({basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,loading:!0}),(a=t,H.b.loading({content:"Loading...",key:1}),ke.a.post(_a,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t.success&&(e.setState({loading:!1}),n())}))},e.getRecord=function(t){Ka(t).then((function(t){console.log(t.data),t.success&&function(){var a=t.data,n=e.state,l=n.SkillFields,i=n.associateFields,r=n.skill_data,s={},o={},c=a.standardSkillStandardLevels,d=a.contactPersonOrganizations,u=c.length<d.length?d.length:c.length;console.log("sameer",u,d.length,c.length);for(var m=function(t){console.log("sameer",u,d.length,c.length);var a=c[t],n=d[t];a&&r.map((function(n){n.levels.map((function(i){i.value===a.id&&(l.fields=l.fields.concat(e.newSkillField(t,n.levels)),s["level".concat(t)]=i.value,s["skill".concat(t)]=n.value)}))})),n&&(i.fields=i.fields.concat(e.newAssociateField(t)),o["id".concat(t)]=n.id,o["designation".concat(t)]=n.designation,o["organizationId".concat(t)]=n.organizationId,o["startDate".concat(t)]=n.startDate&&ot()(n.startDate),o["endDate".concat(t)]=n.endDate&&ot()(n.endDate))},f=0;f<u;f++)m(f);console.log(o),0===c.length&&(console.log(c.length,"skill length null"),l.fields=l.fields.concat(e.newSkillField(0))),0===d.length&&(console.log(d.length,"assosiation length null"),i.fields=i.fields.concat(e.newAssociateField(0)));var g={firstName:a.firstName,lastName:a.lastName,email:a.email,gender:a.gender,phoneNumber:a.phoneNumber,address:a.address,stateId:a.stateId},p={clearanceLevel:a.clearanceLevel,clearanceGrantedDate:a.clearanceGrantedDate&&ot()(a.clearanceGrantedDate),clearanceExpiryDate:a.clearanceExpiryDate&&ot()(a.clearanceExpiryDate),clearanceSponsorId:a.clearanceSponsorId};e.basicRef.current.refs.basic_form.setFieldsValue({basic:g}),e.associateRef.current.refs.associate_form.setFieldsValue({asso:o}),e.skillRef.current.refs.skill_form.setFieldsValue({skill:s}),e.securityRef.current.refs.security_form.setFieldsValue({sec:p}),e.setState({associateFields:i,SkillFields:l})}()}))},e.editRecord=function(t){console.log(t);var a,n=e.props,l=n.editCP,i=n.callBack;t.id=l,e.setState({basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,loading:!0}),console.log(t),(a=t,H.b.loading({content:"Loading...",key:a.id}),ke.a.put(_a+"/".concat(a.id),a,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a.id}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t.success&&(console.log("hereh"),e.setState({loading:!1}),i())}))},e.onCancel=function(){var t=e.state,a=t.BasicFields,n=t.associateFields,l=t.SkillFields;delete a.initialValues,delete n.initialValues,delete l.initialValues,e.setState({basicSubmitted:!1,associateSubmitted:!1,skillSubmitted:!1,BasicFields:Object(Se.a)({},a),associateFields:Object(Se.a)({},n),SkillFields:Object(Se.a)({},l),mergeObj:{}},(function(){e.props.close()}))},e.basicRef=l.a.createRef(),e.associateRef=l.a.createRef(),e.skillRef=l.a.createRef(),e.securityRef=l.a.createRef(),e.priority_data=[{value:1,label:"Superstar"},{value:2,label:"Senior"},{value:3,label:"Middle"},{value:4,label:"Junior"},{value:5,label:"Trainee"},{value:6,label:"Internee"}],e.state={editCP:!1,basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,skill_data:[],orgs_data:[],loading:!1,BasicFields:{formId:"basic_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"First Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Last Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"firstName",size:"small",rules:[{required:!0,message:"First Name is Required"}],type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",rules:[{required:!0,message:"Last Name is Required"}],type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{Placeholder:"Gender",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",rangeMin:!0,rules:[{required:!0,message:"Gender is Required"}],size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],type:"Select",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"stateId",rules:[{required:!0,message:"State is Required"}],size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Address",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:20}}]},associateFields:{formId:"associate_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[]},SkillFields:{formId:"skill_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[]},SecurityFields:{formId:"security_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"Clearance Level",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Date Granted",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"sec",fieldCol:12,key:"clearanceLevel",size:"small",data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select",itemStyle:{marginBottom:10},onChange:function(t){var a=e.state.SecurityFields.fields;t?(a[1].rangeMin=!0,a[4].rangeMin=!0,a[5].rangeMin=!0,a[3].rules=[{required:!0,message:"Date Granted is required"}],a[6].rules=[{required:!0,message:"Expiry Date is required"}],a[7].rules=[{required:!0,message:"Current Sponsor is required"}]):(a[1].rangeMin=!1,a[4].rangeMin=!1,a[5].rangeMin=!1,a[3].rules=[{required:!1,message:""}],a[6].rules=[{required:!1,message:""}],a[7].rules=[{required:!1,message:""}]),e.setState({SecurityFields:Object(Se.a)(Object(Se.a)({},e.state.SecurityFields),{},{fields:Object(ue.a)(a)})})}},{object:"sec",fieldCol:12,key:"clearanceGrantedDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{Placeholder:"Expiry Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Current Sponsor",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"sec",fieldCol:12,key:"clearanceExpiryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"sec",fieldCol:12,key:"clearanceSponsorId",size:"small",type:"Select",labelAlign:"right",itemStyle:{marginBottom:10}}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editCP,n=t.visible,i=this.state,r=i.BasicFields,s=i.associateFields,o=i.SkillFields,c=i.SecurityFields,d=i.loading;return l.a.createElement(Je.a,{title:a?"Edit Contact Person":"Add Contact Person",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:d},okText:d?l.a.createElement(Ze.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(la.a,{type:"card"},l.a.createElement(Mn,{tab:"Basic",key:"basic",forceRender:!0},l.a.createElement(rt,{ref:this.basicRef,Callback:this.BasicCall,FormFields:r})),l.a.createElement(Mn,{tab:"Association",key:"association",forceRender:!0},l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:this.insertAssociate},l.a.createElement(An.a,null)," Insert Association")),l.a.createElement(b.a,{span:"24"},l.a.createElement(p.a,null,l.a.createElement(b.a,{span:"6"},"Organisation"),l.a.createElement(b.a,{span:"6"},"Designation"),l.a.createElement(b.a,{span:"5"},"Start Date"),l.a.createElement(b.a,{span:"5"},"End Date")))),l.a.createElement(p.a,null,l.a.createElement(rt,{ref:this.associateRef,Callback:this.AssociateCall,FormFields:s}))),l.a.createElement(Mn,{tab:"Skill",key:"skill",forceRender:!0},l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:this.insertSkill},l.a.createElement(An.a,null)," Insert Skill")),l.a.createElement(b.a,{span:"24"},l.a.createElement(p.a,null,l.a.createElement(b.a,{span:"11"},"Skill"),l.a.createElement(b.a,{span:"11"},"Level")))),l.a.createElement(p.a,null,l.a.createElement(rt,{ref:this.skillRef,Callback:this.SkillCall,FormFields:o}))),l.a.createElement(Mn,{tab:"Security Clearance",key:"security",forceRender:!0},l.a.createElement(rt,{ref:this.securityRef,Callback:this.SecurityCall,FormFields:c}))))}}]),a}(n.Component),Nn=Ie.a.Title,wn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){var e=JSON.parse(M().permissions).CONTACT_PERSONS;ke.a.get(_a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return console.log(e),{error:"Please login again!",success:!1,message:e.message}})).then((function(t){console.log(t),t.success&&n.setState({data:t.data,openModal:!1,editCP:!1,permissions:e})}))},n.handleDelete=function(e){(function(e){return ke.a.delete(_a+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e.success&&n.getData()}))},n.toggelModal=function(e){n.setState({openModal:e,editCP:!1})},n.Callback=function(){n.getData()},n.submit=function(){n.contactForm.current.refs.contact_form.submit()},n.contactForm=l.a.createRef(),n.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Contact",dataIndex:"phoneNumber",key:"phoneNumber"},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){n.setState({openModal:!0,editCP:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editCP:!1,permissions:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editCP,r=t.permissions,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Nn,{level:4},"Contact Persons")),l.a.createElement(b.a,{style:{textAlign:"end"},span:12},l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"},l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,{offset:1},l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0})},disabled:!r.ADD},l.a.createElement(Qe.a,null),"Contact Person")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:a,size:"small"}))),n&&l.a.createElement(Rn,{visible:n,editCP:i,close:this.toggelModal,callBack:this.Callback}))}}]),a}(n.Component),Bn=a(165),Ln=a(210),Yn=a(320),qn=a(623),Vn=a(622),Hn=(a(503),a(307)),Un=a.n(Hn),_n=a(239),Kn=a.n(_n),Wn="".concat(D,"/timesheets/"),Gn=function(e){return H.b.loading({content:"Loading...",key:1}),ke.a.delete(Wn+"entries/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),H.b.success({content:l,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))},Jn=function(e,t,a){return H.b.loading({content:"Loading...",key:1}),ke.a.post(Wn+"".concat(e.startDate,"&").concat(e.endDate,"&").concat(e.userId,"/milestoneEntries").concat(t),a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),H.b.success({content:l,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))},Qn=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.timeObj.milestoneEntryId;e.getRecord("PEN",t[0])},e.getRecord=function(t,a){var n=e.props.timeObj.notes;Da(t,a).then((function(t){t.success&&e.setState({fileList:t.fileList,fileIds:t.fileIds,notes:n})}))},e.handleUpload=function(){var t=Object(ya.a)(ha.a.mark((function t(a){var n,l,i,r,s;return ha.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,i=a.file,r=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),r({percent:t.loaded/t.total*100})}},s.append("files",i),Oa(s).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[].concat(Object(ue.a)(e.state.fileList),[t.file]),fileIds:[].concat(Object(ue.a)(e.state.fileIds),[t.file.fileId])});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))},e.addNotes=function(){e.setState({loading:!0});var t,a,n=e.props,l=n.timeObj,i=n.callBack,r=e.state,s=r.notes,o=(r.fileIds,r.fileList),c={note:s,attachments:o.length>0?[o[0].fileId]:[],milestoneEntryIds:l.milestoneEntryId};(t=l.milestoneEntryId[0],a=c,H.b.loading({content:"Loading...",key:t}),ke.a.patch(Wn+"milestoneEntriesUpdate",a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message,i=a.data;return R(l),H.b.success({content:l,key:t}),n?(i.notes,i.attachment,A(e.headers&&e.headers.authorization),{success:n,data:i}):{success:n}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&i(e.data)}))},e.state={fileList:[],progress:0,fileIds:[],notes:void 0},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.editTime,i=t.loading,r=t.close,s=(t.timeObj,this.state),o=s.fileList,c=s.notes;return l.a.createElement(Je.a,{title:n?"Edit Attachments & Notes":"Add Attachments & Notes",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.addNotes()},okButtonProps:Object(fe.a)({disabled:i},"disabled",!1),okText:i?l.a.createElement(Ze.a,null):"Save",onCancel:r,width:540},l.a.createElement(p.a,{gutter:[0,30]},l.a.createElement(b.a,{span:24},l.a.createElement("div",null,l.a.createElement(Kn.a,{name:"file",multiple:!1,maxCount:1,listType:"picture",className:"upload-list-inline",disabled:!1,customRequest:this.handleUpload,onRemove:this.onRemove,fileList:o},o.length<1&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement(Vn.a,null)),l.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"))))),l.a.createElement(b.a,{span:24},l.a.createElement(Un.a,{placeholder:"Enter Your Notes....",autoSize:{minRows:3,maxRows:5},allowClear:!0,onChange:function(t){e.setState({notes:t.target.value})},value:c}))))}}]),a}(n.Component),Zn=a(308),Xn=(a(556),pa.b),$n=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),i=Object($.a)(a,2),r=i[0],s=i[1],o=Object(n.useState)({}),c=Object($.a)(o,2),d=(c[0],c[1],[{title:"Date",dataIndex:"date",key:"date",align:"center",width:50},{title:"Day",dataIndex:"day",key:"day",align:"center",width:50},{title:"Hours",dataIndex:"hours",key:"hours",width:80,children:[{title:"Start",dataIndex:"startTime",key:"startTime",align:"center",width:40},{title:"Finish",dataIndex:"endTime",key:"endTime",align:"center",width:40}]},{title:l.a.createElement("span",null,"Breaks ",l.a.createElement("br",null)," ",l.a.createElement("span",{style:{fontSize:9}},"minutes")),dataIndex:"breakMinutes",key:"breakMinutes",align:"center",width:40},{title:l.a.createElement("span",null,"Daily ",l.a.createElement("br",null)," Total ",l.a.createElement("span",{style:{fontSize:9}},"hours")),dataIndex:"actualHours",key:"actualHours",align:"center",width:40},{title:"Comments",dataIndex:"notes",key:"notes",align:"center",render:function(e){return e&&l.a.createElement(Ie.a.Text,{ellipsis:!0},e)}}]);Object(n.useEffect)((function(){m()}),[]);var u=Object(Zn.useReactToPrint)({content:function(){return t.current},documentTitle:"timesheet",removeAfterPrint:!0}),m=function(){console.log(e);var t,a={milestoneEntryIds:e.milestoneEntryId};return console.log(a),(t=a,ke.a.post("".concat(Wn,"print/milestoneEntries"),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a?(A(e.headers&&e.headers.authorization),{success:a,data:n}):{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(t){t.success&&(s(t.data),u(),e.close())})),!0};return l.a.createElement("div",{style:{display:"none"}},l.a.createElement("div",{ref:t,style:{margin:"0mm 10mm"}},r.map((function(e,t){return l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("p",{style:{color:"#ff0000"}},"Sensitive: Personal (after first entry)")),l.a.createElement(p.a,{justify:"space-between",align:"middle"},l.a.createElement(b.a,null,l.a.createElement(Ie.a.Title,null," Timesheet ")),l.a.createElement(b.a,{style:{width:"60%",textAlign:"right"}},l.a.createElement("img",{src:"/onelm.png",width:"35%"}))),l.a.createElement(p.a,null,e&&l.a.createElement(pa.b,{column:1,bordered:!0,size:"small",style:{marginBottom:35},className:"describe"},l.a.createElement(Xn,{label:"Company"}," ",e.company),l.a.createElement(Xn,{label:"Employee"},e.employee),l.a.createElement(Xn,{label:"Client"}," ",e.milestone&&e.milestone.client),l.a.createElement(Xn,{label:"Project"},e.milestone&&e.milestone.name),l.a.createElement(Xn,{label:"Client Contact"},e.milestone&&e.milestone.contact),l.a.createElement(Xn,{label:"Timesheet Period "},e.period))),l.a.createElement(Ge.a,{rowClassName:function(e){return"Sunday"===e.day||"Saturday"===e.day?"weekendClass":"weekClass"},className:"cellSize",rowKey:function(e){return e.id},bordered:!0,size:"small",pagination:!1,columns:d,dataSource:e.milestone&&e.milestone.entries,style:{fontSize:"10px"}}),l.a.createElement(pa.b,{column:3,bordered:!0,style:{marginBottom:20,marginTop:35}},l.a.createElement(Xn,{label:"Hours in Day "},e.milestone&&parseFloat(e.milestone.hoursPerDay).toFixed(2)),l.a.createElement(Xn,{label:"Total Hours "}," ",e.milestone&&parseFloat(e.milestone.totalHours).toFixed(2)," "),l.a.createElement(Xn,{label:"Invoiced Days "},e.milestone&&parseFloat(e.milestone.invoicedDays).toFixed(2))),l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,{span:11},"Employee Declaration"),l.a.createElement(b.a,{span:11},"Manager Approval")),l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,{span:11,style:{backgroundColor:"#deeaf6",minHeight:35}}),l.a.createElement(b.a,{span:11,style:{backgroundColor:"#deeaf6",minHeight:35}})),l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,{span:6},"Signature"),l.a.createElement(b.a,{span:5},"Date"),l.a.createElement(b.a,{span:2}),l.a.createElement(b.a,{span:6},"Signature"),l.a.createElement(b.a,{span:5},"Date")),l.a.createElement("div",{style:{textAlign:"center",marginTop:60}},l.a.createElement("p",{style:{color:"#ff0000"}},"Sensitive: Personal (after first entry)")))}))))},el=Ie.a.Title,tl=Ie.a.Link,al=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){Promise.all([ke.a.get("".concat(Wn,"milestones"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;return a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))]).then((function(t){var a=M(),n=a.id,l=a.permissions,i=parseInt(n),r=JSON.parse(l).TIMESHEETS;t[0].success&&t[0].data.length>0&&(t[0].data[0].value,t[0].data.forEach((function(e){e.value===i&&e.value}))),e.setState({milestones:t[0].success?t[0].data:[],canApprove:r.APPROVAL&&r.APPROVAL.ANY,loginId:i},(function(){e.columns(),e.state.sMilestone&&e.getSheet()}))})).catch((function(e){console.log(e)}))},e.getSheet=function(){var t,a=e.state.sMilestone,n=e.state.sheetDates,l=n.startDate,i=n.endDate;a&&(t={mileId:a,startDate:l.format("DD-MM-YYYY"),endDate:i.format("DD-MM-YYYY")},ke.a.get("".concat(Wn,"milestone")+"/".concat(t.startDate,"&").concat(t.endDate,"&").concat(t.mileId),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];return a&&(n.timesheets.forEach((function(e){var t=Object(Se.a)(Object(Se.a)({},e),e.milestones[0]);delete t.milestones,l.push(t)})),A(e.headers&&e.headers.authorization)),console.log(l),{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(t){var a;e.setState({data:t.success&&t.data&&null!==(a=t.data)&&void 0!==a?a:[],sTimesheet:{timesheet:[],keys:[]}})})),e.columns()},e.columns=function(){var t=e.state.sheetDates,a=t.startDate,n=t.endDate,i=e.state.columns,r=void 0;i=[i[0],i[1]];for(var s=a.format("D");s<=n.format("D");s++){var o;r=null!==(o=r)&&void 0!==o?o:ot()(a.format()),i.push({title:l.a.createElement("span",null,l.a.createElement("div",null,r.format("ddd")),l.a.createElement("div",null," ",r.format("DD MMM")," ")),heading:l.a.createElement("span",null,r.format("dddd - DD MM YYYY")),dataIndex:r.format("D/M"),key:r.format("D/M"),width:200,editable:!0,align:"center",render:function(e,t,a){if(e){var n=ot.a.duration(e.breakHours,"hours");return n=n&&ot()(ot()().hours(n.hours()).minutes(n.minutes())).format("HH:mm"),l.a.createElement(De.a,{title:e.notes&&"Note: ".concat(e.notes)},l.a.createElement(p.a,{style:{border:"1px solid"}},l.a.createElement(b.a,{span:24},"Start Time: ",e.startTime&&ot()(e.startTime,["HH:mm"]).format("h:mm A")),l.a.createElement(b.a,{span:24},"End Time: ",e.endTime&&ot()(e.endTime,["HH:mm"]).format("h:mm A")),l.a.createElement(b.a,{span:24},"Break: ",n&&n),l.a.createElement(b.a,{span:24},"Total Hours: ",e.actualHours&&e.actualHours))," ")}}}),r=r.add(1,"days")}e.setState({columns:i})},e.reviewTimeSheet=function(t,a,n,l){var i=e.state.sheetDates,r=i.startDate,s=i.endDate,o={pEntryId:t,userId:e.state.sMilestone,startDate:r.format("DD-MM-YYYY"),endDate:s.format("DD-MM-YYYY")};Jn(o,a).then((function(t){var a=e.state.data;a[n].status=l,t.success&&e.setState({data:a})}))},e.actionTimeSheet=function(t){var a=e.state.sheetDates,n=a.startDate,l=a.endDate,i=e.state.sTimesheet.keys,r={userId:e.state.sMilestone,startDate:n.format("DD-MM-YYYY"),endDate:l.format("DD-MM-YYYY")};Jn(r,t,{milestoneEntries:i}).then((function(t){e.getSheet()}))},e.openAttachModal=function(t,a){console.log(t,a);var n={};if(a>=0)n={milestoneEntryId:[t.milestoneEntryId],milestoneId:t.milestoneId,notes:t.notes,milestone:t.milestone,status:t.status,rowIndex:a};else{var l=e.state.sTimesheet,i=l.keys,r=l.timesheet;n={milestoneEntryId:i,milestoneId:r[0].milestoneId,notes:r[0].notes,milestone:r[0].milestone,status:!1}}e.setState({timeObj:n,isAttach:!0})},e.exporPDF=function(t){console.log(t),e.setState({eData:t,isDownload:!0})},e.summaryFooter=function(t){var a=e.state.columns;if(t.length>0)return l.a.createElement(Ge.a.Summary.Row,null,l.a.createElement(Ge.a.Summary.Cell,{index:0}," "),a.map((function(e,a){var n=e.key,i=(e.dateObj,0);return t.map((function(e,a){var l;"user"!==n&&(i+="totalHours"===n?null!==(l=t[a].totalHours)&&void 0!==l?l:0:e[n]?e[n].actualHours:0)})),"user"===n?l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1},"Total Work In A day"):"totalHours"===n?l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1,align:"center"},i&&i.toFixed(2)):l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1,align:"center",className:"prevDates-TMcell"},"0")})))},e.milestoneSelect=function(t,a){e.setState({sTimesheet:{timesheet:a,keys:t}})},e.multiAction=function(t){var a,n=e.state.sTimesheet,i=(n.timesheet,n.keys,e.state.sheetDates.cMonth),r=Je.a.confirm({title:"".concat(t," Timesheet For the month of ").concat(i.format("MMM YYYY")),icon:"Reject"===t?l.a.createElement(Bn.a,null):l.a.createElement(Ln.a,null),content:"",okButtonProps:{danger:null===(a="Delete"===t)||void 0===a||a},okText:"Okay",cancelText:"Cancel",onOk:function(){e.actionTimeSheet(t),r.destroy()}})},e.attachCallBack=function(t){var a=e.state,n=a.data,l=a.timeObj.rowIndex;l>=0?(n[l].notes=t.notes,n[l].attachment=t.attachment,e.setState({data:n,isAttach:!1,editTime:!1,timeObj:!1})):e.getSheet()},e.state={isAttach:!1,sheetDates:{startDate:ot()().startOf("month"),endDate:ot()().endOf("month"),cMonth:ot()()},timeObj:!1,eData:[],sMilestone:null,loginId:null,data:[],permissions:{},canApprove:!1,milestones:[],sTimesheet:{timesheet:[],keys:[]},columns:[{title:"Employee",dataIndex:"user",key:"user",fixed:"left",width:300,style:{height:110},render:function(t,a,n){return l.a.createElement(p.a,{gutter:[0,10]},l.a.createElement(b.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null," ","".concat(t)," "),l.a.createElement(b.a,{style:{marginLeft:"auto"}},l.a.createElement(Yn.a,{onClick:function(){e.exporPDF([a.milestoneEntryId],n)}}),l.a.createElement(qn.a,{onClick:function(){e.openAttachModal(a,n)},style:{color:"#1890ff",marginLeft:10}})))),a.attachment&&l.a.createElement(b.a,{span:24},l.a.createElement(tl,{href:"".concat(D,"/files/").concat(a.attachment.uid),download:a.attachment.name,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(va.a,null)," "," ",l.a.createElement(De.a,{placement:"top",title:a.attachment.name,destroyTooltipOnHide:!0},a.attachment.name.substr(0,27)))),l.a.createElement(b.a,{span:4,style:{marginLeft:"auto",marginRight:20}},"SB"===a.status&&l.a.createElement(mt.a,{color:"cyan"}," Submitted "),"AP"===a.status&&l.a.createElement(mt.a,{color:"green"}," Approved "),"RJ"===a.status&&l.a.createElement(mt.a,{color:"red"}," Rejected ")))}},{title:"Total",dataIndex:"totalHours",key:"totalHours",fixed:"left",align:"center",width:100,render:function(e){return e&&e.toFixed(2)}}]},e}return Object(d.a)(a,[{key:"highlightRow",value:function(e){}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.columns,i=t.timeObj,r=t.milestones,s=t.sMilestone,o=t.isAttach,c=t.isDownload,d=t.eData,u=t.sTimesheet;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement(b.a,null,l.a.createElement(el,null,"Approval")),l.a.createElement(b.a,{md:{span:5,offset:4}},l.a.createElement(ze.a,{placeholder:"Select Project",style:{width:"100%"},size:"large",options:r,value:s,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(t,a){e.setState({sMilestone:t},(function(){e.getSheet()}))}})),l.a.createElement(b.a,{md:{span:5,offset:1}},l.a.createElement(Pe.a,{size:"large",mode:"month",picker:"month",format:"MMM-YYYY",onChange:function(t){e.setState({sheetDates:{cMonth:null!==t&&void 0!==t?t:ot()(),startDate:ot()(null!==t&&void 0!==t?t:ot()()).startOf("month"),endDate:ot()(null!==t&&void 0!==t?t:ot()()).endOf("month")}},(function(){e.getSheet()}))},defaultValue:ot()()}))),l.a.createElement(Ge.a,{size:"small",style:{maxHeight:"fit-content"},className:"timeSheet-table",rowSelection:{onChange:function(t,a){e.milestoneSelect(t,a)},getCheckboxProps:function(e){return{disabled:"SV"===e.timesheetStatus||"AP"===e.timesheetStatus}}},scroll:{x:"'max-content'"},bordered:!0,pagination:!1,rowKey:function(e){return e.milestoneEntryId},rowClassName:function(t){return e.highlightRow(t)},columns:n,dataSource:Object(ue.a)(a),summary:function(t){return e.summaryFooter(t)}}),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(b.a,null,l.a.createElement(pe.a,{disabled:u.keys.length<1,onClick:function(){return e.openAttachModal()}},"Import")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",disabled:u.keys.length<1,onClick:function(){e.exporPDF(u.keys)}},"Export")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",danger:!0,disabled:u.keys.length<1,onClick:function(){return e.multiAction("Reject")}},"Reject")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{className:"success",disabled:u.keys.length<1,onClick:function(){return e.multiAction("Approve")}},"Approval"))),o&&l.a.createElement(Qn,{visible:o,timeObj:i,callBack:this.attachCallBack,close:function(){return e.setState({isAttach:!1,timeObj:!1})}}),c&&l.a.createElement($n,{milestoneEntryId:d,close:function(){return e.setState({isDownload:!1})}}))}}]),a}(n.Component),nl=a(321),ll=a(624),il=a(625),rl=a(164),sl=a(121),ol=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editTime,n=t.userId,l=JSON.parse(M().permissions).TIMESHEETS;e.setState({permissions:l},(function(){l.UPDATE&&e.getRecord(n,a||{startTime:ot()("9:00",["HH:mm"]),endTime:ot()("18:00",["HH:mm"])})}))},e.submit=function(){e.TimeRef.current&&e.TimeRef.current.refs.time_form.submit()},e.TimeCall=function(t){var a=e.props,n=a.editTime,l=a.timeObj,i=t.obj;i.milestoneEntryId=l.milestoneEntryId,i.entryId=l.entryId,i.milestoneId=l.milestoneId,i.date=ot()(l.col,"D/M").format("DD-MM-YYYY"),i.startTime=i.startTime.format("HH:mm"),i.endTime=i.endTime.format("HH:mm"),i.breakHours=i.breakHours?ot.a.duration(i.breakHours.format("HH:mm")).asHours():0,n?e.editRecord(n.entryId,i):e.addTime(i)},e.addTime=function(t){e.setState({loading:!0});var a=e.props,n=a.callBack,l=a.sheetDates,i=a.user,r=l.startDate,s=l.endDate;(function(e,t){return H.b.loading({content:"Loading...",key:1}),ke.a.post(Wn+"".concat(e.startDate,"&").concat(e.endDate,"&").concat(e.userId),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a?(H.b.success({content:l,key:1}),n.actualHours=n.hours,A(e.headers&&e.headers.authorization),{success:a,data:n}):{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})({userId:i,startDate:r.format("DD-MM-YYYY"),endDate:s.endOf("month").format("DD-MM-YYYY")},t).then((function(e){e.success&&n(e.data,!0)}))},e.editRecord=function(t,a){e.setState({loading:!0});var n=e.props.callBack;(function(e,t){return H.b.loading({content:"Loading...",key:1}),ke.a.put(Wn+"entries/".concat(e),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a?(H.b.success({content:l,key:1}),n.actualHours=n.hours,A(e.headers&&e.headers.authorization),{success:a,data:n}):{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(t,a).then((function(e){e.success&&n(e.data,!1)}))},e.handleDelete=function(){var t=e.props,a=t.editTime,n=t.callBack;Gn(a.entryId).then((function(e){e.success&&n({},!0)}))},e.getRecord=function(t,a){e.TimeRef.current.refs.time_form.setFieldsValue({obj:a})},e.TimeRef=l.a.createRef(),e.state={loading:!1,permissions:{},TimeFields:{formId:"time_form",justify:"center",FormCol:24,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:8,key:"startTime",label:"Start",labelAlign:"right",type:"TimePicker",mode:"use12Hours",rangeMax:!1,rangeMin:15,size:"small",showTime:"hh:mm a"},{object:"obj",fieldCol:8,key:"endTime",label:"End",labelAlign:"right",type:"TimePicker",mode:"use12Hours",rangeMax:!1,rangeMin:15,size:"small",showTime:"hh:mm a"},{object:"obj",fieldCol:8,key:"breakHours",label:"Break",labelAlign:"right",rangeMin:15,rangeMax:!1,type:"TimePicker",size:"small",showTime:"HH:mm"},{object:"obj",fieldCol:24,style:{marginTop:"2%"},mode:{minRows:1,maxRows:3},key:"notes",label:"notes",labelAlign:"right",type:"Textarea",size:"small"}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editTime,n=t.visible,i=t.close,r=t.timeObj,s=this.state,o=s.TimeFields,c=s.loading,d=s.permissions,u=a?d.UPDATE&&n:d.ADD&&n;return l.a.createElement(Je.a,{title:l.a.createElement(p.a,null,l.a.createElement(b.a,{flex:2}," ",a?"Edit Time":"Add Time"," "),l.a.createElement(b.a,{flex:3},l.a.createElement("b",null," ",r.title," "))),maskClosable:!1,centered:!0,visible:u,onOk:function(){e.submit()},okButtonProps:{disabled:c},onCancel:i,width:540,footer:[l.a.createElement(pe.a,{key:"cancel",onClick:i}," Cancel "),l.a.createElement(pe.a,{key:"ok",type:"primary",loading:c,onClick:function(){e.submit()}}," Save ")]},l.a.createElement(rt,{ref:this.TimeRef,Callback:this.TimeCall,FormFields:o}))}}]),a}(n.Component),cl=(a(557),Ie.a.Title),dl=Ie.a.Link,ul=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){ke.a.get("".concat(Wn,"users"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){var a=0,n=M(),l=n.id,i=n.permissions,r=parseInt(l),s=JSON.parse(i).TIMESHEETS;t.success&&t.data.length>0&&(a=t.data.value,t.data.forEach((function(e){e.value===r&&(a=e.value)}))),e.setState({USERS:t.success?t.data:[],sUser:a,canApprove:s.APPROVAL&&s.APPROVAL.ANY,permissions:s,loginId:r},(function(){e.columns(),e.state.sUser&&e.getSheet()}))})).catch((function(e){console.log(e)}))},e.getProjects=function(t){var a;(a=t,ke.a.get("".concat(D,"/helpers/milestones?userId=").concat(a),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;return a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(t){t.success&&e.setState({milestones:t.data})}))},e.getSheet=function(){var t,a=e.state,n=a.sUser,l=a.sheetDates,i=l.startDate,r=l.endDate;n&&(t={userId:n,startDate:i.format("DD-MM-YYYY"),endDate:r.format("DD-MM-YYYY")},ke.a.get(Wn+"".concat(t.startDate,"&").concat(t.endDate,"&").concat(t.userId),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!0,message:e.message,data:[]}}))).then((function(t){var a,n;t.success&&e.setState({timesheet:null!==(a=t.data)&&void 0!==a?a:{},data:t.data&&null!==(n=t.data.milestones)&&void 0!==n?n:[],sTMilestones:{milestones:[],keys:[]}})})),e.columns()},e.columns=function(){var t=e.state.sheetDates,a=t.sWeek,n=t.startDate,i=t.endDate,r=e.state,s=r.columns,o=r.sUser,c=r.loginId,d=r.permissions,u=void 0;s=[s[0],s[1]];for(var m=ot()(a.format("YYYY-MM-DDTHH:mm:ss")).startOf("isoWeek"),f=ot()(a.format("YYYY-MM-DDTHH:mm:ss")).endOf("isoWeek").diff(m,"days"),g=0;g<=f;g++){var h;u=null!==(h=u)&&void 0!==h?h:ot()(m.format()),s.push({title:l.a.createElement("span",null,l.a.createElement("div",null,u.format("ddd")),l.a.createElement("div",null," ",u.format("DD MMM")," ")),heading:l.a.createElement("span",null,u.format("dddd - DD MM YYYY")),dateObj:ot()(u.format()),dataIndex:u.format("D/M"),key:u.format("D/M"),className:(u.isBefore(n)||u.isAfter(i))&&"prevDates-TMcell",width:200,editable:!0,align:"center"}),u=u.add(1,"days")}e.setState({columns:s},(function(){var t=e.state.columns.map((function(t){return"project"===t.dataIndex||"totalHours"===t.dataIndex?t:Object(Se.a)(Object(Se.a)({},t),{},{render:function(a,r,s){var u=d&&d.DELETE&&d.DELETE.ANY||o===c,m=("SV"===r.status||"RJ"===r.status||!r.status)&&u;if(a){var f=ot.a.duration(a.breakHours,"hours");return f=f&&ot()(ot()().hours(f.hours()).minutes(f.minutes())).format("HH:mm"),l.a.createElement(De.a,{title:a.notes&&"Note: ".concat(a.notes)},l.a.createElement(p.a,{style:{border:"1px solid"}},l.a.createElement(b.a,{span:22},"Start Time: ",a.startTime&&ot()(a.startTime,["HH:mm"]).format("h:mm A")),l.a.createElement(b.a,{span:2},m&&l.a.createElement(V.a,{placement:"bottomCenter",overlay:l.a.createElement(v.a,{onClick:e.handleMenuClick},l.a.createElement(v.a.Item,{disabled:o!==c,key:"Edit",onClick:function(){e.getRecord(r,s,t.dataIndex,t.heading)}},l.a.createElement(nl.a,null)),l.a.createElement(v.a.Item,{key:"delete",disabled:!d.DELETE,onClick:function(){e.deleteRecord(a,s,t.dataIndex)}},l.a.createElement(Ca.a,null)))},l.a.createElement(ll.a,{style:{cursor:"pointer"}}))),l.a.createElement(b.a,{span:24},"End Time: ",a.endTime&&ot()(a.endTime,["HH:mm"]).format("h:mm A")),l.a.createElement(b.a,{span:24},"Break: ",f&&f),l.a.createElement(b.a,{span:24},"Total Hours: ",a.actualHours&&a.actualHours)))}return m&&t.dateObj.isSameOrAfter(n)&&t.dateObj.isSameOrBefore(i)&&l.a.createElement(il.a,{style:{fontSize:24,color:"#1890ff"},onClick:function(){e.getRecord(r,s,t.dataIndex,t.heading)}})}})}));e.setState({columns:t})}))},e.deleteRecord=function(t,a,n){Gn(t.entryId).then((function(l){if(l.success){var i=e.state.data;delete i[a][n],i[a].totalHours=i[a].totalHours-t.actualHours,e.setState({data:i})}}))},e.getRecord=function(t,a,n,l){var i={milestoneEntryId:t.milestoneEntryId,milestoneId:t.milestoneId,milestone:t.milestone,row:a,col:n,title:l};if(t[n]){var r=t[n].breakHours,s=ot.a.duration(r,"hours"),o={entryId:t[n].entryId,startTime:ot()(t[n].startTime,"HH:mm")._isValid?ot()(t[n].startTime,"HH:mm"):null,endTime:ot()(t[n].endTime,"HH:mm")._isValid?ot()(t[n].endTime,"HH:mm"):null,breakHours:s&&ot()().hours(s.hours()).minutes(s.minutes()),notes:t[n].notes&&t[n].notes};e.setState({isVisible:!0,editTime:o,timeObj:i})}else e.setState({isVisible:!0,editTime:!1,timeObj:i})},e.callBack=function(t,a){var n=e.state,l=n.data,i=n.timeObj,r=i.row,s=i.col;if(t.entryId=t.id,l[r].milestoneEntryId=t.milestoneEntryId,a){var o,c;l[r][s]=t,l[r].totalHours=(null!==(o=l[r].totalHours)&&void 0!==o?o:0)+(null!==(c=t.actualHours)&&void 0!==c?c:0)}else{var d,u,m=l[r][s].actualHours;l[r][s]=t,l[r].totalHours=(null!==(d=l[r].totalHours)&&void 0!==d?d:0)+(null!==(u=t.actualHours)&&void 0!==u?u:0)-m}e.setState({data:l,timeObj:!1,isVisible:!1,editTime:!1})},e.reviewTimeSheet=function(t,a,n,l){var i=e.state.sheetDates,r=i.startDate,s=i.endDate,o={pEntryId:t,userId:e.state.sUser,startDate:r.format("DD-MM-YYYY"),endDate:s.format("DD-MM-YYYY")};Jn(o,a).then((function(t){var a=e.state.data;t.success&&n>=0&&(a[n].status=l,e.setState({data:a}))}))},e.actionTimeSheet=function(t){var a=e.state.sheetDates,n=a.startDate,l=a.endDate,i=e.state.sTMilestones.keys,r={userId:e.state.sUser,startDate:n.format("DD-MM-YYYY"),endDate:l.format("DD-MM-YYYY")};Jn(r,t,{milestoneEntries:i}).then((function(t){e.state.data;e.getSheet()}))},e.openAttachModal=function(t,a){var n={milestoneEntryId:t.milestoneEntryId,milestoneId:t.milestoneId,notes:t.notes,milestone:t.milestone,status:t.status,rowIndex:a};e.setState({timeObj:n,isAttach:!0})},e.exporPDF=function(t){var a=t?[t]:e.state.sTimesheet.keys;e.setState({eData:a,isDownload:!0})},e.summaryFooter=function(t){var a=e.state.columns,n=e.state.sheetDates,i=n.startDate,r=n.endDate;if(t.length>0)return l.a.createElement(Ge.a.Summary.Row,null,l.a.createElement(Ge.a.Summary.Cell,{index:0}," "),a.map((function(e,a){var n=e.key,s=e.dateObj,o=0;return t.map((function(e,a){var l;"project"!==n&&(o+="totalHours"===n?null!==(l=t[a].totalHours)&&void 0!==l?l:0:e[n]?e[n].actualHours:0)})),"project"===n?l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1},"Total Work In A day"):"totalHours"===n||s&&s.isSameOrAfter(i)&&s.isSameOrBefore(r)?l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1,align:"center"},o&&o.toFixed(2)):l.a.createElement(Ge.a.Summary.Cell,{index:a+1,key:a+1,align:"center",className:"prevDates-TMcell"},"0")})))},e.milestoneSelect=function(t,a){e.setState({sTMilestones:{milestones:a,keys:t}})},e.multiAction=function(t){var a,n=e.state.sTMilestones,i=n.milestones,r=(n.keys,e.state.sheetDates.cMonth),s="";i.forEach((function(e){var t=e.project;s+="".concat(t,", ")}));var o=Je.a.confirm({title:"".concat(t," Timesheet For the month of ").concat(r.format("MMM YYYY")),icon:"Delete"===t?l.a.createElement(Bn.a,null):l.a.createElement(Ln.a,null),content:s,okButtonProps:{danger:null===(a="Delete"===t)||void 0===a||a},okText:"Okay",cancelText:"Cancel",onOk:function(){e.actionTimeSheet(t),o.destroy()}})},e.state={isVisible:!1,proVisible:!1,isAttach:!1,sheetDates:{startDate:ot()().startOf("month"),endDate:ot()().endOf("month"),cMonth:ot()(),sWeek:ot()()},timeObj:!1,editTime:!1,loading:!1,eData:[],USERS:[],sUser:null,loginId:null,data:[],comments:null,sMilestone:{},permissions:{},canApprove:!1,milestones:[],sTMilestones:{milestones:[],keys:[]},columns:[{title:"Project",dataIndex:"project",key:"project",fixed:"left",width:300,render:function(t,a,n){return l.a.createElement(p.a,{gutter:[0,10]},l.a.createElement(b.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null," ",1===a.type?"".concat(a.milestone," (").concat(t,")"):"".concat(t)," "),l.a.createElement(b.a,{style:{marginLeft:"auto"}},l.a.createElement(De.a,{placement:"top",title:"Export",destroyTooltipOnHide:!0},l.a.createElement(Yn.a,{onClick:function(){e.exporPDF(a.milestoneEntryId,n)}}))),a.attachment&&l.a.createElement(b.a,{span:24},l.a.createElement(dl,{href:"".concat(D,"/files/").concat(a.attachment.uid),download:a.attachment.name,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(va.a,null)," "," ",l.a.createElement(De.a,{placement:"top",title:a.attachment.name,destroyTooltipOnHide:!0},a.attachment.name.substr(0,27)))))),l.a.createElement(b.a,{span:4,style:{marginLeft:"auto",marginRight:20}},"SB"===a.status&&l.a.createElement(mt.a,{color:"cyan"}," Submitted "),"AP"===a.status&&l.a.createElement(mt.a,{color:"green"}," Approved "),"RJ"===a.status&&l.a.createElement(mt.a,{color:"red"}," Rejected ")))}},{title:"Total",dataIndex:"totalHours",key:"totalHours",fixed:"left",align:"center",width:100,render:function(e){return e&&e.toFixed(2)}}]},e}return Object(d.a)(a,[{key:"delRow",value:function(e){var t=this.state.data.filter((function(t,a){return a!=e}));this.setState({data:t})}},{key:"highlightRow",value:function(e){}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.data,i=t.isVisible,r=t.proVisible,s=t.columns,o=t.editTime,c=t.timeObj,d=t.sheetDates,u=t.milestones,m=t.sMilestone,f=(t.isAttach,t.isDownload),g=t.eData,h=t.USERS,y=t.sUser,k=t.loginId,E=t.sTMilestones,v=t.permissions,S=E.keys.length<1&&(y!==k||v&&v.DELETE&&v.DELETE.ANY);return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement(b.a,{span:8},l.a.createElement(cl,null,"Timesheet")),l.a.createElement(b.a,{span:5},l.a.createElement(ze.a,{size:"large",placeholder:"Select User",options:h,value:y,optionFilterProp:["label","value"],style:{width:200},filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(t,a){e.setState({sUser:t},(function(){e.getSheet()}))}})),l.a.createElement(b.a,{span:5},l.a.createElement(Pe.a,{size:"large",mode:"month",picker:"month",format:"MMM-YYYY",onChange:function(t){e.setState({sheetDates:{cMonth:null!==t&&void 0!==t?t:ot()(),startDate:ot()(null!==t&&void 0!==t?t:ot()()).startOf("month"),sWeek:ot()(null!==t&&void 0!==t?t:ot()()).startOf("month"),endDate:ot()(null!==t&&void 0!==t?t:ot()()).endOf("month")}},(function(){e.getSheet()}))},defaultValue:ot()()})),l.a.createElement(b.a,{style:{marginLeft:"auto"}},l.a.createElement(pe.a,{size:"small",type:"primary",disabled:y!==k,onClick:function(){e.getProjects(y),e.setState({proVisible:!0})}},"Add Project"))),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{onClick:function(){var t=e.state.sheetDates,a=e.state.sheetDates,n=a.sWeek,l=a.startDate,i=ot()(n.format());(i=ot()(i.subtract(7,"days"))).isSameOrAfter(l)&&(t.sWeek=i,e.setState({sheetDates:t},(function(){return e.columns()})))}}," ",l.a.createElement(rl.a,null)),l.a.createElement(pe.a,{onClick:function(){var t=e.state.sheetDates,a=e.state.sheetDates,n=a.sWeek,l=a.endDate,i=ot()(n.format());(i=ot()(i.add(7,"days"))).isSameOrBefore(l)&&(t.sWeek=i,e.setState({sheetDates:t},(function(){return e.columns()})))}},"  ",l.a.createElement(sl.a,null)))),l.a.createElement(Ge.a,{sticky:!0,size:"small",style:{maxHeight:"fit-content"},className:"timeSheet-table",rowSelection:{onChange:function(t,a){e.milestoneSelect(t,a)},getCheckboxProps:function(e){return{disabled:"SB"===e.status||"AP"===e.status}}},scroll:{x:"'max-content'"},bordered:!0,pagination:!1,rowKey:function(e){return e.milestoneEntryId},rowClassName:function(t){return e.highlightRow(t)},columns:s,dataSource:Object(ue.a)(n),summary:function(t){return e.summaryFooter(t)}}),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(b.a,null,l.a.createElement(pe.a,{className:"success",disabled:y!==k||E.keys.length<1,onClick:function(){return e.multiAction("Submit")}},"Submit")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",danger:!0,disabled:S,onClick:function(){return e.multiAction("Delete")}},"Delete"))),i&&l.a.createElement(ol,{visible:i,timeObj:c,editTime:o,sheetDates:d,user:y,close:function(){return e.setState({isVisible:!1,editTime:!1,timeObj:!1})},callBack:this.callBack}),f&&l.a.createElement($n,{milestoneEntryId:g,close:function(){return e.setState({isDownload:!1})}}),r&&l.a.createElement(Je.a,{title:"Add Project",maskClosable:!1,centered:!0,visible:r,okButtonProps:{disabled:a},okText:a?l.a.createElement(Ze.a,null):"Add",width:500,onCancel:function(){e.setState({proVisible:!1,sMilestone:{}})},onOk:function(){var t=e.state,a=t.data,n=t.sMilestone;a.findIndex((function(e){return e.milestoneId===n.value}))>=0?H.b.error({content:"Project TimeSheet is already created...!"},5):a.push({milestoneId:n.value,project:n.label}),e.setState({proVisible:!1,data:Object(ue.a)(a),sMilestone:{}})}},l.a.createElement(p.a,{justify:"space-around"},l.a.createElement(b.a,{span:"12"},l.a.createElement(ze.a,{placeholder:"Select Project",style:{width:200},options:u,value:m.value,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(t,a){e.setState({sMilestone:a})}})))))}}]),a}(n.Component),ml=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){if(console.log(e.props),e.props.editOff){e.getRecord(e.state.data);e.state.default_hour}},e.submit=function(){e.timeRef.current.refs.off_form.submit()},e.BasicCall=function(t){var a=t.obj;e.props.editOff?(console.log("edit"),e.editRecord(a)):(console.log("emes"),e.addTimeOff(a))},e.addTimeOff=function(t){var a=e.props,n=a.rows,l=a.callBack;e.setState({loading:!0}),t.key=n,l(t,!1),e.onCancel()},e.getRecord=function(t){var a=t;console.log(a),e.timeRef.current.refs.off_form.setFieldsValue({obj:a})},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editOff,l=a.callBack;t.key=n,l(t,n),e.onCancel()},e.onCancel=function(){var t=e.state.timeFields;delete t.initialValues,e.setState({basicSubmitted:!1,timeFields:Object(Se.a)({},t)},(function(){e.props.close()}))},e.timeRef=l.a.createRef(),e.state={data:{type:"Sick Leave",b_date:ot()("Nov 25 2020"),e_date:ot()("Nov 25 2020"),h_off:8,d_off:1,desc:"I was sick"},default_hour:8,hasChanged:!1,loading:!1,timeFields:{formId:"off_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"TimeOff Type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"type",size:"small",type:"Select",data:[{value:"Sick Leave",label:"Sick Leave"},{value:"Vacations",label:"Vacations"},{value:"Training",label:"Training"}]},{Placeholder:"Begin Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"b_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj,l=n.b_date.format("YYYY MMM D");n.d_off=n.e_date.diff(l,"days")+1,console.log(n.d_off),n.h_off=n.d_off*a,this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(St.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(St.a)(e))},{object:"obj",fieldCol:12,key:"e_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.b_date=n.b_date?n.b_date:ot()();var l=n.b_date.format("YYYY MMM D");n.d_off=n.e_date.diff(l,"days")+1,console.log(n.d_off),n.h_off=n.d_off*a,this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(St.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(St.a)(e))},{Placeholder:"Hours",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Days",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"h_off",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.d_off=n.h_off/a,n.b_date=n.b_date?n.b_date:ot()();var l=n.d_off<=1?0:Math.ceil(n.d_off)-1;n.e_date=ot()(n.b_date).add(l,"d"),this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(St.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(St.a)(e))},{object:"obj",fieldCol:12,key:"d_off",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.h_off=n.d_off*a,n.b_date=n.b_date?n.b_date:ot()();var l=n.d_off<=1?0:Math.ceil(n.d_off)-1;n.e_date=ot()(n.b_date).add(l,"d"),this.timeRef.current.refs.off_form.setFieldsValue({obj:n})}}.bind(Object(St.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(St.a)(e))},{Placeholder:"Descriptions",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"desc",size:"small",type:"Textarea"},{Placeholder:"Attachments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"attach",size:"small",mode:"",Placeholder:l.a.createElement(l.a.Fragment,null,"Click or drag & Drop ",l.a.createElement(Ba.a,null)),type:"Dragger",labelAlign:"right",valuePropName:"fileList",getValue:!0}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editOff,n=t.visible,i=this.setState,r=i.timeFields,s=i.loading;return l.a.createElement(Je.a,{title:a?"Edit Time Off":"Add New Time Off",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:s},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(rt,{ref:this.timeRef,Callback:this.BasicCall,FormFields:r}))}}]),a}(n.Component),fl=Ie.a.Title,gl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleDelete=function(e){var t=Object(ue.a)(n.state.data);n.setState({data:t.filter((function(t){return t.code!==e}))})},n.callBack=function(e,t){var a=n.state.data;!1===t?n.setState({data:[].concat(Object(ue.a)(a),[e])}):(a[t]=e,n.setState({data:a}))},n.getRecord=function(e){n.setState({FormFields:Object(Se.a)(Object(Se.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editOff:e.key}),n.toggelModal(!0)},n.editRecord=function(e){e.key=n.state.editOff,e.code=e.key,n.state.data[e.key-1]=e,n.setState({data:Object(ue.a)(n.state.data),mergeObj:{}},(function(){n.toggelModal(!1)}))},n.closeModal=function(){n.setState({infoModal:!1,editEmp:!1})},n.contactForm=l.a.createRef(),n.columns=[{title:"Type",dataIndex:"type",key:"type"},{title:"Descriptions",dataIndex:"desc",key:"desc"},{title:"Hours off",dataIndex:"h_off",key:"h_off"},{title:"Days Off",dataIndex:"d_off",key:"d_off"},{title:"Begin Date",dataIndex:"b_date",key:"b_date"},{title:"End Date",dataIndex:"e_date",key:"e_date"},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(e.code)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){n.setState({infoModal:!0,editOff:e.key})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.col_Status=[{title:"Type",dataIndex:"type",key:"type"},{title:"Earned + Forwarded",dataIndex:"earn_f",key:"earn_f"},{title:"Consumed",dataIndex:"consumed",key:"consumed"},{title:"Available",dataIndex:"available",key:"available"}],n.state={data:[{key:1,type:"Sick Leaves",desc:"I was sick",h_off:8,d_off:1,b_date:"25 Nov 2020",e_date:"25 Nov 2020",status:"Approved"},{key:2,type:"Vacations",desc:"I want to go on trip",h_off:32,d_off:4,b_date:"12 Nov 2020",e_date:"16 Nov 2020",status:"Approved"},{key:3,type:"Training",desc:"I am expending my skills",h_off:8,d_off:1,b_date:"10 Oct 2020",e_date:"10 Oct 2020",status:"Approved"}],data_status:[{key:1,type:"Sick Leaves",earn_f:60,consumed:25,available:35},{key:2,type:"Vacations",earn_f:40,consumed:32,available:8},{key:3,type:"Training",earn_f:120,consumed:96,available:24}],infoModal:!1,editOff:!1},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.data_status,i=t.infoModal,r=t.editOff;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,100]},l.a.createElement(b.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(fl,{level:4},"Time Offs")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{size:"small"}," ",l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small"}," ",l.a.createElement(Qe.a,null),"Add Timeoff")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{columns:this.columns,dataSource:a,size:"small"})))),l.a.createElement(b.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(fl,{level:4},"Time Offs Status")),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{columns:this.col_Status,dataSource:n,size:"small"}))))),i&&l.a.createElement(ml,{visible:i,editOff:r,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),pl="".concat(D,"/opportunities"),bl=function(e){return ke.a.get(pl+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i,r,s,o,c={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(null!==(i=n.contactPerson.firstName)&&void 0!==i?i:"","  ").concat(null!==(r=n.contactPerson.lastName)&&void 0!==r?r:""," - ").concat(null!==(s=n.contactPerson.phoneNumber)&&void 0!==s?s:""),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,status:n.status,title:n.title,stateId:n.stateId,stage:n.stage,linkedWorkId:n.linkedWorkId,mileId:!!(n.milestones&&n.milestones.length>0)&&n.milestones[0].id},d={tender:n.tender,tenderNumber:n.tenderNumber},u={cmPercentage:n.cmPercentage?n.cmPercentage:0,cm$:n.value*n.cmPercentage/100,getPercentage:n.getPercentage?n.getPercentage:0,goPercentage:n.goPercentage?n.goPercentage:0,totalMonths:n.startDate&&n.endDate?Math.ceil(ot()(n.endDate).diff(ot()(n.startDate),"months",!0)):0,endDate:n.endDate?ot()(n.endDate):null,startDate:n.startDate?ot()(n.startDate):null,value:n.value?n.value:0};u.goget=u.getPercentage*u.goPercentage/100,u.discount=n.value*u.goget/100,u.upside=n.value-u.discount;var m={entryDate:n.entryDate&&ot()(n.entryDate),startDate:n.startDate&&ot()(n.startDate),hoursPerDay:n.hoursPerDay,endDate:n.endDate&&ot()(n.endDate),bidDate:n.bidDate&&ot()(n.bidDate)},f={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,opportunityManagerId:n.opportunityManagerId},g=null!==(o=n.milestones)&&void 0!==o?o:[];return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,A(e.headers&&e.headers.authorization),{success:a,data:n,basic:c,tender:d,billing:u,dates:m,manage:f,milestones:g}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},hl=function(e){return ke.a.delete(pl+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},yl=function(e,t,a){return H.b.loading({content:"Loading...",key:a}),ke.a.post("".concat(D).concat(e),t,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.data,i=t.message;return R(i),H.b.success({content:i,key:a}),n&&A(e.headers&&e.headers.authorization),{success:n,data:l[0]}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))},kl=function(e){return ke.a.get("".concat(D).concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a?(A(e.headers&&e.headers.authorization),{success:a,data:n}):{success:a}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},El=function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.put("".concat(D).concat(e,"/").concat(t),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.data,i=a.message;return R(i),H.b.success({content:i,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n,data:l&&l[0]}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))},vl=function(e,t){return console.log(e,t),ke.a.delete(pl+"/".concat(e,"/resources/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Sl=la.a.TabPane,Cl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props,a=t.editLead,n=t.project,l=e.state.ManageFields;n&&(l[4].Placeholder="Project Manager",l[5].key="projectManagerId");Promise.all([Lt(),Bt(),Nt(),wt("helpers/contact-persons?active=1&employee=1&associated=1&label=1"),a&&e.getRecord(a),qt()]).then((function(t){var a=e.state,n=a.BasicFields,l=a.ManageFields;t[1].success&&(t[1].data[0].disabled=!0),console.log(t),n[2].data=t[0].success?t[0].data:[],n[3].data=t[1].success?t[1].data:[],n[11].data=t[2].success?t[2].data:[],n[6].data=t[4].success?t[4].data:[],n[17].data=t[5].success?t[5].data:[],l[2].data=t[3].success?t[3].data:[],l[3].data=t[3].success?t[3].data:[],l[5].data=t[3].success?t[3].data:[],e.setState({BasicFields:n,ManageFields:l})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l,i,r,s,o,c,d,u,m,f,g,p,b,h,y,k,E,v=t.basic,S=t.tender,C=t.dates,j=t.billing,P=t.manage,O=e.props.editLead,I=Object(Se.a)({panelId:null!==(a=v.panelId)&&void 0!==a?a:null,organizationId:null!==(n=v.organizationId)&&void 0!==n?n:null,contactPersonId:null!==(l=v.contactPersonId)&&void 0!==l?l:null,title:null!==(i=v.title)&&void 0!==i?i:"",type:null!==(r=v.type)&&void 0!==r?r:"",stateId:null!==(s=v.stateId)&&void 0!==s?s:null,qualifiedOps:null!==(o=v.qualifiedOps)&&void 0!==o&&o,stage:null!==(c=v.stage)&&void 0!==c?c:null,linkedWorkId:null!==(d=v.linkedWorkId)&&void 0!==d?d:null,tender:null!==(u=S.tender)&&void 0!==u?u:"",tenderNumber:null!==(m=S.tenderNumber)&&void 0!==m?m:"",value:null!==(f=j.value)&&void 0!==f?f:0,cmPercentage:null!==(g=j.cmPercentage)&&void 0!==g?g:0,goPercentage:null!==(p=j.goPercentage)&&void 0!==p?p:0,getPercentage:null!==(b=j.getPercentage)&&void 0!==b?b:0,accountDirectorId:null!==(h=P.accountDirectorId)&&void 0!==h?h:null,accountManagerId:null!==(y=P.accountManagerId)&&void 0!==y?y:null,opportunityManagerId:null!==(k=P.opportunityManagerId)&&void 0!==k?k:null,projectManagerId:null!==(E=P.projectManagerId)&&void 0!==E?E:null},C);O?e.editProject(I):e.addOpportunity(I)},e.addOpportunity=function(t){var a,n=e.props.callBack;(a=t,H.b.loading({content:"Loading...",key:1},5),ke.a.post(pl,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1},5),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&n()}))},e.editProject=function(t){e.props.project?e.workWon(t):e.editRecord(t)},e.getRecord=function(t){return bl(t).then((function(t){if(t.success){var a=t.basic,n=t.tender,l=t.billing,i=t.dates,r=t.manage;e.formRef.current.setFieldsValue({basic:a,tender:n,billing:l,dates:i,manage:r});var s="helpers/contact-persons?organizationId=".concat(a.organizationId,"&associated=1");return wt(s).then((function(e){return{success:e.success,data:e.data}}))}}))},e.editRecord=function(t){var a,n=e.props,l=n.editLead,i=n.callBack;t.id=l,e.setState({loading:!0}),(a=t,H.b.loading({content:"Loading...",key:a.id}),ke.a.put(pl+"/".concat(a.id),a,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a.id},5),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&i()}))},e.workWon=function(t){var a,n,l=e.props,i=l.editLead,r=l.callBack;console.log("workWon"),e.setState({loading:!0}),(a=i,n=t,H.b.loading({content:"Loading...",key:a}),ke.a.put(pl+"/".concat(a,"/win"),n,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&r()}))},e.formRef=l.a.createRef(),e.state={editLead:!1,formSubmitted:!1,check:!1,leadValue:0,SKILLS:[],STATES:[],ORGS:[],loading:!1,BasicFields:[{Placeholder:"Panel",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Organisation",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"panelId",size:"small",rules:[{required:!0,message:"Panel is Required"}],data:[],type:"Select"},{object:"basic",fieldCol:12,key:"organizationId",size:"small",rules:[{required:!0,message:"Organisation is Required"}],data:[],type:"Select",onChange:function(t){if(t){var a="helpers/contact-persons?organizationId=".concat(t,"&associated=1");wt(a).then((function(t){if(t.success){var a=e.state.BasicFields;a[6].data=t.data,e.setState({BasicFields:a})}}))}else{var n=e.state.BasicFields;n[6].data=[];var l=e.formRef.current.getFieldsValue().basic;l.contactPersonId=void 0,e.formRef.current.setFieldsValue({basic:l}),e.setState({BasicFields:n})}}},{Placeholder:"Delegate Contact Person",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"contactPersonId",size:"small",data:[],type:"Select"},{object:"basic",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input"},{Placeholder:"Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"type",size:"small",rules:[{required:!0,message:"Type is Required"}],data:[{label:"MILESTONE BASE",value:1},{label:"TIME BASE",value:2}],type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Qualified Ops",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Stage",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"qualifiedOps",size:"small",data:[{label:"True",value:!0},{label:"False",value:!1}],itemStyle:{marginBottom:1},type:"Select"},{object:"basic",fieldCol:12,key:"stage",size:"small",data:[{label:"Lead",value:"L"},{label:"Tender Released",value:"TR"},{label:"Bid Submitted",value:"BS"}],itemStyle:{marginBottom:1},type:"Select"},{Placeholder:"Linked Project",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"linkedWorkId",size:"small",data:[],itemStyle:{marginBottom:1},type:"Select"}],tenderFields:[{Placeholder:"Tender/RFQTS Title",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tender/RFQTS Number",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"tender",fieldCol:12,key:"tender",size:"small",type:"Input"},{object:"tender",fieldCol:12,key:"tenderNumber",size:"small",type:"Input"}],BillingFields:[{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"CM",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"value",size:"small",shape:"$",type:"InputNumber",onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=a.cmPercentage?t*a.cmPercentage/100:0,a.discount=a.goget?t*a.goget/100:0,a.upside=a.discount?t-a.discount:0,e.formRef.current.setFieldsValue({billing:a})},fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"cmPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=a.value?a.value*t/100:0,e.formRef.current.setFieldsValue({billing:a})}},{Placeholder:"CM",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{Placeholder:"GO",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"cm$",size:"small",shape:"$",disabled:!0,type:"InputNumber",fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"goPercentage",size:"small",shape:"%",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100,onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.goget=a.getPercentage?a.getPercentage*t/100:0,a.discount=a.goget&&a.value?a.value*a.goget/100:0,a.upside=a.discount?a.value-a.discount:0,e.formRef.current.setFieldsValue({billing:a})}},{Placeholder:"Get",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{Placeholder:"GO/Get",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"getPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.goget=a.goPercentage?a.goPercentage*t/100:0,a.discount=a.goget&&a.value?a.value*a.goget/100:0,a.upside=a.discount?a.value-a.discount:0,e.formRef.current.setFieldsValue({billing:a})}},{object:"billing",fieldCol:12,key:"goget",size:"small",shape:"%",disabled:!0,type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Discounted Value",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{Placeholder:"Upside Value",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"discount",size:"small",disabled:!0,shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"upside",size:"small",disabled:!0,shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}}],DatesFields:[{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().dates;return a.endDate&&t>a.endDate}},{object:"dates",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().dates;return a.startDate&&t<a.startDate}},{Placeholder:"Daily Hours",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Bid Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"hoursPerDay",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"dates",fieldCol:12,key:"bidDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"Entry Date",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"entryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}],ManageFields:[{Placeholder:"Account Director",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account Manager",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"accountDirectorId",size:"small",data:[],type:"Select"},{object:"manage",fieldCol:12,key:"accountManagerId",size:"small",data:[],type:"Select"},{Placeholder:"Opportunity Manager",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"opportunityManagerId",size:"small",data:[],type:"Select"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editLead,a=e.visible,n=e.close,i=this.state,r=i.BasicFields,s=i.tenderFields,o=i.DatesFields,c=i.BillingFields,d=i.ManageFields,u=i.loading;return l.a.createElement(Je.a,{title:t?"Edit opportunity":"Add New opportunity",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:u,htmlType:"submit",form:"my-form"},okText:u?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:750},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{dates:{entryDate:ot()(new Date)}}},l.a.createElement(la.a,{type:"card"},l.a.createElement(Sl,{tab:"Opportunity Info",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:r})),l.a.createElement(Sl,{tab:"Tender/RFQTS Info",key:"tender",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:s})),l.a.createElement(Sl,{tab:"Date Info",key:"dates",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:o})),l.a.createElement(Sl,{tab:"Forecast",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:c})),l.a.createElement(Sl,{tab:"Manage",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:d})))))}}]),a}(n.Component),jl=Ie.a.Title,Pl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getList()},n.resRoute=function(){console.log(n.props.match.url);var e=n.props.match.url;return e=e.split("/",2),console.log(e),e[1]},n.getList=function(){var e=JSON.parse(M().permissions).OPPORTUNITIES;ke.a.get(pl,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){n.setState({data:t.success?t.data:[],openModal:!1,editLead:!1,permissions:e})}))},n.handleDelete=function(e){hl(e).then((function(e){e.success&&n.getList()}))},n.callBack=function(){n.getList()},n.closeModal=function(){n.setState({openModal:!1,editLead:!1})},n.leadForm=l.a.createRef(),n.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title"},{title:"Organisation Name",dataIndex:"organization",width:200,key:"organization",render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},{title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(x(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Bid Date",dataIndex:"bidDate",key:"bidDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Stage",dataIndex:"stage",key:"stage",render:function(e){return T[e]}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return F[e]}},{title:"Type",dataIndex:"type",key:"type",render:function(e){return z[e]}},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(e.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){return n.setState({openModal:!0,editLead:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"),1===e.type?l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(e.id,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(e.id,"/milestones/").concat(e.milestones[0]&&e.milestones[0].id,"/resources")},className:"nav-link"},"Postions")),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(e.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editLead:!1,permissions:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editLead,r=t.permissions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(jl,{level:4},"Opportunities")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"}," ",l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,editLead:!1})},disabled:!r.ADD},l.a.createElement(Qe.a,null)," Opportunity")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"small"}))),n&&l.a.createElement(Cl,{visible:n,editLead:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Ol=(a(558),a(559),Ie.a.Title),Il=Ie.a.Text,Dl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.calculateData()},n.getWeekdays=function(e,t){return console.log(e.format("DD MM YYYY"),t.format("DD MM YYYY")),ot()().isoWeekdayCalc(e,t,[1,2,3,4,5])},n.calculateData=function(){for(var e=n.state.data,t=n.props.billing,a=t.totalMonths>0?t.totalMonths:0,l=ot()(t.startDate),i=ot()(t.endDate),r=0,s=1;s<=a;s++){l=1===s?t.startDate:ot()(l).set("date",1),i=s===a?t.endDate:ot()(l).endOf("month");var o=n.getWeekdays(l,i);r+=o;var c=ot()(l).format("MMM YY");e[0][c]=o,l=ot()(l).add(1,"months")}var d=t.discount/r,u=d*t.cmPercentage/100,m=d-u;for(s=1;s<=a;s++){console.log(s,a),l=1===s?t.startDate:ot()(l).set("date",1),i=s===a?t.endDate:ot()(l).endOf("month");var f=ot()(l).format("MMM YY"),g=e[0][f];e[1][f]=x((d*g).toFixed(2)),e[2][f]=x((m*g).toFixed(2)),e[3][f]=x((u*g).toFixed(2)),e[4][f]=x(t.cmPercentage),l=ot()(l).add(1,"months")}console.log(e),n.setState({data:e},(function(){n.Columns()}))},n.Columns=function(){for(var e=n.state.columns,t=(n.props.billing,ot()().set({month:6,date:1})),a=[],i=1;i<=12;i++)a.push({title:ot()(t).format("MMM YY"),width:100,dataIndex:ot()(t).format("MMM YY"),key:ot()(t).format("MMM YY"),render:function(e,t){if(e){if("W"===t.key)return l.a.createElement("b",null,e," ");if("R"===t.key)return" ".concat(e);if("C"===t.key)return" ".concat(e);if("$"===t.key)return l.a.createElement("b",null," ".concat(e));if("%"===t.key)return l.a.createElement("b",null," ".concat(e," %"))}return"-"}}),t=ot()(t).add(1,"months");n.setState({columns:[].concat(Object(ue.a)(e),a)})},n.state={billing:{},columns:[{title:"Month",dataIndex:"label",key:"label",render:function(e,t){return"R"===t.key||"C"===t.key?e:"$"===t.key||"%"===t.key||"W"===t.key?l.a.createElement("b",null,e):void 0}}],data:[{key:"W",label:"Working Days"},{key:"R",label:"Revenue"},{key:"C",label:"(-) Cos"},{key:"$",label:"CM $"},{key:"%",label:"CM %"}]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.columns,n=this.props.billing;return l.a.createElement(p.a,{justify:"center"},l.a.createElement(b.a,{span:4},l.a.createElement(Ol,{level:5},"Rev - Discount Value")),l.a.createElement(b.a,{span:5},l.a.createElement(Il,null,x(n.discount)," / ",n.totalMonths," Months  = ",x((n.discount/n.totalMonths).toFixed(2)))),l.a.createElement(b.a,{span:24},l.a.createElement(p.a,null,l.a.createElement(b.a,{span:10},l.a.createElement(Ol,{level:3},"Projected Profit & Loss ")),l.a.createElement(b.a,{span:2},l.a.createElement(Ol,{level:5},"CM %")),l.a.createElement(b.a,{span:2},l.a.createElement(Il,null,n.cmPercentage," %")))),l.a.createElement(Ge.a,{rowKey:function(e){return e.label},columns:a,dataSource:t,size:"small",pagination:!1,className:"timeSheet-table"}))}}]),a}(n.Component),Tl=(la.a.TabPane,function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.setFields=function(){var t=e.props.reason.api;return e.setState((function(e){return{Fields:e[t]}})),!0},e.fetchAll=function(t){Promise.all([Bt(),e.setFields()]).then((function(t){var a=e.state.Fields;t[0].success&&(a[2].data=t[0].data,e.setState({Fields:a}))})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l=t.lost,i=e.props,r=i.editLead,s=i.close,o=e.props.reason.key;l.status=o,(a=r,n=l,ke.a.put(pl+"/".concat(a,"/lost"),n,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),n&&A(e.headers&&e.headers.authorization),H.b.success({content:l,key:a}),{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&s()}))},e.workWon=function(e){},e.formRef=l.a.createRef(),e.state={editLead:!1,check:!1,leadValue:0,loading:!1,Fields:[],Lost:[{Placeholder:"Successful Tenderder",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Wining Price",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:12,key:"wonById",size:"small",data:[],type:"Select"},{object:"lost",fieldCol:12,key:"winingPrice",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:12,key:"reason",size:"small",mode:"tags",data:[{label:"Price",value:"Price"},{label:"Resources",value:"Resources"},{label:"Approach",value:"Approach"}],type:"Select"},{Placeholder:"Customer Feedback",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"feedback",size:"small",mode:{minRows:2,maxRows:12},type:"Textarea"}],NotBid:[{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"reason",size:"small",mode:"tags",data:[{label:"Insufficient\xa0",value:"Insufficient\xa0"},{label:"Resources",value:"Resources"},{label:"Not Competitive",value:"Not Competitive"},{label:"Not Financially viable",value:"Not Financially viable"},{label:"Outside\xa0Scope of Services",value:"Outside\xa0Scope of Services"}],type:"Select"}],NotProceed:[{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"reason",size:"small",mode:{minRows:5,maxRows:12},type:"Textarea"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.reason,n=e.close,i=this.state,r=i.Fields,s=i.loading;return l.a.createElement(Je.a,{title:a.msg,maskClosable:!1,centered:!0,visible:t,okButtonProps:{disabled:s,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:750},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(He,{FormFields:r})))}}]),a}(n.Component)),Fl=pa.b.Item,zl=la.a.TabPane,xl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.proId;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(M().permissions).OPPORTUNITIES;bl(t).then((function(n){n.success&&e.setState({data:n.data,basic:n.basic,billing:n.billing,leadId:t,infoModal:!1,lostModal:!1,renderTabs:!0,moveToProject:!1,permissions:a})}))},e.closeModal=function(){e.setState({infoModal:!1,moveToProject:!1,lostModal:!1})},e.handleDelete=function(t){hl(t).then((function(t){t.success&&e.props.history.push("/opportunities")}))},e.callBack=function(){var t=e.state,a=t.leadId;t.moveToProject?e.props.history.push("/opportunities"):e.getRecord(a)},e.status=[{title:"Won",msg:"Opportunity Won!?",api:"won"},{title:"Lost",msg:"Opportunity Lost!?",api:"Lost",key:"L"},{title:"Not Bid",msg:"Not Bid On Opportunity!?",api:"NotBid",key:"NB"},{title:"Did Not Proceed",msg:"Did Not Proceed?",api:"NotProceed",key:"DNP"}],e.state={infoModal:!1,lostModal:!1,leadId:!1,data:{},basic:{},billing:{},renderTabs:!1,moveToProject:!1,permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.lostModal,r=t.leadId,o=t.billing,c=t.renderTabs,d=t.moveToProject,u=t.permissions,m=t.basic,f=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,"Opportunity Basic Information"),l.a.createElement(b.a,null,l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,this.status.map((function(t){return l.a.createElement(v.a.Item,{key:t.title,disabled:!u.UPDATE},l.a.createElement(ge.a,{title:t.msg,onConfirm:function(){"Won"===t.title?e.setState({infoModal:!0,moveToProject:!0}):e.setState({lostModal:!0,moveToProject:t})},okText:"Yes",cancelText:"No"},t.title))})),l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0})},disabled:!u.UPDATE}," Edit "),1===(m&&m.type)?l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(r,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(r,"/milestones/").concat(m.mileId,"/resources")},className:"nav-link"},"Postions")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:f,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Fl,{label:"Project Name"},a.title),l.a.createElement(Fl,{label:"Estimated Value"},"".concat(x(a.value))),l.a.createElement(Fl,{label:"Organisation"},a.organization?l.a.createElement(s.b,{to:{pathname:"/organizations/info/".concat(a.organizationId)},className:"nav-link"},a.organization.name):"No Organisation"),l.a.createElement(Fl,{label:"Delegate Contact"}," ",m?m.ContactName:""),l.a.createElement(Fl,{label:"Start date"},a.startDate?ot()(a.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(Fl,{label:"End Date"},a.endDate?ot()(a.endDate).format("ddd DD MM YYYY"):null),l.a.createElement(Fl,{label:"Bid Date"},a.bidDate?ot()(a.bidDate).format("ddd DD MM YYYY"):null),l.a.createElement(Fl,{label:"Status"},m.status?F[m.status]:"")),c&&l.a.createElement(la.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(zl,{tab:"Comments",key:"comments"},l.a.createElement(za,{targetId:r,targetType:"WOR"})),l.a.createElement(zl,{tab:"Attachments",key:"attachments"},l.a.createElement(La,{targetId:r,targetType:"WOR"})),l.a.createElement(zl,{tab:"Projected Profit & Loss",key:"profitloss"},l.a.createElement(Dl,{id:r,billing:o}))),n&&l.a.createElement(Cl,{visible:n,editLead:r,project:d,close:this.closeModal,callBack:this.callBack}),i&&l.a.createElement(Tl,{visible:i,editLead:r,reason:d,close:this.closeModal}))}}]),a}(n.Component),Al=(la.a.TabPane,function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.skillId,n=t.editRex;console.log(n),a?e.fetchRes():e.skillModal()},e.fetchRes=function(){var t=e.props.levelId,a="employees/get/by-skills?psslId=".concat(t);Promise.all([wt(a)]).then((function(t){var a=t[0].success?t[0].data:[],n=e.state.ResourceFields,l=e.props.editRex;if(l){var i={contactPersonId:l.contactPersonId,billableHours:l.billableHours,sellingRate:l.sellingRate,effortRate:l.effortRate,buyingRate:l.buyingRate};console.log(i),e.formRef.current.setFieldsValue({obj:i})}n[2].data=a,e.setState({ResourceFields:n})})).catch((function(e){console.log(e)}))},e.skillModal=function(){var t=e.props,a=t.editRex,n=t.panelId;t.leadId;Yt(n).then((function(t){var n=e.state.SkillFields;if(n[3].data=t.success?t.data:[],a){var l=n[3].data.findIndex((function(e){return e.value===a.panelSkillId}));n[6].data=n[3].data?n[3].data[l].levels:[];var i={panelSkillId:a.panelSkillId,panelSkillStandardLevelId:a.panelSkillStandardLevelId,billableHours:a.billableHours,title:a.title,endDate:a.endDate?ot()(a.endDate):null,startDate:a.startDate?ot()(a.startDate):null};e.formRef.current.setFieldsValue({obj:i})}e.setState({SkillFields:n})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a=e.props,n=a.editRex,l=a.skillId;n?l?e.editResource(t.obj):e.editSkill(t.obj):l?e.addResourse(t.obj):e.addSkill(t.obj)},e.addSkill=function(t){e.setState({loading:!0});var a=e.props,n=a.leadId,l=a.callBack,i=a.crud;yl(i,t,n).then((function(e){e.success&&l(e.data)}))},e.addResourse=function(t){e.setState({loading:!0});var a=e.props,n=a.callBack,l=(a.leadId,a.skillId);(function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.post("".concat(D).concat(e,"/").concat(t,"/allocations"),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.data,i=a.message;return R(i),H.b.success({content:i,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n,data:l}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))})(a.crud,l,t).then((function(e){e.success&&n(e.data)}))},e.editSkill=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=(a.leadId,a.callBack),i=a.crud;t.id=n.id,console.log(t),El(i,n.id,t).then((function(e){e.success&&l(e.data)}))},e.editResource=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=a.callBack,i=(a.leadId,a.skillId),r=a.crud;t.id=n,console.log(t),function(e,t,a,n){return H.b.loading({content:"Loading...",key:a}),console.log(e),ke.a.put("".concat(D).concat(e,"/").concat(t,"/allocations/").concat(a),n,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.data,i=t.message;return R(i),H.b.success({content:i,key:a}),n&&A(e.headers&&e.headers.authorization),{success:n,data:l}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))}(r,i,n.id,t).then((function(e){e.success&&l(e.data)}))},e.formRef=l.a.createRef(),e.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],ResourceFields:[{Placeholder:"Resource",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Effort Rate",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"contactPersonId",size:"small",rules:[{required:!0,message:"Resource is Required"}],data:[],type:"Select"},{object:"obj",fieldCol:12,key:"effortRate",rules:[{required:!0,message:"Effort Rate is Required"}],size:"small",shape:"%",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100},{Placeholder:"Buy Cost",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sale Cost",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",rules:[{required:!0,message:"Buying Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",rules:[{required:!0,message:"Selling Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}],SkillFields:[{Placeholder:"Title",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Skill",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Skill is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"panelSkillId",size:"small",rules:[{required:!0,message:"Skill is Required"}],data:[],type:"Select",onChange:function(t,a){var n=e.state.SkillFields;n[6].data=a?a.levels:[];var l=e.formRef.current.getFieldsValue().obj;l.panelSkillStandardLevelId=void 0,e.formRef.current.setFieldsValue({obj:l}),e.setState({SkillFields:n})}},{Placeholder:"Level",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"panelSkillStandardLevelId",size:"small",rules:[{required:!0,message:"Level is Required"}],data:[],type:"Select",onChange:function(t,a){e.fetchRes()}},{object:"obj",fieldCol:12,key:"billableHours",size:"small",rules:[{required:!0,message:"Nillable Hours is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"startDate",rules:[{required:!0,message:"Start Date is Required"}],size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().obj;return a.endDate&&t>a.endDate}},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().obj;return a.startDate&&t<a.startDate}}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,i=(e.resource,e.skillId),r=this.state,s=r.ResourceFields,o=r.SkillFields,c=r.loading;return l.a.createElement(Je.a,{title:i?t?"Edit Resource":"Add Resource":t?"Edit Position":"Add Position",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:c,htmlType:"submit",form:"my-form"},okText:c?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:750},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:i?{obj:{effortRate:100}}:{obj:{startDate:null}}},l.a.createElement(He,{FormFields:i?s:o})))}}]),a}(n.Component)),Ml=pa.b.Item;function Rl(e){var t=Object(n.useState)(e.data),a=Object($.a)(t,2),i=(a[0],a[1],Object(n.useState)(!1)),r=Object($.a)(i,2),s=r[0],o=r[1],c=Object(n.useState)(!1),d=Object($.a)(c,2),u=d[0],m=d[1],f=Object(n.useState)((e.data&&1===e.data.length?e.data[0].id:-1!==e.data.findIndex((function(e){return!0===e.isMarkedAsSelected})))?[e.data[e.data.findIndex((function(e){return!0===e.isMarkedAsSelected}))].id]:[]),g=Object($.a)(f,2),p=g[0],b=g[1],h=[{title:"Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){return e&&"".concat(e.firstName," ").concat(e.lastName)}},{title:"Buy Cost",dataIndex:"buyingRate",key:"buyingRate",render:function(e){return"".concat(x(e))}},{title:"Sale Cost",dataIndex:"sellingRate",key:"sellingRate",render:function(e){return"".concat(x(e))}},{title:"Action",key:"action",align:"right",render:function(t,a,n){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){m(Object(Se.a)(Object(Se.a)({},t),{},{tableIndex:n})),o(!0)},disabled:e.permissions&&!e.permissions.UPDATE},"Edit Resource"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}];return l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(Ge.a,{key:e.skill,rowKey:function(e){return e.id},columns:h,dataSource:e.data,pagination:!1,rowSelection:{type:"radio",selectedRowKeys:p,onChange:function(t,a){e.leadId;var n=e.skill,l=e.crud;b(t),function(e,t,a){return ke.a.patch("".concat(D).concat(e,"/").concat(t,"/allocations/").concat(a,"/mark-as-selected"),{},{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;if(R(l),A(e.headers&&e.headers.authorization),H.b.success({content:l,key:a}),n)return{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))}(l,n,a[0].id).then((function(e){console.log(e)}))}}}),s&&l.a.createElement(Al,{visible:s,editRex:u,skillId:e.skill,leadId:e.leadId,levelId:e.levelId,panelId:e.panelId,mileId:e.mileId,crud:e.crud,close:function(){o(!1)},callBack:function(t){o(!1),e.callBack()}}))}var Nl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.match.params,a=t.proId,n=t.mileId,l=e.props.match.url,i=JSON.parse(M().permissions).OPPORTUNITIES;Promise.all([bl(a),kl(l)]).then((function(t){e.setState({desc:t[0].success?t[0].data:{},editRex:!1,infoModal:!1,leadId:a,mileId:n,crud:l,data:t[1].success?t[1].data:[],permissions:i})})).catch((function(e){console.log(e)}))},e.getLeadSkills=function(){var t=e.state.crud;kl(t).then((function(t){t.success&&e.setState({data:t.data,editRex:!1,infoModal:!1,skillId:!1,levelId:!1,tableIndex:!1})}))},e.getSkilldEmployee=function(t,a,n,l,i,r){e.setState({infoModal:t,skillId:a,levelId:r,resource:n,editRex:l,tableIndex:i})},e.closeModal=function(){e.setState({infoModal:!1,editRex:!1})},e.handleDelete=function(t){var a=e.state.leadId;vl(a,t).then((function(t){t.success&&e.callBack()}))},e.callBack=function(t){var a=e.state,n=a.leadId;a.skillId,a.editRex,a.tableIndex;e.getLeadSkills(n)},e.columns=[{title:"Title",dataIndex:"title",key:"title"},{title:"Skill",dataIndex:"panelSkill",key:"panelSkill",render:function(e){return e&&e.label}},{title:"Level",dataIndex:"panelSkillStandardLevel",key:"panelSkillStandardLevel",render:function(e){return e&&e.levelLabel}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM YYYY")}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&ot()(e).format("ddd DD MM YYYY")}},{title:"Total Hours",dataIndex:"billableHours",key:"billableHours"},{title:"Action",key:"action",align:"right",render:function(t,a,n){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.getSkilldEmployee(!0,!1,!1,a,n,a.panelSkillStandardLevelId)},disabled:e.state&&!e.state.permissions.UPDATE},"Edit Position"),l.a.createElement(v.a.Item,{onClick:function(){console.log(a),e.getSkilldEmployee(!0,a.id,!0,!1,n,a.panelSkillStandardLevelId)},disabled:e.state&&!e.state.permissions.ADD},"Add Resouce"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],e.state={infoModal:!1,editRex:!1,leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,crud:!1,mileId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,i=t.infoModal,r=t.editRex,s=t.leadId,o=(t.resource,t.skillId),c=t.levelId,d=t.permissions,u=t.mileId,m=t.crud;return console.log(d),l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Ml,{label:"Title"},a.title),l.a.createElement(Ml,{label:"Value"},x(a.value)),l.a.createElement(Ml,{label:"Start Date"},a.startDate?ot()(a.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(Ml,{label:"End Date"},a.endDate?ot()(a.endDate).format("ddd DD MM YYYY"):null),l.a.createElement(Ml,{label:"Bid Date"},a.bidDate?ot()(a.bidDate).format("ddd DD MM YYYY"):null)),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({infoModal:!0,editRex:!1,resource:!1,skillId:!1})},disabled:d&&!d.ADD},"Add Position"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:n,expandable:{expandedRowRender:function(t){return l.a.createElement(Rl,{data:t.opportunityResourceAllocations,skill:t.id,levelId:t.panelSkillStandardLevelId,leadId:s,mileId:u,crud:m,panelId:a.panelId,callBack:e.callBack,permissions:d})}},size:"small"}),i&&l.a.createElement(Al,{visible:i,editRex:r,skillId:o,levelId:c,leadId:s,mileId:u,crud:m,panelId:a.panelId,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),wl="".concat(D,"/projects"),Bl=function(e){return ke.a.get(wl+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i,r,s,o,c={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(n.contactPerson.firstName,"  ").concat(n.contactPerson.lastName," - ").concat(null!==(i=n.contactPerson.phoneNumber)&&void 0!==i?i:""),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,status:n.status,title:n.title,stateId:n.stateId,linkedWorkId:n.linkedWorkId},d={tender:n.tender,tenderNumber:n.tenderNumber},u={cmPercentage:null!==(r=n.cmPercentage)&&void 0!==r?r:0,cm$:n.value*n.cmPercentage/100,getPercentage:null!==(s=n.getPercentage)&&void 0!==s?s:0,goPercentage:null!==(o=n.goPercentage)&&void 0!==o?o:0,totalMonths:n.startDate&&n.endDate?Math.round(ot()(n.endDate).diff(ot()(n.startDate),"months",!0)):0,endDate:n.endDate?ot()(n.endDate):null,startDate:n.startDate?ot()(n.startDate):null,value:n.value?n.value:0};u.goget=u.getPercentage*u.goPercentage/100,u.discount=n.value*u.goget/100,u.upside=n.value-u.discount;var m={entryDate:n.entryDate&&ot()(n.entryDate),startDate:n.startDate&&ot()(n.startDate),hoursPerDay:n.hoursPerDay,endDate:n.endDate&&ot()(n.endDate),bidDate:n.bidDate&&ot()(n.bidDate)},f={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,projectManagerId:n.projectManagerId};return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,n.organizationName=n.organization&&n.organization.name,A(e.headers&&e.headers.authorization),{success:a,data:n,basic:c,tender:d,billing:u,dates:m,manage:f}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Ll=function(e){return ke.a.delete(wl+"/".concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Yl=function(e,t){return ke.a.get("".concat(D).concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),console.log(e),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},ql=function(e){return ke.a.get(wl+"/".concat(e,"/purchaseOrders"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Vl=la.a.TabPane,Hl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.editPro;Promise.all([Lt(),Bt(),Nt(),wt("helpers/contact-persons?active=1&employee=1&associated=1&label=1"),t&&e.getRecord(t),qt()]).then((function(t){t[1].success&&(t[1].data[0].disabled=!0);var a=e.state,n=a.BasicFields,l=a.ManageFields;n[2].data=t[0].success?t[0].data:[],n[3].data=t[1].success?t[1].data:[],n[11].data=t[2].success?t[2].data:[],n[6].data=t[4].success?t[4].data:[],n[15].data=t[5].success?t[5].data:[],l[2].data=t[3].success?t[3].data:[],l[3].data=t[3].success?t[3].data:[],l[5].data=t[3].success?t[3].data:[],e.setState({BasicFields:n,ManageFields:l})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l,i,r,s,o,c,d,u,m,f,g,p,b,h,y,k=t.basic,E=t.tender,v=t.dates,S=t.billing,C=t.manage,j=e.props.editPro,P=Object(Se.a)({panelId:null!==(a=k.panelId)&&void 0!==a?a:null,organizationId:null!==(n=k.organizationId)&&void 0!==n?n:null,contactPersonId:null!==(l=k.contactPersonId)&&void 0!==l?l:null,title:null!==(i=k.title)&&void 0!==i?i:"",type:null!==(r=k.type)&&void 0!==r?r:"",stateId:null!==(s=k.stateId)&&void 0!==s?s:null,qualifiedOps:null!==(o=k.qualifiedOps)&&void 0!==o&&o,linkedWorkId:null!==(c=k.linkedWorkId)&&void 0!==c?c:null,tender:null!==(d=E.tender)&&void 0!==d?d:"",tenderNumber:null!==(u=E.tenderNumber)&&void 0!==u?u:"",value:null!==(m=S.value)&&void 0!==m?m:0,cmPercentage:null!==(f=S.cmPercentage)&&void 0!==f?f:0,goPercentage:null!==(g=S.goPercentage)&&void 0!==g?g:0,getPercentage:null!==(p=S.getPercentage)&&void 0!==p?p:0,accountDirectorId:null!==(b=C.accountDirectorId)&&void 0!==b?b:null,accountManagerId:null!==(h=C.accountManagerId)&&void 0!==h?h:null,projectManagerId:null!==(y=C.projectManagerId)&&void 0!==y?y:null},v);j?e.editRecord(P):e.addProject(P)},e.addProject=function(t){var a,n=e.props.callBack;e.setState({loading:!0}),(a=t,H.b.loading({content:"Loading...",key:1}),ke.a.post(wl,a,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&n()}))},e.getRecord=function(t){e.state.ManageFields;return Bl(t).then((function(t){if(t.success){var a=t.basic,n=t.tender,l=t.billing,i=t.dates,r=t.manage,s="helpers/contact-persons?organizationId=".concat(a.organizationId,"&associated=1"),o=wt(s);return e.formRef.current.setFieldsValue({basic:a,tender:n,billing:l,dates:i,manage:r}),o}}))},e.editRecord=function(t){var a=e.props,n=a.editPro,l=a.callBack;console.log(e.props),t.id=n,e.setState({loading:!0}),function(e){return H.b.loading({content:"Loading...",key:e.id}),ke.a.put(wl+"/".concat(e.id),e,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e.id}),n&&A(t.headers&&t.headers.authorization),{success:n}})).catch((function(t){return H.b.error({content:t.message,key:e.id}),{error:"Please login again!",status:!1,message:t.message}}))}(t).then((function(e){e.success&&l()}))},e.formRef=l.a.createRef(),e.state={editPro:!1,basicSubmitted:!1,check:!1,leadValue:0,SKILLS:[],STATES:[],ORGS:[],loading:!1,BasicFields:[{Placeholder:"Panel",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Organisation",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"panelId",size:"small",rules:[{required:!0,message:"Panel is Required"}],data:[],type:"Select"},{object:"basic",fieldCol:12,key:"organizationId",size:"small",rules:[{required:!0,message:"Organisation"}],data:[],type:"Select",onChange:function(t){if(t){var a="helpers/contact-persons?organizationId=".concat(t,"&associated=1");wt(a).then((function(t){if(t.success){var a=e.state.BasicFields;a[6].data=t.data,e.setState({BasicFields:a})}}))}else{var n=e.state.BasicFields;n[6].data=[];var l=e.formRef.current.getFieldsValue().basic;l.contactPersonId=void 0,e.formRef.current.setFieldsValue({basic:l}),e.setState({BasicFields:n})}}},{Placeholder:"Delegate Contact Person",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"contactPersonId",size:"small",data:[],type:"Select"},{object:"basic",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input"},{Placeholder:"Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"type",size:"small",rules:[{required:!0,message:"Type is Required"}],data:[{label:"MILESTONE BASE",value:1},{label:"TIME BASE",value:2}],type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Qualified Ops",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Linked Project",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"qualifiedOps",size:"small",data:[{label:"True",value:!0},{label:"False",value:!1}],itemStyle:{marginBottom:1},type:"Select"},{object:"basic",fieldCol:12,key:"linkedWorkId",size:"small",data:[],itemStyle:{marginBottom:1},type:"Select"}],tenderFields:[{Placeholder:"Tender/RFQTS Title",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tender/RFQTS Number",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"tender",fieldCol:12,key:"tender",size:"small",type:"Input"},{object:"tender",fieldCol:12,key:"tenderNumber",size:"small",type:"Input"}],BillingFields:[{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"CM",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"value",size:"small",shape:"$",type:"InputNumber",onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=a.cmPercentage?t*a.cmPercentage/100:0,a.discount=a.goget?t*a.goget/100:0,a.upside=a.discount?t-a.discount:0,e.formRef.current.setFieldsValue({billing:a})},fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"cmPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=a.value?a.value*t/100:0,e.formRef.current.setFieldsValue({billing:a})}},{Placeholder:"CM",size:"small",fieldCol:24,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"cm$",size:"small",shape:"$",readOnly:!0,type:"InputNumber",fieldStyle:{width:"100%"}}],DatesFields:[{Placeholder:"Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",rules:[{required:!0,message:"Start Date is Required"}],fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().dates;return a.endDate&&t>a.endDate}},{object:"dates",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().dates;return a.startDate&&t<a.startDate}},{Placeholder:"Daily Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Entry Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"hoursPerDay",size:"small",rules:[{required:!0,message:"Dailty Hours is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"dates",fieldCol:12,key:"entryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}],ManageFields:[{Placeholder:"Account Director",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account Manager",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"accountDirectorId",size:"small",data:[],type:"Select"},{object:"manage",fieldCol:12,key:"accountManagerId",size:"small",data:[],type:"Select"},{Placeholder:"Project Manager",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"projectManagerId",size:"small",data:[],type:"Select"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editPro,a=e.visible,n=e.close,i=this.state,r=i.BasicFields,s=i.tenderFields,o=i.DatesFields,c=i.BillingFields,d=i.ManageFields,u=i.loading;return l.a.createElement(Je.a,{title:t?"Edit Project":"Add Project",maskClosable:!1,centered:!0,visible:a,okButtonProps:{readOnly:u,htmlType:"submit",form:"my-form"},okText:u?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:750},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{dates:{entryDate:ot()(new Date)}}},l.a.createElement(la.a,{type:"card"},l.a.createElement(Vl,{tab:"Opportunity Info",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:r})),l.a.createElement(Vl,{tab:"Tender/RFQTS Info",key:"tender",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:s})),l.a.createElement(Vl,{tab:"Date Info",key:"dates",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:o})),l.a.createElement(Vl,{tab:"Forecast",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:c})),l.a.createElement(Vl,{tab:"Manage",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(He,{FormFields:d})))))}}]),a}(n.Component),Ul=Ie.a.Title,_l=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getList()},n.getList=function(){var e=JSON.parse(M().permissions).PROJECTS;ke.a.get(wl,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){n.setState({data:t.success?t.data:[],openModal:!1,editPro:!1,permissions:e})}))},n.handleDelete=function(e){Ll(e).then((function(e){e.success&&n.getData()}))},n.callBack=function(){n.getList()},n.closeModal=function(){n.setState({openModal:!1,editPro:!1})},n.proForm=l.a.createRef(),n.columns=[{title:"Code",dataIndex:"id",key:"id",render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title"},{title:"Organisation Name",dataIndex:"organization",key:"organization",width:300,render:function(e){return e&&e.name}},{title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(x(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Type",dataIndex:"type",key:"type",render:function(e){return z[e]}},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){return n.setState({openModal:!0,editPro:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(e.id,"/purchase-order")},className:"nav-link"},"Purchase Order")),1===e.type?l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(e.id,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(e.id,"/milestones/").concat(e.id,"/resources")},className:"nav-link"},"Postions")),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(e.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={data:[],openModal:!1,editPro:!1,permissions:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,i=t.editPro,r=t.permissions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(Ul,{level:4},"Project")),l.a.createElement(b.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"default",size:"small"}," ",l.a.createElement(na.a,null),"Filter")),l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,editPro:!1})},disabled:!r.ADD},l.a.createElement(Qe.a,null),"Add Project")))),l.a.createElement(b.a,{span:24},l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"small"}))),n&&l.a.createElement(Hl,{visible:n,editPro:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Kl=pa.b.Item,Wl=la.a.TabPane,Gl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.proId;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(M().permissions).PROJECTS;Bl(t).then((function(n){n.success&&(console.log(n.basic),e.setState({data:n.data,basic:n.basic,billing:n.billing,leadId:t,infoModal:!1,renderTabs:!0,permissions:a}))}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){Ll(t).then((function(t){t.success&&e.props.history.push("/Employees")}))},e.callBack=function(){var t=e.state.leadId;e.getRecord(t)},e.state={infoModal:!1,leadId:!1,data:{},basic:{},billing:{},renderTabs:!1,permissions:{}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,i=t.leadId,r=t.billing,o=t.renderTabs,c=t.permissions,d=t.basic,u=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(b.a,null,"Project Basic Information"),l.a.createElement(b.a,null,l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){e.setState({infoModal:!0})},disabled:!c.UPDATE}," Edit "),1===(d&&d.type)?l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/milestones/").concat(i,"/resources")},className:"nav-link"},"Postions")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{title:u,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Kl,{label:"Project Name"},a.title),l.a.createElement(Kl,{label:"Estimated Value"},x(a.value)),l.a.createElement(Kl,{label:"Organisation"},a.organizationName?l.a.createElement(s.b,{to:{pathname:"/organizations/info/".concat(a.organizationId)},className:"nav-link"},a.organizationName):"No Organisation"),l.a.createElement(Kl,{label:"Delegate Contact"}," ",d?d.ContactName:null),l.a.createElement(Kl,{label:"Start date"},a.startDate?ot()(a.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(Kl,{label:"End Date"},a.endDate?ot()(a.endDate).format("ddd DD MM YYYY"):null),l.a.createElement(Kl,{label:"Bid Date"},a.bidDate?ot()(a.bidDate).format("ddd DD MM YYYY"):null),l.a.createElement(Kl,{label:"Status"},d.status?F[d.status]:"")),o&&l.a.createElement(la.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Wl,{tab:"Comments",key:"comments"},l.a.createElement(za,{targetId:i,targetType:"WOR"})),l.a.createElement(Wl,{tab:"Attachments",key:"attachments"},l.a.createElement(La,{targetId:i,targetType:"WOR"})),l.a.createElement(Wl,{tab:"Projected Profit & Loss",key:"profitloss"},l.a.createElement(Dl,{id:i,billing:r}))),n&&l.a.createElement(Hl,{visible:n,editPro:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Jl=(la.a.TabPane,function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props;t.editRex,t.panelId;e.openModal()},e.openModal=function(){var t=e.props,a=t.editRex,n=t.panelId;Yt(n).then((function(t){var n=e.state.ResourceFields;n[2].data=t.success?t.data:[],e.setState({ResourceFields:n},(function(){a&&e.getRecord(t.data)}))}))},e.onFinish=function(t){e.setState({loading:!0});var a=e.props.editRex;(t=t.obj).isMarkedAsSelected=!0,a?(console.log("edit"),e.editRecord(t)):(console.log("add"),e.addRecord(t))},e.addRecord=function(t){var a=e.props,n=a.proId,l=a.callBack;(function(e,t,a){return H.b.loading({content:"Loading...",key:a}),ke.a.post("".concat(D).concat(e),t,{headers:N()}).then((function(e){var t=e.data,n=t.success,l=t.message;return R(l),H.b.success({content:l,key:a}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:a}),{error:"Please look into it",status:!1,success:!1,message:e.message}}))})(a.crud,t,n).then((function(e){e.success&&l()}))},e.getRecord=function(t){var a=e.props;(function(e,t){return ke.a.get("".concat(D).concat(e,"/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i={panelSkillId:n.panelSkillId,panelSkillStandardLevelId:n.panelSkillStandardLevelId,billableHours:n.billableHours,startDate:n.startDate&&ot()(n.startDate),endDate:n.endDate&&ot()(n.endDate),contactPersonId:n.opportunityResourceAllocations[0]&&n.opportunityResourceAllocations[0].contactPersonId,buyingRate:n.opportunityResourceAllocations&&n.opportunityResourceAllocations[0].buyingRate,sellingRate:n.opportunityResourceAllocations&&n.opportunityResourceAllocations[0].sellingRate,effortRate:n.opportunityResourceAllocations&&n.opportunityResourceAllocations[0].effortRate,allocationId:n.opportunityResourceAllocations&&n.opportunityResourceAllocations[0].id};return A(e.headers&&e.headers.authorization),{success:a,data:i}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(a.crud,a.editRex).then((function(a){if(console.log(a.data),a.success){var n=t.findIndex((function(e){return e.value===a.data.panelSkillId})),l="employees/get/by-skills?psslId=".concat(a.data&&a.data.panelSkillStandardLevelId);wt(l).then((function(l){var i=e.state.ResourceFields;i[3].data=t[n]?t[n].levels:[],i[7].data=l.success?l.data:[],e.formRef.current.setFieldsValue({obj:a.data}),e.setState({ResourceFields:i,allocationId:a.data.allocationId})}))}}))},e.editRecord=function(t){var a=e.props,n=a.editRex,l=a.crud,i=a.callBack;t.id=n,function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.put("".concat(D).concat(e,"/").concat(t),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.data,i=a.message;return R(i),H.b.success({content:i,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n,data:l[0]}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))}(l,n,t).then((function(e){e.success&&i()}))},e.formRef=l.a.createRef(),e.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],data:{},ResourceFields:[{Placeholder:"Skill",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Level",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"panelSkillId",size:"small",rules:[{required:!0,message:"Skill is Required"}],data:[],type:"Select",onChange:function(t,a){var n=e.state.ResourceFields;n[3].data=a?a.levels:[];var l=e.formRef.current.getFieldsValue().obj;l.panelSkillStandardLevelId=void 0,l.contactPersonId=void 0,e.formRef.current.setFieldsValue({obj:l}),e.setState({ResourceFields:n})}},{object:"obj",fieldCol:12,key:"panelSkillStandardLevelId",size:"small",rules:[{required:!0,message:"Level is Required"}],data:[],type:"Select",onChange:function(t,a){var n=e.state.ResourceFields,l="employees/get/by-skills?psslId=".concat(a&&a.value);wt(l).then((function(t){n[7].data=t.success?t.data:[];var a=e.formRef.current.getFieldsValue().obj;a.contactPersonId=void 0,e.formRef.current.setFieldsValue({obj:a}),e.setState({ResourceFields:n})}))}},{Placeholder:"Work Hours",fieldCol:12,size:"small",type:"Text",rangeMin:!0,labelAlign:"right"},{Placeholder:"Resource",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"billableHours",size:"small",rules:[{required:!0,message:"Work Hour is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"contactPersonId",size:"small",rules:[{required:!0,message:"Resource is Required"}],data:[],type:"Select"},{Placeholder:"Start Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().obj;return a.endDate&&t>a.endDate}},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().obj;return a.startDate&&t<a.startDate}},{Placeholder:"Effort Rate",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Buy Cost",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"effortRate",rules:[{required:!0,message:"Effort Rate is Required"}],shape:"%",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",rules:[{required:!0,message:"Buying Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Sale Cost",fieldCol:24,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",rules:[{required:!0,message:"Selling Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,i=this.state,r=i.ResourceFields,s=i.loading;return l.a.createElement(Je.a,{title:t?"Edit Resource":"Add Resource",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:s,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{obj:{startDate:null}}},l.a.createElement(He,{FormFields:r})))}}]),a}(n.Component)),Ql=pa.b.Item,Zl=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAll()},n.fetchAll=function(e){var t=JSON.parse(M().permissions).PROJECTS,a=n.props.match.url,l=n.props.match.params,i=l.proId,r=l.mileId;Promise.all([Bl(i),Yl(a)]).then((function(e){n.setState({desc:e[0].success?e[0].data:{},editRex:!1,proId:i,crud:a,mileId:r,infoModal:!1,data:e[1].success?e[1].data:[],permissions:t})})).catch((function(e){console.log(e)}))},n.getLeadSkills=function(e){var t=n.state.crud;Yl(t).then((function(e){e.success&&n.setState({data:e.success?e.data:[],editRex:!1,infoModal:!1})}))},n.closeModal=function(){n.setState({infoModal:!1,editRex:!1})},n.handleDelete=function(e){(function(e,t){return ke.a.delete(wl+"/".concat(e,"/resources/").concat(t),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(n.props.match.params.proId,e).then((function(e){e.success&&n.props.history.push("/Employees")}))},n.callBack=function(){var e=n.state.proId;n.getLeadSkills(e)},n.columns=[{title:"Skill",dataIndex:"panelSkill",key:"panelSkill",render:function(e){return e&&e.label}},{title:"Level",dataIndex:"panelSkillStandardLevel",key:"panelSkillStandardLevel",render:function(e){return e&&e.levelLabel}},{title:"Employee Name",dataIndex:"opportunityResourceAllocations",key:"opportunityResourceAllocations",render:function(e){return e&&e[0]&&e[0].contactPerson&&"".concat(e[0].contactPerson.firstName," ").concat(e[0].contactPerson.lastName)}},{title:"Billable Hours",dataIndex:"billableHours",key:"billableHours"},{title:"Buy Cost",dataIndex:"opportunityResourceAllocations",key:"opportunityResourceAllocations",render:function(e){return e&&e[0]&&x(e[0].buyingRate)}},{title:"Sale Cost",dataIndex:"opportunityResourceAllocations",key:"opportunityResourceAllocations",render:function(e){return e&&e[0]&&x(e[0].sellingRate)}},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){n.setState({infoModal:!0,editRex:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit Resource"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={infoModal:!1,editRex:!1,proId:!1,mileId:!1,crud:!1,desc:{title:"",organization:{name:""},value:"",startDate:"",endDate:""},permissions:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state,n=a.desc,i=a.data,r=a.infoModal,s=a.editRex,o=a.proId,c=a.permissions,d=a.crud,u=a.mileId;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Ql,{label:"Project Name"},n.title),l.a.createElement(Ql,{label:"Estimated Value"},x(null!==(e=n.value)&&void 0!==e?e:0)),l.a.createElement(Ql,{label:"Organisation"},n.organizationName?n.organization.name:" No Organisation"),l.a.createElement(Ql,{label:"Start date"},n.startDate?ot()(n.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(Ql,{label:"End Date"},n.endDate?ot()(n.endDate).format("ddd DD MM YYYY"):null)),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){t.setState({infoModal:!0,editRex:!1})},disabled:!c.ADD},"Add Resource"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:i,size:"small"}),r&&l.a.createElement(Jl,{visible:r,editRex:s,proId:o,crud:d,mileId:u,panelId:n.panelId,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Xl=(la.a.TabPane,function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editRex,n=t.panelId;console.log({editRex:a},{panelId:n}),e.openModal()},e.openModal=function(){var t=e.props,a=t.editRex,n=t.panelId;Yt(n).then((function(t){var n=e.state.ResourceFields;n.fields[2].data=t.success?t.data:[],e.setState({ResourceFields:n},(function(){a&&e.getRecord(t.data)}))}))},e.submit=function(){e.resourceRef.current&&e.resourceRef.current.refs.resource_form.submit()},e.ResourceCall=function(t){e.props.editRex?(console.log("edit"),e.editRecord(t.obj)):(console.log("add"),e.addRecord(t.obj))},e.addRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.proId,l=a.callBack;console.log(n),yl(n,t).then((function(e){e.success&&l()}))},e.getRecord=function(t){var a=e.props,n=a.proId,l=a.editRex;console.log(n,l),kl(n).then((function(a){if(console.log(a.data),a.success){var n=t.findIndex((function(e){return e.value===a.data.panelSkillId}));ke.a.get("".concat(D,"/contactpersons"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=[];if(n.map((function(e){l.push({value:e.id,label:e.firstName+" "+e.lastName})})),A(e.headers&&e.headers.authorization),a)return{success:a,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(l){var i=e.state.ResourceFields;i.fields[3].data=t[n]?t[n].levels:[],i.fields[6].data=l.success?l.data:[],e.resourceRef.current.refs.resource_form.setFieldsValue({obj:a.data}),e.setState({ResourceFields:i})}))}}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=a.proId,i=a.callBack;t.id=n,El(n,l,t).then((function(e){e.success&&i()}))},e.resourceRef=l.a.createRef(),e.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],ResourceFields:{formId:"resource_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[{Placeholder:"Bill Hours",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Buy Cost",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"billableHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"buyingRate",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Sale Cost",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"sellingRate",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"s_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"End Date",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"e_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editRex,n=t.visible,i=t.close,r=this.state,s=r.ResourceFields,o=r.loading;return l.a.createElement(Je.a,{title:a?"Edit opportunity":"Add Resource",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:i,width:900},l.a.createElement(rt,{ref:this.resourceRef,Callback:this.ResourceCall,FormFields:s}))}}]),a}(n.Component)),$l=pa.b.Item,ei=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params,t=e.proId,a=e.id;n.fetchAll(t,a)},n.fetchAll=function(e,t){Promise.all([bl(t),kl(t)]).then((function(a){n.setState({desc:a[0].success?a[0].data:{},editRex:!1,ProId:e,resId:t,data:a[1].success?a[1].data:[]})})).catch((function(e){console.log(e)}))},n.getLeadSkills=function(e){kl(e).then((function(e){e.success&&n.setState({desc:e.data,editRex:!1})}))},n.closeModal=function(){n.setState({infoModal:!1,editRex:!1})},n.handleDelete=function(e){var t=n.props.match.params.id;vl(t,e).then((function(e){e.success}))},n.callBack=function(){var e=n.state.ProId;n.getLeadSkills(e)},console.log(n.props),n.columns=[{title:"Billable Hours",dataIndex:"billableHours",key:"billableHours"},{title:"Buy Cost",dataIndex:"buyingRate",key:"buyingRate"},{title:"Sale Cost",dataIndex:"sellingRate",key:"sellingRate"},{title:"Start Date",dataIndex:"startDate",key:"startDate"},{title:"End Date",dataIndex:"endDate",key:"endDate"},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(e.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){console.log(e.id),n.setState({infoModal:!0,editRex:e.id})}},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={infoModal:!1,editRex:!1,ProId:!1,data:[{billableHours:6,buyingRate:20,sellingRate:21,startDate:"Mon Nov 20 2020",endDate:"Fri Dec 20 2020"},{billableHours:6,buyingRate:20,sellingRate:22,startDate:"Mon Dec 22 2020",endDate:"Mon Jan 20 2021"},{billableHours:6,buyingRate:21,sellingRate:25,startDate:"Tue Jan 21 2021",endDate:"Tue Fri 10 2021"}],desc:{}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,i=t.infoModal,r=t.editRex,s=t.ProId;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement($l,{label:"First Name"},"Talha"),l.a.createElement($l,{label:"Last Name"},"Ahmed"),l.a.createElement($l,{label:"Skill"},"Andriod Developer"),l.a.createElement($l,{label:"Level"},"Senior")),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null," ",l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({infoModal:!0,editRex:!1})}},"Add New")," ")),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:n,size:"small"}),i&&l.a.createElement(Xl,{visible:i,editRex:r,ProId:s,panelId:a.panelId,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),ti=(la.a.TabPane,function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editRex;t.panelId;console.log(Object(Se.a)({},e.props)),a&&e.getRecord(a)},e.submit=function(){e.orderRef.current&&e.orderRef.current.refs.order_form.submit()},e.OrderCall=function(t){e.props.editRex?(console.log("edit"),e.editRecord(t.obj)):(console.log("add"),e.addRecord(t.obj))},e.addRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.ProId,l=a.callBack;console.log(n,t),function(e,t){return H.b.loading({content:"Loading...",key:e}),ke.a.post(wl+"/".concat(e,"/purchaseOrders"),t,{headers:N()}).then((function(t){var a=t.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:e}),n&&A(t.headers&&t.headers.authorization),{success:n}})).catch((function(t){return H.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))}(n,t).then((function(e){e.success&&l()}))},e.getRecord=function(t){var a,n,l=e.props,i=l.ProId,r=l.editRex;console.log(i,r),(a=i,n=r,ke.a.get(wl+"/".concat(a,"/purchaseOrders/").concat(n),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=Object(Se.a)(Object(Se.a)({},n),{},{issueDate:n.issueDate?ot()(n.issueDate):null,expiryDate:n.expiryDate?ot()(n.expiryDate):null});return A(e.headers&&e.headers.authorization),{success:a,data:i}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){console.log(t),t.success&&e.orderRef.current.refs.order_form.setFieldsValue({obj:t.data})}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=a.ProId,i=a.callBack;t.id=n,function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.put(wl+"/".concat(e,"/purchaseOrders/").concat(t),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message;return R(l),H.b.success({content:l,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n}})).catch((function(e){return H.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))}(l,n,t).then((function(e){e.success&&i()}))},e.orderRef=l.a.createRef(),e.state={editRex:!1,orderSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],OrderFields:{formId:"order_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[{Placeholder:"Issue Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Expiry Date",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"issueDate",size:"small",rules:[{required:!0,message:"Issue Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"expiryDate",size:"small",rules:[{required:!0,message:"Expiry Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"Value",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Expense",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"value",size:"small",rules:[{required:!0,message:"Value is Required"}],shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"expense",size:"small",rules:[{required:!0,message:"Expense is Required"}],shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea",itemStyle:{marginBottom:1}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"comment",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}]}},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editRex,n=t.visible,i=t.close,r=this.state,s=r.OrderFields,o=r.loading;return l.a.createElement(Je.a,{title:a?"Edit Purchase Order":"Add Purchase Order",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(Ze.a,null):"Save",onCancel:i,width:900},l.a.createElement(rt,{ref:this.orderRef,Callback:this.OrderCall,FormFields:s}))}}]),a}(n.Component)),ai=pa.b.Item,ni=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.fetchAll(e)},n.fetchAll=function(e){var t=JSON.parse(M().permissions).PROJECTS;Promise.all([Bl(e),ql(e)]).then((function(a){n.setState({desc:a[0].success?a[0].data:{},editRex:!1,ProId:e,openModal:!1,data:a[1].success?a[1].data:[],permissions:t})})).catch((function(e){console.log(e)}))},n.getRecords=function(e){ql(e).then((function(e){e.success&&n.setState({data:e.success?e.data:[],editRex:!1,openModal:!1})}))},n.closeModal=function(){n.setState({openModal:!1,editRex:!1})},n.handleDelete=function(e){var t,a,l=n.state.ProId;(t=l,a=e,ke.a.delete(wl+"/".concat(t,"/purchaseOrders/").concat(a),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&A(e.headers&&e.headers.authorization),{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&n.getRecords(l)}))},n.callBack=function(){var e=n.state.ProId;n.getRecords(e)};e.match.params.proId;return n.columns=[{title:"Issue Date",dataIndex:"issueDate",key:"issueDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"Expiry Date",dataIndex:"expiryDate",key:"expiryDate",render:function(e){return e&&ot()(e).format("ddd MMM DD YYYY")}},{title:"Value",dataIndex:"value",key:"value",render:function(e){return"".concat(x(e))}},{title:"Expense",dataIndex:"expense",key:"expense",render:function(e){return"".concat(x(e))}},{title:"Action",key:"action",align:"right",render:function(e){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{danger:!0},l.a.createElement(ge.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(e.id)}},"Delete")),l.a.createElement(v.a.Item,{onClick:function(){n.setState({openModal:!0,editRex:e.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}],n.state={openModal:!1,editRex:!1,ProId:!1,desc:{title:"Service",organization:{name:"PSO"},value:"1000.00",startDate:"12 10 2020",endDate:"12 4 2021"}},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,i=t.openModal,r=t.editRex,s=t.ProId,o=t.permissions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ai,{label:"Project Name"},a.title),l.a.createElement(ai,{label:"Estimated Value"},x(a.value)),l.a.createElement(ai,{label:"Organisation"},a.organizationName?a.organization.name:" No Organisation"),l.a.createElement(ai,{label:"Start date"},a.startDate?ot()(a.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(ai,{label:"End Date"},a.endDate?ot()(a.endDate).format("ddd DD MM YYYY"):null)),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null," ",l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,editRex:!1})},disabled:o&&!o.ADD},"Add New")," ")),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:n,size:"small"}),i&&l.a.createElement(ti,{visible:i,editRex:r,ProId:s,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),li=a(314),ii=("".concat(D,"/milestones"),function(e){return ke.a.get("".concat(D).concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data;if(A(e.headers&&e.headers.authorization),a)return{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))}),ri=function(e,t){return ke.a.get("".concat(D,"/").concat(e),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(n.contactPerson.firstName,"  ").concat(n.contactPerson.lastName," - ").concat(n.contactPerson.phoneNumber),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,title:n.title,stateId:n.stateId},r={tender:n.tender,tenderNumber:n.tenderNumber},s={cmPercentage:n.cmPercentage?n.cmPercentage:0,cm$:n.value*n.cmPercentage/100,getPercentage:n.getPercentage?n.getPercentage:0,goPercentage:n.goPercentage?n.goPercentage:0,totalMonths:n.startDate&&n.endDate?Math.ceil(ot()(n.endDate).diff(ot()(n.startDate),"months",!0)):0,endDate:n.endDate?ot()(n.endDate):null,startDate:n.startDate?ot()(n.startDate):null,value:n.value?n.value:0};s.goget=s.getPercentage*s.goPercentage/100,s.discount=n.value*s.goget/100,s.upside=n.value-s.discount;var o={entryDate:n.entryDate&&ot()(n.entryDate),startDate:n.startDate&&ot()(n.startDate),hoursPerDay:n.hoursPerDay,endDate:n.endDate&&ot()(n.endDate),bidDate:n.bidDate&&ot()(n.bidDate)},c={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,opportunityManagerId:n.opportunityManagerId,projectManagerId:n.projectManagerId};return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,n.organizationName=n.organization&&n.organization.name,A(e.headers&&e.headers.authorization),{success:a,data:n,basic:i,tender:r,billing:s,dates:o,manage:c}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},si=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){console.log(e.props.crud),e.openModal()},e.openModal=function(){var t=e.props.editMile;t&&e.getRecord(t)},e.onFinish=function(t){var a=e.props.editMile;e.setState({loading:!0}),t=t.obj,a?e.editRecord(t):e.addRecord(t)},e.addRecord=function(t){var a=e.props,n=a.proId,l=a.callBack,i=a.crud;t.projectId=n,function(e,t){return H.b.loading({content:"Loading...",key:1}),console.log(e),ke.a.post("".concat(D).concat(e),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return R(n),H.b.success({content:n,key:1}),a&&A(e.headers&&e.headers.authorization),{success:a,data:l}})).catch((function(e){return H.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))}(i,t).then((function(e){e.success&&l(e.data)}))},e.getRecord=function(){var t=e.props.editMile;t.startDate=t.startDate&&ot()(t.startDate),t.endDate=t.endDate&&ot()(t.endDate),e.formRef.current.setFieldsValue({obj:t})},e.editRecord=function(t){var a=e.props,n=a.editMile,l=a.callBack;(function(e,t,a){return H.b.loading({content:"Loading...",key:t}),ke.a.put("".concat(D).concat(e,"/").concat(t),a,{headers:N()}).then((function(e){var a=e.data,n=a.success,l=a.message,i=a.data;return R(l),H.b.success({content:l,key:t}),n&&A(e.headers&&e.headers.authorization),{success:n,data:i[0]}})).catch((function(e){return H.b.error({content:e.message,key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))})(a.crud,n.id,t).then((function(e){e.success&&l(e.data)}))},e.formRef=l.a.createRef(),e.state={editMile:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],data:{},MileFields:[{Placeholder:"Title",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Progress",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"title is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"progress",shape:"%",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100},{Placeholder:"Start Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().obj;return a.endDate&&t>a.endDate}},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().obj;return a.startDate&&t<a.startDate}},{Placeholder:"Approved",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"isApproved",size:"small",type:"Select",data:[{label:"True",value:!0},{label:"False",value:!1}],fieldStyle:{width:"100%"}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea"}]},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editMile,a=e.visible,n=e.close,i=this.state,r=i.MileFields,s=i.loading;return l.a.createElement(Je.a,{title:t?"Edit Milestone":"Add Milestone",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:s,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(Ze.a,null):"Save",onCancel:n,width:900},l.a.createElement(Ce.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{obj:{progress:0}}},l.a.createElement(He,{FormFields:r})))}}]),a}(n.Component),oi=pa.b.Item,ci=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.fetchAll(e)},n.resRoute=function(e){var t=n.props.match.url;return t=t.split("/"),"/".concat(t[1],"/").concat(t[2],"/").concat(t[3],"/").concat(e,"/resources")},n.fetchAll=function(e){var t=JSON.parse(M().permissions).PROJECTS,a=n.props.match.url,l=n.props.match.url;l=l.split("/"),l="".concat(l[1],"/").concat(l[2]),Promise.all([ri(l),ii(a)]).then((function(l){n.setState({desc:l[0].success&&l[0].data,data:l[1].success&&l[1].data,proId:e,customUrl:a,permissions:t})})).catch((function(e){console.log(e)}))},n.closeModal=function(){n.setState({infoModal:!1,editMile:!1})},n.handleDelete=function(e){n.props.match.params.proId},n.callBack=function(e){console.log(e);var t=n.state,a=(t.proId,t.editMile),l=t.data;a?l[a.rowIndex]=e:l.push(e),n.setState({data:Object(ue.a)(l),infoModal:!1})},n.state={infoModal:!1,editMile:!1,proId:!1,desc:{title:"",organization:{name:""},value:"",startDate:"",endDate:""},permissions:{},customUrl:"opportunity",columns:[{title:"Title",dataIndex:"title",key:"title"},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&ot()(e).format("ddd DD MM yyyy")}},{title:"Progress",dataIndex:"progress",key:"progress",align:"center",render:function(e){return l.a.createElement(li.a,{percent:e,size:"small"})}},{title:"Approved",dataIndex:"isApproved",key:"isApproved",align:"right",render:function(e){return l.a.createElement(mt.a,{color:e?"green":"volcano",key:e},e?"TRUE":"FALSE")}},{title:"Action",key:"action",align:"right",render:function(e,t,a){return l.a.createElement(V.a,{overlay:l.a.createElement(v.a,null,l.a.createElement(v.a.Item,{onClick:function(){n.setState({infoModal:!0,editMile:Object(Se.a)(Object(Se.a)({},t),{},{rowIndex:a})})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit Milestone"),l.a.createElement(v.a.Item,null,l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/resources")},className:"nav-link"},"Positions")))},l.a.createElement(pe.a,{size:"small"},l.a.createElement(G.a,null)," Option ",l.a.createElement(J.a,null)))}}]},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,i=t.infoModal,r=t.editMile,s=t.proId,o=(t.permissions,t.columns),c=t.customUrl;return l.a.createElement(l.a.Fragment,null,l.a.createElement(pa.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(oi,{label:"Title"},a.title),l.a.createElement(oi,{label:"Value"},x(a.value)),l.a.createElement(oi,{label:"Start Date"},a.startDate?ot()(a.startDate).format("ddd DD MM YYYY"):null," "),l.a.createElement(oi,{label:"End Date"},a.endDate?ot()(a.endDate).format("ddd DD MM YYYY"):null),l.a.createElement(oi,{label:"Bid Date"},a.bidDate?ot()(a.bidDate).format("ddd DD MM YYYY"):null)),l.a.createElement(p.a,{justify:"end"},l.a.createElement(b.a,null,l.a.createElement(pe.a,{type:"primary",size:"small",onClick:function(){e.setState({infoModal:!0,editMile:!1})}},"Add Milestone"))),l.a.createElement(Ge.a,{pagination:{pageSize:M().pageSize},rowKey:function(e){return e.id},columns:o,dataSource:n,size:"small"}),i&&l.a.createElement(si,{visible:i,editMile:r,proId:s,crud:c,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),di=a(306),ui=a(592),mi=a(596),fi=(a(560),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).getListData=function(e){var t;switch(e.date()){case 8:t=[{type:"warning",content:"This is warning event.",dec:"Description: This is warning event."},{type:"success",content:"This is usual event.",dec:"Description: This is warning event."}];break;case 10:t=[{type:"warning",content:"This is warning event.",dec:"Description: This is warning event."},{type:"success",content:"This is usual event.",dec:"Description: This is usual event."},{type:"error",content:"This is error event.",dec:"Description: TThis is error event."}];break;case 15:t=[{type:"warning",content:"This is warning event",dec:"Description: TThis is error event."},{type:"success",content:"This is very long usual event\u3002\u3002....",dec:"ou can\u2019t write good content for a website without knowing why you\u2019re writing it.Is the website content selling a product? Is it meant to attract new clients? Is it building traffic to support advertising and sponsorships? Once you know the main goal of the website content you\u2019re producing, you\u2019ll be better positioned to write copy that will help achieve that goal.But before you even write one word of content for a website, know who you\u2019re writing it for."},{type:"error",content:"This is error event 1.",dec:"Description: This is error event 1."},{type:"error",content:"This is error event 2.",dec:"Description: This is error event 2."},{type:"error",content:"This is error event 3.",dec:"Description: TThis is error event 3."},{type:"error",content:"This is error event 4.",dec:"Description: TThis is error event 4."}]}return t||[]},e.popover=function(e){return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Detail: "),e.content),l.a.createElement("p",null,l.a.createElement("b",null,"Description: "),e.dec))},e.dateCellRender=function(t){var a=e.getListData(t);return l.a.createElement("ul",{className:"events"},a.map((function(t){return l.a.createElement("li",{key:t.content},l.a.createElement(di.a,{content:e.popover(t),title:t.type},l.a.createElement("span",null,l.a.createElement(ui.a,{status:t.type,text:t.content}))))})))},e.getMonthData=function(e){if(8===e.month())return 1394},e.monthCellRender=function(t){var a=e.getMonthData(t);return a?l.a.createElement("div",{className:"notes-month"},l.a.createElement("section",null,a),l.a.createElement("span",null,"Backlog number")):null},e}return Object(d.a)(a,[{key:"render",value:function(){return l.a.createElement(mi.a,{dateCellRender:this.dateCellRender,monthCellRender:this.monthCellRender})}}]),a}(n.Component)),gi=function(e){var t=Object(be.useForm)(),a=Object($.a)(t,1)[0],i=Object(n.useState)([{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"cpCode",size:"small",readOnly:!0,rules:[{required:!0,message:"Select Contact Person !!"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:20}},{object:"basic",disabled:!0,fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:20}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",readOnly:!0,fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:20}},{object:"basic",readOnly:!0,fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:20}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",readOnly:!0,fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"basic",readOnly:!0,fieldCol:12,key:"email",size:"small",type:"Input",disabled:!1,itemStyle:{marginBottom:20}},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",readOnly:!0,fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],itemStyle:{marginBottom:20},type:"Select",disabled:!0},{object:"basic",readOnly:!0,fieldCol:12,key:"stateId",size:"small",type:"Select",disabled:!0,data:[],itemStyle:{marginBottom:20}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",readOnly:!0,fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:30}}]),r=Object($.a)(i,2),s=r[0],o=r[1];Object(n.useEffect)((function(){c(),a.setFieldsValue({basic:e.data})}),[]);var c=function(){Nt().then((function(e){if(e.success){var t=s.map((function(t){return"stateId"===t.key?Object(Se.a)(Object(Se.a)({},t),{},{data:e.data}):t}));o(t)}}))};return l.a.createElement(he.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(He,{FormFields:s}))},pi=function(e){var t=Object(be.useForm)(),a=Object($.a)(t,1)[0];return Object(n.useEffect)((function(){a.setFieldsValue({billing:e.data})}),[]),l.a.createElement(he.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(He,{FormFields:[{Placeholder:"Employment Status",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",disabled:!0,fieldCol:12,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",rules:[{required:!0,message:"Status is Required"}],itemStyle:{marginBottom:20}},{object:"billing",disabled:!0,fieldCol:12,key:"payslipEmail",size:"small",type:"input",itemStyle:{marginBottom:20}},{Placeholder:"Full Work Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",disabled:!0,fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:20}},{object:"billing",disabled:!0,fieldCol:6,key:"noOfHoursPer",size:"small",type:"Select",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:20}},{object:"billing",disabled:!0,fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:20}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",disabled:!0,fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:20}},{object:"billing",disabled:!0,fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Salary is Required"}],itemStyle:{marginBottom:20}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",disabled:!0,fieldCol:12,key:"payFrequency",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],itemStyle:{marginBottom:20}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",disabled:!0,fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:20}}]}))},bi=function(e){return ke.a.post("".concat(D,"/login"),e).then((function(e){localStorage.clear();var t=e.data,a=t.success,n=t.data,l=t.message;if(H.b.success({content:l,key:"logout"},5),a){var i={};n.role.permissions.map((function(e){i[e.resource]||(i[e.resource]={}),i[e.resource][e.action]||(i[e.resource][e.action]={}),i[e.resource][e.action][e.grant]=!0})),n.permissions=JSON.stringify(i),delete n.role.permissions,n.role=JSON.stringify(n.role);for(var r=Object.keys(n),s=r.length-1;s>=0;s--){var o=r[s];localStorage.setItem(o,n[o])}return{success:a,data:n}}})).catch((function(e){return H.b.error({content:e.message,key:"logout"},5),{error:"Please login again!",status:!1,message:e.message}}))},hi=function(){var e=localStorage.getItem("accessToken"),t=localStorage.getItem("jwtExpired");return e&&t?"jwtExpired":!!e},yi=Te.a.Password,ki=Ie.a.Title,Ei=function(e){var t=Object(n.useState)(!1),a=Object($.a)(t,2),i=a[0],r=a[1];return l.a.createElement(p.a,{style:{padding:50,paddingTop:20}},l.a.createElement(b.a,{span:6},l.a.createElement(ki,{level:2},"Password"),l.a.createElement(ki,{level:5},"After a successful password update, you will be redirected to the login page where you can log in with your new password.")),l.a.createElement(b.a,{span:12},l.a.createElement(Ce.a,Object.assign({id:"sdsda",scrollToFirstError:!0,size:"small",layout:"vertical"},{wrapperCol:{span:16}},{onFinish:function(e){var t;console.log(e),(t=e,ke.a.patch("".concat(D,"/password"),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),H.b.success({content:l,key:"logout"},5),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return H.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&(localStorage.clear(),r(!0))}))}}),l.a.createElement(Ce.a.Item,{name:"oldPassword",label:"Current Password",rules:[{required:!0,message:"Please input your current password!"}]},l.a.createElement(yi,{autoComplete:"new-password"})),l.a.createElement(Ce.a.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please input your New password!"},{min:6,message:"New Password Should have atleast 6 Character"}],hasFeedback:!0},l.a.createElement(yi,{autoComplete:"new-password"})),l.a.createElement(Ce.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newPassword")!==a?Promise.reject(new Error("Passwords do not match!")):Promise.resolve()}}}]},l.a.createElement(yi,{autoComplete:"new-password"})),l.a.createElement(Ce.a.Item,null,l.a.createElement(pe.a,{type:"primary",htmlType:"submit"}," Reset Password ")))),i&&l.a.createElement(o.a,{to:{pathname:"/"}}))};var vi=function(e){var t=Ce.a.useForm(),a=Object($.a)(t,1)[0],i=Object(n.useState)([{Placeholder:"Superannuation",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Superannuation Fund/ SMSF Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationName",size:"small",type:"Input",itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationType",size:"small",data:[{label:"Public",value:"P"},{label:"SMSF",value:"S"}],type:"Select",itemStyle:{marginBottom:20},onChange:function(e){E(e)}}]),r=Object($.a)(i,2),s=r[0],o=r[1],c=Object(n.useState)([{Placeholder:"Next Of Kin",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:20}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Employee",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}]),d=Object($.a)(c,2),u=d[0],m=(d[1],Object(n.useState)([{Placeholder:"Bank Details",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Bank Account Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Bank Account Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankName",size:"small",type:"Input",onChange:function(e){v(e)},itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input",onChange:function(e){v(e)},itemStyle:{marginBottom:20}},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax File Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankBsb",size:"small",type:"Input",onChange:function(e){v(e)},itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"tfn",size:"small",type:"Input",onChange:function(e){v(e)},itemStyle:{marginBottom:20}},{Placeholder:"Tax-free Threshold",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"HELP (HECS)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"taxFreeThreshold",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"helpHECS",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:20}}])),f=Object($.a)(m,2),g=f[0],p=f[1],h=Object(n.useState)({}),y=Object($.a)(h,2),k=(y[0],y[1]);Object(n.useEffect)((function(){var t=e.data,n=t.train,l=t.bank,i=t.kin,r=t.detail;a.setFieldsValue({train:n,bank:l,kin:i,detail:r}),E(),v()}),[]);var E=function(e){var t=a.getFieldsValue().detail,n=t.superAnnuationName,l=t.superannuationType,i=s;"P"===l?(i.splice(5,i.length),i=i.concat([{Placeholder:"Membership / Account",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"USI Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Membership / Account is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"USI Number is required"}],itemStyle:{marginBottom:20}}])):"S"===l?(i.splice(5,i.length),i=i.concat([{Placeholder:"SMSF ABN",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"ESA Address",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"SMSF ABN is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationAddress",size:"small",type:"Input",rules:[{required:!0,message:"ESA Address is required"}],itemStyle:{marginBottom:20}},{Placeholder:"Bank Account Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankName",size:"small",type:"Input",rules:[{required:!0,message:"Account Name is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationBankBsb",size:"small",type:"Input",rules:[{required:!0,message:"BSB Number is required"}],itemStyle:{marginBottom:20}},{Placeholder:"Bank Account Number",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Account Number is required"}],itemStyle:{marginBottom:"20px"}}])):i.splice(5,i.length);var r={superAnnuationName:n,superannuationType:l};a.setFieldsValue({detail:r}),o(i)},v=function(){var e=JSON.parse(M().permissions).PROFILE,t=a.getFieldsValue().bank,n=t.bankAccountNo,l=t.bankBsb,i=t.bankName,r=t.tfn,s=g;n||l||i||r?(s[1].rangeMin=!0,s[2].rangeMin=!0,s[5].rangeMin=!0,s[6].rangeMin=!0,s[3].rules=[{required:!0,message:"Account Name is required"}],s[4].rules=[{required:!0,message:"Account Number is required"}],s[7].rules=[{required:!0,message:"BSB Number is required"}],s[8].rules=[{required:!0,message:"Tax File Number is required"}]):(s[1].rangeMin=!1,s[2].rangeMin=!1,s[5].rangeMin=!1,s[6].rangeMin=!1,s[3].rules=[{required:!1,message:""}],s[4].rules=[{required:!1,message:""}],s[7].rules=[{required:!1,message:""}],s[8].rules=[{required:!1,message:""}]),p(Object(ue.a)(s)),k(e)};return l.a.createElement(Ce.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20},onFinish:function(e){var t,a=Object(Se.a)(Object(Se.a)(Object(Se.a)({},e.detail),e.kin),e.bank);(t=a,ke.a.patch("".concat(D,"/settings"),t,{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return R(l),H.b.success({content:l,key:"logout"}),a&&A(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return H.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success}))}},l.a.createElement(He,{FormFields:s}),l.a.createElement(He,{FormFields:u}),l.a.createElement(He,{FormFields:g}),l.a.createElement(b.a,{span:24,style:{padding:20}},l.a.createElement(pe.a,{htmlType:"submit",type:"primary",size:"middle",style:{float:"right"}}," Save ")))},Si=la.a.TabPane,Ci=function(){var e=Object(n.useState)(!1),t=Object($.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)(!1),s=Object($.a)(r,2),o=s[0],c=s[1],d=Object(n.useState)(!1),u=Object($.a)(d,2),m=u[0],f=u[1],g=JSON.parse(M().role).type;Object(n.useEffect)((function(){p()}),[]);var p=function(){ke.a.get("".concat(D,"/settings"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(R(l),a){var i=n.contactPersonOrganization?n.contactPersonOrganization.contactPerson:{},r={cpCode:"Emp-00".concat(i.id),firstName:i.firstName,lastName:i.lastName,gender:i.gender,dateOfBirth:i.dateOfBirth?ot()(i.dateOfBirth):null,phoneNumber:i.phoneNumber,email:i.email,address:i.address,stateId:i.stateId,username:n.username,password:n.password},s={superannuationName:n.superannuationName,superannuationBankName:n.superannuationBankName,superannuationBankAccountOrMembershipNumber:n.superannuationBankAccountOrMembershipNumber,superannuationAbnOrUsi:n.superannuationAbnOrUsi,superannuationBankBsb:n.superannuationBankBsb,superannuationAddress:n.superannuationAddress,superannuationType:n.superannuationType},o={nextOfKinDateOfBirth:n.nextOfKinDateOfBirth?ot()(n.nextOfKinDateOfBirth):null,nextOfKinEmail:n.nextOfKinEmail,nextOfKinGender:n.nextOfKinGender,nextOfKinName:n.nextOfKinName,nextOfKinPhoneNumber:n.nextOfKinPhoneNumber,nextOfKinRelation:n.nextOfKinRelation},c=n.bankAccounts.length>0?n.bankAccounts[0]:{},d={bankName:c.name,bankAccountNo:c.accountNo,bankBsb:c.bsb,tfn:n.tfn,taxFreeThreshold:n.taxFreeThreshold,helpHECS:n.helpHECS},u=n.employmentContracts.length>0?n.employmentContracts[0]:{},m={employeeId:u.employeeId,payslipEmail:u.payslipEmail,membershipAccountNo:u.membershipAccountNo,payFrequency:u.payFrequency,startDate:u.startDate?ot()(u.startDate):null,endDate:u.endDate?ot()(u.endDate):null,type:u.type,noOfHours:u.noOfHours,noOfHoursPer:u.noOfHoursPer,remunerationAmount:u.remunerationAmount,remunerationAmountPer:u.remunerationAmountPer,comments:u.comments};return A(e.headers&&e.headers.authorization),{success:a,data:n,basic:r,detail:s,kin:o,bank:d,billing:m}}return{success:a}})).catch((function(e){return console.log("err",e),{error:"Please login again!",status:!1,message:e.message}})).then((function(e){e&&e.success&&(i(e.basic),c(e.billing),f({kin:e.kin,detail:e.detail,bank:e.bank}))}))};return l.a.createElement(la.a,{type:"card",defaultActiveKey:"personal"},l.a.createElement(Si,{tab:"Personal Details",key:"personal"},a&&l.a.createElement(gi,{data:a})),"Employee"===g&&l.a.createElement(Si,{tab:"Contract",key:"contract"},o&&l.a.createElement(pi,{data:o})),l.a.createElement(Si,{tab:"Other Details",key:"others"}," ",m&&l.a.createElement(vi,{data:m})," "),l.a.createElement(Si,{tab:"Password",key:"password "}," ",l.a.createElement(Ei,{password:a.password})," "),l.a.createElement(Si,{tab:"Attachments",key:"attachments"}," ",l.a.createElement(La,{targetType:"emp",targetId:M().id})," "))},ji=(f.a.Content,[{component:Ci,link:"/profile",key:"PROFILE"},{component:fi,link:"/calender"},{component:aa,link:"/admin/global-settings",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/tax-rates",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/calenders/holidays/:id",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/calenders",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/holiday-types",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/leave-categories",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/leave-policies",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/roles",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/standard-levels",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/skills",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/panels",key:"ADMIN_OPTIONS"},{component:aa,link:"/admin/panels/skills/:id",key:"ADMIN_OPTIONS"},{component:aa,link:"/check",key:"ADMIN_OPTIONS"},{component:ga,link:"/organisations",key:"ORGANIZATIONS"},{component:Ha,link:"/organisations/:id/info",key:"ORGANIZATIONS"},{component:wn,link:"/contact",key:"CONTACT_PERSONS"},{component:en,link:"/Employees",key:"USERS"},{component:nn,link:"/Employees/:id/info",key:"USERS"},{component:un,link:"/Employee/:id/contracts",key:"USERS"},{component:hn,link:"/Employee/:id/novated-lease",key:"USERS"},{component:Cn,link:"/sub-contractors",key:"USERS"},{component:On,link:"/sub-contractors/:id/info",key:"USERS"},{component:xn,link:"/sub-contractors/:id/contracts",key:"USERS"},{component:Pl,link:"/opportunities",key:"OPPORTUNITIES"},{component:xl,link:"/opportunities/:proId/info",key:"OPPORTUNITIES"},{component:ci,link:"/opportunities/:proId/milestones",key:"OPPORTUNITIES"},{component:Nl,link:"/opportunities/:proId/milestones/:mileId/resources",key:"OPPORTUNITIES"},{component:_l,link:"/projects",key:"PROJECTS"},{component:Gl,link:"/projects/:proId/info",key:"PROJECTS"},{component:ni,link:"/projects/:proId/purchase-order",key:"PROJECTS"},{component:ci,link:"/projects/:proId/milestones",key:"PROJECTS"},{component:Zl,link:"/projects/:proId/milestones/:mileId/resources",key:"PROJECTS"},{component:ei,link:"/projects/:proId/resources/rates/:id",key:"PROJECTS"},{component:ul,link:"/time-sheet",key:"TIMESHEETS"},{component:al,link:"/time-sheet-approval",key:"TIMESHEETS"},{component:gl,link:"/time-off"}]),Pi=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).componentDidMount=function(){n.getPageLink()},n.getPageLink=function(){var e=JSON.parse(M().permissions),t=n.state.allowedRoutes;t[0]=ji[0],ji.map((function(a){e[a.key]&&e[a.key].READ&&t.push(a)})),n.setState({allowedRoutes:t})},n.state={allowedRoutes:[]},n}return Object(d.a)(a,[{key:"render",value:function(){this.state.allowedRoutes;return l.a.createElement(o.d,null,ji.map((function(e,t){return l.a.createElement(o.b,{exact:!0,path:e.link,component:e.component,key:t})})),l.a.createElement(o.a,{to:"/profile"}))}}]),a}(n.Component),Oi=a(587).a.Countdown;var Ii=function(e){var t=Object(n.useState)(!1),a=Object($.a)(t,2),i=a[0],r=a[1],s=36e5-((new Date).getTime()-parseInt(localStorage.getItem("jwtTimer")));return l.a.createElement("div",null,l.a.createElement(Je.a,{destroyOnClose:!0,closable:!1,keyboard:!1,maskClosable:!1,centered:!0,visible:e.visible,okText:"Refresh",onOk:function(){return e.refresh()},cancelText:"Logout Now",onCancel:function(){return H.b.loading({content:"Loading...",key:"logout"}),localStorage.clear(),H.b.info({content:"Logout successfully!",key:"logout"}),void r(!0)}},l.a.createElement(Bn.a,null)," Logging out in",l.a.createElement(Oi,{onFinish:function(){localStorage.setItem("jwtExpired",!0),e.timeOut()},value:Date.now()+s,format:"mm:ss",style:{textAlign:"center"},valueStyle:{color:"red"}})),i&&l.a.createElement(o.a,{to:{pathname:"/"}}))},Di=Ie.a.Title,Ti=Te.a.Password;var Fi=function(e){var t=Object(n.useState)(!1),a=Object($.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)(!1),c=Object($.a)(s,2),d=(c[0],c[1],Ce.a.useForm()),u=Object($.a)(d,1)[0];return l.a.createElement("div",null,l.a.createElement(Je.a,{destroyOnClose:!0,closable:!1,keyboard:!1,maskClosable:!1,centered:!0,visible:e.visible,okText:"Login",onOk:function(){u.submit()},cancelText:"Cancel",onCancel:function(){r(!0),localStorage.clear()}},l.a.createElement(Di,{level:4,style:{textAlign:"center"}},"Login"),l.a.createElement(Ce.a,{form:u,onFinish:function(t){bi(t).then((function(t){t&&t.success&&(r(!0),u.resetFields(),e.close())}))},layout:"vertical"},l.a.createElement(Ce.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your username!"}]},l.a.createElement(Te.a,null)),l.a.createElement(Ce.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},l.a.createElement(Ti,null)))),i&&l.a.createElement(o.a,{to:{pathname:"/"}}))},zi=f.a.Content;var xi=function(e){var t=Object(n.useState)(!1),a=Object($.a)(t,2),i=a[0],r=a[1],s=Object(n.useState)(!1),c=Object($.a)(s,2),d=(c[0],c[1]);Object(n.useEffect)((function(){setInterval((function(){var e=localStorage.getItem("jwtTimer");(new Date).getTime()-parseInt(e)>33e5&&"jwtExpired"!==hi()&&r(!0)}),6e4)}),[]);var u=function(){ke.a.get("".concat(D,"/helpers/refresh-token"),{headers:N()}).then((function(e){var t=e.data,a=t.success,n=t.message;return R(n),a&&(H.b.success({content:n},5),A(e.headers&&e.headers.authorization)),{success:a}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&r(!1)}))};return l.a.createElement(zi,{className:"site-layout-background",style:{margin:"16px 16px 10px 16px",padding:"24px 24px 10px 24px",minHeight:"88vh"}},"jwtExpired"===hi()||!0===hi()?l.a.createElement(Pi,null):l.a.createElement(o.a,{to:{pathname:"/"}}),i&&l.a.createElement(Ii,{visible:i,refresh:function(){return u()},timeOut:function(){return d(!0),void r(!1)}}),"jwtExpired"===hi()&&l.a.createElement(Fi,{visible:"jwtExpired"===hi(),close:function(){d(!1)}}))},Ai=f.a.Header,Mi=f.a.Sider,Ri=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).toggle=function(){e.setState({collapsed:!e.state.collapsed})},e.state={collapsed:!0},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state.collapsed;return l.a.createElement(f.a,{className:"setMinWidth"},l.a.createElement(Mi,{trigger:null,collapsible:!0,collapsed:t,breakpoint:"lg"},l.a.createElement("div",{className:"logo"},t?l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a.Group,null,l.a.createElement(g.a,{size:"small",style:{color:"#ffffff",backgroundColor:"#2051b6"}},"1"),l.a.createElement(g.a,{size:"small",style:{color:"#ffffff",backgroundColor:"#2051b6"}},"LM"))):l.a.createElement("img",{src:E.a,alt:"Logo",style:{width:"60%"}})),l.a.createElement(q,null)),l.a.createElement(f.a,{className:"site-layout"},l.a.createElement(Ai,{className:"site-layout-background",style:{padding:0}},l.a.createElement(p.a,{justify:"start"},l.a.createElement("span",{className:"trigger",onClick:function(){e.toggle()}},t?l.a.createElement(h.a,null):l.a.createElement(y.a,null)),l.a.createElement(b.a,{flex:"auto"},l.a.createElement(X,null)," "))),l.a.createElement(xi,null)," "))}}]),a}(n.Component),Ni=Ie.a.Title,wi=Te.a.Password;var Bi=function(e){var t=(Object(o.g)().state||{from:{pathname:"/profile"}}).from,a=Object(n.useState)(!1),i=Object($.a)(a,2),r=i[0],s=i[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){!0===hi()&&s(!0)};return l.a.createElement(p.a,{justify:"center",align:"middle",style:{backgroundColor:"#DDDEDE",minHeight:"100vh"}},l.a.createElement(b.a,{span:8},l.a.createElement(p.a,{justify:"center",align:"middle",gutter:[24,45],style:{backgroundColor:"White",border:"1px solid black",padding:"15px 0 "}},l.a.createElement(b.a,{span:24,style:{textAlign:"center"}},l.a.createElement(Ni,null,"OneLM CRM")),l.a.createElement(b.a,{span:15,style:{textAlign:"center"}},l.a.createElement(Ce.a,Object.assign({wrapperCol:24},{initialValues:{remember:!0},onFinish:function(e){bi(e).then((function(e){e&&e.success&&ve().then((function(e){e.success&&localStorage.setItem("pageSize",e.data.recordsPerPage),window.location.href="/profile"}))}))},layout:"vertical"}),l.a.createElement(Ce.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your username!"}]},l.a.createElement(Te.a,null)),l.a.createElement(Ce.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},l.a.createElement(wi,null)),l.a.createElement(Ce.a.Item,null,l.a.createElement(pe.a,{type:"primary",htmlType:"submit"},"Login")))))),r&&l.a.createElement(o.a,{to:t}))};a(572);var Li=function(){return l.a.createElement(s.a,null,l.a.createElement(o.d,null,l.a.createElement(o.b,{path:"/",exact:!0},l.a.createElement(Bi,null)),l.a.createElement(Ri,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(Li,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){}},[[324,1,2]]]);
//# sourceMappingURL=main.3ed3a721.chunk.js.map