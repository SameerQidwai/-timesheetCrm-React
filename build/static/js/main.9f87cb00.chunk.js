/*! For license information please see main.9f87cb00.chunk.js.LICENSE.txt */
(this["webpackJsonponelm-crm"]=this["webpackJsonponelm-crm"]||[]).push([[0],{226:function(e,t,a){},244:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},333:function(e,t,a){e.exports=a(584)},338:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},440:function(e,t,a){},441:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},448:function(e,t,a){},546:function(e,t,a){},547:function(e,t,a){},548:function(e,t,a){},549:function(e,t,a){},550:function(e,t,a){},551:function(e,t,a){},563:function(e,t,a){},583:function(e,t,a){},584:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(54),o=a.n(r),i=(a(338),a(63)),s=a(20),c=a(13),u=a(14),d=a(15),m=a(16),f=a(591),p=a(587),h=a(588),y=a(646),v=a(647),g=(a(339),a(64)),b=a(141),E=a(611),k=a(214),S=a(211),C=a(612),j=a(215),O=a(613),x=a(614),w=a(615),I=a(616),D=a(617),P=a(618),T=a(619),N=a(620),R=a(621),A=a(622),F=a(623),z=a(624),L=a(625),M=a(626),B=a(627),_=a(628),Y=a(629),V=a(630),q=a(631),H=a(632),U=a(633),G=(a(340),a(8)),W=a(10),K=a.n(W),$=(a(151),a(321)),J="http://3.239.21.153:8000/api/v1",X={L:"Lead",TR:"Tender Released",BS:"Bid Submitted",BD:"Bid Development"},Z={O:"Open",L:"Lost",P:"Open",NB:"Not Bid",DNP:"Did Not Proceed",C:"Completed"},Q={false:"Closed",true:"Open"},ee={CM:"Completed",AP:"Approved",SB:"Submitted",R:"Rejected",RJ:"Rejected"},te={CM:"geekblue",AP:"green",SB:"cyan",RJ:"red",R:"red"},ae={1:"Milestone",2:"Time"},ne={1:"Casual",2:"Part Time",3:"Full Time"},le={1:"Sole Trader",2:"Partnership",3:"Company",4:"Trust",5:"Government"},re={1:"Hourly",2:"Daily",3:"Weekly",4:"Fortnightly",5:"Monthly"},oe={M:"Male",F:"Female",O:"Other"},ie={"Australian Capital Territory":"ACT","New South Wales":"NSW",Victoria:"VIC",Queensland:"QLD","South Australia":"SA","Western Australia":"WA","Northern Territory":"NT",Tasmania:"TSA"},se=function(e,t){var a;return e&&!isNaN(e)&&(null===(a=e.toString().match(new RegExp("^-?\\d+(?:.\\d{0,"+(t||-1)+"})?")))||void 0===a?void 0:a[0])||"0.00"},ce=function(e,t){return isNaN(e)?"$ 0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:null!==t&&void 0!==t?t:2,roundingMode:"trunc"}).format(e).replace(/^(\D+)/,"$1 ")},ue=function(e,t,a){return a?isNaN(parseFloat(e))?"0.00":parseFloat(e).toFixed(2):se(e,t||2)},de=function(e,t){if(e)return t?K.a.parseZone(e).format(!0===t?"ddd DD MMM yyyy":t):K.a.parseZone(e)},me=function(e,t,a){return e&&(t?a?K.a.utc(e).format(!0===a?"ddd DD MMM yyyy":a):K()(e).utcOffset(0,!0).format():K.a.utc(e))},fe=function(e){localStorage.setItem("accessToken",null!==e&&void 0!==e?e:pe().accessToken),localStorage.setItem("jwtTimer",(new Date).getTime())},pe=function(){for(var e={},t=Object.keys(localStorage),a=t.length;a--;)e[t[a]]=localStorage.getItem(t[a]);return e},he=function(e){"Authentication Expired or Invalid"===e&&(pe().jwtExpired?(localStorage.clear(),window.location.href="/login"):localStorage.setItem("jwtExpired",!0))},ye=function(){return{"content-type":"application/json",Authorization:"".concat(pe().accessToken)}},ve=function(e){return"pdf"===e?"/icons/pdf.png":"doc"===e||"docx"===e?"/icons/doc.png":"xls"===e||"xlsx"===e?"/icons/xls.png":"ppt"===e||"pptx"===e?"/icons/ppt.png":"csv"===e?"/icons/csv.png":/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(e)?"/icons/img.png":"/icons/default.png"},ge=function(e,t,a,n){var l,r=null!==(l=null===e||void 0===e?void 0:e.response)&&void 0!==l?l:{},o=r.status,i=void 0!==o&&o,s=r.data,c=void 0===s?{}:s,u=c.message,d=c.success;return $.b.error({content:400===i?u:"Something Went Wrong!",duration:400===i?a:5,key:t,style:null!==n&&void 0!==n?n:{}}),{error:e.message,status:i,message:u,success:d}},be=function(e,t,a,n){if(e){var l,r,o=null!==(l=null===n||void 0===n?void 0:n.startDate)&&void 0!==l?l:me(new Date).subtract(10,"years"),i=null!==(r=null===n||void 0===n?void 0:n.endDate)&&void 0!==r?r:me(new Date).add(10,"years");return("start"===a&&t?e>=t:"end"===a&&t&&e<=t)||!e.isBetween(me(o),me(i),"day","[]")}},Ee=function(e,t,a){var n=void 0;t=t?K()(t,a):K()(),n=parseInt(K()(t).format("M"))<7?K()(t).subtract(1,"y").format("YYYY"):K()(t).format("YYYY");var l={dates:{start:K()(t).set({month:6,date:1,year:n}),end:K()(t).set({month:5,date:30,year:parseInt(n)+1})},years:{start:n,end:parseInt(n)+1}};return e?l[e]:l},ke=function(e,t,a){if(e){var n,l,r=null!==(n=null===a||void 0===a?void 0:a.startDate)&&void 0!==n?n:K()().subtract(10,"years"),o=null!==(l=null===a||void 0===a?void 0:a.endDate)&&void 0!==l?l:K()().add(10,"years");return t&&e>=t||!e.isBetween(K()(r),K()(o),"day","[]")}},Se=function(e,t,a){if(e){var n,l,r=null!==(n=null===a||void 0===a?void 0:a.startDate)&&void 0!==n?n:K()().subtract(10,"years"),o=null!==(l=null===a||void 0===a?void 0:a.endDate)&&void 0!==l?l:K()().add(10,"years");return t&&e<=t||!e.isBetween(K()(r),K()(o),"day","[]")}},Ce=function(e,t){return e.sort((function(e,a){var n,l,r,o;return(null!==(n=null===e||void 0===e||null===(l=e[t])||void 0===l?void 0:l.toLowerCase())&&void 0!==n?n:"").localeCompare(null!==(r=null===a||void 0===a||null===(o=a[t])||void 0===o?void 0:o.toLowerCase())&&void 0!==r?r:"")}))},je=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,2,3,4,5];return me(new Date).isoWeekdayCalc({rangeStart:e,rangeEnd:t,weekdays:n,exclusions:a})},Oe=b.a.SubMenu,xe=(E.a,k.a,S.a,C.a,j.a,O.a,x.a,w.a,I.a,x.a,D.a,P.a,T.a,N.a,N.a,N.a,N.a,N.a,[{text:"Submissions",icon:l.a.createElement(R.a,null),key:"SUBMISSIONS",subMenu:[{text:"Timesheet Entry",icon:l.a.createElement(k.a,null),link:"/time-sheet",key:"TIMESHEETS ENTRY",permissions:{module:"TIMESHEETS",key:"READ"}},{text:"Leave Request",icon:l.a.createElement(j.a,null),link:"/leave-request",key:"LEAVE REQUEST",permissions:{module:"LEAVE_REQUESTS",key:"READ"}},{text:"Expense Line",icon:l.a.createElement(A.a,null),link:"/expense",key:"EXPENSE",permissions:{module:"EXPENSES",key:"READ"}},{text:"Expense Sheet",icon:l.a.createElement(F.a,null),link:"/expense-sheets",key:"EXPENSE SHEET ",permissions:{module:"EXPENSES",key:"READ"}}]},{text:"Approvals",icon:l.a.createElement(S.a,null),key:"APPROVALS",subMenu:[{text:"Timesheet Approval",icon:l.a.createElement(k.a,null),link:"/time-sheet-approval",key:"TIMESHEETS APPROVAl",permissions:{module:"TIMESHEETS",key:"APPROVAL,UNAPPROVAL"}},{text:"Leave Approval ",icon:l.a.createElement(j.a,null),link:"/approve-request",key:"APPROVE REQUEST",permissions:{module:"LEAVE_REQUESTS",key:"APPROVAL,UNAPPROVAL"}},{text:"Expense Approval",icon:l.a.createElement(F.a,null),link:"/expense-sheet-approval",key:"EXPENSE Approval",permissions:{module:"EXPENSES",key:"APPROVAL,UNAPPROVAL"}},{text:"Milestone Approval",icon:l.a.createElement(C.a,null),link:"/milestones-certificate",key:"MILESTONE APPROVAl",permissions:{module:"TIMESHEETS",key:"APPROVAL,UNAPPROVAL"}}]},{text:"Reports",icon:l.a.createElement(D.a,null),key:"REPORTS",subMenu:[{text:"Unallocated Resources",icon:l.a.createElement(z.a,null),link:"/report/unallocated-resources",key:"BENCH_RESOURCES",permissions:{module:"BENCH_RESOURCES",key:"READ"}},{text:"Workforce Skills",icon:l.a.createElement(L.a,null),link:"/report/workforce-skills",key:"WORK_FORCE_SKILLS",permissions:{module:"WORK_FORCE_SKILLS",key:"READ"}},{text:"Position & Resources",icon:l.a.createElement(M.a,null),link:"/report/positions",key:"POSITIONS ",permissions:{module:"POSITIONS",key:"READ"}},{text:"Workforce Allocation",icon:l.a.createElement(B.a,null),link:"/report/workforce-allocations",key:"WORK_ALLOCATION ",permissions:{module:"WORK_ALLOCATION",key:"READ"}},{text:"FY Project Revenue Analysis",icon:l.a.createElement(_.a,null),link:"/report/project-revenue-analysis",key:"PROJECT_REVENUE ",permissions:{module:"PROJECT_REVENUE",key:"READ"}},{text:"FY Client Revenue Analysis",icon:l.a.createElement(x.a,null),link:"/report/client-revenue-analysis",key:"CLIENT_REVENUE ",permissions:{module:"CLIENT_REVENUE",key:"READ"}},{text:"Timesheet Summary",icon:l.a.createElement(k.a,null),link:"/report/timesheet-summary",key:"TIMESHEET_SUMMARY",permissions:{module:"TIMESHEET_SUMMARY",key:"READ"}},{text:"Leave Summary",icon:l.a.createElement(O.a,null),link:"/report/leave-summary",key:"LEAVESUMMARY",permissions:{module:"LEAVE_SUMMARY",key:"READ"}}]},{text:"Financial Outlook",icon:l.a.createElement(Y.a,null),key:"ACCOUNTS",subMenu:[{text:"Forecast",icon:l.a.createElement(V.a,null),link:"/financial-outlook/forecast",key:"FORECASTING",permissions:{module:"FORECASTING",key:"READ"}},{text:"Budget",icon:l.a.createElement(q.a,null),link:"/financial-outlook/budget",key:"FORECASTING",permissions:{module:"FORECASTING",key:"READ"}},{text:"Cash Flow",icon:l.a.createElement(H.a,null),link:"/financial-outlook/cash-flow",key:"FORECASTING",permissions:{module:"FORECASTING",key:"READ"}}]},{text:"Training",icon:l.a.createElement(x.a,null),link:"/training",key:"Training",permissions:{module:"TIMESHEETS",key:"READ"}},{text:"Calculators",icon:l.a.createElement(U.a,null),key:"COSTCAL",subMenu:[{text:"Employee Salary Calculator",icon:l.a.createElement(z.a,null),link:"/calculator-permanent",key:"PERMANENT_CAL",permissions:{module:"TIMESHEETS",key:"READ"}},{text:"Casual Rate Calculator",icon:l.a.createElement(L.a,null),link:"/calculator-casual",key:"CASUAL_CAL",permissions:{module:"TIMESHEETS",key:"READ"}},{text:"Contractor Rate Calculator",icon:l.a.createElement(M.a,null),link:"/calculator-contractor",key:"CONTRACTOR_CAL",permissions:{module:"TIMESHEETS",key:"READ"}}]}]),we=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getAllowedMenu()},e.getAllowedMenu=function(){var t=pe().permissions;t=t?JSON.parse(t):[];var a=e.state.allowedMenu;xe.map((function(e){var n,l;if(e.subMenu){var r=[];e.subMenu.map((function(e){var a,n;if(null===(a=t)||void 0===a?void 0:a[null===e||void 0===e||null===(n=e.permissions)||void 0===n?void 0:n.module]){var l,o,i,s=null===e||void 0===e||null===(l=e.permissions)||void 0===l||null===(o=l.key)||void 0===o?void 0:o.split(","),c=Object(g.a)(s);try{for(c.s();!(i=c.n()).done;){var u,d,m=i.value;if(null===(u=t[null===e||void 0===e||null===(d=e.permissions)||void 0===d?void 0:d.module])||void 0===u?void 0:u[m]){r.push(e);break}}}catch(f){c.e(f)}finally{c.f()}}})),r.length?(e.subMenu=r,a.push(e)):delete e.subMenu}else if(null===(n=t)||void 0===n?void 0:n[null===e||void 0===e||null===(l=e.permissions)||void 0===l?void 0:l.module]){var o,i=e.permissions.key.split(","),s=Object(g.a)(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(t[e.permissions.module][c]){a.push(e);break}}}catch(u){s.e(u)}finally{s.f()}}})),e.setState({allowedMenu:a})},e.onSelect=function(e){var t=e.item,a=e.key,n=e.keyPath,l=e.selectedKeys;console.log({item:t,key:a,keyPath:n,selectedKeys:l})},e.MenuRender=function(){return e.state.allowedMenu.map((function(e,t){return e.subMenu?l.a.createElement(Oe,{key:e.key,icon:e.icon,title:e.text},e.subMenu.map((function(e,t){return l.a.createElement(b.a.Item,{key:e.link,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link sub-menu-font"},e.text))}))):l.a.createElement(b.a.Item,{key:e.link,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))}))},e.state={allowedMenu:[]},e}return Object(u.a)(a,[{key:"highlightRow",value:function(e){return this.props.location.pathname===e?"ant-menu-item-selected":""}},{key:"render",value:function(){return l.a.createElement(b.a,{theme:"light",mode:"inline",selectedKeys:[this.props.activatePath],style:{fontSize:12}},this.MenuRender())}}]),a}(n.Component),Ie=Object(i.i)(we),De=a(196),Pe=a(322),Te=a(74),Ne=a(324),Re=a(634),Ae=a(635),Fe=a(325),ze=a(636),Le=a(112),Me=(a(349),[{text:"Contacts",items:[{text:"Organisations",link:"/organisations",key:"ORGANIZATIONS"},{text:"Contact",link:"/contacts",key:"CONTACT_PERSONS"}],key:"CHILDRENS"},{text:"Resources",items:[{text:"Employees",link:"/Employees",key:"USERS"},{text:"Sub Contractors",link:"/sub-contractors",key:"USERS"}],key:"CHILDRENS"},{text:"Opportunities",link:"/opportunities",key:"OPPORTUNITIES"},{text:"Projects",link:"/projects",key:"PROJECTS"}]),Be=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getAllowedItems()},e.getAllowedItems=function(){var t=pe().permissions;t=t?JSON.parse(t):[];var a=e.state.allowedNavItem;Me.map((function(e){if("CHILDRENS"===e.key){var n=[];e.items.map((function(e){t[e.key]&&t[e.key].READ&&n.push(e)})),n.length>0&&(e.items=n,a.push(e))}else t[e.key]&&t[e.key].READ&&a.push(e)})),e.setState({allowedNavItem:a,permissions:t})},e.getNavMenuItems=function(t){return t?t.map((function(t,a){return e.getSubMenuOrItem(t,a)})):[]},e.getDropMenu=function(e,t){return l.a.createElement(b.a,null,e.map((function(e,a){return l.a.createElement(b.a.Item,{key:"".concat(a+t),icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))})))},e.getSubMenuOrItem=function(t,a){return t.items?l.a.createElement(De.a,{overlay:e.getDropMenu(t.items,a),key:a},l.a.createElement("span",{className:"navItem"},t.text," ",l.a.createElement("span",null," ",l.a.createElement(Ne.a,null)," "))):l.a.createElement("span",{className:"navItem",key:a},l.a.createElement(s.b,{to:t.link,className:"nav-link"},t.text))},e.logOut=function(){$.b.loading({content:"Loading...",key:"logout"}),localStorage.clear(),e.setState({logout:!0},(function(){$.b.info({content:"Logout successfully!",key:"logout"})}))},e.state={logout:!1,allowedNavItem:[],permissions:{}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.logout,a=e.allowedNavItem,n=e.permissions,r=l.a.createElement(b.a,{onClick:this.handleMenuClick},l.a.createElement(b.a.Item,{key:"profile"},l.a.createElement(s.b,{to:"/profile",className:"nav-link"},"Profile ",l.a.createElement(Re.a,null))),l.a.createElement(b.a.Item,{key:"logout",onClick:this.logOut},"Logout ",l.a.createElement(Ae.a,null)));return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark rounded "},l.a.createElement("div",{className:"collapse navbar-collapse justify-content-md-center",id:"navbarsExample10"},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,this.getNavMenuItems(a)),n.ADMIN_OPTIONS&&n.ADMIN_OPTIONS.READ?l.a.createElement(h.a,{xs:{span:2},md:{span:2}},l.a.createElement(Pe.b,{size:"large"},l.a.createElement(s.b,{to:{pathname:"https://timewize.au/help-centre/"},target:"_blank"},l.a.createElement(Te.a,{title:"Help Centre \u2013 Timewize"},l.a.createElement(Fe.a,null))),l.a.createElement(s.b,{to:"/admin/global-settings"},l.a.createElement(ze.a,null)),l.a.createElement(De.a,{overlay:r,placement:"bottomCenter"},l.a.createElement(Le.a,{style:{color:"#1890ff",cursor:"pointer"}})))):l.a.createElement(h.a,{xs:{span:1},md:{span:1}},l.a.createElement(Pe.b,{size:"large"},l.a.createElement(s.b,{to:{pathname:"https://timewize.au/help-centre/"},target:"_blank"},l.a.createElement(Fe.a,null)),l.a.createElement(De.a,{overlay:r,placement:"bottomCenter"},l.a.createElement(Le.a,{style:{color:"#1890ff",cursor:"pointer"}})))))),t&&l.a.createElement(i.a,{to:{pathname:"/"}}))}}]),a}(n.Component),_e=Object(i.i)(Be),Ye=a(595);a(350),Ye.a.Text,Ye.a.Title;var Ve=function(){return l.a.createElement("div",{className:"landing-placeholder",style:{backgroundImage:"url(".concat("/Z_Landing.png",")")}})},qe=a(637),He=a(638),Ue=a(639),Ge=a(640),We=a(641),Ke=a(642),$e=b.a.SubMenu,Je=[{text:"Global Settings",icon:l.a.createElement(qe.a,null),link:"/admin/global-settings",key:"/admin/global-settings"},{text:"Holidays Types",icon:l.a.createElement(j.a,null),link:"/admin/holiday-types",key:"/admin/holiday-types"},{text:"Calendars",icon:l.a.createElement(j.a,null),link:"/admin/calendars",key:"/admin/calendars"},{text:"Leave Categories",icon:l.a.createElement(B.a,null),link:"/admin/leave-categories",key:"/admin/leave-categories"},{text:"Leave Policies",icon:l.a.createElement(He.a,null),link:"/admin/leave-policies",key:"/admin/leave-policies"},{text:"Role & Permissions",icon:l.a.createElement(Ue.a,null),link:"/admin/roles",key:"/admin/roles"},{text:"Standard Levels",icon:l.a.createElement(T.a,null),link:"/admin/standard-levels",key:"/admin/standard-levels"},{text:"Standard Skills",icon:l.a.createElement(Ge.a,null),link:"/admin/skills",key:"/admin/skills"},{text:"Panels",icon:l.a.createElement(We.a,null),link:"/admin/panels",key:"/admin/panels"},{text:"Expense Types",icon:l.a.createElement(We.a,null),link:"/admin/expense-types",key:"/admin/expense-types"},{text:"Import/Export",icon:l.a.createElement(Ke.a,null),link:"/admin/import-export",key:"/admin/import-export"}],Xe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){},e.MenuRender=function(){return Je.map((function(e,t){return e.subMenu?l.a.createElement($e,{key:e.key,icon:e.icon,title:e.text},e.subMenu.map((function(e,t){return l.a.createElement(b.a.Item,{key:e.key,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))}))):l.a.createElement(b.a.Item,{key:e.key,icon:e.icon},l.a.createElement(s.b,{to:e.link,className:"nav-link"},e.text))}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.location.pathname;return l.a.createElement(b.a,{theme:"light",mode:"inline",defaultSelectedKeys:[e]},this.MenuRender())}}]),a}(n.Component),Ze=Object(i.i)(Xe),Qe=a(604),et=a(9),tt=a(3),at=a(49),nt=a(596),lt=a(609),rt=a(68),ot=a(7),it=a.n(ot),st="".concat(J,"/global-setting"),ct="".concat(J,"/global-variables"),ut=function(){return it.a.get(st,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},dt=function(e){return $.b.loading({content:"Loading...",key:1},5),it.a.post("".concat(ct,"/create-update"),e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message,r=a.data;he(l),$.b.success({content:l,key:1},5),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);var o={};return n&&r.forEach((function(e){var t=e.name,a=Object(G.a)(e.values,1)[0],n=a.globalVariableId,l=a.value,r=a.startDate,i=a.endDate;o[t]={globalVariableId:n,value:l,startDate:me(r),endDate:me(i)}})),{success:n,data:o}})).catch((function(e){return ge(e,1,5)}))},mt=a(599),ft=a(257),pt=a(589),ht=a(320),yt=a(598),vt=a(117),gt=a(608),bt=a(158),Et=a(150),kt=a(590),St=a(147),Ct=a(89),jt=nt.a.Item,Ot=mt.a.Dragger,xt=ft.a.RangePicker,wt=pt.a.RangePicker,It=Ye.a.Title,Dt=Ye.a.Text,Pt={check:St.a,cross:Ct.a},Tt=function(e,t){return"$"===t?"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):"ABN"===t?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," "):t?"".concat(e).concat(t):"".concat(e)},Nt=function(e,t){return"$"===t?e.replace(/\$\s?|(,*)/g,""):"ABN"===t?e.replace(/\$\s?|(\s*)/g,""):t?e.replace(t,""):e},Rt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).multipleUpload=function(e,t,a,l){console.log(e,t,a,l);var r=n.state.uploadKeys;return console.log("multipleUpload",e,a,l,r),n.state.uploadKeys[a]=e,n.setState({uploadKeys:Object(tt.a)({},r)},(function(){console.log(n.state)})),!1},n.onFinish=function(e){n.props.Callback(e)},n.content=function(){var e=n.props,t=e.FormFields,a=e.listName;return t.map((function(e,t){return l.a.createElement(h.a,{span:e.fieldCol,offset:e.filedOffset,key:t+1,style:e.style},l.a.createElement(jt,Object.assign({},e.layout,{name:[null!==a&&void 0!==a?a:e.object,e.key],initialValue:e.initialValue,extra:e.hint,help:e.help,labelAlign:e.labelAlign,label:e.label,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules,getValueProps:e.getValueProps,valuePropName:e.valuePropName,getValueFromEvent:e.customValue,hidden:!0===e.hidden,style:e.itemStyle,noStyle:e.noStyle,normalize:e.normalize}),n.filedformat(e.type,e.Placeholder,e.data,e.mode,e.rangeMin,e.rangeMax,e.showTime,e.shape,e.size,e.fieldStyle,e.disabled,e.readOnly,e.onChange,e.onClick,e.onBlur,e.onClear,e.tooltip,e.tooltipTitle,e.tooltipTrigger,e.fieldNames,e.suggestion,e.format,e.icon,e.orderCheck,e.ranges)))}))},n.filedformat=function(e,t,a,n,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b,E,k,S,C){var j,O,x=!(arguments.length>23&&void 0!==arguments[23])||arguments[23],w=arguments.length>24&&void 0!==arguments[24]?arguments[24]:{},I=null;switch(e){case"Title":I=l.a.createElement(It,{level:n,size:c,style:u},v?l.a.createElement(Te.a,{title:g,trigger:b},t):t);break;case"Text":I=l.a.createElement(Dt,{strong:n,onClick:p,style:u,disabled:d},v?l.a.createElement(Te.a,{title:g,trigger:b}," ",t):t,r&&l.a.createElement("span",{style:{color:"red"}}," * "),k&&l.a.createElement("span",{style:{float:"right",color:"#747474"}}," ",k," "));break;case"Password":I=l.a.createElement(ht.a.Password,{placeholder:t,visibilityToggle:n,size:c,style:u});break;case"Textarea":I=l.a.createElement(ht.a.TextArea,{placeholder:t,allowClear:!0,autoSize:n,asize:c,style:Object(tt.a)({marginBottom:"5px"},u),prefix:n,disabled:d,readOnly:m});break;case"InputNumber":I=l.a.createElement(yt.a,{placeholder:t,min:r,max:o,size:c,formatter:function(e){return Tt(e,s)},parser:function(e){return Nt(e,s)},style:Object(tt.a)({marginBottom:"5px",width:"100%"},u),onBlur:h,onChange:f,disabled:d,readOnly:m});break;case"Select":var D=Pt[null!==C&&void 0!==C?C:"check"];I=l.a.createElement(vt.a,{placeholder:t,options:a,mode:n,showArrow:!0,size:c,maxTagCount:o,allowClear:!0,menuItemSelectedIcon:l.a.createElement(D,null),fieldNames:E,onChange:f,onClear:y,style:Object(tt.a)({marginBottom:"5px"},u),optionFilterProp:[null!==(j=null===E||void 0===E?void 0:E.label)&&void 0!==j?j:"label",null!==(O=null===E||void 0===E?void 0:E.value)&&void 0!==O?O:"value"],showSearch:!0,filterOption:function(e,t){var a,n,l=null!==(a=null===E||void 0===E?void 0:E.label)&&void 0!==a?a:"label",r=null!==(n=null===E||void 0===E?void 0:E.value)&&void 0!==n?n:"value",o=t[l].toLowerCase().indexOf(e.toLowerCase())>=0,i=t[r].toString().toLowerCase().indexOf(e.toLowerCase())>=0;return o||i},disabled:d});break;case"Switch":I=l.a.createElement(gt.a,{size:c,style:u,checkedChildren:null!==s&&void 0!==s?s:l.a.createElement(St.a,null),unCheckedChildren:null!==s&&void 0!==s?s:l.a.createElement(Ct.a,null)});break;case"Radio":I=l.a.createElement(bt.a.Group,{options:a,optionType:n,buttonStyle:s,size:c,style:u});break;case"Checkbox":I=l.a.createElement(Et.a,{options:a,size:c,style:u,disabled:d,onChange:f});break;case"CheckboxGroup":I=l.a.createElement(Et.a.Group,{options:a,size:c,style:u,disabled:d,onChange:f});break;case"DatePicker":I=l.a.createElement(ft.a,{picker:n,showTime:i,disabledDate:null!==r&&void 0!==r?r:o,size:c,style:Object(tt.a)({marginBottom:"5px",width:"100%"},u),onBlur:h,onChange:f,format:null!==S&&void 0!==S?S:"ddd DD MMM yyyy",disabled:d});break;case"TimePicker":I=l.a.createElement(pt.a,{format:i,use12Hours:"use12Hours"===n,size:c,style:Object(tt.a)({width:"100%"},u),disabled:d,minuteStep:r,showNow:o,onChange:f});break;case"TimeRange":I=l.a.createElement(wt,{format:i,use12Hours:"use12Hours"===n,size:c,style:Object(tt.a)({width:"100%"},u),minuteStep:r,order:x,showNow:o,disabled:d,onChange:f});break;case"RangePicker":I=l.a.createElement(xt,{picker:n,showTime:i,disabledDate:null!==r&&void 0!==r?r:o,size:c,ranges:w,style:u,onBlur:h,onChange:f,format:"ddd DD MMM yyyy",disabled:d});break;case"Divider":I=l.a.createElement(kt.a,{type:n,style:u});break;case"Button":I=l.a.createElement(rt.a,{type:n,shape:s,block:o,style:u,onClick:p,size:c},t);break;case"Upload":I=l.a.createElement(mt.a,{name:"logo",action:n,listType:"text",multiple:o,style:u},t);break;case"Dragger":I=l.a.createElement(Ot,{name:"logo",action:n,listType:"text",multiple:!0,style:u,beforeUpload:function(){return!1}},t);break;default:I=l.a.createElement(ht.a,{placeholder:t,style:Object(tt.a)({marginBottom:"5px"},u),size:c,disabled:d,readOnly:m,onBlur:h,onChange:f})}return I},n}return Object(u.a)(a,[{key:"render",value:function(){return this.content()}}]),a}(n.Component),At=function(){return it.a.get("".concat(J,"/states"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.label})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ft=function(){return it.a.get("".concat(J,"/leave-request-types"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data.map((function(e){return{value:e.id,label:e.label}}));if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},zt=function(){return it.a.get("".concat(J,"/standard-skills"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.label,levels:e.standardSkillStandardLevels.map((function(e){return{value:e.id,label:e.standardLevel.label}}))})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Lt=function(){return it.a.get("".concat(J,"/standard-levels"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;a.message;return n&&(l=l.map((function(e){return{value:e.id,label:e.label}}))),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Mt=function(){return it.a.get("".concat(J,"/contactpersons"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.firstName+" "+e.lastName})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Bt=function(e){return it.a.get("".concat(J,"/").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},_t=function(e){return it.a.get("".concat(J,"/Organizations"),{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=[];if(r.map((function(t){o.push({value:t.id,label:t.name,disabled:t.id===e&&!0})})),fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),l)return{success:l,data:Ce(o,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Yt=function(){return it.a.get("".concat(J,"/panels"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.label})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Vt=function(e){return it.a.get("".concat(J,"/panel-skills?panelId=").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.label,levels:e.panelSkillStandardLevels.map((function(e){return{value:e.id,label:e.levelLabel,stceil:e.shortTermCeil,ltceil:e.longTermCeil}}))})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},qt=function(){return it.a.get("".concat(J,"/projects"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];n&&(l.map((function(e){r.push({value:e.id,label:e.title})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization));return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ht=function(e,t,a){return it.a.get("".concat(J,"/helpers/projects?userId=").concat(e,"&mod=").concat(t,"&phase=").concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ut=function(e){var t=e.userId,a=e.phase,n=e.startDate,l=e.endDate;return it.a.get("".concat(J,"/helpers/milestones?userId=").concat(t,"&phase=").concat(a,"&startDate=").concat(n,"&endDate=").concat(l),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Gt=function(e){return it.a.get("".concat(J,"/helpers/levels-by-skill?").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(n)return fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Wt=function(){return it.a.get("".concat(J,"/helpers/roles"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(n)return fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Kt=function(e,t){return it.a.get("".concat(J,"/").concat(e),{headers:ye()}).then((function(e){var a,n,l=e.data,r=l.success,o=l.data;if(fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),t&&(t=o.map((function(e){return{value:e.id,label:e.title}}))),r)return{success:r,data:null!==o&&void 0!==o?o:[],options:null!==(n=t)&&void 0!==n?n:[]}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},$t=function(){return it.a.get("".concat(J,"/leave-request-policies"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.label})})),r.push({value:0,label:"Unpaid"}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Jt=function(e){return it.a.get("".concat(J,"/auth/projects?resource=").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Xt=function(e,t,a){return it.a.get("".concat(J,"/").concat(e,"/").concat(t,"/buy-cost?searchIn=").concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))};var Zt=function(e){var t=nt.a.useForm(),a=Object(G.a)(t,1)[0],r=Object(n.useState)({settings:{},variables:{}}),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)([{fieldCol:6,Placeholder:"Rate",type:"Title",mode:4,fieldStyle:{textAlign:"right"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Start Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Finish Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:24,Placeholder:"Sale Tax",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"GST:",type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%"}},{object:"GST",fieldCol:3,key:"value",size:"small",shape:"%",type:"InputNumber"},{object:"GST",fieldCol:5,key:"startDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("GST"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("Start Date is Required!!")):Promise.resolve()}}}]},{object:"GST",fieldCol:5,key:"endDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("GST"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("End Date is Required!!")):Promise.resolve()}}}]},{fieldCol:4,type:"Text"},{fieldCol:4,Placeholder:"Income Tax:",type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%"}},{object:"income_tax",fieldCol:3,key:"value",size:"small",shape:"%",type:"InputNumber"},{object:"income_tax",fieldCol:5,key:"startDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("GST"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("Start Date is Required!!")):Promise.resolve()}}}]},{object:"income_tax",fieldCol:5,key:"endDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("GST"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("End Date is Required!!")):Promise.resolve()}}}]},{fieldCol:4,type:"Text"},{fieldCol:24,Placeholder:"on Cost Rate",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"Superannuation:",type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%",marginBottom:10}},{object:"Superannuation",fieldCol:3,key:"value",size:"small",shape:"%",type:"InputNumber"},{object:"Superannuation",fieldCol:5,key:"startDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("Superannuation"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("Start Date is Required!!")):Promise.resolve()}}}]},{object:"Superannuation",fieldCol:5,key:"endDate",size:"small",shape:"%",type:"DatePicker",rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){var n;return(null!==(n=t("Superannuation"))&&void 0!==n?n:{}).value?a?Promise.resolve():Promise.reject(new Error("End Date is Required!!")):Promise.resolve()}}}]},{fieldCol:4,type:"Text"}]),u=Object(G.a)(c,2),d=u[0],m=u[1],f=[{fieldCol:24,Placeholder:"General Settings",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,size:"small",Placeholder:"Records Per Page",type:"Text",labelAlign:"right"},{object:"settings",fieldCol:20,key:"recordsPerPage",size:"small",type:"InputNumber",labelCol:{span:4},labelAlign:"right",itemStyle:{marginBottom:20}},{fieldCol:4,size:"small",Placeholder:"Display Email",rangeMin:!0,type:"Text",labelAlign:"left"},{object:"settings",fieldCol:20,key:"displayEmail",Placeholder:"Display Name In Email",size:"small",type:"input",labelCol:{span:3},labelAlign:"right",itemStyle:{marginBottom:20}},{fieldCol:4,size:"small",Placeholder:"From Email",rangeMin:!0,type:"Text",labelAlign:"left"},{object:"settings",fieldCol:20,key:"fromEmail",Placeholder:"From Email Address",size:"small",type:"input",labelCol:{span:3},labelAlign:"right",itemStyle:{marginBottom:20}},Object(at.a)({fieldCol:20,mode:"horizontal",type:"Divider",itemStyle:{padding:"0px",margin:"0px"}},"itemStyle",{marginBottom:20})];Object(n.useEffect)((function(){h()}),[]);var h=function(){Promise.all([At(),Ft(),ut(),it.a.get(ct,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);var o={};if(n){var i,s=Object(g.a)(l);try{for(s.s();!(i=s.n()).done;){var c,u=i.value,d=u.variable,m=u.globalVariableId,f=u.value,p=u.startDate,h=u.endDate;o[null===(c=d)||void 0===c?void 0:c.name]={globalVariableId:m,value:f,startDate:me(p),endDate:me(h)}}}catch(y){s.e(y)}finally{s.f()}}return{success:n,data:o}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))]).then((function(e){e[2].success&&a.setFieldsValue(Object(tt.a)({settings:e[2].data},e[3].data));var t=e[0].success?e[0].data:[],n=e[1].success?e[1].data:[];s({settings:e[2].data,variable:e[3].data}),v([{value:"workCover",label:"WorkCover"}].concat(Object(et.a)(n),[{value:"publicHoildays",label:"Public Holidays"}]),t)})).catch((function(e){return console.log(e)}))},y=function(e){var t;return[{fieldCol:4,Placeholder:null!==(t=ie[e])&&void 0!==t?t:e,type:"Text",itemStyle:{textAlign:"right",paddingRight:"15%",marginBottom:10}},{object:e,fieldCol:3,key:"value",size:"small",shape:"%",type:"InputNumber"},{object:e,fieldCol:5,key:"startDate",size:"small",shape:"%",type:"DatePicker",rules:[function(t){var a=t.getFieldValue;return{validator:function(t,n){var l;return(null!==(l=a(e))&&void 0!==l?l:{}).value?n?Promise.resolve():Promise.reject(new Error("Start Date is Required!!")):Promise.resolve()}}}]},{object:e,fieldCol:5,key:"endDate",size:"small",shape:"%",type:"DatePicker",rules:[function(t){var a=t.getFieldValue;return{validator:function(t,n){var l;return(null!==(l=a(e))&&void 0!==l?l:{}).value?n?Promise.resolve():Promise.reject(new Error("End Date is Required!!")):Promise.resolve()}}}]},{object:e,fieldCol:5,size:"small",type:"Text"}]},v=function(e,t){var a,n=[],l=[],r=Object(g.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value.label;n.push.apply(n,Object(et.a)(y(o)))}}catch(u){r.e(u)}finally{r.f()}var i,s=Object(g.a)(t);try{for(s.s();!(i=s.n()).done;){var c=i.value.label;l.push.apply(l,Object(et.a)(y(c)))}}catch(u){s.e(u)}finally{s.f()}e.length>0&&m((function(e){return[].concat(Object(et.a)(e),n,[{fieldCol:24,Placeholder:"Payroll Tax",type:"Title",mode:5,itemStyle:{paddingLeft:"5%"},style:{textDecoration:"underline"}}],l,[{fieldCol:20,mode:"horizontal",type:"Divider",itemStyle:{padding:"0px",margin:"0px"}}])}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{id:"my-form",form:a,scrollToFirstError:!0,onFinish:function(e){delete e[void 0];var t=e.settings;delete e.settings;var n,l=[];Object.entries(e).map((function(e){var t=Object(G.a)(e,2),a=t[0],n=t[1];void 0!==n.value&&null!==n.value&&l.push(Object(tt.a)(Object(tt.a)({},n),{},{name:a,startDate:me(n.startDate,!0),endDate:me(n.endDate,!0)}))})),Promise.all([(n=t,$.b.loading({content:"Loading...",key:1},5),it.a.post(st,n,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message,r=a.data;he(l),$.b.success({content:l,key:1},5),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);var o={};return n&&r.forEach((function(e){var t=e.keyLabel,a=e.keyValue;o[t]=a})),{success:n,data:o}})).catch((function(e){return $.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))),dt({variables:l})]).then((function(e){var t=e[0].success?e[0].data:i.settings,n=e[1].success?e[1].data:i.variables;a.setFieldsValue(Object(tt.a)({settings:t},n))})).catch((function(e){return console.log(e)}))},size:"small",layout:"inline",style:{padding:"20px 50px 20px 50px"}},l.a.createElement(Rt,{FormFields:d}),l.a.createElement(Rt,{FormFields:f})),l.a.createElement(p.a,{justify:"end"},l.a.createElement(Pe.b,{size:"large"},l.a.createElement(lt.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return a.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(rt.a,{type:"primary",size:"small"},"Save")),l.a.createElement(rt.a,{size:"small",onClick:function(){return a.resetFields()}},"Cancel"))))};var Qt=function(e){var t=this,a=nt.a.useForm(),r=Object(G.a)(a,1)[0],o=Object(n.useState)([{fieldCol:6,Placeholder:"Rate",type:"Title",mode:4,fieldStyle:{textAlign:"right"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Start Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:5,Placeholder:"Finish Date",type:"Title",mode:4,fieldStyle:{textAlign:"center"},style:{textDecoration:"underline"}},{fieldCol:24,Placeholder:"Sale Tax",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"GST:",type:"Text",itemStyle:{textAlign:"center"}},{object:"gst",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"gst",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"gst",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"on Cost Rate",type:"Title",mode:4,style:{textDecoration:"underline"}},{fieldCol:4,Placeholder:"Superannuation:",type:"Text",itemStyle:{textAlign:"center"}},{object:"superannuation",fieldCol:3,key:"rate",size:"small",shape:"%",type:"InputNumber"},{object:"superannuation",fieldCol:5,key:"date",size:"small",shape:"%",type:"DatePicker"},{object:"superannuation",fieldCol:4,key:"finish",size:"small",shape:"%",type:"DatePicker"},{fieldCol:24,Placeholder:"Payroll Tax",type:"Text",itemStyle:{paddingLeft:"5%"}}]),i=Object(G.a)(o,2),s=i[0];i[1],Object(n.useEffect)((function(){c()}),[]);var c=function(){Promise.all([At(),Ft()]).then((function(e){console.log(e[1])})).catch((function(e){return console.log(e)}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{id:"my-form",form:r,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(Rt,{FormFields:s})),l.a.createElement(p.a,{justify:"end"},l.a.createElement(Pe.b,{size:"large"},l.a.createElement(lt.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return t.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(rt.a,{type:"primary",size:"small"},"Save")),l.a.createElement(rt.a,{size:"small",onClick:function(){return t.reset()}},"Cancel"))))},ea=a(593),ta=a(600),aa=a(643),na=a(330),la=a(78),ra=a(601),oa=nt.a.Item,ia=mt.a.Dragger,sa=ft.a.RangePicker,ca=pt.a.RangePicker,ua=Ye.a.Title,da=Ye.a.Text,ma={required:"${label} is required!",types:{email:"${label} is not validate email!",number:"${label} is not a validate number!"},number:{range:"${label} must be between ${min} and ${max}"}},fa=function(e){return Array.isArray(e)?e:e&&e.fileList},pa=(new RegExp("^(?:\\+?(61))? ?(?:\\((?=.*\\)))?(0?[2-57-8])\\)? ?(\\d\\d(?:[- ](?=\\d{3})|(?!\\d\\d[- ]?\\d[- ]))\\d\\d[- ]?\\d[- ]?\\d{3})$"),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).multipleUpload=function(e,t,a,l){var r=n.state.uploadKeys;return n.state.uploadKeys[a]=e,n.setState({uploadKeys:Object(tt.a)({},r)}),!1},n.formatter=function(e,t){return"$"===t?"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):"ABN"===t?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g," "):t?"".concat(e).concat(t):"".concat(e)},n.parser=function(e,t){return"$"===t?e.replace(/\$\s?|(,*)/g,""):"ABN"===t?e.replace(/\$\s?|(\s*)/g,""):t?e.replace(t,""):e},n.onFinishs=function(e){n.props.Callback(e)},n.content=function(){var e=n.props.FormFields,t=e.fields,a=e.btns?e.btns:{},r=a.btn?a.btn:[];return l.a.createElement(h.a,{span:e.FormCol},l.a.createElement(nt.a,Object.assign({id:e.formId,ref:e.formId,style:e.Formstyle,name:"nest-messages",onFinish:n.onFinishs,validateMessages:ma,scrollToFirstError:!0,size:e.size,layout:e.FormLayout},e.layout,{initialValues:e.initialValues,preserve:!1!==e.preserve}),e.fields?l.a.createElement(l.a.Fragment,null,t.map((function(e,t){return l.a.createElement(h.a,{span:e.fieldCol,offset:e.filedOffset,key:t+1,hidden:!0===e.hidden,style:e.style},l.a.createElement(oa,Object.assign({},e.layout,{name:[e.object,e.key],extra:e.hint,labelAlign:e.labelAlign,label:e.label,labelCol:e.labelCol,wrapperCol:e.wrapperCol,rules:e.rules,valuePropName:e.valuePropName,getValueFromEvent:e.getValue&&fa,hidden:!0===e.hidden,style:e.itemStyle,noStyle:e.noStyle,normalize:e.normalize}),n.filedformat(e.type,e.Placeholder,e.data,e.mode,e.rangeMin,e.rangeMax,e.showTime,e.shape,e.size,e.fieldStyle,e.disabled,e.readOnly,e.onChange,e.onClick,e.onBlur,e.onClear,e.tooltip,e.tooltipTitle,e.tooltipTrigger)))}))):l.a.createElement("span",null),a.btn?l.a.createElement(h.a,{span:a.fieldCol,offset:a.filedOffset},l.a.createElement(p.a,{justify:a.justify,style:a.backstyle},l.a.createElement(oa,{style:a.style},l.a.createElement(Pe.b,{size:a.size},r.map((function(e,t){return l.a.createElement(rt.a,{key:t,type:e.type,htmlType:e.htmlType,size:e.size,hidden:e.hidden,s:!0},e.placeholder)})))))):l.a.createElement("span",null)))},n.filedformat=function(e,t,a,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b,E){var k=null;switch(e){case"Title":k=l.a.createElement(ua,{level:r,size:u,style:d},g?l.a.createElement(Te.a,{title:b,trigger:E}," ",t):t);break;case"Text":k=l.a.createElement(da,{strong:r,onClick:h,style:d,disabled:m},g?l.a.createElement(Te.a,{title:b,trigger:E}," ",t):t,o&&l.a.createElement("span",{style:{color:"red"}}," * "));break;case"Password":k=l.a.createElement(ht.a.Password,{placeholder:t,visibilityToggle:r,size:u,style:d});break;case"Textarea":k=l.a.createElement(ht.a.TextArea,{placeholder:t,allowClear:!0,autoSize:r,asize:u,style:d,prefix:r});break;case"InputNumber":k=l.a.createElement(yt.a,{placeholder:t,min:o,max:i,size:u,formatter:function(e){return n.formatter(e,c)},parser:function(e){return n.parser(e,c)},style:d,onBlur:y,onChange:p,disabled:m,readOnly:f});break;case"Select":k=l.a.createElement(vt.a,{placeholder:t,options:a,mode:r,showArrow:!0,size:u,allowClear:!0,onChange:p,onClear:v,style:d,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},disabled:m});break;case"Switch":k=l.a.createElement(gt.a,{size:u,style:d});break;case"Radio":k=l.a.createElement(bt.a.Group,{options:a,optionType:r,buttonStyle:c,size:u,style:d});break;case"Checkbox":k=l.a.createElement(Et.a,{options:a,size:u,style:d,onChange:p});break;case"CheckboxGroup":k=l.a.createElement(Et.a.Group,{options:a,size:u,style:d,onChange:p});break;case"DatePicker":k=l.a.createElement(ft.a,{picker:r,showTime:s,disabledDate:null!==o&&void 0!==o?o:i,size:u,style:d,onBlur:y,onChange:p,format:"ddd DD MMM yyyy",disabled:m});break;case"TimePicker":k=l.a.createElement(pt.a,{format:s,use12Hours:"use12Hours"===r,size:u,minuteStep:o,showNow:i,style:d});break;case"TimeRange":k=l.a.createElement(ca,{format:s,use12Hours:"use12Hours"===r,minuteStep:o,size:u,showNow:i,style:d});break;case"RangePicker":k=l.a.createElement(sa,{picker:r,showTime:s,size:u,style:d,format:"ddd DD MMM yyyy"});break;case"Divider":k=l.a.createElement(kt.a,{type:r,style:d});break;case"Button":k=l.a.createElement(rt.a,{type:r,shape:c,block:i,style:d,onClick:h,size:u},t);break;case"Upload":k=l.a.createElement(mt.a,{name:"logo",action:r,listType:"text",multiple:i,style:d},t);break;case"Dragger":k=l.a.createElement(ia,{name:"logo",action:r,listType:"text",multiple:!0,style:d,beforeUpload:function(){return!1}},t);break;case"Rate":k=l.a.createElement(ra.a,{count:7});break;default:k=l.a.createElement(ht.a,{placeholder:t,style:d,size:u,disabled:m,readOnly:f,onBlur:y,onChange:p})}return k},n}return Object(u.a)(a,[{key:"render",value:function(){return this.content()}}]),a}(n.Component)),ha="".concat(J,"/calendar-holidays"),ya=a(96),va=a(602),ga=a(323),ba=(a(148),["size","title","columns","dataSource","rowKey","rowSelection","bordered","className","style","pagination","rowClassName"]),Ea=function(e,t,a,n){return{sorter:function(a,l){var r=ja(a,e),o=ja(l,e);return r=n&&r===n?"AA":r,o=n&&o===n?"AA":o,"number"===t?r-o:"string"===t?"".concat(r).localeCompare("".concat(o)):"date"===t?K()(r||"2011 11 10").unix()-K()(o||"2011 11 10").unix():void 0},defaultSortOrder:a&&"ascend"}},ka=function(e,t){return l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,{span:e},l.a.createElement(ht.a.Search,{placeholder:"Search Table",enterButton:!0,size:"small",onChange:function(e){var a=e.target.value;t(a)},onPressEnter:function(e){var a=e.target.value;t(a)},allowClear:!0})))},Sa=function(e){var t=e.title,a=e.visible,r=e.onClose,o=e.filters,i=e.filterFunction,s=e.filterFields,c=e.effectRender,u=e.effectFunction,d=e.destroyOnClose,m=void 0===d||d,f=e.groupFrom,h=nt.a.useForm(),y=Object(G.a)(h,1)[0];Object(n.useEffect)((function(){c&&u()}),[]),Object(n.useEffect)((function(){var e={};if(o&&a){for(var t in o)if("Date"===o[t].type){var n=o[t].value;o[t].mode?e[t]=n&&K()(n[0]):e[t]=n&&[K()(n[0]),K()(n[1])]}else if("Select"===o[t].type&&o[t].multi){var l;e[t]=null!==(l=o[t].value)&&void 0!==l?l:""}else{var r;e[t]=null!==(r=o[t].value)&&void 0!==r?r:""}y.setFieldsValue({obj:e})}}),[a]);return l.a.createElement(ta.a,{title:t,maskClosable:!1,centered:!0,width:750,visible:a,destroyOnClose:m,onOk:function(){y.submit()},onCancel:function(){return r()}},l.a.createElement(nt.a,{form:y,size:"small",layout:"inline",onFinish:function(e){for(var t in e=e.obj,o)if("Date"===o[t].type){if("Year"===o[t].mode){var a=Ee("dates",e[t]),n=a.start,l=a.end;o[t].value=[null===n||void 0===n?void 0:n.format("YYYY-MM-DD"),null===l||void 0===l?void 0:l.format("YYYY-MM-DD")]}if("monthRange"===o[t].mode){var r,s,c,u;o[t].value=[null===(r=e[t])||void 0===r||null===(s=r.startOf("month"))||void 0===s?void 0:s.format("YYYY-MM-DD"),null===(c=e[t])||void 0===c||null===(u=c.endOf("month"))||void 0===u?void 0:u.format("YYYY-MM-DD")]}else{var d,m,f=e[t];o[t].value=f&&[null===(d=f[0])||void 0===d?void 0:d.format("YYYY-MM-DD"),null===(m=f[1])||void 0===m?void 0:m.format("YYYY-MM-DD")]}}else{var p;o[t].value=null!==(p=e[t])&&void 0!==p?p:""}i(!1,!1,o,e)}},f?l.a.createElement(va.a,{defaultActiveKey:["0"],accordion:!0,style:{width:"100%"}},Object.entries(f).map((function(e,t){var a=Object(G.a)(e,2),n=a[0],r=a[1];return l.a.createElement(va.a.Panel,{header:n,key:t},l.a.createElement(p.a,null,l.a.createElement(Rt,{FormFields:s.slice(r[0],r[1])})))}))):l.a.createElement(Rt,{FormFields:s})))},Ca=function(e){var t=e.filters,a=e.filterFunction,r=Object.keys(t),o=Object(n.useState)({}),i=Object(G.a)(o,2),s=(i[0],i[1]);return Object(n.useEffect)((function(){return function(){s({})}}),[]),l.a.createElement(h.a,{span:24},r.map((function(e){var n,r;return t[e].value&&t[e].value.length>0&&l.a.createElement("span",{key:e},l.a.createElement(ga.a,{color:"magenta",key:e},t[e].label,": "),"string"===typeof t[e].value?l.a.createElement(ga.a,{key:"".concat(e,"value"),color:"lime",closable:!0,onClose:function(){return a("",e)}},t[e].value):"Date"===t[e].type?l.a.createElement(ga.a,{key:null===(n=t[e])||void 0===n||null===(r=n.value)||void 0===r?void 0:r[0],color:"lime",closable:!0,onClose:function(){a(null,e)}},"".concat(t[e].value[0],"=>").concat(t[e].value[1])):t[e].multi?t[e].value&&t[e].value.map((function(n){var r;return l.a.createElement(ga.a,{key:"".concat(e).concat(n.value),color:null!==(r=t[e].color)&&void 0!==r?r:"lime",closable:!0,onClose:function(){var l=t[e].value.filter((function(e){return e.value!==n.value}));a(l,e)}},n.label)})):t[e].value&&t[e].value.map((function(n){return l.a.createElement(ga.a,{key:"".concat(e).concat(n),color:"lime",closable:!0,onClose:function(){var l=t[e].value.filter((function(e){return e!==n}));a(l,e)}},n)})))})))},ja=function(e,t){return t.split(".").reduce((function(e,t){var a;return null!==(a=e[t])&&void 0!==a?a:""}),e)},Oa=function(e){var t=e.filters,a=e.filterFunction,r=t?Object.keys(t):[],o=Object(n.useState)({}),i=Object(G.a)(o,2),s=(i[0],i[1]);return Object(n.useEffect)((function(){return function(){s({})}}),[]),l.a.createElement(h.a,{span:24},r.map((function(e){var n,r,o,i,s,c=null!==(n=t[e])&&void 0!==n?n:{},u=c.value,d=c.label,m=c.type,f=c.multi,p=(c.mode,c.color),h=void 0===p?"lime":p,y=null!==(r=null===(o=u)||void 0===o?void 0:o.selectedIds)&&void 0!==r?r:[];return(u=u&&((null===(i=u)||void 0===i?void 0:i.selectedIds)?(null===(s=u)||void 0===s?void 0:s.selectedIds.length)?u.option:null:(u.length>0&&u[0]||u.value)&&u))&&l.a.createElement("span",{key:e},l.a.createElement(ga.a,{color:"magenta",key:e},d,": "),"Date"===m?l.a.createElement(ga.a,{key:u[0],color:h,closable:!0,onClose:function(){a(null,e)}}," ","".concat(u[0],"=>").concat(u[1])," "):"Select"===m?f?u.map((function(t){return l.a.createElement(ga.a,{key:"".concat(e).concat(t.value),color:h,closable:!0,onClose:function(){var n=y.length?{option:u.filter((function(e){return e.value!==t.value})),selectedIds:y.filter((function(e){return e!==t.value}))}:u.filter((function(e){return e.value!==t.value}));n=n.length||n.selectedIds.length?n:null,a(n,e)}},t.label)})):l.a.createElement(ga.a,{key:"".concat(e).concat(u.value),color:h,closable:!0,onClose:function(){a(null,e)}},u.label):l.a.createElement(ga.a,{key:"".concat(e,"value"),color:h,closable:!0,onClose:function(){return a("",e)}},u))})))},xa=function(e){var t=e.size,a=void 0===t?"small":t,r=e.title,o=e.columns,i=void 0===o?[]:o,s=e.dataSource,c=void 0===s?[]:s,u=e.rowKey,d=void 0===u?"id":u,m=e.rowSelection,f=void 0!==m&&m,p=e.bordered,h=void 0===p||p,y=e.className,v=void 0===y?"fs-small":y,g=e.style,b=e.pagination,E=e.rowClassName,k=Object(ya.a)(e,ba),S=null!==b&&void 0!==b?b:{},C=S.current,j=void 0===C?1:C,O=S.onChange,x=void 0!==O&&O,w=S.pageSize,I=void 0===w?pe().pageSize:w,D=S.hideOnSinglePage,P=void 0===D||D,T=S.responsive,N=void 0===T||T,R=S.size,A=void 0===R?"small":R,F=S.disabled,z=void 0!==F&&F,L=S.showPageSizeChanger,M=void 0!==L&&L,B=Object(n.useState)({pageSize:I,pageNo:j}),_=Object(G.a)(B,2),Y=_[0],V=_[1];return l.a.createElement(ea.a,Object.assign({},k,{title:r,size:a,bordered:h,className:v,rowClassName:E,style:g,pagination:!1!==b&&{onChange:function(e,t){x&&x(e,t),V({pageSize:t,pageNo:e})},current:Y.pageNo,pageSize:Y.pageSize,hideOnSinglePage:P,responsive:N,size:A,disabled:z,showSizeChanger:M},rowKey:function(e,t){return"index"===d?t:e[d]},rowSelection:f,columns:i,dataSource:c}))},wa=Ye.a.Title,Ia=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getData=function(e){(function(e){return it.a.get(ha+"?calendarId=".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;(he(r),n)&&(l.map((function(e){e.label=e.holidayType.label})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization));return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(e).then((function(t){t.success&&n.setState({data:t.data,calendarId:e,filterData:t.data,openModal:!1,editTimeoff:!1,loading:!1})}))},n.handleDelete=function(e){(function(e){return it.a.delete(ha+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;if(he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){if(e){var t=n.state.FormFields;it.a.get("".concat(J,"/holiday-types"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&(l.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization)),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&(t.fields[0].data=a.data,n.setState({FormFields:t,openModal:e}))}))}else n.setState({openModal:e,editTimeoff:!1})},n.Callback=function(e){var t={calendarId:n.state.calendarId,holidayTypeId:null===e||void 0===e?void 0:e.obj.holidayTypeId,date:me(null===e||void 0===e?void 0:e.obj.date,!0)};n.state.editTimeoff?n.editRecord(t):n.addType(t)},n.addType=function(e){var t;n.setState({loading:!0}),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(ha,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){if(e){var t=n.state.calendarId;n.getData(t)}}))},n.getRecord=function(e){var t={id:e.id,holidayTypeId:e.holidayTypeId,date:me(e.date)};n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:t}}),editTimeoff:t.id},(function(){n.toggelModal(!0)}))},n.editRecord=function(e){var t,a=n.state.editTimeoff;n.setState({loading:!0}),e.id=a,(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(ha+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t.id}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.submit=function(){n.holidayForm.current.refs.form.submit()},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())||t.date&&me(t.date,!0,!0).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;if(t?o[t].value=e:o=a,o.label.value||o.date.value){var i,s=null!==(i=o.date.value)&&void 0!==i?i:[null,null];n.setState({filterData:r.filter((function(e){var t,a,n;return"".concat(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase().includes(o.label.value.toLowerCase())&&K()(o.date.value?K()(e.date).format("YYYY-MM-DD"):"2010-10-20").isBetween(null!==(a=s[0])&&void 0!==a?a:"2010-10-19",null!==(n=s[1])&&void 0!==n?n:"2010-10-25",void 0,"[]")})),searchedColumn:o,openSearch:!1})}else n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.holidayForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Title",dataIndex:"label",key:"label"},Ea("label","string")),Object(tt.a)({title:"Date",dataIndex:"date",key:"date",render:function(e,t){return me(e,!0,!0)}},Ea("date","date")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={calendarId:!1,data:[],filterData:[],openModal:!1,editTimeoff:!1,FormFields:{formId:"form",justify:"center",FormCol:12,layout:{labelCol:{span:6}},justifyField:"center",size:"small",fields:[{object:"obj",fieldCol:24,key:"holidayTypeId",label:"Title",size:"small",type:"Select",data:[],labelAlign:"right"},{object:"obj",fieldCol:24,key:"date",label:"Date",size:"small",mode:"date",type:"DatePicker",labelAlign:"right",fieldStyle:{width:"100%"}}]},openSearch:!1,searchedColumn:{label:{type:"Input",value:"",label:"label",showInColumn:!0},date:{type:"Date",value:null,label:"Date",showInColumn:!0}},filterFields:[{Placeholder:"Title",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"label",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"date",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}}]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getData(e)}},{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editTimeoff,r=t.FormFields,o=t.loading,i=t.filterData,s=t.openSearch,c=t.filterFields,u=t.searchedColumn,d=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(wa,{level:4},"Holidays")),l.a.createElement(h.a,{span:"2"},l.a.createElement(ft.a,{size:"small",mode:"year",picker:"year",format:"YYYY",defaultValue:K()(new Date)})),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"space-between",gutter:10},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.toggelModal(!0)}},l.a.createElement(na.a,null)," Add Holiday")))),l.a.createElement(Ca,{filters:u,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},columns:d,dataSource:i,size:"small",rowKey:function(e){return e.id},className:"fs-small"}))),s&&l.a.createElement(Sa,{title:"Filter Holidays",visible:s,filters:u,filterFields:c,filterFunction:this.advancefilter,effectRender:!1,onClose:function(){return e.setState({openSearch:!1})}}),a?l.a.createElement(ta.a,{title:n?"Edit Holiday":"Add Holiday",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.submit()},onCancel:function(){e.toggelModal(!1)},okButtonProps:{disabled:o},okText:o?l.a.createElement(la.a,null):"Save",width:500,bodyStyle:{padding:"10px 0px 0px 0px"}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(pa,{ref:this.holidayForm,Callback:this.Callback,FormFields:r}))):null)}}]),a}(n.Component),Da="".concat(J,"/calendars"),Pa=Ye.a.Title,Ta=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){it.a.get(Da,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,filterData:e.data,FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editTimeoff:!1,loading:!1})}))},n.toggelModal=function(e){e?n.setState({openModal:e}):n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editTimeoff:!1})},n.Callback=function(e){n.state.editTimeoff?n.editRecord(e.obj):n.addCal(e.obj)},n.addCal=function(e){var t;n.setState({loading:!0}),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(Da,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;if(he(l),$.b.success({content:l,key:1}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e,t){n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editTimeoff:e.id,openModal:!0})},n.editRecord=function(e){var t,a=n.state.editTimeoff;n.setState({loading:!0}),e.id=a,(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(Da+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t.id},5),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.submit=function(){n.state.calenderForm.current.refs.calenderId.submit()},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())||"".concat(t.isActive?"Enabled":"Disabled").toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.columns=[Object(tt.a)({title:"Title",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Status",dataIndex:"isActive",key:"isActive",align:"right",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ga.a,{color:e?"green":"#7d7b7b",key:e},e?"Enabled":"Disabled"))}},{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{onClick:function(){return n.getRecord(e,t)}},"Edit"),l.a.createElement(b.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/admin/calendars/holidays/".concat(e.id)},className:"nav-link"},"Holidays")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={data:[],calenderForm:l.a.createRef(),openModal:!1,filterData:[],FormFields:{formId:"calenderId",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",initialValues:{obj:{isActive:!0}},fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"},{object:"obj",fieldCol:20,key:"isActive",label:"Status",size:"small",type:"Switch",layout:{labelCol:{span:4}},labelAlign:"left",valuePropName:"checked"}]}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editTimeoff,r=t.loading,o=t.calenderForm,i=t.FormFields,s=t.filterData,c=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Pa,{level:4},"Calendars")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(na.a,null),"Add Calendar")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},columns:c,dataSource:s,size:"small",rowKey:function(e){return e.id},className:"fs-small"}))),a?l.a.createElement(ta.a,{title:n?"Edit Calendar":"Add Calendar",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.submit()},okButtonProps:{disabled:r},okText:r?l.a.createElement(la.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:600},l.a.createElement(pa,{ref:o,Callback:this.Callback,FormFields:i})):null)}}]),a}(n.Component),Na="".concat(J,"/holiday-types"),Ra=Ye.a.Title,Aa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.getData=function(){it.a.get(Na,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,isVisible:!1,editType:!1})}))},e.handleDelete=function(t){(function(e){return it.a.delete(Na+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.HalForm.current.refs.type_form.submit()},e.Callback=function(t){e.state.editType?e.editRecord(t.obj):e.addType(t.obj)},e.addType=function(t){var a;e.setState({loading:!1}),(a=t,$.b.loading({content:"Loading...",key:1}),it.a.post(Na,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.HalForm.current.refs.type_form.resetFields(),e.getData())}))},e.getRecord=function(t){var a=Object.assign({},t);e.setState({FormFields:Object(tt.a)(Object(tt.a)({},e.state.FormFields),{},{initialValues:{obj:a}}),editType:a.id,isVisible:!0})},e.editRecord=function(t){var a,n=e.state.editType;e.setState({loading:!1}),t.id=n,(a=t,$.b.loading({content:"Loading...",key:a.id}),it.a.put(Na+"/".concat(a.id),a,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a.id}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.HalForm.current.refs.type_form.resetFields(),e.getData())}))},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){return e.label&&e.label.toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.HalForm=l.a.createRef(),e.columns=[Object(tt.a)({title:"Types",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return e.getRecord(t,a)}},"Edit"),l.a.createElement(b.a.Item,{key:"Delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],e.state={isVisible:!1,newType:"",data:[],filterData:[],editType:!1,FormFields:{formId:"type_form",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",labelAlign:"right",type:"Input",size:"small"}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.isVisible),n=t.editType,r=t.FormFields,o=t.loading,i=t.filterData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ra,{level:3},"Holiday Types")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({isVisible:!0})}},l.a.createElement(na.a,null)," Holiday Type"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},columns:this.columns,dataSource:i,size:"small",rowKey:function(e){return e.id},className:"fs-small"}),a&&l.a.createElement(ta.a,{title:n?"Edit Type":"Add Type",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:o},okText:o?l.a.createElement(la.a,null):"Save",width:400,onCancel:function(){delete r.initialValues,e.setState({isVisible:!1,FormFields:r})},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(pa,{ref:this.HalForm,Callback:this.Callback,FormFields:r}))))}}]),a}(n.Component),Fa="".concat(J,"/leave-request-types"),za=Ye.a.Title,La=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){it.a.get(Fa,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,filterData:e.data,openModal:!1,editTimeoff:!1,loading:!1,FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}})})}))},n.handleDelete=function(e){(function(e){return it.a.delete(Fa+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){e?n.setState({openModal:e}):n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:e,editTimeoff:!1})},n.submit=function(){n.dynamoForm.current.refs.time_off.submit()},n.Callback=function(e){n.state.editTimeoff?n.editRecord(e.obj):n.addType(e.obj)},n.addType=function(e){var t;n.setState({loading:!0}),console.log(e),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(Fa,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:"Success!",key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e){n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editTimeoff:e.id,openModal:!0})},n.editRecord=function(e){var t;n.setState({loading:!0}),e.id=n.state.editTimeoff,(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(Fa+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:"Success!",key:t.id}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.dynamoForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Title",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{danger:!0,key:"Delete",className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={data:[],filterData:[],openModal:!1,editTimeoff:!1,loading:!1,FormFields:{formId:"time_off",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"}]}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.editTimeoff),n=t.openModal,r=t.loading,o=t.FormFields,i=t.filterData,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(za,{level:4},"Leave Categories")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(na.a,null),"Add Leave Category")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},columns:s,dataSource:i,size:"small",rowKey:function(e){return e.id},className:"fs-small"}))),n?l.a.createElement(ta.a,{title:a?"Edit Leave Category":"Add Leave Category",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:r},okText:r?l.a.createElement(la.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:600},l.a.createElement(pa,{ref:this.dynamoForm,Callback:this.Callback,FormFields:o})):null)}}]),a}(n.Component),Ma=a(644),Ba="".concat(J,"/leave-request-policies"),_a=Ye.a.Title,Ya=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.timeOff(),n.getData()},n.timeOff=function(){it.a.get("".concat(J,"/leave-request-types"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&(l.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization)),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){if(e.success){var t=n.state.FormFields_1;t[0].data=e.data,n.setState({FormFields_1:t})}}))},n.getData=function(){it.a.get(Ba,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,filterData:e.data,openModal:!1,editTimeoff:!1,loading:!1})}))},n.handleDelete=function(e){(function(e){return it.a.delete(Ba+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.getRecord=function(e,t){n.setState({editTimeoff:e.id,openModal:!0},(function(){return n.formRef.current.setFieldsValue({obj:e})}))},n.editRecord=function(e){var t;e.id=n.state.editTimeoff,n.setState({loading:!0}),(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(Ba+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t.id}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.renderTable=function(e){var t;n.setState({loading:!0}),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(Ba,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){n.getData()}))},n.onFinish=function(e){var t=e.obj;n.state.editTimeoff?(console.log("edit"),n.editRecord(t)):(console.log("emes"),n.renderTable(t))},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.formRef=l.a.createRef(),n.addField=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:"5%"},Ea("id","number",!0)),Object(tt.a)({title:"Title",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",className:"pop-confirm-menu",danger:!0},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return n.getRecord(t,e)}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={data:[],filterData:[],openModal:!1,loading:!1,FormFields:[{object:"obj",fieldCol:24,key:"label",label:"Policy Title",size:"small",rules:[{required:!0,message:"Policy Title is Required"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,layout:{wrapperCol:{span:0}},Placeholder:"Insert Leave Type",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",onClick:function(e,t){n.addField.click()},itemStyle:{marginBottom:5}},{fieldCol:5,Placeholder:"Categories",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Earn Hours",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:3,layout:{wrapperCol:{offset:1}},Placeholder:"Earn Every",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Reset Hours",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:3,layout:{wrapperCol:{offset:1}},Placeholder:"Reset Every",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Threshold",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Overdraw Allowance",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Balance Required",type:"Text",size:"small",style:{margin:"auto 0"}},{fieldCol:2,layout:{wrapperCol:{offset:1}},Placeholder:"Include Holidays",type:"Text",size:"small",style:{margin:"auto 0"}}],FormFields_1:[{fieldCol:5,key:"leaveRequestTypeId",size:"small",type:"Select",itemStyle:{marginBottom:"5px"}},{fieldCol:2,key:"earnHours",initialValue:0,size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{fieldCol:3,key:"earnEvery",initialValue:"N",size:"small",type:"Select",labelAlign:"left",data:[{value:"M",label:"Monthly"},{value:"Y",label:"Yearly"},{value:"A",label:"Anniversary"},{value:"MA",label:"Monthly Anniversary"},{value:"N",label:"NEVER"}]},{fieldCol:2,key:"resetHours",initialValue:0,size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"}},{fieldCol:3,key:"resetEvery",initialValue:"N",size:"small",type:"Select",labelAlign:"left",data:[{value:"M",label:"Monthly"},{value:"Y",label:"Yearly"},{value:"A",label:"Anniversary"},{value:"MA",label:"Monthly Anniversary"},{value:"N",label:"NEVER"}]},{fieldCol:2,key:"threshold",initialValue:0,size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"}},{fieldCol:2,key:"minimumBalance",initialValue:0,size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},rules:[{type:"number",max:0,message:"Maximum 0"}]},{fieldCol:2,key:"minimumBalanceRequired",initialValue:0,size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},rules:[{type:"number",min:0,message:"Minimum 0"}]},{fieldCol:1,key:"includeOffDays",valuePropName:"checked",size:"small",type:"Switch",labelAlign:"left",style:{textAlign:"center"}}],editTimeoff:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editTimeoff,r=t.FormFields,o=t.FormFields_1,i=t.loading,s=t.filterData,c=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(_a,{level:4},"Leave Policies ")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({openModal:!0})},size:"small"},l.a.createElement(na.a,null),"Add Leave Policy")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:c,dataSource:s,size:"small",className:"fs-small"}))),a&&l.a.createElement(ta.a,{title:n?"Edit Leave Policy":"Add Leave Policy",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:i,htmlType:"submit",form:"my-form"},okText:i?l.a.createElement(la.a,null):"Save",onCancel:function(){e.setState({openModal:!1})},width:1400,forceRender:!0},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:r}),l.a.createElement(nt.a.List,{name:["obj","leaveRequestPolicyLeaveRequestTypes"]},(function(t,a){var n=a.add,r=a.remove;return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a.Item,{style:{textAlign:"right"}},l.a.createElement(rt.a,{size:"small",onClick:function(){return n()},ref:function(t){return e.addField=t}})),t.map((function(e){var t=e.name,a=e.key;return l.a.createElement("span",{className:"ant-row",key:a,style:{width:"100%"}},l.a.createElement(Rt,{FormFields:o,listName:t}),l.a.createElement(Ma.a,{style:{color:"red",margin:"auto"},onClick:function(){return r(t)}}))})))})))))}}]),a}(n.Component),Va="".concat(J,"/roles"),qa=function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(Va+"/".concat(e,"/update-permissions"),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))},Ha={ADMIN_OPTIONS:{ADD:["ANY"],UPDATE:["ANY"],READ:["ANY"],DELETE:["ANY"]},CONTACT_PERSONS:{ADD:["ANY"],UPDATE:["ANY"],READ:["ANY"],DELETE:["ANY"]},ORGANIZATIONS:{ADD:["ANY"],UPDATE:["ANY"],READ:["ANY"],DELETE:["ANY"]},USERS:{ADD:["ANY"],UPDATE:["ANY"],READ:["ANY"],DELETE:["ANY"]},PROJECTS:{ADD:["ANY"],UPDATE:["ANY","MANAGE"],READ:["ANY","MANAGE","OWN"],DELETE:["ANY"]},OPPORTUNITIES:{ADD:["ANY"],UPDATE:["ANY","MANAGE"],READ:["ANY","MANAGE"],DELETE:["ANY"]},TIMESHEETS:{ADD:["OWN"],UPDATE:["OWN"],READ:["ANY","MANAGE","OWN"],DELETE:["OWN"],APPROVAL:["ANY","MANAGE"],UNAPPROVAL:["ANY","MANAGE"]},LEAVE_REQUESTS:{ADD:["OWN"],UPDATE:["OWN"],READ:["OWN"],DELETE:["OWN"],APPROVAL:["ANY","MANAGE"],UNAPPROVAL:["ANY","MANAGE"]},EXPENSES:{ADD:["OWN"],UPDATE:["OWN"],READ:["OWN"],DELETE:["OWN"],APPROVAL:["ANY","MANAGE"],UNAPPROVAL:["ANY","MANAGE"]},PROFILE:{UPDATE:["OWN"]}},Ua=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.handleRawDtata()},n.handleRawDtata=function(){var e=n.state.newPermission;n.props.perData.forEach((function(t){e[t.resource]?e[t.resource][t.action]?e[t.resource][t.action].push(t.grant):e[t.resource][t.action]=[t.grant]:e[t.resource]=Object(at.a)({},t.action,[t.grant])})),n.formRef.current.setFieldsValue(Object(tt.a)({},e))},n.onFinish=function(e){for(var t=[],a=n.props,l=a.eidtPer,r=a.Callback,o=0,i=Object.entries(e);o<i.length;o++){var s=Object(G.a)(i[o],2),c=s[0],u=s[1];if(u)for(var d=0,m=Object.entries(u);d<m.length;d++){var f=Object(G.a)(m[d],2),p=f[0],h=f[1];if(h){var y,v=Object(g.a)(h);try{for(v.s();!(y=v.n()).done;){var b=y.value;t.push({resource:c,action:p,grant:b})}}catch(E){v.e(E)}finally{v.f()}}}}qa(l,t).then((function(e){e.success&&r(e.data)}))},n.formRef=l.a.createRef(),n.Columns=[{title:"Category",dataIndex:"category",key:"category"},{title:"Create",key:"ADD",dataIndex:"ADD",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"ADD"]},Ha[t.key].ADD&&l.a.createElement(Et.a.Group,{options:Ha[t.key].ADD}))}},{title:"Update",key:"UPDATE",dataIndex:"UPDATE",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"UPDATE"]},Ha[t.key].UPDATE&&l.a.createElement(Et.a.Group,{options:Ha[t.key].UPDATE}))}},{title:"Read",key:"READ",dataIndex:"READ",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"READ"]},Ha[t.key].READ&&l.a.createElement(Et.a.Group,{options:Ha[t.key].READ}))}},{title:"Delete",key:"DELETE",dataIndex:"DELETE",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"DELETE"]},Ha[t.key].DELETE&&l.a.createElement(Et.a.Group,{options:Ha[t.key].DELETE}))}},{title:"Approval",key:"APPROVAL",dataIndex:"APPROVAL",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"APPROVAL"]},Ha[t.key].APPROVAL&&l.a.createElement(Et.a.Group,{options:Ha[t.key].APPROVAL}))}},{title:"Unapproval",key:"UNAPPROVAL",dataIndex:"UNAPPROVAL",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"UNAPPROVAL"]},Ha[t.key].UNAPPROVAL&&l.a.createElement(Et.a.Group,{options:Ha[t.key].UNAPPROVAL}))}}],n.state={loading:!1,newPermission:{},MODULES:[{key:"ADMIN_OPTIONS",category:"Admin Options"},{key:"CONTACT_PERSONS",category:"Contact Persons"},{key:"ORGANIZATIONS",category:"Organisations"},{key:"USERS",category:"Resource"},{key:"PROJECTS",category:"Projects"},{key:"OPPORTUNITIES",category:"Opportunities"},{key:"TIMESHEETS",category:"Timesheets"},{key:"LEAVE_REQUESTS",category:"Leave Requests"},{key:"EXPENSES",category:"Expenses"},{key:"PROFILE",category:"Profile"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.MODULES,n=this.props,r=n.closeModal,o=n.isSystem,i=n.isVisible,s=n.label;return console.log("modules",s),l.a.createElement(ta.a,{title:"Edit Permission Of ".concat(s),maskClosable:!1,centered:!0,visible:i,okText:t?l.a.createElement(la.a,null):"Save",okButtonProps:{disabled:t||o,htmlType:"submit",form:"my-form"},onCancel:function(){r()},width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,size:"small",layout:"inline"},l.a.createElement(ea.a,{bordered:!0,size:"small",rowKey:"key",columns:this.Columns,dataSource:a,pagination:!1,className:"scroll-table fs-v-small",scroll:{y:"65vh"}})))}}]),a}(n.Component),Ga={BENCH_RESOURCES:{READ:["ANY"]},CLIENT_REVENUE:{READ:["ANY"]},LEAVE_SUMMARY:{READ:["ANY"]},POSITIONS:{READ:["ANY"]},PROJECT_REVENUE:{READ:["ANY"]},TIMESHEET_SUMMARY:{READ:["ANY"]},WORK_ALLOCATION:{READ:["ANY"]},WORK_FORCE_SKILLS:{READ:["ANY"]},FORECASTING:{READ:["ANY"]}},Wa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.handleRawDtata()},n.handleRawDtata=function(){var e=n.state.newPermission;n.props.perData.forEach((function(t){e[t.resource]?e[t.resource][t.action]?e[t.resource][t.action].push(t.grant):e[t.resource][t.action]=[t.grant]:e[t.resource]=Object(at.a)({},t.action,[t.grant])})),n.formRef.current.setFieldsValue(Object(tt.a)({},e))},n.onFinish=function(e){for(var t=[],a=n.props,l=a.eidtPer,r=a.Callback,o=0,i=Object.entries(e);o<i.length;o++){var s=Object(G.a)(i[o],2),c=s[0],u=s[1];if(u)for(var d=0,m=Object.entries(u);d<m.length;d++){var f=Object(G.a)(m[d],2),p=f[0],h=f[1];if(h){var y,v=Object(g.a)(h);try{for(v.s();!(y=v.n()).done;){var b=y.value;t.push({resource:c,action:p,grant:b})}}catch(E){v.e(E)}finally{v.f()}}}}qa(l,t).then((function(e){e.success&&r(e.data)}))},n.formRef=l.a.createRef(),n.Columns=[{title:"Category",dataIndex:"category",key:"category"},{title:"Read",key:"READ",dataIndex:"READ",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:[t.key,"READ"]},Ga[t.key].READ&&l.a.createElement(Et.a.Group,{options:Ga[t.key].READ}))}}],n.state={loading:!1,newPermission:{},MODULES:[{key:"BENCH_RESOURCES",category:"Unallocated Resources"},{key:"CLIENT_REVENUE",category:"FY Client Revenue Analysis"},{key:"LEAVE_SUMMARY",category:"Leave Request Summary"},{key:"POSITIONS",category:"Position Allocations"},{key:"PROJECT_REVENUE",category:"FY Project Revenue Analysis"},{key:"TIMESHEET_SUMMARY",category:"Timesheets Summary"},{key:"WORK_ALLOCATION",category:"Workforce Allocations"},{key:"WORK_FORCE_SKILLS",category:"Workforce Skill"},{key:"FORECASTING",category:"Forecasting"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.loading,a=e.MODULES,n=this.props,r=n.closeModal,o=n.isSystem,i=n.isVisible,s=n.label;return l.a.createElement(ta.a,{title:"Edit Report Permission Of ".concat(s),maskClosable:!1,centered:!0,visible:i,okText:t?l.a.createElement(la.a,null):"Save",okButtonProps:{disabled:t||o,htmlType:"submit",form:"my-form"},onCancel:function(){r()}},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,size:"small",layout:"inline"},l.a.createElement(ea.a,{bordered:!0,size:"small",className:"fs-small full-width",rowKey:"key",columns:this.Columns,dataSource:a,pagination:!1})))}}]),a}(n.Component),Ka=Ye.a.Title,$a=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getRoles()},n.getRoles=function(){it.a.get(Va,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,openModal:!1,editRole:!1})}))},n.closeModal=function(){n.roleForm.current.refs.role_form.resetFields(),n.setState({openModal:!1,editRole:!1})},n.Callback=function(e){n.state.editRole?n.editRecord(e.obj):n.addRecord(e.obj)},n.addRecord=function(e){(function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(Va,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e.success&&n.setState({data:[].concat(Object(et.a)(n.state.data),[e.data]),openModal:!1})}))},n.getRecord=function(e,t){n.setState({editRole:e.id,openModal:!0,roleIndex:t},(function(){n.roleForm.current.refs.role_form.setFieldsValue({obj:e})}))},n.editRecord=function(e){var t=n.state,a=t.editRole,l=t.roleIndex,r=t.data;(function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(Va+"/".concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(a,e).then((function(e){e.success&&(r[l]=e.data,console.log(r),n.setState({data:Object(et.a)(r),editRole:!1,openModal:!1,roleIndex:!1}))}))},n.callPermission=function(e,t){var a;console.log(e),n.setState({perModal:!0,editRole:e.id,roleIndex:t,permissions:null!==(a=e.permissions)&&void 0!==a?a:[],isSystem:e.isSystem,label:e.label})},n.callReportPermission=function(e,t){var a;n.setState({reportPerModal:!0,editRole:e.id,roleIndex:t,permissions:null!==(a=e.permissions)&&void 0!==a?a:[],isSystem:e.isSystem,label:e.label})},n.updatePermission=function(e){var t=n.state,a=t.roleIndex,l=t.data;l[a]=e,console.log(l),n.setState({data:Object(et.a)(l),editRole:!1,reportPerModal:!1,openModal:!1,roleIndex:!1,perModal:!1})},n.perColse=function(){n.setState({reportPerModal:!1,perModal:!1,editRole:!1,openModal:!1,roleIndex:!1})},n.roleForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:"5%"},Ea("id","number",!0)),Object(tt.a)({title:"Title",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Edit",disabled:e.isSystem,onClick:function(){n.getRecord(e,a)}},"Edit"),l.a.createElement(b.a.Item,{key:"Permission",onClick:function(){return n.callPermission(e,a)}},"Permissions"),l.a.createElement(b.a.Item,{key:"reportPermissions",onClick:function(){return n.callReportPermission(e,a)}},"Report Permissions"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={data:[],label:"",openModal:!1,editRole:!1,perModal:!1,reportPerModal:!1,permissions:!1,isSystem:!1,loading:!1,FormFields:{formId:"role_form",justify:"center",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},layout:{labelCol:{span:12}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:20,layout:{labelCol:{span:4},wrapperCol:{span:0}},key:"label",label:"Title",size:"small",type:"input",labelAlign:"left"}]}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.openModal,r=t.editRole,o=t.FormFields,i=t.perModal,s=t.reportPerModal,c=t.loading,u=t.permissions,d=t.isSystem,m=t.label,f=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ka,{level:4},"Roles")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({openModal:!0})},size:"small"},l.a.createElement(na.a,null)," Add Roles")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:"id",columns:f,dataSource:a,size:"small",className:"fs-small"}))),n&&l.a.createElement(ta.a,{title:r?"Edit Role":"Add Role",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:c,htmlType:"submit",form:"role_form"},okText:c?l.a.createElement(la.a,null):"Save",onCancel:function(){e.closeModal()},width:600},l.a.createElement(pa,{ref:this.roleForm,Callback:this.Callback,FormFields:o})),i&&l.a.createElement(Ua,{isVisible:i,Callback:this.updatePermission,perData:u,isSystem:d,eidtPer:r,closeModal:this.perColse,label:m}),s&&l.a.createElement(Wa,{isVisible:s,Callback:this.updatePermission,perData:u,isSystem:d,eidtPer:r,closeModal:this.perColse,label:m}))}}]),a}(n.Component),Ja="".concat(J,"/panels"),Xa=Ye.a.Title,Za=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){it.a.get(Ja,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({data:e.data,filterData:e.data,FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:!1,editPanel:!1})}))},n.handleDelete=function(e){(function(e){return it.a.delete(Ja+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){e?n.setState({openModal:e,loading:!1}):n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{}}),openModal:e,editPanel:!1,loading:!1})},n.submit=function(){n.dynamoForm.current.refs.time_off.submit()},n.Callback=function(e){n.state.editPanel?n.editRecord(e.obj):n.addType(e.obj)},n.addType=function(e){var t;n.setState({loading:!0}),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(Ja,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.getRecord=function(e){console.log(e);var t={id:e.id,label:e.label};n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:t}}),editPanel:t.id,openModal:!0})},n.editRecord=function(e){n.setState({loading:!0});var t,a=n.state.editPanel;e.id=a,(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(Ja+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t.id}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e&&n.getData()}))},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.dynamoForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:"5%"},Ea("id","number",!0)),Object(tt.a)({title:"Name",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return n.getRecord(t)}},"Edit"),l.a.createElement(b.a.Item,{key:"skills"},l.a.createElement(s.b,{to:{pathname:"/admin/panels/skills/".concat(t.id)}},"Skills")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={data:[],filterData:[],openModal:!1,editPanel:!1,FormFields:{formId:"time_off",justify:"center",FormCol:20,layout:{labelCol:{span:6}},justifyField:"center",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",size:"small",type:"input",labelAlign:"right"}]}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editPanel,r=t.FormFields,o=t.loading,i=t.filterData,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Xa,{level:4},"Panels")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(na.a,null),"Add Panels")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:i,size:"small",className:"fs-small"}))),a?l.a.createElement(ta.a,{title:n?"Edit Panel":"Add Panel",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.submit()},okButtonProps:{disabled:o},okText:o?l.a.createElement(la.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:400},l.a.createElement(pa,{ref:this.dynamoForm,Callback:this.Callback,FormFields:r})):null)}}]),a}(n.Component),Qa=a(645),en="".concat(J,"/panel-skills"),tn=Ye.a.Title,an=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getSkills=function(){it.a.get("".concat(J,"/standard-skills"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt,delete e.standardSkillStandardLevels}))),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){if(e.success){var t=n.state.FormFields;t.fields[3].data=e.data,n.setState({FormFields:t})}}))},n.getData=function(){var e,t=n.state,a=t.panelId,l=t.FormFields,r=t.FormFields_1;(e=a,console.log(e),it.a.get(en+"?panelId=".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(e){e.success&&n.setState({data:e.data,filterData:e.data,FormFields:Object(tt.a)(Object(tt.a)({},l),{},{initialValues:{}}),FormFields_1:Object(tt.a)(Object(tt.a)({},r),{},{fields:[],initialValues:{}}),mergeObj:{},openModal:!1,editPS:!1,form1Submitted:!1,form2Submitted:!1,loading:!1})}))},n.newField=function(e){var t=n.state.skill_pirority,a=["level".concat(e),"pirority".concat(e),"stceil".concat(e),"ltceil".concat(e),"id".concat(e),e];return[{object:"obj",fieldCol:8,layout:{wrapperCol:{span:20}},key:a[0],size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:7,layout:{wrapperCol:{span:20}},key:a[1],size:"small",data:t,type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:20}},key:a[2],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:4,layout:{wrapperCol:{span:20}},key:a[3],size:"small",type:"InputNumber",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:6,key:a[4],hidden:!0,size:"small",type:"Input"},{fieldCol:1,size:"small",Placeholder:l.a.createElement(Qa.a,null),key:a[5],type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){n.state.FormFields_1.fields=n.state.FormFields_1.fields.filter((function(e){return e.key!==a[0]&&e.key!==a[1]&&e.key!==a[2]&&e.key!==a[3]&&e.key!==a[4]&&e.key!==a[5]})),n.setState({FormFields_1:n.state.FormFields_1})}}]},n.handleDelete=function(e){(function(e){return it.a.delete(en+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e&&n.getData()}))},n.toggelModal=function(e){var t=n.state,a=t.FormFields_1,l=t.FormFields;e?n.setState({openModal:e,FormFields_1:Object(tt.a)(Object(tt.a)({},a),{},{fields:n.newField(0)}),editPS:!1,loading:!1}):n.setState({FormFields:Object(tt.a)(Object(tt.a)({},l),{},{initialValues:{}}),FormFields_1:Object(tt.a)(Object(tt.a)({},a),{},{fields:[],initialValues:{}}),openModal:!1,editPS:!1,form1Submitted:!1,form2Submitted:!1,loading:!1})},n.submit=function(){n.dynamoForm_1.current.refs.title_form.submit(),n.dynamoForm_2.current.refs.hours_form.submit()},n.Callback=function(e){var t=n.state.panelId;n.setState({mergeObj:Object(tt.a)(Object(tt.a)({},n.state.mergeObj),{},{label:e.obj.label,standardSkillId:e.obj.standard,panelId:t}),form1Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editPS?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.Callback2=function(e){for(var t=e.obj,a=[],l=Object.keys(t).length/5,r=0;r<l;r++){var o;if(t["pirority".concat(r)])a.push({id:null!==(o=t["id".concat(r)])&&void 0!==o?o:0,levelLabel:t["level".concat(r)],standardLevelId:t["pirority".concat(r)],shortTermCeil:t["stceil".concat(r)],longTermCeil:t["ltceil".concat(r)]})}console.log(a),n.setState({mergeObj:Object(tt.a)(Object(tt.a)({},n.state.mergeObj),{},{panelSkillStandardLevels:a}),form2Submitted:!0},(function(){n.state.form1Submitted&&n.state.form2Submitted&&(n.state.editPS?(console.log("edit"),n.editRecord()):(console.log("emes"),n.renderTable()))}))},n.renderTable=function(){var e,t=n.state.mergeObj;n.setState({loading:!0}),(e=t,$.b.loading({content:"Loading...",key:1}),it.a.post(en,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){n.getData()}))},n.getRecord=function(e,t){var a={},l=e.panelSkillStandardLevels,r={key:e.id,label:e.label,standard:e.standardSkill.id};Gt("skill=".concat(r.standard)).then((function(t){t.success&&n.setState({skill_pirority:t.data},(function(){for(var t=l.length,o=0;o<t;o++){n.state.FormFields_1.fields=n.state.FormFields_1.fields.concat(n.newField(o));var i=l[o];a["id".concat(o)]=i.id,a["level".concat(o)]=i.levelLabel,a["pirority".concat(o)]=i.standardLevel.id,a["stceil".concat(o)]=i.shortTermCeil,a["ltceil".concat(o)]=i.longTermCeil}n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:r}}),FormFields_1:Object(tt.a)(Object(tt.a)({},n.state.FormFields_1),{},{initialValues:{obj:a}}),editPS:e.id,openModal:!0})}))}))},n.editRecord=function(){var e,t=n.state,a=t.mergeObj,l=t.editPS;n.setState({loading:!0}),a.id=l,(e=a,$.b.loading({content:"Loading...",key:e.id}),it.a.put(en+"/".concat(e.id),e,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:e.id}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),l})).catch((function(t){return $.b.error({content:t.message,key:e.id}),{error:"Please login again!",status:!1,message:t.message}}))).then((function(e){e&&n.getData()}))},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return t.label&&t.label.toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.dynamoForm_1=l.a.createRef(),n.dynamoForm_2=l.a.createRef(),n.columns=[Object(tt.a)({title:"Panel Skill",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(e,t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete",onConfirm:function(){return n.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return n.getRecord(t)}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],n.state={openModal:!1,mergeObj:{},form1Submitted:!1,form2Submitted:!1,editPS:!1,panelId:!1,skill_select:!1,skill_pirority:!1,loading:!1,data:[],filterData:[],FormFields:{formId:"title_form",justify:"center",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:4}},justifyField:"center",FormLayout:"inline",size:"small",fields:[{fieldCol:12,Placeholder:"Panel Skill",type:"Text",size:"small"},{fieldCol:12,Placeholder:"Standard Skill",type:"Text",size:"small"},{object:"obj",fieldCol:12,key:"label",size:"small",rules:[{required:!0,message:"Panel Skill is Required"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:12,key:"standard",size:"small",rules:[{required:!0,message:"Standard Skill is Required"}],type:"Select",data:[],onChange:function(e,t){if(e){var a="skill=".concat(t.value);Gt(a).then((function(e){if(e.success){var t=n.state.FormFields_1,a=t.fields;a.map((function(t,a){return 1!==a&&a%6!==1||(t.data=e.data),t})),n.setState({skill_pirority:e.data,FormFields_1:Object(tt.a)(Object(tt.a)({},t),{},{fields:a})})}}))}},labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,Placeholder:"Add Level",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",itemStyle:{marginBottom:"10px"},onClick:function(e,t){var a,l=n.state.FormFields_1.fields[n.state.FormFields_1.fields.length-1],r=l?parseInt(l.key)+1:0;n.state.FormFields_1.fields=(a=n.state.FormFields_1.fields).concat.apply(a,Object(et.a)(n.newField(r))),n.setState({FormFields_1:n.state.FormFields_1})}},{fieldCol:8,Placeholder:"Panel Level",type:"Text",size:"small"},{fieldCol:7,layout:{wrapperCol:{offset:1}},Placeholder:"Standard Level",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},Placeholder:l.a.createElement("div",null,"ST Ceil ",l.a.createElement("span",{style:{fontSize:10}},"(hourly)")),tooltip:!0,tooltipTitle:"Short Term Ceiling Rate (ex GST)",tooltipTrigger:"hover",type:"Text",size:"small"},{fieldCol:4,layout:{wrapperCol:{offset:1}},tooltip:!0,tooltipTitle:"Long Term Ceiling Rate (ex GST)",tooltipTrigger:"hover",Placeholder:l.a.createElement("div",null,"LT Ceil ",l.a.createElement("span",{style:{fontSize:10}},"(hourly)")),type:"Text",size:"small"}]},FormFields_1:{formId:"hours_form",justify:"center",preserve:!1,FormCol:24,justifyField:"center",FormLayout:"inline",size:"small",fields:[]}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({panelId:this.props.match.params.id},(function(){e.getData(),e.getSkills()}))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editPS,r=t.FormFields,o=t.FormFields_1,i=t.loading,s=t.filterData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(tn,{level:4},"Panel Information")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(rt.a,{type:"primary",onClick:function(){e.toggelModal(!0)},size:"small"},l.a.createElement(na.a,null),"Add Skill"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:s,size:"small",className:"fs-small"}),a?l.a.createElement(ta.a,{title:n?"Edit Skill":"Add Skill",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.submit()},okButtonProps:{disabled:i},okText:i?l.a.createElement(la.a,null):"Save",onCancel:function(){e.toggelModal(!1)},width:700},l.a.createElement(p.a,null,l.a.createElement(pa,{ref:this.dynamoForm_1,Callback:this.Callback,FormFields:r})),l.a.createElement(p.a,{style:{maxHeight:"145px",overflowY:"auto"}},l.a.createElement(pa,{ref:this.dynamoForm_2,Callback:this.Callback2,FormFields:o}))):null)}}]),a}(n.Component),nn="".concat(J,"/standard-levels"),ln=Ye.a.Title,rn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.getData=function(){it.a.get(nn,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,isVisible:!1,editLevel:!1,FormFields:Object(tt.a)(Object(tt.a)({},e.state.FormFields),{},{initialValues:{}})})}))},e.handleDelete=function(t){(function(e){return it.a.delete(nn+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;if(he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.levelForm.current.refs.level_form.submit()},e.Callback=function(t){e.state.editLevel?e.editRecord(t.obj):e.addType(t.obj)},e.addType=function(t){var a;e.setState({loading:!0}),(a=t,$.b.loading({content:"Loading...",key:1},5),it.a.post(nn,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1},5),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.getRecord=function(t){var a=Object.assign({},t);e.setState({FormFields:Object(tt.a)(Object(tt.a)({},e.state.FormFields),{},{initialValues:{obj:a}}),editLevel:a.id,isVisible:!0})},e.editRecord=function(t){e.setState({loading:!0});var a,n=e.state.editLevel;t.id=n,(a=t,$.b.loading({content:"Loading...",key:a.id}),it.a.put(nn+"/".concat(a.id),a,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;if(he(r),$.b.success({content:r,key:a.id},5),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l)return l})).catch((function(e){return $.b.error({content:"Error!",key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){return e.label&&e.label.toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.levelForm=l.a.createRef(),e.columns=[Object(tt.a)({title:"Level Name",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return e.getRecord(t,a)}},"Edit"),l.a.createElement(b.a.Item,{danger:!0,key:"Delete",className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],e.state={isVisible:!1,newSkill:"",data:[],filterData:[],editLevel:!1,loading:!1,FormFields:{formId:"level_form",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",labelAlign:"right",type:"Input",size:"small"}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.isVisible),n=t.editLevel,r=t.FormFields,o=(t.loading,t.filterData);return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(ln,{level:3},"Standard Levels")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({isVisible:!0})}},l.a.createElement(na.a,null)," Add Level"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}),a&&l.a.createElement(ta.a,{title:n?"Edit Level":"Add Level",maskClosable:!1,centered:!0,visible:a,okText:"Save",width:400,onCancel:function(){e.setState({isVisible:!1,FormFields:Object(tt.a)(Object(tt.a)({},r),{},{initialValues:{}})})},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(pa,{ref:this.levelForm,Callback:this.Callback,FormFields:r}))))}}]),a}(n.Component),on=a(34),sn="".concat(J,"/standard-skills"),cn=Ye.a.Title,un=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getLevel(),e.getData()},e.getLevel=function(){it.a.get("".concat(J,"/standard-levels"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(l.map((function(e){e.value=e.id,delete e.id,delete e.createdAt,delete e.deletedAt,delete e.updatedAt})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({level_data:t.data})}))},e.getData=function(){it.a.get(sn,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data_skill:t.data,filterData:t.data,isVisible:!1,editSkill:!1,skillFields:Object(tt.a)(Object(tt.a)({},e.state.skillFields),{},{initialValues:{}}),LevelFields:Object(tt.a)(Object(tt.a)({},e.state.LevelFields),{},{initialValues:{},fields:[]}),mergeObj:{}})}))},e.newField=function(t){var a=e.state.level_data,n=["level".concat(t),"priority".concat(t),t];return[{object:"obj",fieldCol:12,layout:{wrapperCol:{span:23}},key:"level".concat(t),size:"small",data:a,type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{object:"obj",fieldCol:10,layout:{wrapperCol:{span:20}},key:"priority".concat(t),size:"small",type:"Rate",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:1,size:"small",Placeholder:l.a.createElement(Qa.a,null),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(e,t){this.state.LevelFields.fields=this.state.LevelFields.fields.filter((function(e){return e.key!==n[0]&&e.key!==n[1]&&e.key!==n[2]&&e.key!==n[3]&&e.key!==n[4]})),this.setState({LevelFields:this.state.LevelFields})}.bind(Object(on.a)(e))}]},e.toggelModal=function(t){e.state.FormFields_1;t?e.setState({isVisible:t,loading:!1,LevelFields:Object(tt.a)(Object(tt.a)({},e.state.LevelFields),{},{fields:e.newField(0)})}):e.setState({skillFields:Object(tt.a)(Object(tt.a)({},e.state.skillFields),{},{initialValues:{}}),LevelFields:Object(tt.a)(Object(tt.a)({},e.state.LevelFields),{},{fields:[],initialValues:{}}),isVisible:!1,editSkill:!1,formSubmitted:!1,levelSubmitted:!1,loading:!1})},e.handleDelete=function(t){(function(e){return it.a.delete(sn+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.skillForm.current.refs.skill_form.submit(),e.levelForm.current.refs.level_form.submit()},e.skillCall=function(t){e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),{},{label:t.obj.label}),formSubmitted:!0},(function(){e.state.formSubmitted&&e.state.levelSubmitted&&(e.state.editSkill?(console.log("edit"),e.editRecord(e.state.mergeObj)):(console.log("emes"),e.addSkill(e.state.mergeObj)))}))},e.levelCall=function(t){for(var a=t.obj,n=[],l=Object.keys(a).length/2,r=0;r<l;r++)a["level".concat(r)]&&n.push({standardLevelId:a["level".concat(r)],priority:a["priority".concat(r)]});e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),{},{standardSkillStandardLevels:n}),levelSubmitted:!0},(function(){e.state.formSubmitted&&e.state.levelSubmitted&&(e.state.editSkill?(console.log("edit"),e.editRecord(e.state.mergeObj)):(console.log("emes"),e.addSkill(e.state.mergeObj)))}))},e.addSkill=function(t){e.setState({loading:!0});var a,n=e.state.mergeObj;console.log({mergeObj:n}),(a=n,$.b.loading({content:"Loading...",key:1}),it.a.post(sn,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return $.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){e.getData()}))},e.getRecord=function(t){for(var a={},n=t.standardSkillStandardLevels,l=n.length,r=0;r<l;r++){e.state.LevelFields.fields=e.state.LevelFields.fields.concat(e.newField(r));var o=n[r];a["level".concat(r)]=o.standardLevel.id,a["priority".concat(r)]=o.priority}var i={label:t.label};e.setState({skillFields:Object(tt.a)(Object(tt.a)({},e.state.skillFields),{},{initialValues:{obj:i}}),LevelFields:Object(tt.a)(Object(tt.a)({},e.state.LevelFields),{},{initialValues:{obj:a}}),editSkill:t.id,isVisible:!0})},e.editRecord=function(){e.setState({loading:!0});var t,a=e.state,n=a.mergeObj,l=a.editSkill;n.id=l,console.log(n),(t=n,$.b.loading({content:"Loading...",key:t.id}),it.a.put(sn+"/".concat(t.id),t,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t.id}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),l})).catch((function(e){return $.b.error({content:e.message,key:t.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&(e.getData(),e.toggelModal(!1))}))},e.generalFilter=function(t){var a=e.state.data_skill;t?e.setState({filterData:a.filter((function(e){return e.label&&e.label.toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.skillForm=l.a.createRef(),e.levelForm=l.a.createRef(),e.columns=[Object(tt.a)({title:"Standard Skill",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{danger:!0,key:"Delete",className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Eidt",onClick:function(){return e.getRecord(t,a)}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],e.priority_data=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5}],e.level_data=[{val:1,value:"Superstar",label:"Superstar"},{key:2,value:"Senior",label:"Senior"},{key:3,value:"Middle",label:"Middle"},{key:4,value:"Junior",label:"Junior"},{key:5,value:"Trainee",label:"Trainee"}],e.state={isVisible:!1,editSkill:!1,mergeObj:{},formSubmitted:!1,levelSubmitted:!1,level_data:!1,loading:!1,data_skill:[],filterData:[],skillFields:{formId:"skill_form",FormCol:24,FieldSpace:{xs:12,sm:16,md:12},layout:{labelCol:{span:4}},justifyField:"center",FormLayout:"inline",size:"small",fields:[{object:"obj",fieldCol:24,layout:{wrapperCol:{span:20}},key:"label",label:"Name",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:24,Placeholder:"Add Skill",type:"Button",mode:"primary",style:{textAlign:"right"},size:"small",itemStyle:{marginBottom:"10px"},onClick:function(e,t){var a,n=this.state.LevelFields.fields[this.state.LevelFields.fields.length-1],l=n?parseInt(n.key)+1:0;this.state.LevelFields.fields=(a=this.state.LevelFields.fields).concat.apply(a,Object(et.a)(this.newField(l))),this.setState({LevelFields:this.state.LevelFields})}.bind(Object(on.a)(e))},{fieldCol:12,Placeholder:"Level Name",type:"Text",size:"small"},{fieldCol:10,layout:{wrapperCol:{offset:1}},Placeholder:"Experience",type:"Text",size:"small"}]},LevelFields:{formId:"level_form",FormCol:24,justifyField:"center",FormLayout:"inline",size:"small",fields:[]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data_skill,t.isVisible),n=t.editSkill,r=t.LevelFields,o=t.skillFields,i=t.loading,s=t.filterData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(cn,{level:3},"Standard Skills")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.toggelModal(!0)}},l.a.createElement(na.a,null)," Add Skill"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},columns:this.columns,dataSource:s,size:"small",className:"fs-small"}),a&&l.a.createElement(ta.a,{title:n?"Edit Skill":"Add Skill",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:i},okText:i?l.a.createElement(la.a,null):"Save",width:600,onCancel:function(){e.toggelModal(!1)},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(pa,{ref:this.skillForm,Callback:this.skillCall,FormFields:o})),l.a.createElement(p.a,{style:{maxHeight:"145px",overflowY:"auto"}},l.a.createElement(pa,{ref:this.levelForm,Callback:this.levelCall,FormFields:r}))))}}]),a}(n.Component),dn=a(41),mn=a(106),fn=(a(440),a(327)),pn=function(e,t,a,n){return $.b.loading({content:"Loading...",key:t}),it.a.post("".concat(J,"/data/").concat(e,"/").concat(t),a,{headers:n?{"content-type":"multipart/form-data",Authorization:pe().accessToken}:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(e){return ge(e,t,5)}))};function hn(){hn=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var yn=Ye.a.Title,vn=mt.a.Dragger,gn={ORG:"ORGANIZATIONS",CPE:"CONTACT PERSONS",OPP:"OPPORTUNITIES",PRO:"PROJECTS",EMP:"EMPLOYEES",SCO:"SUB CONTRACTORS"},bn=function(){var e=Object(n.useState)({visible:!1,type:null,loading:!1}),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)([]),d=Object(G.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),h=Object(G.a)(p,2),y=h[0],v=h[1],b=[{title:"Title",dataIndex:"type",key:"type",render:function(e,t){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(yn,{level:5},gn[e])),l.a.createElement("div",{className:"desc"},t.importing?l.a.createElement("span",null,"Last Import  At: ",l.a.createElement("b",null,"In Progress ")," "):l.a.createElement("div",null,l.a.createElement("span",null,"Last Import  At: ",l.a.createElement("b",null,t.imported?me(t.lastImported,!0,!0):t.lastImported)),l.a.createElement("span",{className:"file-mr"},t.log&&l.a.createElement("a",{href:"http://".concat(t.log),target:"_blank",rel:"noopener noreferrer"}," ",l.a.createElement(fn.a,null)," ",gn[e],"_LOGS.xlsx"))),t.exporting?l.a.createElement("span",null,"Last Export  At: ",l.a.createElement("b",null,"In Progress ")):l.a.createElement("div",null,l.a.createElement("span",null,"Last Export  At: ",l.a.createElement("b",null,t.exported?me(t.lastExported,!0,!0):t.lastExported)),l.a.createElement("span",{className:"file-mr"},t.file&&l.a.createElement("a",{href:"http://".concat(t.file),target:"_blank",rel:"noopener noreferrer",className:"fail-link"}," ",l.a.createElement(fn.a,null)," ",gn[e],".xlsx")))))}},{title:"Import",dataIndex:"importing",key:"importing",align:"center",render:function(e,t,a){return l.a.createElement(rt.a,{type:"primary",shape:"round",loading:e,disabled:!e&&y,onClick:function(){return r({visible:!0,type:t.type,loading:!1,index:a})}}," Import")}},{title:"Export",dataIndex:"exporting",key:"exporting",align:"center",render:function(e,t,a){return l.a.createElement(rt.a,{type:"primary",shape:"round",danger:!0,loading:e,disabled:!e&&y,onClick:function(){return C(t.type,a)}}," Export")}}];Object(n.useEffect)((function(){E()}),[]);var E=function(){it.a.get("".concat(J,"/data/status"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:!1}})).catch((function(e){return ge(e,"type",1)})).then((function(e){e.success&&k(e.data)}))},k=function(e){var t,a=Object(g.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value,l=n.importing,r=n.exporting;if(l||r){v(!0);break}}}catch(o){a.e(o)}finally{a.f()}c(e)},S=function(e,t,a){v(a);var n=Object(et.a)(s);n[e][t]=a,c(n)},C=function(e,t){S(t,"exporting",!0),pn("export",e,{}).then((function(e){E(),v(!1)})).catch((function(e){S(t,"exporting",!1)}))},j=function(){var e=Object(dn.a)(hn().mark((function e(t){var n,l;return hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file,l=n.name.split("."),["xls","xlsx"].includes(l[l.length-1])?(r(Object(tt.a)(Object(tt.a)({},a),{},{loading:!0})),n.thumbUrl=ve("xls"),f([n]),r(Object(tt.a)(Object(tt.a)({},a),{},{loading:!1}))):$.b.error({content:"Only Xlsx Files Are Allowed ",key:a.type});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement(yn,{level:4},"Import/Export"),l.a.createElement(ea.a,{bordered:!0,rowKey:function(e){return e.type},columns:b,dataSource:s,showHeader:!1,pagination:!1}),l.a.createElement(ta.a,{title:"Import Data Into "+gn[a.type],maskClosable:!1,centered:!0,visible:a.visible,onOk:function(){r(Object(tt.a)(Object(tt.a)({},a),{},{loading:!0}));var e=new FormData;e.append("file",m[0]),S(a.index,"importing",!0),pn("import",a.type,e,!0).then((function(e){E(),v(!1)})).catch((function(e){S(a.index,"importing",!1)})),r({visible:!1,type:null,loading:!1}),f([])},okText:"Import",onCancel:function(){r({visible:!1,type:null,loading:!1}),f([])},width:540,confirmLoading:a.loading,destroyOnClose:!0},l.a.createElement("div",null,l.a.createElement(vn,{name:"file",multiple:!1,maxCount:1,listType:"picture",className:"upload-list-inline",customRequest:j,onRemove:function(){return f([])},fileList:m,accept:".xls, .xlsx"},l.a.createElement(mn.a,{image:m.length>0?mn.a.PRESENTED_IMAGE_DEFAULT:mn.a.PRESENTED_IMAGE_SIMPLE,description:l.a.createElement("p",{className:"import-empty"},"Click or drag file to this area to upload")})))))},En="".concat(J,"/expense-types"),kn=function(){return it.a.get("".concat(En,"?select=true"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Sn=Ye.a.Title,Cn=[{component:Zt,link:"/admin/global-settings"},{component:Qt,link:"/admin/tax-rates"},{component:Aa,link:"/admin/holiday-types"},{component:Ta,link:"/admin/calendars"},{component:Ia,link:"/admin/calendars/holidays/:id"},{component:La,link:"/admin/leave-categories"},{component:Ya,link:"/admin/leave-policies"},{component:$a,link:"/admin/roles"},{component:Za,link:"/admin/panels"},{component:function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.getData=function(){it.a.get(En,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,isVisible:!1,editLevel:!1,FormFields:Object(tt.a)(Object(tt.a)({},e.state.FormFields),{},{initialValues:{}})})}))},e.handleDelete=function(t){(function(e){return it.a.delete(En+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;if(he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return n})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){t&&e.getData()}))},e.submit=function(){e.levelForm.current.refs.level_form.submit()},e.Callback=function(t){e.state.editLevel?e.editRecord(t.obj):e.addType(t.obj)},e.addType=function(t){var a;e.setState({loading:!0}),(a=t,$.b.loading({content:"Loading...",key:1},5),it.a.post(En,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1},5),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.getRecord=function(t){var a=Object.assign({},t);e.setState({FormFields:Object(tt.a)(Object(tt.a)({},e.state.FormFields),{},{initialValues:{obj:a}}),editLevel:a.id,isVisible:!0})},e.editRecord=function(t){e.setState({loading:!0});var a,n=e.state.editLevel;t.id=n,(a=t,$.b.loading({content:"Loading...",key:a.id}),it.a.put(En+"/".concat(a.id),a,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;if(he(r),$.b.success({content:r,key:a.id},5),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l)return l})).catch((function(e){return $.b.error({content:"Error!",key:a.id}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){t&&e.getData()}))},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){return e.label&&e.label.toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.levelForm=l.a.createRef(),e.columns=[Object(tt.a)({title:"Expense Name",dataIndex:"label",key:"label"},Ea("label","string")),{title:"Action",key:"action",align:"right",width:115,render:function(t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){return e.getRecord(t,a)}},"Edit"),l.a.createElement(b.a.Item,{danger:!0,key:"Delete",className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))}}],e.state={isVisible:!1,newSkill:"",data:[],filterData:[],editLevel:!1,loading:!1,FormFields:{formId:"level_form",FormCol:20,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:24,key:"label",label:"Name",labelAlign:"right",type:"Input",size:"small"}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.isVisible),n=t.editLevel,r=t.FormFields,o=(t.loading,t.filterData);return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Sn,{level:3},"Expense Types")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({isVisible:!0})}},l.a.createElement(na.a,null)," Add Expense"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}),a&&l.a.createElement(ta.a,{title:n?"Edit Expense":"Add Expense",maskClosable:!1,centered:!0,visible:a,okText:"Save",width:400,onCancel:function(){e.setState({isVisible:!1,FormFields:Object(tt.a)(Object(tt.a)({},r),{},{initialValues:{}})})},onOk:function(){e.submit()}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(pa,{ref:this.levelForm,Callback:this.Callback,FormFields:r}))))}}]),a}(n.Component),link:"/admin/expense-types"},{component:an,link:"/admin/panels/skills/:id"},{component:bn,link:"/admin/import-export"},{component:rn,link:"/admin/standard-levels"},{component:un,link:"/admin/skills"}],jn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bread:[]},e.getPageLink=function(){return Cn.map((function(e,t){return l.a.createElement(i.b,{exact:!0,path:e.link,component:e.component,key:t})}))},e.getbreadcrums=function(){var t=e.props.location;return(t=t.split("/")).map((function(e,t){return""!==e&&isNaN(e)?l.a.createElement(Qe.a.Item,{key:t},e):null}))},e}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,null,l.a.createElement(Qe.a,{style:{margin:"0px 0px 16px 10px"},itemRender:this.itemRender,routes:this.routes},this.getbreadcrums())),l.a.createElement(h.a,{span:24},this.getPageLink()))}}]),a}(n.Component),On=(a(441),f.a.Sider),xn=f.a.Content,wn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={collapsed:!0},e.toggle=function(){e.setState({collapsed:!e.state.collapsed})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.collapsed;return l.a.createElement(f.a,null,l.a.createElement(xn,{style:{padding:"0 0px"}},l.a.createElement(f.a,{className:"site-layout-background",style:{padding:"0px 0"}},l.a.createElement(On,{className:"site-layout-background",width:200,trigger:null,collapsible:!0,collapsed:this.state.collapsed},l.a.createElement(Ze,null)),l.a.createElement(xn,{style:{padding:"0 0px",minHeight:640}},l.a.createElement(p.a,{style:{paddingLeft:"10px"}},l.a.createElement("span",{className:"admin-trigger",onClick:this.toggle},e?l.a.createElement(y.a,null):l.a.createElement(v.a,null)),l.a.createElement(jn,{location:this.props.location.pathname}))))))}}]),a}(n.Component),In=a(594),Dn=a(313),Pn=a.n(Dn),Tn="".concat(J,"/organizations"),Nn=function(e){var t,a=e,n=e.delegateContactPerson;return{basic:{name:a.name,title:a.title,parent:a.parentOrganization&&a.parentOrganization.id,phone:a.phoneNumber,delegate_cp:a.delegateContactPersonId,delegate_contactPerson:n&&"".concat(n.firstName," ").concat(n.lastName," - ").concat(null!==(t=n.phoneNumber)&&void 0!==t?t:""),email:a.email,EBA:a.expectedBusinessAmount,address:a.address,website:a.website,businessType:a.businessType},billing:{ABN:a.abn,tax_Code:a.taxCode,invoice_email:a.invoiceEmail,invoice_number:a.invoiceContactNumber,CTI:a.cti},insured:{insurer_PI:a.piInsurer,insurer_PL:a.plInsurer,insurer_WC:a.wcInsurer,policy_PI:a.piPolicyNumber,policy_PL:a.plPolicyNumber,policy_WC:a.wcPolicyNumber,SumIns_PI:a.piSumInsured,SumIns_PL:a.plSumInsured,SumIns_WC:a.wcSumInsured,expiry_PI:me(a.piInsuranceExpiry),expiry_PL:me(a.plInsuranceExpiry),expiry_WC:me(a.wcInsuranceExpiry)},bank:{bankName:a.bankAccounts[0]&&a.bankAccounts[0].name,bankAccountNo:a.bankAccounts[0]&&a.bankAccounts[0].accountNo,bankBsb:a.bankAccounts[0]&&a.bankAccounts[0].bsb},future:{currentForecast:a.currentFinancialYearTotalForecast,nextForecast:a.nextFinancialYearTotalForecast}}},Rn=function(e){return it.a.get(Tn+"/".concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o=Nn(n),i=o.basic,s=o.billing,c=o.insured,u=o.bank,d=o.future;return fe(null===e||void 0===e||null===(r=e.headers)||void 0===r?void 0:r.authorization),{success:a,basic:i,billing:s,insured:c,bank:u,future:d,data:n}}return{success:a}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))},An=In.a.TabPane,Fn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e,n,r;return Object(c.a)(this,a),(r=t.call(this)).componentDidMount=function(){var e=r.props.editOrg;e?r.fetchAll():(r.getOrgs(e),r.callAdd_Edit())},r.fetchAll=function(){var e=r.props.editOrg,t="helpers/contact-persons?organizationId=".concat(e,"&associated=1");Promise.all([_t(e),Bt(t)]).then((function(t){var a=r.state.BasicFields;a.fields[5].data=t[0].data,a.fields[13].data=t[1].data,r.setState({BasicFields:a}),r.getRecord(e)})).catch((function(e){console.log(e)}))},r.getOrgs=function(e){_t(e).then((function(e){if(e.success){var t=r.state.BasicFields;t.fields[5].data=e.data,r.setState({BasicFields:t})}}))},r.callAdd_Edit=function(){var e=r.state.BasicFields;r.setState({BasicFields:Object(tt.a)(Object(tt.a)({},e),{},{fields:e.fields.filter((function(e){return"Business Type"===e.Placeholder?(e.fieldCol=24,e):"Delegate Contact person"!==e.Placeholder&&"delegate_cp"!==e.key?e:void 0}))})})},r.submit=function(){r.basicRef.current.refs.basic_form.submit(),r.billingRef.current&&r.billingRef.current.refs.billing_form.submit(),r.insuredRef.current&&r.insuredRef.current.refs.insured_form.submit(),r.bankRef.current&&r.bankRef.current.refs.bank_form.submit(),r.futureRef.current&&r.futureRef.current.refs.future_form.submit()},r.BasicCall=function(e){var t;e=e.obj,r.setState({mergeObj:Object(tt.a)(Object(tt.a)({},r.state.mergeObj),{},{name:e.name?e.name:"",title:null!==(t=e.title)&&void 0!==t?t:"",parentOrganizationId:e.parent?e.parent:null,phoneNumber:e.phone?e.phone:"",delegateContactPersonId:e.delegate_cp?e.delegate_cp:null,email:e.email?e.email:"",expectedBusinessAmount:e.EBA?e.EBA:0,address:e.address?e.address:"",website:e.website?e.website:"",businessType:e.businessType?e.businessType:void 0}),basicSubmitted:!0},(function(){r.state.basicSubmitted&&r.state.billingSubmitted&&r.state.insuredSubmitted&&r.state.bankSubmitted&&r.state.futureSubmitted&&(r.props.editOrg?r.editRecord(r.state.mergeObj):r.addOrganization(r.state.mergeObj))}))},r.BillingCall=function(e){e=e.obj,r.setState({mergeObj:Object(tt.a)(Object(tt.a)({},r.state.mergeObj),{},{abn:e.ABN?e.ABN:"",taxCode:e.tax_Code?e.tax_Code:"",invoiceEmail:e.invoice_email?e.invoice_email:"",invoiceContactNumber:e.invoice_number?e.invoice_number:"",cti:e.CTI?e.CTI:""}),billingSubmitted:!0},(function(){r.state.basicSubmitted&&r.state.billingSubmitted&&r.state.insuredSubmitted&&r.state.bankSubmitted&&r.state.futureSubmitted&&(r.props.editOrg?r.editRecord(r.state.mergeObj):r.addOrganization(r.state.mergeObj))}))},r.InsuredCall=function(e){e=e.obj,r.setState({mergeObj:Object(tt.a)(Object(tt.a)({},r.state.mergeObj),{},{piInsurer:e.insurer_PI?e.insurer_PI:"",plInsurer:e.insurer_PL?e.insurer_PL:"",wcInsurer:e.insurer_WC?e.insurer_WC:"",piPolicyNumber:e.policy_PI?e.policy_PI:"",plPolicyNumber:e.policy_PL?e.policy_PL:"",wcPolicyNumber:e.policy_WC?e.policy_WC:"",piSumInsured:e.SumIns_PI?e.SumIns_PI:0,plSumInsured:e.SumIns_PL?e.SumIns_PL:0,wcSumInsured:e.SumIns_WC?e.SumIns_WC:0,piInsuranceExpiry:me(e.expiry_PI,!0),plInsuranceExpiry:me(e.expiry_PL,!0),wcInsuranceExpiry:me(e.expiry_WC,!0)}),insuredSubmitted:!0},(function(){r.state.basicSubmitted&&r.state.billingSubmitted&&r.state.insuredSubmitted&&r.state.bankSubmitted&&r.state.futureSubmitted&&(r.props.editOrg?r.editRecord(r.state.mergeObj):r.addOrganization(r.state.mergeObj))}))},r.BankCall=function(e){e=e.obj,r.setState({mergeObj:Object(tt.a)(Object(tt.a)({},r.state.mergeObj),{bankName:e.bankName?e.bankName:"",bankAccountNo:e.bankAccountNo?e.bankAccountNo:"",bankBsb:e.bankBsb?e.bankBsb:""}),bankSubmitted:!0},(function(){r.state.basicSubmitted&&r.state.billingSubmitted&&r.state.insuredSubmitted&&r.state.bankSubmitted&&r.state.futureSubmitted&&(r.props.editOrg?r.editRecord(r.state.mergeObj):r.addOrganization(r.state.mergeObj))}))},r.FutureCall=function(e){e=e.obj,console.log(e),r.setState({mergeObj:Object(tt.a)(Object(tt.a)({},r.state.mergeObj),{currentFinancialYearTotalForecast:e.currentForecast?e.currentForecast:0,nextFinancialYearTotalForecast:e.nextForecast?e.nextForecast:0}),futureSubmitted:!0},(function(){r.state.basicSubmitted&&r.state.billingSubmitted&&r.state.insuredSubmitted&&r.state.bankSubmitted&&r.state.futureSubmitted&&(r.props.editOrg?r.editRecord(r.state.mergeObj):r.addOrganization(r.state.mergeObj))}))},r.addOrganization=function(e){var t,a=r.props.callBack;console.log(e),r.setState({basicSubmitted:!1,billingSubmitted:!1,insuredSubmitted:!1,bankSubmitted:!1,futureSubmitted:!1,loading:!0}),(t=e,$.b.loading({content:"Loading...",key:1}),it.a.post(Tn,t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success?a():r.setState({loading:!1})}))},r.getRecord=function(e){Rn(e).then((function(e){if(e.success){var t=e.basic,a=e.billing,n=e.insured,l=e.bank,o=e.future;e.data;r.basicRef.current.refs.basic_form.setFieldsValue({obj:t}),r.billingRef.current.refs.billing_form.setFieldsValue({obj:a}),r.insuredRef.current.refs.insured_form.setFieldsValue({obj:n}),r.bankRef.current.refs.bank_form.setFieldsValue({obj:l}),r.futureRef.current.refs.future_form.setFieldsValue({obj:o})}}))},r.editRecord=function(e){var t,a=r.props,n=a.editOrg,l=a.callBack;e.id=n,console.log(e),r.setState({basicSubmitted:!1,billingSubmitted:!1,insuredSubmitted:!1,bankSubmitted:!1,futureSubmitted:!1,loading:!1}),(t=e,$.b.loading({content:"Loading...",key:t.id}),it.a.put(Tn+"/".concat(t.id),t,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;if(he(n),$.b.success({content:n,key:l.id}),a){var r,o=Nn(l),i=o.basic,s=o.billing,c=o.insured,u=o.bank,d=o.future;return fe(null===e||void 0===e||null===(r=e.headers)||void 0===r?void 0:r.authorization),{success:a,basic:i,billing:s,insured:c,bank:u,future:d,data:l}}return{success:a,data:l}})).catch((function(e){return ge(e,t.id,5)}))).then((function(e){e.success?l(e):r.setState({loading:!1})}))},r.onDrag=function(e,t){var a,n,l,o,i=null===(a=window)||void 0===a||null===(n=a.document)||void 0===n?void 0:n.documentElement,s=i.clientWidth,c=i.clientHeight,u=null===(l=r.draggleRef)||void 0===l||null===(o=l.current)||void 0===o?void 0:o.getBoundingClientRect();r.setState({bounds:{left:-(null===u||void 0===u?void 0:u.left)+(null===t||void 0===t?void 0:t.x),right:s-((null===u||void 0===u?void 0:u.right)-(null===t||void 0===t?void 0:t.x)),top:-(null===u||void 0===u?void 0:u.top)+(null===t||void 0===t?void 0:t.y),bottom:c-((null===u||void 0===u?void 0:u.bottom)-(null===t||void 0===t?void 0:t.y))}})},r.basicRef=l.a.createRef(),r.billingRef=l.a.createRef(),r.bankRef=l.a.createRef(),r.insuredRef=l.a.createRef(),r.futureRef=l.a.createRef(),r.draggleRef=l.a.createRef(),r.state={editOrg:!1,basicSubmitted:!1,billingSubmitted:!1,bankSubmitted:!1,insuredSubmitted:!1,futureSubmitted:!1,check:!1,bounds:{left:0,top:0,bottom:0,right:0},dragDisable:!0,BasicFields:{formId:"basic_form",FormCol:24,justifyField:"center",FormLayout:"inline",contactPerson:[],layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"Name",rangeMin:!0,fieldCol:9,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Title",fieldCol:3,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Parent",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:9,key:"name",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input",itemStyle:{marginBottom:1}},{object:"obj",fieldCol:3,key:"title",size:"small",type:"Input",itemStyle:{marginBottom:1}},{object:"obj",fieldCol:12,key:"parent",size:"small",data:[],type:"Select"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Email",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"phone",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"email",size:"small",rules:[{type:"email",message:"The input is not valid e-mail!"},{required:!0,message:"Please input your E-mail!"}],type:"Input"},{Placeholder:"Business Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Delegate Contact person",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"businessType",size:"small",rules:[{required:!0,message:"Business Type is Required"}],type:"Select",data:[{label:"Sole Trader",value:1},{label:"Partnership",value:2},{label:"Company",value:3},{label:"Trust",value:4},{label:"Government",value:5}]},{object:"obj",fieldCol:12,key:"delegate_cp",size:"small",data:r.state?r.state.contactPerson:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"},{Placeholder:"Website",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"website",size:"small",type:"Input",itemStyle:{marginBottom:"20px"}}]},BillingFields:{formId:"billing_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"ABN",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax Code",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"ABN",shape:"ABN",size:"small",type:"InputNumber",rules:[function(e){e.getFieldValue;return{validator:function(e,t){if(t){var a=t.toString(),n=new Array(10,1,3,5,7,9,11,13,15,17,19);if(11===a.length){var l=0;return n.forEach((function(e,t){var n=a[t]-(t?0:1);l+=e*n})),console.log(l%89),l%89===0?Promise.resolve():Promise.reject(new Error("ABN is not valid"))}return Promise.reject(new Error("Must contain 11 digits"))}return Promise.resolve()}}}],fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"tax_Code",size:"small",type:"Select",data:[{value:"GST",label:"GST - Goods & Services Tax Registered"},{value:"EXP",label:"EXP - GST Free Exports/Overseas Org"},{value:"GNR",label:"GNR - GST Non-Registered"},{value:"UNG",label:"UNG - No ABN"}]},{Placeholder:"Email for Invoices",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contact Number for Invoices",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"invoice_email",size:"small",rules:[{type:"email",message:"The input is not valid e-mail!"}],type:"Input"},{object:"obj",fieldCol:12,key:"invoice_number",size:"small",type:"Input"}]},InsuredFields:{formId:"insured_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[{Placeholder:" Professional Indemnity",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right"},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_PI",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"10px"},onChange:function(e){var t=e.target.value,a=r.state.InsuredFields,n=a.fields;t?(n[2].rangeMin=!0,n[3].rangeMin=!0,n[4].rangeMin=!0,n[6].rules=[{required:!0,message:"Policy Number is required"}],n[7].rules=[{required:!0,message:"Sum Insured is required"}],n[8].rules=[{required:!0,message:"Expiry Date is required"}]):(n[2].rangeMin=!1,n[3].rangeMin=!1,n[4].rangeMin=!1,n[6].rules=[{required:!1,message:""}],n[7].rules=[{required:!1,message:""}],n[8].rules=[{required:!1,message:""}]),r.setState({InsuredFields:Object(tt.a)(Object(tt.a)({},a),{},{fields:Object(et.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_PI",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",key:"SumIns_PI",fieldCol:6,size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_PI",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{Placeholder:"Public Liability",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right",itemStyle:{marginTop:20}},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_PL",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10},onChange:function(e){var t=e.target.value,a=r.state.InsuredFields,n=a.fields;t?(n[11].rangeMin=!0,n[12].rangeMin=!0,n[13].rangeMin=!0,n[15].rules=[{required:!0,message:"Policy Number is required"}],n[16].rules=[{required:!0,message:"Sum Insured is required"}],n[17].rules=[{required:!0,message:"Expiry Date is required"}]):(n[11].rangeMin=!1,n[12].rangeMin=!1,n[13].rangeMin=!1,n[15].rules=[{required:!1,message:""}],n[16].rules=[{required:!1,message:""}],n[17].rules=[{required:!1,message:""}]),r.setState({InsuredFields:Object(tt.a)(Object(tt.a)({},a),{},{fields:Object(et.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_PL",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"SumIns_PL",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_PL",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{Placeholder:"Worker\u2019s Compensation",fieldCol:24,size:"small",type:"Title",mode:5,labelAlign:"right",itemStyle:{marginTop:20}},{Placeholder:"Insurer",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Policy Number",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sum Insured",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Expiry",fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:6,key:"insurer_WC",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10},onChange:function(e){var t=e.target.value,a=r.state.InsuredFields,n=a.fields;t?(n[20].rangeMin=!0,n[21].rangeMin=!0,n[22].rangeMin=!0,n[24].rules=[{required:!0,message:"Policy Number is required"}],n[25].rules=[{required:!0,message:"Sum Insured is required"}],n[26].rules=[{required:!0,message:"Expiry Date is required"}]):(n[20].rangeMin=!1,n[21].rangeMin=!1,n[22].rangeMin=!1,n[24].rules=[{required:!1,message:""}],n[25].rules=[{required:!1,message:""}],n[26].rules=[{required:!1,message:""}]),r.setState({InsuredFields:Object(tt.a)(Object(tt.a)({},a),{},{fields:Object(et.a)(n)})})}},{object:"obj",fieldCol:6,key:"policy_WC",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:"10px"}},{object:"obj",fieldCol:6,key:"SumIns_WC",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"},labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:6,key:"expiry_WC",size:"small",type:"DatePicker",labelAlign:"left",itemStyle:{marginBottom:"10px"}}]},BankFields:{formId:"bank_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"Bank Account Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"bankName",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"bankBsb",size:"small",type:"Input"},{Placeholder:"Bank Account Number",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input"}]},FutureFields:{formId:"future_form",FormCol:24,justifyField:"center",FormLayout:"inline",contactPerson:[],size:"middle",fields:[{Placeholder:"Current Financial Year Total Forecast",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Next Financial Year Total Forecast",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},(e={object:"obj",fieldCol:12,key:"currentForecast",size:"small",type:"Input",shape:"$"},Object(at.a)(e,"type","InputNumber"),Object(at.a)(e,"fieldStyle",{width:"100%"}),e),(n={object:"obj",fieldCol:12,key:"nextForecast",size:"small",type:"Input",shape:"$"},Object(at.a)(n,"type","InputNumber"),Object(at.a)(n,"fieldStyle",{width:"100%"}),n)]}},r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editOrg,n=t.visible,r=this.state,o=r.bounds,i=r.dragDisable,s=r.BasicFields,c=r.BillingFields,u=r.InsuredFields,d=r.BankFields,m=r.FutureFields,f=r.loading;return l.a.createElement(ta.a,{title:l.a.createElement("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){i&&e.setState({dragDisable:!1})},onMouseOut:function(){e.setState({dragDisable:!0})}},a?"Edit Organisation":"Add Organisation"),maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:f},okText:f?l.a.createElement(la.a,null):"Save",onCancel:this.props.close,width:900,destroyOnClose:!0,modalRender:function(t){return l.a.createElement(Pn.a,{bounds:o,disabled:i,onStart:function(t,a){return e.onDrag(t,a)}},l.a.createElement("div",{ref:e.draggleRef},t))}},l.a.createElement(In.a,{type:"card"},l.a.createElement(An,{tab:"General Details",key:"general_details",forceRender:!0},l.a.createElement(pa,{ref:this.basicRef,Callback:this.BasicCall,FormFields:s})),l.a.createElement(An,{tab:"Billing Details",key:"billing_details",forceRender:!0},l.a.createElement(pa,{ref:this.billingRef,Callback:this.BillingCall,FormFields:c})),l.a.createElement(An,{tab:"Insurance Details",key:"insurance_detail",forceRender:!0},l.a.createElement(pa,{ref:this.insuredRef,Callback:this.InsuredCall,FormFields:u})),l.a.createElement(An,{tab:"Bank Details",key:"bank_detail",forceRender:!0},l.a.createElement(pa,{ref:this.bankRef,Callback:this.BankCall,FormFields:d})),l.a.createElement(An,{tab:"Work In Future",key:"future",forceRender:!0},l.a.createElement(pa,{ref:this.futureRef,Callback:this.FutureCall,FormFields:m}))))}}]),a}(n.Component),zn=function(e,t,a,n,l,r){return $.b.loading({content:"Loading...",key:a}),it.a.delete("".concat(J).concat(t,"/").concat(a),{headers:ye()}).then((function(t){var o=t.data,i=o.success,s=o.message;if(he(s),i){var c;if($.b.success({content:s,key:a}),fe(null===t||void 0===t||null===(c=t.headers)||void 0===c?void 0:c.authorization),n>=0){var u=l.filter((function(e,t){return e.id!==a})),d=[];return r&&(d=r.filter((function(e,t){return e.id!==a}))),{success:i,data:d,filterData:u}}return e.goBack(),{success:i}}return{success:i}})).catch((function(e){return ge(e,a,5)}))},Ln=Ye.a.Title,Mn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){var e=JSON.parse(pe().permissions).ORGANIZATIONS;it.a.get(Tn,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&n.setState({data:t.data,filterData:t.data,infoModal:!1,editOrg:!1,permissions:null!==e&&void 0!==e?e:{},openSearch:!1})}))},n.handleDelete=function(e,t){var a=n.state,l=a.data,r=a.filterData,o=n.props.history;zn(o,"/organizations",e,t,r,l).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.closeModal=function(){n.setState({infoModal:!1,editOrg:!1})},n.callBack=function(){n.getData()},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return"ORG-00".concat(t.id.toString()).includes(e)||t.name&&t.name.toLowerCase().includes(e.toLowerCase())||t.title&&t.title.toLowerCase().includes(e.toLowerCase())||t.parentOrganization&&t.parentOrganization.name.toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;t?o[t].value=e:o=a,o.id.value||o.name.value||o.title.value||o["parentOrganization.name"].value||o.phoneNumber.value||o.email.value||o.delegate_cp.value||o.address.value||o.businessType.value.length>0?n.setState({filterData:r.filter((function(e){var t,a,n,l,r,i;return"ORG-00".concat(e.id.toString()).includes(o.id.value)&&"".concat(null!==(t=e.name)&&void 0!==t?t:"").toLowerCase().includes(o.name.value.toLowerCase())&&"".concat(null!==(a=e.title)&&void 0!==a?a:"").toLowerCase().includes(o.title.value.toLowerCase())&&"".concat(e.parentOrganization?e.parentOrganization.name:"").toLowerCase().includes(o["parentOrganization.name"].value.toLowerCase())&&"".concat(null!==(n=e.phoneNumber)&&void 0!==n?n:"").toLowerCase().includes(o.phoneNumber.value.toLowerCase())&&"".concat(null!==(l=e.email)&&void 0!==l?l:"").toLowerCase().includes(o.email.value.toLowerCase())&&"".concat(null!==(r=e.address)&&void 0!==r?r:"").toLowerCase().includes(o.address.value.toLowerCase())&&"".concat(null!==(i=e.delegateContactPersonId)&&void 0!==i?i:"").toLowerCase().includes("".concat(o.delegate_cp.value).toLowerCase())&&(o.businessType.value.length>0?o.businessType.value:[{value:","}]).some((function(t){return(o.businessType.value.length>0?[e.businessType]:[","]).includes(t.value)}))})),searchedColumn:o,openSearch:!1}):n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){Mt().then((function(e){var t=n.state.filterFields;t[13].data=e.success?e.data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:120,render:function(e){return"ORG-00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"Name",dataIndex:"name",key:"name",width:500,render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(t.id,"/info")},className:"nav-link"},e)}},Ea("name","string")),Object(tt.a)({title:"Title",dataIndex:"title",key:"title",width:100},Ea("name","string")),Object(tt.a)({title:"Parent Organisation",dataIndex:"parentOrganization",key:"parentOrganization",width:500,render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},Ea("parentOrganization.name","string")),Object(tt.a)({title:"Business Type",dataIndex:"businessType",key:"businessType",render:function(e){return le[e]},width:100},Ea("businessType","string")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){n.setState({infoModal:!0,editOrg:t.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"," "),l.a.createElement(b.a.Item,{key:"View"},l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(t.id,"/info")},className:"nav-link"},"View"," ")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={infoModal:!1,editOrg:!1,data:[],filterData:[],permissions:{},searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},name:{type:"Input",value:"",label:"Organisation",showInColumn:!0},title:{type:"Input",value:"",label:"Title",showInColumn:!0},"parentOrganization.name":{type:"Input",value:"",label:"Parent Organisation",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},email:{type:"Input",value:"",label:"Email",showInColumn:!1},phoneNumber:{type:"Input",value:"",label:"Phone Number",showInColumn:!1},address:{type:"none",value:"",label:"Address",showInColumn:!1},businessType:{type:"none",multi:!0,value:[],label:"Business Type",showInColumn:!1},delegate_cp:{type:"none",value:[],label:"Delegate Contact Person",showInColumn:!1}},filterFields:[{Placeholder:"Name",fieldCol:9,size:"small",type:"Text"},{Placeholder:"Title",fieldCol:3,size:"small",type:"Text"},{Placeholder:"Parent",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:9,key:"name",size:"small",type:"Input"},{object:"obj",fieldCol:3,key:"title",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"parentOrganization.name",size:"small",type:"Input"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"phoneNumber",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"email",size:"small",type:"Input"},{Placeholder:"Business Type",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Delegate Contact person",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"businessType",size:"small",type:"Select",mode:"multiple",customValue:function(e,t){return t},data:[{label:"Sole Trader",value:1},{label:"Partnership",value:2},{label:"Company",value:3},{label:"Trust",value:4},{label:"Government",value:5}]},{object:"obj",fieldCol:12,key:"delegate_cp",size:"small",data:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.infoModal),n=t.editOrg,r=t.permissions,o=t.filterData,i=t.searchedColumn,s=t.filterFields,c=t.openSearch,u=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ln,{level:4},"Organisations")),l.a.createElement(h.a,{style:{textAlign:"end"}},l.a.createElement(p.a,{justify:"space-between",gutter:[30]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(na.a,null),"Add Organisations")))),l.a.createElement(Ca,{filters:i,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:u,dataSource:o,size:"small",className:"fs-small"}))),c&&l.a.createElement(Sa,{title:"Filter Organizations",visible:c,filters:i,filterFields:s,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),a&&l.a.createElement(Fn,{visible:a,editOrg:n,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Bn=a(606),_n=a(592),Yn=a(605),Vn=a(610),qn=a(648),Hn=a(328),Un=a(649),Gn="".concat(J,"/attachments/"),Wn=function(e,t){return it.a.post("".concat(J,"/files"),e,{headers:{"content-type":"multipart/form-data",Authorization:pe().accessToken}}).then((function(e){if(200===e.status){var t,a=e.data,n=a.success,l=a.data,r=a.message;he(r);var o={fileId:l[0].id,uid:l[0]&&l[0].uniqueName,name:l[0]&&l[0].originalName,type:l[0]&&l[0].type,url:"".concat(J,"/files/").concat(l[0]&&l[0].uniqueName),thumbUrl:ve(l[0].type)};return fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,file:o}}return{success:!1}})).catch((function(e){return console.log(e),{}}))},Kn=function(e,t,a){return it.a.post("".concat(Gn).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){if(200===e.status){var t,a,n,l,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b,E=e.data,k=E.success,S=E.data,C=E.message;return he(C),S={id:null===(t=S[0])||void 0===t?void 0:t.id,createdAt:null===(a=S[0])||void 0===a?void 0:a.createdAt,fileId:null===(n=S[0])||void 0===n?void 0:n.fileId,status:null===(l=S[0])||void 0===l?void 0:l.status,targetId:null===(r=S[0])||void 0===r?void 0:r.targetId,targetType:null===(o=S[0])||void 0===o?void 0:o.type,uid:null===(i=S[0])||void 0===i||null===(s=i.file)||void 0===s?void 0:s.uniqueName,name:null===(c=S[0])||void 0===c||null===(u=c.file)||void 0===u?void 0:u.originalName,type:null===(d=S[0])||void 0===d||null===(m=d.file)||void 0===m?void 0:m.type,url:"".concat(J,"/files/").concat(null===(f=S[0])||void 0===f||null===(p=f.file)||void 0===p?void 0:p.uniqueName),userId:null===(h=S[0])||void 0===h||null===(y=h.file)||void 0===y?void 0:y.userId,thumbUrl:ve(null===(v=S[0])||void 0===v||null===(g=v.file)||void 0===g?void 0:g.type)},fe(null===e||void 0===e||null===(b=e.headers)||void 0===b?void 0:b.authorization),{success:k,data:S}}return{success:!1}})).catch((function(e){return console.log(e),{}}))},$n=function(e,t){return it.a.get("".concat(Gn).concat(e,"/").concat(t),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o=[],i=[];return n.map((function(e){o.push(e.id),i.push({id:e.id,userId:e.userId,createdAt:e.createdAt,fileId:e.fileId,status:e.status,targetId:e.targetId,targetType:e.targetType,uid:e.file.uniqueName,name:e.file.originalName,type:"png"===e.file.type?"image/png":e.file.type,url:"".concat(J,"/files/").concat(e.file.uniqueName),thumbUrl:ve(e.file.type)})})),fe(null===e||void 0===e||null===(r=e.headers)||void 0===r?void 0:r.authorization),{success:a,fileList:i,fileIds:o}}return{success:!1}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Jn="".concat(J,"/comments/");a(446);function Xn(){Xn=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Zn=ht.a.TextArea,Qn=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).getComments=function(t,a){(function(e,t){return it.a.get("".concat(Jn).concat(e,"/").concat(t),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;if(he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(t,a).then((function(t){var a;t&&t.success&&e.setState({data:null!==(a=t.data)&&void 0!==a?a:[],loginId:parseInt(pe().id)})}))},e.scrollToBottom=function(){e.messagesEnd.current.scrollIntoView({behavior:"smooth"})},e.deleteIcon=function(t,a){e.setState((function(e){return{isHovered:Object(tt.a)(Object(tt.a)({},e.isHovered),{},Object(at.a)({},t,a))}}))},e.handleDelete=function(t){(function(e){return it.a.delete("".concat(Jn).concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;if(he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(t).then((function(a){a.success&&e.setState({data:e.state.data.filter((function(e){return e.id!==t}))})}))},e.handelEmpty=function(t){var a=e.state.value;13!==t.keyCode||a||t.preventDefault()},e.comChange=function(t){e.setState({value:t.target.value})},e.addComent=function(t){var a=e.state,n=a.value,l=a.data,r=a.fileList,o=a.fileIds;if(!t.shiftKey&&(n||r.length>0)){var i={content:n,files:r,attachments:o},s=e.props;(function(e,t,a){return it.a.post("".concat(Jn).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){if(200===e.status){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}}})).catch((function(e){return console.log(e),{}}))})(s.targetType,s.targetId,i).then((function(t){t.success&&e.setState({data:[].concat(Object(et.a)(l),[t.data]),value:null,fileList:[],fileIds:[]},(function(){setTimeout((function(){e.scrollToBottom(),e.setState({value:null})}),0)}))}))}},e.logScroll=function(t){var a=t.target,n=a.scrollHeight,l=a.scrollTop,r=a.clientHeight;l?n-l===r&&(t.persist(t.target),setTimeout((function(){n-l===r&&console.log("I will get rendered now")}),1e3)):(t.persist(l),setTimeout((function(){var t=e.state.data;!l&&t.length<500||console.log("Empty")}),1e3))},e.actions=function(e){return e.map((function(e){return l.a.createElement("span",null,l.a.createElement(fn.a,null)," ",l.a.createElement("a",{href:"".concat(J,"/files/").concat(e.uid),download:e.name,target:"_blank",rel:"noopener noreferrer"},e.name))}))},e.handleUpload=function(){var t=Object(dn.a)(Xn().mark((function t(a){var n,l,r,o,i;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[].concat(Object(et.a)(e.state.fileList),[t.file]),fileIds:[].concat(Object(et.a)(e.state.fileIds),[t.file.fileId])});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))},e.commentRender=function(t,a,n){var r,o=t.attachments&&e.actions(t.attachments),i=e.state.loginId,s=e.props.onHold;return l.a.createElement(_n.a,{key:t.id,author:l.a.createElement("a",null," ",t.author?t.authorId===i?"".concat(t.author," (Me)"):t.author:"?????"," "),avatar:l.a.createElement(Yn.a,{style:{backgroundColor:el[a.toString()[a.toString().length-1]]},alt:null!==(r=t.author)&&void 0!==r?r:"??????"},t.author?t.author[0].toUpperCase():"?"),actions:o,content:l.a.createElement("p",null,t.content),datetime:l.a.createElement(l.a.Fragment,null,l.a.createElement(Te.a,{title:me(t.createdAt,!0,"ddd DD MMM yyyy HH:mm:ss")},l.a.createElement("span",null,K()(me(t.createdAt,!0,"YYYY-MM-DDTHH:mm:ss")).fromNow())),t.authorId===i&&!s&&l.a.createElement(Te.a,{key:"comment-basic-delete",title:"Delete"},l.a.createElement("span",{style:tl.delCol,onMouseOver:function(){e.deleteIcon(a,!0)},onMouseLeave:function(){e.deleteIcon(a,!1)}},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){e.handleDelete(t.id)},okText:"Yes",cancelText:"No"},n[a]?l.a.createElement(qn.a,{style:tl.delIcon}):l.a.createElement(Hn.a,null)))))})},e.messagesEnd=l.a.createRef(),e.UploadRef=l.a.createRef(),e.state={isHovered:{},fileList:[],fileIds:[],data:[],value:null,loginId:null},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom();var e=this.props,t=e.targetType,a=e.targetId;this.getComments(t,a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isHovered,r=t.value,o=t.fileList,i=this.props.onHold;return l.a.createElement(p.a,{justify:"space-around"},l.a.createElement(h.a,{style:tl.cSec,span:24,onScroll:this.logScroll},l.a.createElement(Vn.b,{itemLayout:"horizontal",dataSource:a,renderItem:function(t,a){return l.a.createElement("li",null,e.commentRender(t,a,n))}}),l.a.createElement("div",{ref:this.messagesEnd})),l.a.createElement(h.a,{span:23,style:tl.cBox},l.a.createElement(nt.a.Item,{colon:!1,label:l.a.createElement(fn.a,{style:i?tl.sendIcon:n.attachIcon?tl.attachIconHoverd:tl.sendIcon,onMouseOver:function(){e.deleteIcon("attachIcon",!0)},onMouseOut:function(){e.deleteIcon("attachIcon",!1)},onClick:function(){i||e.UploadRef.current.click()}})},l.a.createElement(Zn,{placeholder:i?"This Project Is Closed....":"Enter Your Comment....",autoSize:{minRows:1,maxRows:5},disabled:i,onPressEnter:this.addComent,onChange:this.comChange,onKeyDown:this.handelEmpty,value:r}),l.a.createElement(mt.a,{listType:"text",multiple:!0,customRequest:this.handleUpload,onRemove:this.onRemove,fileList:o,style:{backgroundColor:"rosybrown"},className:"upload-list-inline"},l.a.createElement(fn.a,{ref:this.UploadRef,style:{fontSize:0}})))),l.a.createElement(h.a,{span:1,style:{alignSelf:"flex-end",marginBottom:o.length>2?30*o.length/4+1:25}},l.a.createElement(nt.a.Item,null,l.a.createElement(Un.a,{onClick:this.addComent,className:"sendIcon",style:i?tl.sendIcon:n.sendIcon?tl.sendIconHoverd:tl.sendIcon,onMouseOver:function(){e.deleteIcon("sendIcon",!0)},onMouseOut:function(){e.deleteIcon("sendIcon",!1)}}))))}}]),a}(n.Component),el=["#f56a00","#7265e6","#ffbf00","#0000ff","#b8860b","#907849","#80afe2","#FAAB14","#b17401","#42a3f3","#ce8785"],tl={cSec:{maxHeight:500,overflowY:"auto",minHeight:500},delCol:{paddingLeft:"10px",cursor:"pointer",textAlignLast:"right"},cBox:{paddingLeft:"40px"},disabled:{paddingLeft:"40px"},sendBox:{alignSelf:"flex-end",maxHeight:"100px",backgroundColor:"yellow"},sendIcon:{fontSize:"24px",paddingLeft:"10px"},sendIconHoverd:{fontSize:"24px",paddingLeft:"10px",color:"blue"},attachIconHoverd:{fontSize:"24px",paddingLeft:"10px",color:"#40a9ff"},delIcon:{fontSize:"18px"},sendAvatar:{backgroundColor:"#"+Math.floor(16777216*Math.random()).toString(16)}},al=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getEntityProjects()},e.getEntityProjects=function(){var t=JSON.parse(pe().permissions).PROJECTS,a=e.props,n=a.customUrl,l=a.showColumn;Kt(n).then((function(a){a.success&&e.setState({permissions:t,projects:a.data,columns:l?e.columns.filter((function(e){return"organization"!==e.dataIndex})):e.columns})}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",wdith:115,render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/info")},className:"nav-link"}," ",e," ")}},{title:"Organisation Name",dataIndex:"organization",key:"organization",width:300,render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},{title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(ce(e))}},{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},{title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&me(e,!0,!0)}},{title:"...",key:"action",align:"center",width:"1%",render:function(t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{disabled:e.state&&!e.state.permissions.READ},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={projects:[],permissions:{},columns:[]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.projects,a=e.columns;return l.a.createElement(ea.a,{bordered:!0,rowKey:function(e){return e.id},pagination:{pageSize:pe().pageSize},columns:a,dataSource:t,size:"small",className:"fs-small"})}}]),a}(n.Component),nl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.getList=function(){var t=JSON.parse(pe().permissions).OPPORTUNITIES,a=e.props,n=a.customUrl,l=a.showColumn;e.state.data;Kt(n).then((function(a){e.setState({data:a.success?a.data:[],permissions:t,columns:l?e.columns.filter((function(e){return"organization"!==e.dataIndex})):e.columns})}))},e.columns=[{title:"Code",dataIndex:"id",key:"id",wdith:115,render:function(e){return"00".concat(e)}},{title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/info")},className:"nav-link"}," ",e," ")}},{title:"Organisation Name",dataIndex:"organization",key:"organization",width:300,render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},{title:"Estimated Value",dataIndex:"value",key:"value",render:function(e){return"".concat(ce(e))}},{title:"Estimated Start Date",dataIndex:"startDate",key:"startDate",width:"fit-content",render:function(e){return e&&me(e,!0,!0)}},{title:"Estimated End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&me(e,!0,!0)}},{title:"Bid Date",dataIndex:"bidDate",key:"bidDate",render:function(e){return e&&me(e,!0,!0)}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return e}},{title:"...",key:"action",align:"center",width:"1%",render:function(t){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{disabled:e.state&&!e.state.permissions.READ},l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={data:[],columns:[],permissions:{}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},columns:a,dataSource:t,size:"small",className:"fs-small"}))}}]),a}(n.Component),ll=Bn.b.Item,rl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n,l;return Object(c.a)(this,a),(l=t.call(this,e)).componentDidMount=function(){console.log(l.props.bank)},l.state={data:null!==(n=e.bank)&&void 0!==n?n:{}},l}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.data,t=this.props.targetType;return l.a.createElement(Bn.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ll,{label:"Bank Account Name"},e.bankName," "),l.a.createElement(ll,{label:"Account Number"},e.bankAccountNo," "),l.a.createElement(ll,{label:"BSB"},e.bankBsb),"EMP"===t&&l.a.createElement(ll,{label:"Tax File Number"},e.tfn))}}]),a}(n.Component),ol=a(650);a(447);function il(){il=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var sl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.targetType,n=t.targetId;e.getRecord(a,n)},e.getRecord=function(t,a){$n(t,a).then((function(t){t.success&&e.setState({fileList:t.fileList,fileIds:t.fileIds,loginId:parseInt(pe().id)})}))},e.handleUpload=function(){var t=Object(dn.a)(il().mark((function t(a){var n,l,r,o,i;return il().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),e.setState({loading:!0}),Wn(i).then((function(t,a){if(t.success){n("Ok");var r=e.props,o=r.targetType,i=r.targetId,s={files:[t.file.fileId]};Kn(o,i,s).then((function(a){a.success&&e.setState({fileList:[].concat(Object(et.a)(e.state.fileList),[a.data]),fileIds:[].concat(Object(et.a)(e.state.fileIds),[t.file.fileId]),loading:!1})}))}else{console.log("Eroor: ",a),e.setState({loading:!1});new Error("Some error");l({err:a})}}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){var a,n=e.state.loginId,l=e.props.onHold;console.log(t),t.userId!==n||l||(a=t.id,it.a.delete("".concat(Gn).concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(a){a.success&&e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))}))},e.UploadRef=Object(n.createRef)(),e.state={fileList:[],fileIds:[],loading:!1,loginId:null},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.fileList,a=e.loading,n=this.props,r=n.listType,o=n.onHold;return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"24"},l.a.createElement(mt.a,{multiple:!0,showUploadList:{showRemoveIcon:!0},listType:null!==r&&void 0!==r?r:"picture",fileList:t,customRequest:this.handleUpload,onRemove:this.onRemove,style:{backgroundColor:"rosybrown"}},l.a.createElement(rt.a,{type:"ghost",loading:a,disabled:o},l.a.createElement(ol.a,null)," ",o?"This Project Is Closed":"Upload New File"))))}}]),a}(n.Component),cl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props.id)},n.columns=[{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(t.key,"/info")},className:"nav-link"},e)}},{title:"Parent",dataIndex:"parent",key:"parent",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(t&&t.key,"/info")},className:"nav-link"},e)}}],n.state={data:[]},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){window.location.reload(!1)}},{key:"render",value:function(){var e=this.state.data;return l.a.createElement(ea.a,{bordered:!0,columns:this.columns,dataSource:e,size:"small",className:"fs-small"})}}]),a}(n.Component),ul=(Object(i.i)(cl),function(e){var t=e.history;return l.a.createElement("div",null,void ta.a.error({title:"Not Authorized!",content:"You don't have permission to view this Information",okText:"Go Back",okType:"danger",onOk:function(){t.goBack()||t.push("/profile")}}))}),dl=Bn.b.Item,ml=In.a.TabPane,fl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).closeModal=function(){e.setState({infoModal:!1,editOrg:!1})},e.callBack=function(t){t.success&&e.setState({data:t.data,basic:t.basic,bank:t.bank,infoModal:!1,editOrg:!1})},e.componentDidMount=function(){var t=e.props.match.params.id;e.getOrgRecord(t)},e.getOrgRecord=function(t){Rn(t).then((function(a){var n,l,r;a.success?e.setState({data:null!==(n=a.data)&&void 0!==n?n:{},basic:null!==(l=a.basic)&&void 0!==l?l:{},bank:null!==(r=a.bank)&&void 0!==r?r:{},organizationId:t}):a.authError&&e.setState({notAuth:!0})}))},e.handleDelete=function(e){(function(e){return it.a.delete(Tn+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e.success&&(window.location.href="/organisations")}))},e.state={infoModal:!1,editOrg:!1,data:{},bank:{},basic:{},organizationId:!1,notAuth:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.bank,r=t.infoModal,o=t.editOrg,i=t.organizationId,c=t.basic,u=t.notAuth,d=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,a&&a.name),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){e.setState({infoModal:!0,editOrg:a.id})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:d,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(dl,{label:"Contact"},a.phoneNumber),l.a.createElement(dl,{label:"Email"},a.email),l.a.createElement(dl,{label:"Address"},a.address),l.a.createElement(dl,{label:"Website"},l.a.createElement(s.b,{to:{pathname:"https://".concat(a.website)},target:"_blank"},a.website)),l.a.createElement(dl,{label:"Contact Person"},c?c.delegate_contactPerson:null)),i&&l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(ml,{tab:"Projects",key:"project"},l.a.createElement(al,{targetId:i,showColumn:!0,customUrl:"helpers/work?type=P&organization=".concat(i)})),l.a.createElement(ml,{tab:"Opportunities",key:"opportunity"},l.a.createElement(nl,{targetId:i,showColumn:!0,customUrl:"helpers/work?type=O&organization=".concat(i)})),l.a.createElement(ml,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetId:i,targetType:"ORG"})),l.a.createElement(ml,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetId:i,targetType:"ORG"})),l.a.createElement(ml,{tab:"Bank Details",key:"Bank"},l.a.createElement(rl,{targetId:i,title:a.name,bank:n}))),r&&l.a.createElement(Fn,{visible:r,editOrg:o,close:this.closeModal,callBack:this.callBack}),u&&l.a.createElement(ul,this.props))}}]),a}(n.Component),pl=a(331),hl="".concat(J,"/contactpersons"),yl=function(e){return it.a.get(hl+"/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;if(he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message,o=l.success;return he(r),{authError:"Not Authorized!"===r,status:n,success:o,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))},vl="".concat(J,"/employees"),gl=function(e){return it.a.get(vl+"/".concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return he(l),a?Object(tt.a)({success:a,data:n},bl(n)):{success:a}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))};function bl(e){var t,a,n,l,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b=e.contactPersonOrganization?e.contactPersonOrganization.contactPerson:{},E={cpCode:"Emp-00".concat(b.id),firstName:b.firstName,lastName:b.lastName,gender:b.gender,phoneNumber:b.phoneNumber,email:b.email,dateOfBirth:me(b.dateOfBirth),birthPlace:b.birthPlace,address:b.address,stateId:b.stateId,username:e.username,password:e.password,roleId:e.roleId,lineManagerId:e.lineManagerId,active:e.active},k={superannuationName:e.superannuationName,superannuationBankName:e.superannuationBankName,superannuationBankAccountOrMembershipNumber:e.superannuationBankAccountOrMembershipNumber,superannuationAbnOrUsi:e.superannuationAbnOrUsi,superannuationBankBsb:e.superannuationBankBsb,superannuationAddress:e.superannuationAddress,superannuationType:e.superannuationType,superannuationFileId:e.superannuationFileId,file:e.superannuationFileId&&e.superannuationFile?[{id:null===(t=e.superannuationFile)||void 0===t?void 0:t.id,createdAt:null===(a=e.superannuationFile)||void 0===a?void 0:a.createdAt,fileId:null===(n=e.superannuationFile)||void 0===n?void 0:n.id,uid:null===(l=e.superannuationFile)||void 0===l?void 0:l.uniqueName,name:null===(r=e.superannuationFile)||void 0===r?void 0:r.originalName,type:null===(o=e.superannuationFile)||void 0===o?void 0:o.type,url:"".concat(J,"/files/").concat(null===(i=e.superannuationFile)||void 0===i?void 0:i.uniqueName),thumbUrl:ve(null===(s=e.superannuationFile)||void 0===s?void 0:s.type)}]:[]},S={tfnFileId:e.tfnFileId,file:(null===e||void 0===e||null===(c=e.tfnFile)||void 0===c?void 0:c.id)?[{id:e.tfnFile.id,createdAt:e.tfnFile.createdAt,fileId:e.tfnFile.id,uid:e.tfnFile.uniqueName,name:e.tfnFile.originalName,type:e.tfnFile.type,url:"".concat(J,"/files/").concat(e.tfnFile.uniqueName),thumbUrl:ve(e.tfnFile.type)}]:[]},C={nextOfKinDateOfBirth:me(e.nextOfKinDateOfBirth),nextOfKinEmail:e.nextOfKinEmail,nextOfKinGender:e.nextOfKinGender,nextOfKinName:e.nextOfKinName,nextOfKinPhoneNumber:e.nextOfKinPhoneNumber,nextOfKinRelation:e.nextOfKinRelation},j=e.bankAccounts.length>0?e.bankAccounts[0]:{},O={bankName:j.name,bankAccountNo:j.accountNo,bankBsb:j.bsb,tfn:e.tfn,taxFreeThreshold:e.taxFreeThreshold,helpHECS:e.helpHECS,bankAccountFileId:j.fileId,file:j.fileId&&(null===j||void 0===j?void 0:j.file)?[{id:null===j||void 0===j||null===(u=j.file)||void 0===u?void 0:u.id,createdAt:null===j||void 0===j||null===(d=j.file)||void 0===d?void 0:d.createdAt,fileId:null===j||void 0===j||null===(m=j.file)||void 0===m?void 0:m.id,uid:null===j||void 0===j||null===(f=j.file)||void 0===f?void 0:f.uniqueName,name:null===j||void 0===j||null===(p=j.file)||void 0===p?void 0:p.originalName,type:null===j||void 0===j||null===(h=j.file)||void 0===h?void 0:h.type,url:"".concat(J,"/files/").concat(null===j||void 0===j||null===(y=j.file)||void 0===y?void 0:y.uniqueName),thumbUrl:ve(null===j||void 0===j||null===(v=j.file)||void 0===v?void 0:v.type)}]:[]},x=e.employmentContracts.length>0?e.employmentContracts[0]:{};return{basic:E,detail:k,kin:C,bank:O,billing:{employmentContractId:x.id,employeeId:x.employeeId,payslipEmail:x.payslipEmail,membershipAccountNo:x.membershipAccountNo,payFrequency:x.payFrequency,startDate:me(x.startDate),endDate:me(x.endDate),type:x.type,noOfHours:x.noOfHours,noOfDays:x.noOfDays,noOfHoursPer:x.noOfHoursPer,bohPercent:x.bohPercent,remunerationAmount:x.remunerationAmount,remunerationAmountPer:x.remunerationAmountPer,comments:x.comments,leaveRequestPolicyId:null!==(g=x.leaveRequestPolicyId)&&void 0!==g?g:0,fileId:x.fileId,file:x.fileId?[{id:x.file.id,createdAt:x.file.createdAt,fileId:x.file.id,uid:x.file.uniqueName,name:x.file.originalName,type:x.file.type,url:"".concat(J,"/files/").concat(x.file.uniqueName),thumbUrl:ve(x.file.type)}]:[]},train:{training:e.training},tfn:S}}function El(){El=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var kl=In.a.TabPane,Sl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.editEmp;e.fetchAll(t)},e.fetchAll=function(t){var a=e.props.editEmp;Promise.all([At(),Wt(),t?e.getRecord(a):Bt("helpers/contact-persons?organizationId=1&active=0&associated=1"),$t(),Bt("helpers/contact-persons?organizationId=1&active=1&associated=1")]).then((function(a){var n=e.state,l=n.BasicFields,r=n.BillingFields,o=n.ManagerFields;l[15].data=a[0].data,l[3].data=a[1].data,r[19].data=a[3].data,o[1].data=a[4].data,e.setState({BasicFields:l,BillingFields:r,ManagerFields:o,CONTACT:t?[]:a[2].data})})).catch((function(e){console.log(e)}))},e.setBankReq=function(){var t=e.formRef.current.getFieldsValue().bank,a=t.bankAccountNo,n=t.bankBsb,l=t.bankName,r=t.tfn,o=e.state.BankFields;a||n||l||r?(o[0].rangeMin=!0,o[1].rangeMin=!0,o[4].rangeMin=!0,o[5].rangeMin=!0,o[2].rules=[{required:!0,message:"Account Name is required"}],o[3].rules=[{required:!0,message:"Account Number is required"}],o[6].rules=[{required:!0,message:"BSB Number is required"}],o[7].rules=[{required:!0,message:"Tax File Number is required"}]):(o[0].rangeMin=!1,o[1].rangeMin=!1,o[4].rangeMin=!1,o[5].rangeMin=!1,o[2].rules=[{required:!1,message:""}],o[3].rules=[{required:!1,message:""}],o[6].rules=[{required:!1,message:""}],o[7].rules=[{required:!1,message:""}]),e.setState({BankFields:Object(et.a)(o)})},e.getRecord=function(){var t=Object(dn.a)(El().mark((function t(a){return El().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gl(a).then((function(t){if(t.success){var a,n=e.state.BillingFields;return e.formRef.current.setFieldsValue({basic:t.basic,detail:t.detail,bank:t.bank,kin:t.kin,billing:t.billing,train:t.train}),n[13].Placeholder=1===(null===t||void 0===t||null===(a=t.billing)||void 0===a?void 0:a.type)?"Hourly Base Salary":"Annual Base Salary",e.setState({fileIds:{contact:t.billing.fileId,superannuation:t.detail.superannuationFileId,bankAccount:t.bank.bankAccountFileId,tfn:t.tfn.tfnFileId},files:{contract:t.billing.file,superannuation:t.detail.file,bankAccount:t.bank.file,tfn:t.tfn.file},BillingFields:n}),e.onFundType(t.detail&&t.detail),!0}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onContact=function(t){t?yl(t).then((function(a){a.success&&(console.log(a.data),a.data.cpCode="Emp-00".concat(a.data.id),a.data.dateOfBirth=me(a.data.dateOfBirth),e.formRef.current.setFieldsValue({basic:a.data}),e.setState({sContact:t}))})):e.formRef.current.resetFields()},e.onFundType=function(t){var a=[{Placeholder:"SMSF ABN",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"ESA Address",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",shape:"ABN",size:"small",type:"Input",rules:[{required:!0,message:"SMSF ABN is required"},function(e){e.getFieldValue;return{validator:function(e,t){var a=t.toString(),n=new Array(10,1,3,5,7,9,11,13,15,17,19);if(11===a.length){var l=0;return n.forEach((function(e,t){var n=a[t]-(t?0:1);l+=e*n})),console.log(l%89),l%89===0?Promise.resolve():Promise.reject(new Error("ABN is not valid"))}return Promise.reject(new Error("Must contain 11 digits"))}}}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationAddress",size:"small",type:"Input",rules:[{required:!0,message:"ESA Address is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Bank Account Holder Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankName",size:"small",type:"Input",rules:[{required:!0,message:"Account Name is required"}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationBankBsb",size:"small",type:"Input",rules:[{required:!0,message:"BSB Number is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Bank Account Number",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Account Number is required"}],itemStyle:{marginBottom:"10px"}}],n=e.state.DetailFields,l=e.formRef.current.getFieldsValue().detail,r=l.superAnnuationName,o=l.superannuationType;"P"===o?(n.splice(4,n.length),n=n.concat([{Placeholder:"Membership / Account",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"USI Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Membership / Account is required"}],itemStyle:{marginBottom:10}},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"USI Number is required"}],itemStyle:{marginBottom:10}}])):"S"===o?(n.splice(4,n.length),n=n.concat(a)):n.splice(4,n.length);var i={superAnnuationName:r,superannuationType:o};e.formRef.current.setFieldsValue({detail:i}),e.setState({DetailFields:Object(et.a)(n)})},e.onFinish=function(t){var a,n,l,r,o,i,s,c,u,d=e.state.fileIds;e.setState({loading:!0});var m=t.basic,f=t.detail,p=t.kin,h=t.bank,y=t.billing,v=Object(tt.a)(Object(tt.a)(Object(tt.a)(Object(tt.a)({},m),f),p),{},{latestEmploymentContract:Object(tt.a)(Object(tt.a)({},y),{},{fileId:null!==(a=d.contract)&&void 0!==a?a:null,startDate:me(y.startDate,!0),endDate:me(y.endDate,!0),leaveRequestPolicyId:y.leaveRequestPolicyId||null,remunerationAmountPer:1===y.type?1:7}),dateOfBirth:me(m.dateOfBirth,!0),lineManagerId:null!==(n=null===m||void 0===m?void 0:m.lineManagerId)&&void 0!==n?n:null,superannuationType:null!==(l=null===f||void 0===f?void 0:f.superannuationType)&&void 0!==l?l:null,superannuationFileId:null!==(r=d.superannuation)&&void 0!==r?r:null,bankAccountFileId:null!==(o=d.bankAccount)&&void 0!==o?o:null,tfnFileId:d.tfn,bankName:null!==(i=h.bankName)&&void 0!==i?i:"",bankAccountNo:null!==(s=h.bankAccountNo)&&void 0!==s?s:"",bankBsb:null!==(c=h.bankBsb)&&void 0!==c?c:"",tfn:null!==(u=h.tfn)&&void 0!==u?u:"",taxFreeThreshold:h.taxFreeThreshold,helpHECS:h.helpHECS});e.props.editEmp?e.editRecord(v):e.addEmployee(v)},e.addEmployee=function(t){var a=e.props.callBack,n=e.state.sContact;t.contactPersonId=n,function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(vl,e,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return he(n),$.b.success({content:n,key:1}),a?{success:a,data:l,billing:bl(l).billing}:{success:a,data:l}})).catch((function(e){return ge(e,1,5)}))}(t).then((function(t){e.setState({loading:!1}),t.success&&a(t.data,!1)}))},e.editRecord=function(t){var a,n,l=e.props,r=l.editEmp,o=l.callBack;(a=r,n=t,$.b.loading({content:"Loading...",key:a}),it.a.put(vl+"/".concat(a),n,{headers:ye()}).then((function(e){var t=e.data,n=t.success,l=t.message,r=t.data;if(he(l),$.b.success({content:l,key:a}),n){var o,i=bl(r).billing;return fe(null===e||void 0===e||null===(o=e.headers)||void 0===o?void 0:o.authorization),{success:n,data:r,billing:i}}return{success:n,data:r}})).catch((function(e){return ge(e,a,5)}))).then((function(t){e.setState({loading:!1}),t.success&&o()}))},e.handleUpload=function(){var t=Object(dn.a)(El().mark((function t(a,n){var l,r,o,i,s;return El().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=a.onSuccess,r=a.onError,o=a.file,i=a.onProgress,s=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),i({percent:t.loaded/t.total*100})}},s.append("files",o),Wn(s).then((function(t,a){if(t.success)l("Ok"),e.setState((function(e){return Object(tt.a)(Object(tt.a)({},e),{},{files:Object(tt.a)(Object(tt.a)({},e.files),{},Object(at.a)({},n,[t.file])),fileIds:Object(tt.a)(Object(tt.a)({},e.fileIds),{},Object(at.a)({},n,t.file.fileId))})}));else{console.log("Eroor: ",a);new Error("Some error");r({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onFinishFailed=function(t){t.values;var a=t.errorFields;t.outOfDate;e.setState({activeKey:a[0].name[0]})},e.onRemove=function(t){e.setState((function(e){return Object(tt.a)(Object(tt.a)({},e),{},{files:Object(tt.a)(Object(tt.a)({},e.files),{},Object(at.a)({},t,[])),fileIds:Object(tt.a)(Object(tt.a)({},e.fileIds),{},Object(at.a)({},t,null))})}))},e.formRef=l.a.createRef(),e.state={editEmp:!1,loading:!1,CONTACT:[],data:{},imgLoading:!1,files:{contract:[],superannuation:[],bankAccount:[],tfn:[]},fileIds:{contract:null,superannuation:null,bankAccount:null,tfn:null},activeKey:"basic",BasicFields:[{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Role",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"cpCode",size:"small",readOnly:!0,rules:[{required:!0,message:"Select Contact Person !!"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"roleId",rules:[{required:!0,message:"Role is required!!"}],size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:5}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Personal Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",type:"Input",disabled:!1,itemStyle:{marginBottom:10},rules:[{type:"email",message:"The input is not valid e-mail!"}]},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],itemStyle:{marginBottom:10},type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{Placeholder:"Birth Place",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{object:"basic",fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"birthPlace",size:"small",type:"string",itemStyle:{marginBottom:10}},{Placeholder:"Residential Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}}],DetailFields:[{Placeholder:"Superannuation Fund/ SMSF Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationName",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}},{object:"detail",fieldCol:12,key:"superannuationType",size:"small",data:[{label:"Public",value:"P"},{label:"SMSF",value:"S"}],type:"Select",itemStyle:{marginBottom:10},onChange:function(t){e.onFundType(t)}}],KinFields:[{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Employee",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",rules:[{type:"email",message:"The input is not valid e-mail!"}],type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}],BankFields:[{Placeholder:"Bank Account Holder Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Bank Account Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankName",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax File Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankBsb",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"tfn",size:"small",type:"Input",onChange:function(t){e.setBankReq(t)},itemStyle:{marginBottom:10}},{Placeholder:"Tax-free Threshold",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"HELP (HECS)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"taxFreeThreshold",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:10}},{object:"bank",fieldCol:12,key:"helpHECS",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:10}}],BillingFields:[{Placeholder:"Employment Status",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Back Office Rate of Effort",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",onChange:function(t){var a=e.state.BillingFields;1===t?(a[13].Placeholder="Hourly Base Salary",e.setState({BillingFields:a})):(a[13].Placeholder="Annual Base Salary",e.setState({BillingFields:a}))},rules:[{required:!0,message:"Status is Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:6,key:"bohPercent",size:"small",type:"InputNumber",rules:[{required:!0,message:"BOH Rate is Required"}],shape:"%",rangeMin:0,rangeMax:100,itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"payslipEmail",size:"small",type:"input",itemStyle:{marginBottom:10},rules:[{type:"email",message:"The input is not valid e-mail!"}]},{Placeholder:"Work Hours In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Days In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours are Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:6,key:"noOfDays",size:"small",type:"InputNumber",rangeMin:1,rangeMax:5,fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Days are Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:10},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Salary is Required"}],itemStyle:{marginBottom:10}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Leave Policy",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"payFrequency",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"leaveRequestPolicyId",size:"small",data:[],type:"Select",rules:[{required:!0,message:"Policy is required"}],itemStyle:{marginBottom:10}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}],ManagerFields:[{Placeholder:"Employee Manager",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"lineManagerId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:10}}],TrainFields:[{Placeholder:"Training",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"train",fieldCol:24,key:"training",size:"small",mode:{minRows:8,maxRows:12},type:"Textarea"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editEmp,n=t.visible,r=t.close,o=this.state,i=o.BasicFields,s=o.DetailFields,c=o.KinFields,u=o.BankFields,d=o.BillingFields,m=o.TrainFields,f=o.ManagerFields,p=o.CONTACT,y=o.loading,v=o.files,g=o.activeKey;return l.a.createElement(ta.a,{title:a?"Edit Employee":"Add Employee",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:y,htmlType:"submit",form:"my-form"},okText:y?l.a.createElement(la.a,null):"Save",onCancel:function(){return r()},width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{startDate:null,bohPercent:0}}},!a&&l.a.createElement(h.a,{span:8,style:{marginBottom:10}},l.a.createElement(nt.a.Item,{name:["basic","contactPersonId"]},l.a.createElement(vt.a,{placeholder:"Contact Person",options:p,showArrow:!0,size:"small",allowClear:!0,onClear:this.onContact,onChange:this.onContact,showSearch:!0,optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),l.a.createElement(h.a,{span:8,style:{marginLeft:"auto",marginBottom:10}},l.a.createElement(nt.a.Item,{name:["basic","username"],rules:[{required:!0,message:"Email/Username is requrired"},{type:"email",message:"The input is not valid e-mail!"}]},l.a.createElement(ht.a,{placeholder:"Email",size:"small",type:"email",style:{width:"100%"}}))),l.a.createElement(In.a,{type:"card",activeKey:g,onChange:function(t){e.setState({activeKey:t})}},l.a.createElement(kl,{tab:"Personal Details",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:i})),l.a.createElement(kl,{tab:" Employment Contract",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:d}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{customRequest:function(t){return e.handleUpload(t,"contract")},listType:"picture-card",maxCount:1,fileList:v.contract,onRemove:function(){return e.onRemove("contract")}},(null===v||void 0===v?void 0:v.contract.length)<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(kl,{tab:"Superannuation",key:"detail",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:s}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Superannuation Form"),l.a.createElement(mt.a,{customRequest:function(t){return e.handleUpload(t,"superannuation")},listType:"picture-card",maxCount:1,fileList:v.superannuation,onRemove:function(){return e.onRemove("superannuation")}},(null===v||void 0===v?void 0:v.superannuation.length)<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(kl,{tab:"Next of Kin",key:"kin",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:c})),l.a.createElement(kl,{tab:"Banking/Tax Details",key:"bank",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:u}),l.a.createElement(h.a,{span:12},l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Bank Details"),l.a.createElement(mt.a,{customRequest:function(t){return e.handleUpload(t,"bankAccount")},listType:"picture-card",maxCount:1,fileList:v.bankAccount,onRemove:function(){return e.onRemove("bankAccount")}},(null===v||void 0===v?void 0:v.bankAccount.length)<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(h.a,{span:12,style:{marginBottom:10}},l.a.createElement("p",{style:{marginBottom:2}},"TFN Declaration"),l.a.createElement(mt.a,{customRequest:function(t){return e.handleUpload(t,"tfn")},listType:"picture-card",maxCount:1,fileList:v.tfn,name:"TFN Declaration",onRemove:function(){return e.onRemove("tfn")}},(null===v||void 0===v?void 0:v.tfn.length)<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))),l.a.createElement(kl,{tab:"Employee Manager",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:f})),l.a.createElement(kl,{tab:"Training Detail",key:"train",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:m})))))}}]),a}(n.Component),Cl={R_STATUS:ee,STATUS_COLOR:te,O_PHASE:Q,O_PHASE_COLORS:{false:"red",true:"green"},ACTIVE_STATUS:{true:"Active",false:"Deactive"},ACTIVE_STATUS_COLORS:{false:"red",true:"green"}},jl=function(e){var t,a,n=e.text,r=e.objName,o=e.colorName;return n&&"SV"!==n?l.a.createElement(ga.a,{color:o?null===Cl||void 0===Cl||null===(t=Cl[o])||void 0===t?void 0:t[n]:te[n]},r?null===Cl||void 0===Cl||null===(a=Cl[r])||void 0===a?void 0:a[n]:ee[n]):null},Ol=[{fieldCol:12,size:"small",Placeholder:"First Name",type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",type:"Text",labelAlign:"left"},{object:"obj",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left"},{object:"obj",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Personal Email",type:"Text",labelAlign:"left"},{object:"obj",fieldCol:12,key:"phoneNumber",size:"small",type:"input"},{object:"obj",fieldCol:12,key:"email",size:"small",type:"Input"},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"gender",mode:"multiple",customValue:function(e,t){return t},size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],type:"Select"},{object:"obj",fieldCol:12,mode:"multiple",customValue:function(e,t){return t},key:"stateId",size:"small",type:"Select",data:[]},{Placeholder:"Role",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Clearance Level",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"role",customValue:function(e,t){return t},size:"small",type:"Select",data:[]},{object:"obj",fieldCol:12,key:"clearanceLevel",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select"},{Placeholder:"Status",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"isActive",customValue:function(e,t){return t},size:"small",type:"Select",data:[{value:!0,label:"Active"},{value:!1,label:"Deactive"}]},{Placeholder:"Residential Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"}],xl={id:{type:"Input",value:"",label:"Code",showInColumn:!0},firstName:{type:"Input",value:"",label:"First Name",showInColumn:!0},lastName:{type:"Input",value:"",label:"Last Name",showInColumn:!0},phoneNumber:{type:"Input",value:"",label:"Phone Number",showInColumn:!0},email:{type:"Input",value:"",label:"Personal Email",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},stateId:{type:"none",multi:!0,value:[],label:"State",showInColumn:!1,disabled:!1},clearanceLevel:{type:"none",multi:!0,value:[],label:"clearanceLevel",showInColumn:!1,disabled:!1},gender:{type:"Select",multi:!0,value:[],label:"Gender",showInColumn:!1},address:{type:"none",value:"",label:"Residential Address",showInColumn:!1,disabled:!1},role:{type:"none",multi:!0,value:[],label:"Role",showInColumn:!1,disabled:!1},employeeStatus:{type:"none",multi:!0,value:[],label:"Employee Status",showInColumn:!1,disabled:!1},leaveRequestPolicyId:{type:"none",multi:!0,value:[],label:"Leave Policy",showInColumn:!1,disabled:!1},isActive:{type:"none",multi:!0,value:[],label:"Status",showInColumn:!1,disabled:!1},contractStartDate:{type:"Date",value:null,label:"Contract Start Date",showInColumn:!0},contractEndDate:{type:"Date",value:null,label:"Contract End Date",showInColumn:!0,disabled:!0},minSalary:{type:"Input",value:"",label:"Min Salary",showInColumn:!0},maxSalary:{type:"Input",value:"",label:"Max Salary",showInColumn:!0},payFrequency:{type:"none",multi:!0,value:[],label:"Pay Frequency",showInColumn:!1,disabled:!1},lineManagerId:{type:"none",multi:!0,value:[],label:"Line Manager",showInColumn:!1,disabled:!1}},wl=Ye.a.Title,Il=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.componentWillUnmount=function(){e.setState({searchedColumn:{},filterFields:[]})},e.getList=function(){var t=JSON.parse(pe().permissions).USERS;it.a.get(vl,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&e.setState({data:a.data,filterData:a.data,infoModal:!1,editEmp:!1,permissions:t})}))},e.handleDelete=function(t,a){var n=e.state,l=n.data,r=n.filterData,o=e.props.history;zn(o,"/employees",t,a,r,l).then((function(t){t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.closeModal=function(){e.setState({infoModal:!1,editEmp:!1})},e.callBack=function(t){e.getList()},e.generalFilter=function(t){var a=e.state.data;t?(t=t.replace(/\s+/g,"").toLowerCase(),e.setState({filterData:a.filter((function(e){var a=e.contactPersonOrganization.contactPerson,n=a.firstName,l=a.lastName,r=a.email,o=a.phoneNumber,i=a.id,s="".concat(n||""," ").concat(l||""),c="".concat(l||""," ").concat(n||"");return"Emp-00".concat(i.toString()).replace(/\s+/g,"").includes(t)||s.toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase())||c.toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase())||r&&r.toLowerCase().replace(/\s+/g,"").includes(t.toLowerCase())||o&&o.startsWith(t)}))})):e.setState({filterData:a})},e.advancefilter=function(t,a,n){var l=e.state,r=l.data,o=l.searchedColumn;a?o[a].value=t:o=n,o.id.value||o.firstName.value||o.lastName.value||o.email.value||o.phoneNumber.value||o.gender.value.length>0||o.stateId.value.length>0||o.isActive.value.length>0||o.address.value?e.setState({filterData:r.filter((function(e){var t=e.contactPersonOrganization.contactPerson,a=t.firstName,n=t.lastName,l=t.email,r=t.phoneNumber,i=t.id,s=t.gender,c=t.stateId,u=t.address,d=t.clearanceLevel;return"Emp-00".concat(i.toString()).includes(o.id.value)&&"".concat(null!==a&&void 0!==a?a:"").toLowerCase().includes(o.firstName.value.toLowerCase())&&"".concat(null!==n&&void 0!==n?n:"").toLowerCase().includes(o.lastName.value.toLowerCase())&&"".concat(null!==l&&void 0!==l?l:"").toLowerCase().includes(o.email.value.toLowerCase())&&"".concat(null!==r&&void 0!==r?r:"").toLowerCase().includes(o.phoneNumber.value.toLowerCase())&&"".concat(null!==u&&void 0!==u?u:"").toLowerCase().includes(o.address.value.toLowerCase())&&(o.gender.value.length>0?o.gender.value:[{value:","}]).some((function(e){return(o.gender.value.length>0?[s]:[","]).includes(e.value)}))&&(o.stateId.value.length>0?o.stateId.value:[{value:","}]).some((function(e){return(o.stateId.value.length>0?[c]:[","]).includes(e.value)}))&&(o.role.value.length>0?o.role.value:[{value:","}]).some((function(t){return(o.role.value.length>0?[e.roleId]:[","]).includes(t.value)}))&&(o.isActive.value.length>0?o.isActive.value:[{value:","}]).some((function(t){return(o.isActive.value.length>0?[e.active]:[","]).includes(t.value)}))&&(o.clearanceLevel.value.length>0?o.clearanceLevel.value:[{value:","}]).some((function(e){return(o.clearanceLevel.value.length>0?[d]:[","]).includes(e.value)}))})),searchedColumn:o,openSearch:!1}):e.setState({searchedColumn:o,filterData:r,openSearch:!1})},e.filterModalUseEffect=function(){Promise.all([At(),Wt()]).then((function(t){var a=e.state.filterFields;a[11].data=t[0].success?t[0].data:[],a[14].data=t[1].success?t[1].data:[],e.setState({filterFields:a})})).catch((function(e){console.log(e)}))},e.columns=[Object(tt.a)({title:"Code",dataIndex:["contactPersonOrganization","contactPersonId"],key:"contactPersonId",wdith:115,render:function(e){return"Emp-00".concat(e)}},Ea("contactPersonOrganization.contactPersonId","number")),Object(tt.a)({title:"First Name",dataIndex:["contactPersonOrganization","contactPerson","firstName"],key:"firstName",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/Employees/".concat(t.id,"/info")},className:"nav-link"},e)}},Ea("contactPersonOrganization.contactPerson.firstName","string")),Object(tt.a)({title:"Last Name",dataIndex:["contactPersonOrganization","contactPerson","lastName"],key:"lastName"},Ea("contactPersonOrganization.contactPerson.lastName","string")),{title:"Phone",dataIndex:["contactPersonOrganization","contactPerson","phoneNumber"],key:"phoneNumber"},{title:"Email",dataIndex:["contactPersonOrganization","contactPerson","email"],key:"email"},Object(tt.a)({title:"Status",dataIndex:"active",key:"status",width:"8%",render:function(e){return l.a.createElement(jl,{text:"".concat(e),objName:"ACTIVE_STATUS",colorName:"ACTIVE_STATUS_COLORS"})}},Ea("active","string",!0,!0)),{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o,i,c,u,d;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,disabled:!(null===(r=Object(on.a)(e))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){e.setState({infoModal:!0,editEmp:a.id})},disabled:!(null===(c=Object(on.a)(e))||void 0===c||null===(u=c.state)||void 0===u||null===(d=u.permissions)||void 0===d?void 0:d.UPDATE)},"Edit"),l.a.createElement(b.a.Item,{key:"view"},l.a.createElement(s.b,{to:{pathname:"/Employees/".concat(a.id,"/info")},className:"nav-link"},"View")),l.a.createElement(b.a.Item,{key:"Contract History"},l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(a.id,"/contracts")},className:"nav-link"},"Contract History")),l.a.createElement(b.a.Item,{key:"Novated lease"},l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(a.id,"/novated-lease")},className:"nav-link"},"Novated Lease")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={infoModal:!1,editEmp:!1,data:[],permissions:{},filterData:[],openSearch:!1,searchedColumn:xl,filterFields:Ol},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.infoModal),n=t.editEmp,r=t.permissions,o=t.filterData,i=t.searchedColumn,s=t.filterFields,c=t.openSearch,u=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(wl,{level:4},"Employees")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"space-between",gutter:17},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(na.a,null),"Employees")))),l.a.createElement(Ca,{filters:i,filterFunction:function(t,a){return e.advancefilter(t,a)}}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:u,dataSource:o,size:"small",className:"fs-small"}))),c&&l.a.createElement(Sa,{title:"Filter Employees",visible:c,filters:i,filterFields:s,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),a&&l.a.createElement(Sl,{visible:a,editEmp:n,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Dl=a(651),Pl=a(652),Tl="".concat(J,"/leave-requests"),Nl=function(e){return $.b.loading({content:"Loading...",key:e}),it.a.get("".concat(Tl,"/").concat(e),{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;if($.b.success({content:r,key:e}),fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),l){var i,s,c=null===o||void 0===o?void 0:o.entries,u=null!==(i=null===o||void 0===o?void 0:o.attachments)&&void 0!==i?i:[],d=[],m=[];o.attachments=u.map((function(e){d.push(e.fileId),m.push({id:e.id,createdAt:e.createdAt,fileId:e.fileId,status:e.status,targetId:e.targetId,targetType:e.targetType,uid:e.file.uniqueName,name:e.file.originalName,type:"png"===e.file.type?"image/png":e.file.type,url:"".concat(J,"/files/").concat(e.file.uniqueName),thumbUrl:ve(e.file.type)})}));var f={};return Object.entries(null!==(s=o.type)&&void 0!==s?s:{}).forEach((function(e){var t=Object(G.a)(e,2),a=t[0],n=t[1],l=a.replace(/([A-Z])/g,"_$1").toLowerCase();f[l]=n})),o.type=f,{success:l,data:o,entries:c,fileIds:d,fileList:m}}return{success:l,data:o}})).catch((function(t){var a,n,l=null===t||void 0===t||null===(a=t.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message;return $.b.error({content:l,key:e}),{error:"Please login again!",success:!1,message:t.message}}))},Rl=function(e){return it.a.get("".concat(Tl,"/approvalLeaveRequests?").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){var t,a,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;return"Leave Requests not found"!==n&&$.b.error({content:n,key:1}),{error:"Please login again!",success:!1,message:e.message}}))},Al=["index"],Fl=["title","editable","children","dataIndex","record","handleSave"];function zl(){zl=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Ll=l.a.createContext(null),Ml=Ye.a.Text,Bl=function(e){e.index;var t=Object(ya.a)(e,Al),a=nt.a.useForm(),n=Object(G.a)(a,1)[0];return l.a.createElement(nt.a,{form:n,component:!1},l.a.createElement(Ll.Provider,{value:n},l.a.createElement("tr",t)))},_l=function(e){var t=e.title,a=e.editable,r=e.children,o=e.dataIndex,i=e.record,s=e.handleSave,c=Object(ya.a)(e,Fl),u=Object(n.useState)(!1),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useRef)(null),v=Object(n.useContext)(Ll);Object(n.useEffect)((function(){m&&y.current.focus()}),[m]);var g=function(){f(!m),v.setFieldsValue(Object(at.a)({},o,i[o]))},b=function(){var e=Object(dn.a)(zl().mark((function e(){var t;return zl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.validateFields();case 3:t=e.sent,g(),s(Object(tt.a)(Object(tt.a)({},i),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),E=r;return a&&(E=m?l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(nt.a.Item,{style:{margin:0},name:o,rules:[{required:!0,message:"".concat(t," is required.")}]},l.a.createElement(yt.a,{ref:y,size:"small"}))),l.a.createElement(h.a,{style:{margin:"auto 0"}},l.a.createElement(Dl.a,{style:{color:"red",fontSize:24},onClick:function(){return f(!m)}})),l.a.createElement(h.a,{style:{margin:"auto 0"}},l.a.createElement(lt.a,{title:"You Want to Update Accrued Balance?",onConfirm:b,okText:"Yes",cancelText:"No"},l.a.createElement(Pl.a,{style:{color:"green",fontSize:24}})))):l.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:g},r)),l.a.createElement("td",c,E)},Yl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e,t=n.props.empId;(e=t,it.a.get("".concat(J,"/leave-request-balances?employeeId=").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n){var r=new Date(Math.max.apply(Math,Object(et.a)(l.map((function(e){return new Date(e.updatedAt)})))));return{success:n,data:l,lastUpdate:r}}return{success:n}})).catch((function(e){var t,a,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;return $.b.error({content:null!==n&&void 0!==n?n:e.message,key:1}),{error:"Please login again!",success:!1,message:e.message}}))).then((function(e){(null===e||void 0===e?void 0:e.success)&&n.setState({data:e.data,lastUpdate:K()().isBefore(K()().set({date:15}))?K()().set({date:15,month:K()().month()-1}):K()().set({date:15})})}))},n.handleSave=function(e){var t,a;(t=e.id,a=e,it.a.patch("".concat(J,"/leave-request-balances/").concat(t),a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){var t,a,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;return $.b.error({content:null!==n&&void 0!==n?n:e.message,key:1}),{error:"Please login again!",success:!1,message:e.message}}))).then((function(t){if(t.success){console.log(t.data);var a=Object(et.a)(n.state.data),l=a.findIndex((function(t){return e.id===t.id})),r=a[l];a.splice(l,1,Object(tt.a)(Object(tt.a)({},r),t.data)),n.setState({data:a})}}))},n.columns=[{title:"Type",dataIndex:"name",key:"name",width:"30%"},{title:"Accrued",dataIndex:"carryForward",key:"carryForward",className:"editable-cell",width:"14%",editable:e.editable,render:function(e){return ue(e)}},{title:"Earned YTD",dataIndex:"earned",key:"earned",width:"14%",render:function(e,t){return ue(t.balanceHours-t.carryForward+t.used)}},{title:"Used YTD",dataIndex:"used",key:"used",width:"14%",render:function(e){return ue(e)}},{title:"Balance",dataIndex:"balanceHours",key:"balanceHours",width:"14%",render:function(e){return ue(e)}}],n.state={data:[],permissions:{},lastUpdate:null},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.lastUpdate,r=this.props.style,o={body:{row:Bl,cell:_l}},i=this.columns.map((function(t){return t.editable?Object(tt.a)(Object(tt.a)({},t),{},{onCell:function(a){return Object(tt.a)(Object(tt.a)({},t),{},{record:a,handleSave:e.handleSave})}}):t}));return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{components:o,style:r,bordered:!0,rowKey:function(e){return e.id},columns:i,dataSource:a,size:"small",className:"fs-small",tableLayout:"fixed"})),l.a.createElement(h.a,null,l.a.createElement(Ml,{type:"danger"},"Last Updated: ",me(n,!0,!0)," ")))}}]),a}(n.Component);a(226);function Vl(e){var t=e.value,a=e.shape,n=e.onChange,r=e.min,o=e.max;return l.a.createElement(yt.a,{size:"small",value:t,formatter:function(e){return Tt(e,a)},parser:function(e){return Nt(e,a)},onChange:n,min:r,max:o})}var ql=function(e){var t=Object(n.useState)({}),a=Object(G.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),s=Object(G.a)(i,2),c=s[0],u=s[1],d=Object(n.useState)(0),m=Object(G.a)(d,2),f=m[0],y=m[1],v=Object(n.useState)([20,25,30,40]),g=Object(G.a)(v,2),E=g[0],k=g[1],S=Object(n.useState)(0),C=Object(G.a)(S,2),j=C[0],O=C[1],x=Object(n.useState)(8),w=Object(G.a)(x,2),I=w[0],D=w[1];Object(n.useEffect)((function(){var t=Ee("years");Xt("employees",e.empId).then((function(e){if(e.success){for(var a=e.data,n=a.contract,l=a.golobalVariables,r=a.employeeBuyRate,i=[],s=0;null===(c=s<n.noOfDays)||void 0===c||c;s++){var c;i.push(s+1)}var d=me(new Date).isoWeekdayCalc({rangeStart:"1 July ".concat(t.start),rangeEnd:"30 June ".concat(t.end),weekdays:i});n.workDaysPerAnum=d,y(r),o(n),u(l)}}))}),[]);return l.a.createElement("div",null,r.hourlyBaseRate?l.a.createElement(p.a,{className:"buy-sell-calculator"},l.a.createElement(h.a,{span:12,className:"buy-cost calculator"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24,className:"mb-10"},l.a.createElement(Ye.a.Title,{level:5},"Buy Rate Calculator - Employee")),"                 ",l.a.createElement(h.a,{span:16,className:"label"},1===r.type?"Hourly Base Salary":"Annual Base Salary"),l.a.createElement(h.a,{span:8,className:"item"},ce(null===r||void 0===r?void 0:r.remunerationAmount)),l.a.createElement(h.a,{span:16,className:"label"},"Daily Hours"),l.a.createElement(h.a,{span:8,className:"item"},ue(null===r||void 0===r?void 0:r.dailyHours)),l.a.createElement(h.a,{span:16,className:"label"},"Weekly Hours - (".concat(ue(null===r||void 0===r?void 0:r.dailyHours)," * ").concat(null===r||void 0===r?void 0:r.noOfDays," days)")),l.a.createElement(h.a,{span:8,className:"item"},ue(null===r||void 0===r?void 0:r.noOfHours)),l.a.createElement(h.a,{span:16,className:"label"},"Billable Days per annum"),l.a.createElement(h.a,{span:8,className:"item"},null===r||void 0===r?void 0:r.workDaysPerAnum),l.a.createElement(h.a,{span:16,className:"label my-10"},1===r.type?"Hourly Base Rate":"Hourly Base Rate - (".concat(ce(null===r||void 0===r?void 0:r.remunerationAmount)," / ",52," / ").concat(ue(null===r||void 0===r?void 0:r.noOfHours),")")),l.a.createElement(h.a,{span:8,className:"item my-10"},ce(null===r||void 0===r?void 0:r.hourlyBaseRate)),l.a.createElement(h.a,{span:5,offset:16,className:"item"},l.a.createElement(Ye.a.Text,{underline:!0,strong:!0},"Applicable")),c.map((function(e,t){return l.a.createElement(h.a,{span:24,key:t},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:12,className:"label"},ie[e.name]?"Payroll Tax - ".concat(ie[e.name]):e.name),l.a.createElement(h.a,{span:4,className:"item"},"".concat(e.value,"%")),l.a.createElement(h.a,{span:4,className:"item"},l.a.createElement(De.a,{trigger:["click"],overlay:l.a.createElement(b.a,{style:{backgroundColor:"#f6f4f1"},onClick:function(e){!function(e,t){var a=c;a[t].apply=e;var n=r.hourlyBaseRate;a=a.map((function(e,t){return e.amount=0===t?"Yes"===e.apply?(null===r||void 0===r?void 0:r.hourlyBaseRate)*e.value/100:0:"Yes"===e.apply?((null===r||void 0===r?void 0:r.hourlyBaseRate)+a[0].amount)*e.value/100:0,n+=e.amount,e})),y(n),u(Object(et.a)(a))}(null===e||void 0===e?void 0:e.key,t)}},l.a.createElement(b.a.Item,{key:"Yes"},"Yes"),l.a.createElement(b.a.Item,{key:"No"},"No"))},l.a.createElement("span",{className:"mouse-pointer"},e.apply))),l.a.createElement(h.a,{span:4,className:"item"},ce(e.amount))))})),l.a.createElement(h.a,{span:16,className:"label my-30"},"Adjustment"),l.a.createElement(h.a,{span:8,className:"item my-30"},l.a.createElement(Vl,{value:j,shape:"$",onChange:function(e){O(null!==e&&void 0!==e?e:0)}})),l.a.createElement(h.a,{span:16,className:"label bold my-20"}," Employee Hourly Buy Rate"),l.a.createElement(h.a,{span:8,className:"item bold my-20"}," ",ce(f+j)),l.a.createElement(h.a,{span:12,className:"label mb-10"},"Daily Billable Hours"),l.a.createElement(h.a,{span:6,className:"item bold  mb-10"},l.a.createElement(Vl,{value:I,onChange:function(e){D(null!==e&&void 0!==e?e:0)}})),l.a.createElement(h.a,{span:16,className:"label bold "}," Employee Daily Buy Rate"),l.a.createElement(h.a,{span:8,className:"item bold total-cost pr-5"}," ",ce(I*(f+j))))),l.a.createElement(h.a,{span:12,className:"sell-cost"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24,className:"mb-10"},l.a.createElement(Ye.a.Title,{level:5},"Sell Rate Calculator - Employee")),l.a.createElement(h.a,{span:7},"Expected CM %"),E.map((function(e,t){return l.a.createElement(h.a,{span:4,key:t},l.a.createElement(Vl,{value:e,max:100,shape:"%",onChange:function(e){return function(e,t){E[t]=null!==e&&void 0!==e?e:0,k(Object(et.a)(E))}(e,t)}}))}))),l.a.createElement(p.a,{align:"bottom"},l.a.createElement(h.a,{span:8,className:"label bold"},"Employee Daily Sell Rate"),E.map((function(e,t){return l.a.createElement(h.a,{span:4,className:"bold",key:t},ce(I*(f+j)/(1-e/100)))}))))):l.a.createElement(p.a,{className:"buy-sell-calculator ",align:"middle",justify:"center"},l.a.createElement(h.a,{span:12,className:"no-active"},l.a.createElement(Ye.a.Text,{type:"danger",mark:!0},"No Active Contract")),l.a.createElement(h.a,{span:12,className:"no-active"},l.a.createElement(Ye.a.Text,{type:"danger",mark:!0},"No Active Contract")))," ")},Hl=Bn.b.Item,Ul=In.a.TabPane,Gl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(pe().permissions).USERS;gl(t).then((function(n){n.success?e.setState({data:n.basic,contract:n.billing,bank:n.bank,permissions:a,emp:t,infoModal:!1}):n.authError&&e.setState({notAuth:!0})}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){var a=e.props.history;zn(a,"/employees",t).then((function(e){e.success}))},e.toggleActiveStatus=function(t){(function(e){return $.b.loading({content:"Loading...",key:e}),it.a.put(vl+"/".concat(e,"/toggleActive"),{},{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l?(fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}):{success:l,data:o}})).catch((function(t){return ge(t,e,5)}))})(t).then((function(t){t.success&&e.setState({data:Object(tt.a)(Object(tt.a)({},e.state.data),{},{active:!e.state.data.active})})}))},e.callBack=function(){var t=e.state.emp;e.getRecord(t)},e.state={infoModal:!1,emp:!1,data:{},bank:{},contract:{},permissions:{},notAuth:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,r=t.emp,o=t.bank,i=t.notAuth,c=t.contract,u=t.permissions,d=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,"Basic Information"),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===u||void 0===u?void 0:u.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(r)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",disabled:!(null===u||void 0===u?void 0:u.UPDATE),onClick:function(){e.setState({infoModal:!0})}},"Edit"),l.a.createElement(b.a.Item,{key:"contracts"},l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(r,"/contracts")},className:"nav-link"},"Contract History")),l.a.createElement(b.a.Item,{key:"novated-lease"},l.a.createElement(s.b,{to:{pathname:"/Employee/".concat(r,"/novated-lease")},className:"nav-link"},"Novated Lease")),l.a.createElement(b.a.Item,{key:"deactive",disabled:!(null===u||void 0===u?void 0:u.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to ".concat(a.active?"Deactivate":"Activate"),onConfirm:function(){return e.toggleActiveStatus(r)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," ",a.active?"Deactivate":"Activate"," "))))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:d,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Hl,{label:"First Name"},a.firstName),l.a.createElement(Hl,{label:"Last Name"},a.lastName),l.a.createElement(Hl,{label:"Phone"},a.phoneNumber," "),l.a.createElement(Hl,{label:"Email"},a.email),l.a.createElement(Hl,{label:"Address"},a.address),l.a.createElement(Hl,{label:"Date Of Birth"},me(a.dateOfBirth,!0,!0)),l.a.createElement(Hl,{label:"Gender"},oe[a.gender]),l.a.createElement(Hl,{label:"Employment Status"},ne[null===c||void 0===c?void 0:c.type])),r&&l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Ul,{tab:"Opportunities",key:"leads"},l.a.createElement(nl,{targetId:r,customUrl:"helpers/work?type=O&employee=".concat(r)})),l.a.createElement(Ul,{tab:"Project",key:"project"},l.a.createElement(al,{targetId:r,customUrl:"helpers/work?type=P&employee=".concat(r)})),l.a.createElement(Ul,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetType:"EMP",targetId:r})),l.a.createElement(Ul,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetType:"EMP",targetId:r})),l.a.createElement(Ul,{tab:"Bank Account",key:"account"},l.a.createElement(rl,{targetType:"EMP",targetId:r,title:a.name,bank:o})),l.a.createElement(Ul,{tab:"Leave Balance",key:"leaveBalance"},l.a.createElement(Yl,{empId:r,editable:!0})),l.a.createElement(Ul,{tab:"Cost Calculator",key:"cost-calculator"},l.a.createElement(ql,{empId:r}))),n&&l.a.createElement(Sl,{visible:n,editEmp:r,close:this.closeModal,callBack:this.callBack}),i&&l.a.createElement(ul,this.props))}}]),a}(n.Component),Wl="".concat(J,"/employment-contracts"),Kl=function(e){return it.a.get(Wl+"?employeeId=".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))};function $l(){$l=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Jl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getData()},e.onFinish=function(t){e.setState({loading:!0});var a=e.props,n=a.editCntrct,l=a.editEmp,r=e.state.fileIds,o=t.billing;o=Object(tt.a)(Object(tt.a)({},o),{},{noOfHoursPer:1,remunerationAmountPer:1===o.type?1:7,startDate:me(o.startDate,!0),endDate:me(o.endDate,!0),employeeId:l,fileId:r,leaveRequestPolicyId:o.leaveRequestPolicyId||null}),n?e.editRecord(o):e.addContract(o)},e.addContract=function(t){var a=e.props.callBack;(function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(Wl,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){e.setState({loading:!1}),t.success&&a()}))},e.getData=function(){var t,a=e.props.editCntrct;Promise.all([$t(),a&&(t=a,it.a.get(Wl+"/".concat(t),{headers:ye()}).then((function(e){var t,a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),l&&(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),r.leaveRequestPolicyId=null!==(a=r.leaveRequestPolicyId)&&void 0!==a?a:0,r.file=r.fileId?[{id:r.file.id,createdAt:r.file.createdAt,fileId:r.file.id,uid:r.file.uniqueName,name:r.file.originalName,type:r.file.type,url:"".concat(J,"/files/").concat(r.file.uniqueName),thumbUrl:ve(r.file.type)}]:[]),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}})))]).then((function(t){var a=e.state.BillingFields;a[19].data=t[0].success?t[0].data:[];var n=t[1],l=n.success,r=n.data;l&&(a[13].Placeholder=1===r.type?"Hourly Base Salary":"Annual Base Salary",r.startDate=me(r.startDate),r.endDate=me(r.endDate),e.formRef.current.setFieldsValue({billing:r})),e.setState({fileIds:l?r.fileId:null,fileList:l?r.file:[],BillingFields:a})}))},e.editRecord=function(t){var a=e.props,n=a.editCntrct,l=a.callBack;(function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(Wl+"/".concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message;(he(r),$.b.success({content:r,key:e}),l)&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization);return{success:l}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(n,t).then((function(t){e.setState({loading:!1}),t.success&&l()}))},e.handleUpload=function(){var t=Object(dn.a)($l().mark((function t(a){var n,l,r,o,i;return $l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editCntrct:!1,loading:!1,imgLoading:!1,fileList:[],fileIds:null,data:{},BillingFields:[{Placeholder:"Employment Status",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Back Office Rate of Effort",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",rules:[{required:!0,message:"Status is Required"}],onChange:function(t){var a=e.state.BillingFields;1===t?(a[13].Placeholder="Hourly Base Salary",e.setState({BillingFields:a})):(a[13].Placeholder="Annual Base Salary",e.setState({BillingFields:a}))},itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"bohPercent",size:"small",type:"InputNumber",rules:[{required:!0,message:"BOH Rate is Required"}],shape:"%",rangeMin:0,rangeMax:100,itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"payslipEmail",size:"small",type:"input",rules:[{type:"email",message:"The input is not valid e-mail!"}],itemStyle:{marginBottom:1}},{Placeholder:"Work Hours In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Days In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hours is Required"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfDays",size:"small",type:"InputNumber",rangeMin:1,rangeMax:5,fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Days are Required"}],itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:1},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Salary is Required"}],itemStyle:{marginBottom:1}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Leave Policy",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"payFrequency",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"leaveRequestPolicyId",size:"small",data:[],type:"Select",rules:[{required:!0,message:"Policy is required"}],itemStyle:{marginBottom:1}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editCntrct,a=e.visible,n=e.close,r=this.state,o=r.BillingFields,i=r.loading,s=r.fileList;return l.a.createElement(ta.a,{title:t?"Edit Billing":"Add Billing",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:i,htmlType:"submit",form:"my-form"},okText:i?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{entryDate:me(new Date)}}},l.a.createElement(Rt,{FormFields:o})),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:s,onRemove:this.onRemove},s.length<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))}}]),a}(n.Component),Xl=(Ye.a.Title,Bn.b.Item),Zl=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){var a=JSON.parse(pe().permissions).USERS;Promise.all([Kl(t),gl(t)]).then((function(t){e.setState({data:t[0].data,filterData:t[0].data,intro:t[1].basic,billModal:!1,editCntrct:!1,permissions:a})})).catch((function(e){console.log(e)}))},e.getList=function(t){Kl(t).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,billModal:!1,editCntrct:!1})}))},e.callBack=function(){var t=e.props.match.params.id;e.getList(t)},e.handleDelete=function(t,a){var n=e.state,l=n.data,r=n.filterData,o=e.props.history;zn(o,"/employment-contracts",t,a,r,l).then((function(t){t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){var a,n,l;return"00".concat(e.id).includes(t)||e.startDate&&"".concat(me(e.startDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||e.endDate&&"".concat(me(e.endDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||"".concat(null!==(a=ce(e.remunerationAmount))&&void 0!==a?a:"").toLowerCase().includes(t.toLowerCase())||"".concat(null!==(n=re[e.remunerationAmountPer])&&void 0!==n?n:"").toLowerCase().includes(t.toLowerCase())||"".concat(null!==(l=ne[e.remunerationAmountPer])&&void 0!==l?l:"").toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",wdith:115,render:function(e){return"00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),{title:"Employment Type",dataIndex:"type",key:"type",render:function(e){return ne[e]}},Object(tt.a)({title:"Base Remuneration",dataIndex:"remunerationAmount",key:"remunerationAmount",render:function(e){return"".concat(ce(e))}},Ea("remunerationAmount","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o,i,s,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(e))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",disabled:!(null===(s=Object(on.a)(e))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE),onClick:function(){e.setState({billModal:!0,editCntrct:a.id})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={intro:{},data:[],billModal:!1,editCntrct:!1,openSearch:!1,filterData:[],permissions:{}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.billModal,n=t.editCntrct,r=(t.data,t.intro),o=t.filterData,i=this.props.match.params.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Contract History",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Xl,null,"Code: ",l.a.createElement("b",null,r.cpCode)),l.a.createElement(Xl,null,"First Name: ",l.a.createElement("b",null,r.firstName)),l.a.createElement(Xl,null,"Last Name: ",l.a.createElement("b",null,r.lastName)),l.a.createElement(Xl,{style:{textAlign:"right"}},l.a.createElement(rt.a,{size:"small",type:"primary",onClick:function(){return e.setState({billModal:!0})}},l.a.createElement(na.a,null)," Contract"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}),a&&l.a.createElement(Jl,{visible:a,editCntrct:n,close:function(){return e.setState({billModal:!1,editCntrct:!1})},callBack:this.callBack,editEmp:i}))}}]),a}(n.Component),Ql="".concat(J,"/employees/"),er=function(e){return it.a.get(Ql+"".concat(e,"/leases"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},tr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editLease,n=t.empId;a&&e.getRecord(n,a)},e.onFinish=function(t){var a=e.props,n=a.editLease,l=a.empId,r=t.obj;r=Object(tt.a)(Object(tt.a)({},r),{},{employeeId:l,startDate:me(r.startDate,!0),endDate:me(r.endDate,!0)}),n?e.editRecord(r):e.addContract(r)},e.addContract=function(t){e.setState({loading:!0});var a=e.props,n=a.callBack;(function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.post(Ql+"".concat(e,"/leases"),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(a.empId,t).then((function(e){console.log(e),e.success&&n()}))},e.getRecord=function(t,a){(function(e,t){return it.a.get(Ql+"".concat(e,"/leases/").concat(t),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;(he(r),n)&&(l.startDate=me(l.startDate),l.endDate=me(l.endDate),l.totalDeduction=(l.preTaxDeductionAmount?l.preTaxDeductionAmount:0)+(l.postTaxDeductionAmount?l.postTaxDeductionAmount:0),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization));return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t,a).then((function(t){var a=t.success,n=t.data;a&&e.leaseRef.current.setFieldsValue({obj:n})}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editLease,l=a.callBack;(function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put(Ql+"".concat(e,"/leases/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l}})).catch((function(e){return $.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))})(a.empId,n,t).then((function(e){e.success&&l()}))},e.leaseRef=l.a.createRef(),e.state={leaseSubmitted:!1,loading:!1,LeaseFields:[{Placeholder:"Leasing Company Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Lease Start Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"companyName",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},rangeMin:function(t){var a=e.leaseRef.current.getFieldValue(["obj","endDate"]);return be(t,a,"start")}},{Placeholder:"Lease End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Vehicle Registration Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},rangeMax:function(t){var a=e.leaseRef.current.getFieldValue(["obj","startDate"]);return be(t,a,"end")}},{object:"obj",fieldCol:12,key:"vehicleRegistrationNo",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{Placeholder:"Vehicle Make And Model",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Financer Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"vehicleMakeModel",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"financerName",size:"small",type:"Input",labelAlign:"left",itemStyle:{marginBottom:10}},{Placeholder:"Amount Financed",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Installment Frequency",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"financedAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"obj",fieldCol:12,key:"installmentFrequency",size:"small",data:[{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5},{label:"Quarterly",value:6}],type:"Select",itemStyle:{marginBottom:1}},{Placeholder:"Pre Tax Deduction",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Post Tax Deduction",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"preTaxDeductionAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},onChange:function(){var t=e.leaseRef.current.getFieldsValue().obj;t.totalDeduction=(t.preTaxDeductionAmount?t.preTaxDeductionAmount:0)+(t.postTaxDeductionAmount?t.postTaxDeductionAmount:0),e.leaseRef.current.setFieldsValue({obj:t})}},{object:"obj",fieldCol:12,key:"postTaxDeductionAmount",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10},onChange:function(){var t=e.leaseRef.current.getFieldsValue().obj;t.totalDeduction=(t.preTaxDeductionAmount?t.preTaxDeductionAmount:0)+(t.postTaxDeductionAmount?t.postTaxDeductionAmount:0),e.leaseRef.current.setFieldsValue({obj:t})}},{Placeholder:"Total Deduction",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"totalDeduction",size:"small",type:"InputNumber",labelAlign:"left",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editLease,a=e.visible,n=e.close,r=this.state,o=r.LeaseFields,i=r.loading;return l.a.createElement(ta.a,{title:t?"Edit Novated Lease":"Add Novated Lease",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:i,htmlType:"submit",form:"my-form"},okText:i?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.leaseRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:o})))}}]),a}(n.Component),ar=Ye.a.Title,nr=Bn.b.Item,lr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([er(t),gl(t)]).then((function(a){e.setState({data:a[0].data,filterData:a[0].data,employee:a[1].basic?a[1].basic:{},infoModal:!1,empId:t,editLease:!1})})).catch((function(e){console.log(e)}))},e.getList=function(){var t=e.state.empId;er(t).then((function(t){e.setState({data:t.data,filterData:t.data,infoModal:!1,editLease:!1})}))},e.handleDelete=function(t,a){console.log({id:t,index:a});var n=e.state.empId,l="/employees/".concat(n,"/leases"),r=e.state,o=r.data,i=r.filterData,s=e.props.history;zn(s,l,t,a,i,o).then((function(t){console.log(t),t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.closeModal=function(){e.setState({infoModal:!1,editLease:!1})},e.callBack=function(t){e.getList()},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){var a,n,l;return"".concat(null!==(a=e.companyName)&&void 0!==a?a:"").toLowerCase().includes(t.toLowerCase())||"".concat(null!==(n=e.financerName)&&void 0!==n?n:"").toLowerCase().includes(t.toLowerCase())||e.startDate&&"".concat(me(e.startDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||e.endDate&&"".concat(me(e.endDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||"".concat(null!==(l=e.financedAmount)&&void 0!==l?l:"").toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.columns=[Object(tt.a)({title:"Company Name",dataIndex:"companyName",key:"companyName"},Ea("companyName","string")),Object(tt.a)({title:"Financer Name",dataIndex:"financerName",key:"financerName"},Ea("financerName","string")),Object(tt.a)({title:"Finance Amount",dataIndex:"financedAmount",key:"financedAmount",render:function(e){return"".concat(ce(e))}},Ea("financedAmount","number")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),{title:"...",key:"id",dataIndex:"id",align:"center",width:"1%",render:function(t,a,n){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(t,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){e.setState({infoModal:!0,editLease:t})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={infoModal:!1,empId:!1,data:[],employee:{},editLease:!1,openSearch:!1,filterData:[]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.infoModal),n=t.empId,r=t.employee,o=t.editLease,i=t.filterData,s=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Employee Information",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(nr,{label:"First Name"},r.firstName),l.a.createElement(nr,{label:"Last Name"},r.lastName),l.a.createElement(nr,{label:"Phone"},r.phoneNumber," "),l.a.createElement(nr,{label:"Email"},r.email),l.a.createElement(nr,{label:"Address"},r.address),l.a.createElement(nr,{label:"Date Of Birth"},me(r.dateOfBirth,!0,!0)),l.a.createElement(nr,{label:"Gender"},r.gender)),l.a.createElement(p.a,{justify:"space-between",style:{paddingTop:30}},l.a.createElement(h.a,null,l.a.createElement(ar,{level:4},"Novated Lease")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({infoModal:!0,editLease:!1})},size:"small"},l.a.createElement(na.a,null),"Novated Lease")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:s,dataSource:i,size:"small",className:"fs-small"}))),a&&l.a.createElement(tr,{visible:a,empId:n,editLease:o,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),rr="".concat(J,"/sub-contractors"),or=function(e){return it.a.get(rr+"/".concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o=function(e){var t=e.contactPersonOrganization?e.contactPersonOrganization.contactPerson:{},a=e.contactPersonOrganization?e.contactPersonOrganization.organization:{},n={cpCode:"Sub-00".concat(t.id),firstName:t.firstName,lastName:t.lastName,gender:t.gender,dateOfBirth:me(t.dateOfBirth),phoneNumber:t.phoneNumber,email:t.email,address:t.address,stateId:t.stateId,username:e.username,roleId:e.roleId,lineManagerId:e.lineManagerId,organization:{name:a.name,id:a.id},birthPlace:t.birthPlace,active:e.active},l={nextOfKinDateOfBirth:me(e.nextOfKinDateOfBirth),nextOfKinEmail:e.nextOfKinEmail,nextOfKinGender:e.nextOfKinGender,nextOfKinName:e.nextOfKinName,nextOfKinPhoneNumber:e.nextOfKinPhoneNumber,nextOfKinRelation:e.nextOfKinRelation},r=e.employmentContracts.length>0?e.employmentContracts[0]:{},o={employeeId:r.employeeId,payslipEmail:r.payslipEmail,startDate:me(r.startDate),endDate:me(r.endDate),noOfHours:r.noOfHours,noOfDays:r.noOfDays,noOfHoursPer:r.noOfHoursPer,remunerationAmount:r.remunerationAmount,remunerationAmountPer:r.remunerationAmountPer,comments:r.comments,fileId:r.fileId,file:r.fileId?[{id:r.file.id,createdAt:r.file.createdAt,fileId:r.file.id,uid:r.file.uniqueName,name:r.file.originalName,type:r.file.type,url:"".concat(J,"/files/").concat(r.file.uniqueName),thumbUrl:ve(r.file.type)}]:[]};return{basic:n,kin:l,billing:o}}(n),i=o.basic,s=o.kin,c=o.billing;return fe(null===e||void 0===e||null===(r=e.headers)||void 0===r?void 0:r.authorization),{success:a,data:n,basic:i,billing:c,kin:s}}return{success:!1}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))};function ir(){ir=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var sr=In.a.TabPane,cr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.state.editCont;t&&e.getRecord(t),_t().then((function(t){t.success&&e.setState({ORGS:t.data.filter((function(e){return 1!==e.value}))})}))},e.componentDidMount=function(){var t=e.props.editCont;e.fetchAll(t)},e.fetchAll=function(t){Promise.all([At(),Wt(),t?e.getRecord(t):_t(),Bt("helpers/contact-persons?organizationId=1")]).then((function(a){var n=e.state,l=n.BasicFields,r=n.ManagerFields,o=n.BillingFields;l[15].data=a[0].data,l[3].data=a[1].data,r[1].data=a[3].data,o[5].Placeholder=t&&"Total Fee ".concat(re[a[2].paymentBase]),e.setState({BasicFields:l,ManagerFields:r,BillingFields:o,sUsername:t?a[2].username:null,ORGS:t?[]:a[2].data.filter((function(e){return 1!==e.value}))})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a=e.props.editCont;e.setState({loading:!0});var n=e.state.fileIds,l=t.basic,r=t.billing,o=t.kin,i=Object(tt.a)(Object(tt.a)(Object(tt.a)({},l),{},{dateOfBirth:me(l.dateOfBirth,!0)},o),{},{latestContract:Object(tt.a)(Object(tt.a)({},r),{},{fileId:n,startDate:me(r.startDate,!0),endDate:me(r.endDate,!0)})});a?e.editRecord(i):e.addContactor(i)},e.addContactor=function(t){var a=e.props.callBack,n=e.state;n.sContact,n.sOrg;console.log(t),function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(rr,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:e.data}):{success:!1}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))}(t).then((function(t){e.setState({loading:!1}),t.success&&a()}))},e.getRecord=function(t){return or(t).then((function(t){if(t.success){var a=t.basic,n=t.kin,l=t.billing;return e.formRef.current.setFieldsValue({basic:a,kin:n,billing:l}),e.setState({fileIds:l.fileId,fileList:l.file}),{username:a.username,paymentBase:l.remunerationAmountPer}}}))},e.editRecord=function(t){var a,n,l=e.props,r=l.editCont,o=l.callBack;(a=r,n=t,$.b.loading({content:"Loading...",key:a}),it.a.put(rr+"/".concat(a),n,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l}})).catch((function(e){return $.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){e.setState({loading:!1}),t.success&&o()}))},e.onCancel=function(){e.props.close()},e.onOrg=function(t){var a="helpers/contact-persons?organizationId=".concat(t,"&active=0&associated=1");Bt(a).then((function(a){a.success&&e.setState({sOrg:t,CONTACTS:a.data})}))},e.onPerson=function(t){yl(t).then((function(a){a.success&&(a.data.cpCode="Con-00".concat(a.data.id),a.data.dateOfBirth=me(a.data.dateOfBirth),e.formRef.current.setFieldsValue({basic:a.data}),e.setState({sContact:t}))}))},e.onClear=function(t,a){e.setState({sContact:a,sOrg:t},(function(){e.formRef.current.resetFields()}))},e.handleUpload=function(){var t=Object(dn.a)(ir().mark((function t(a){var n,l,r,o,i;return ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.onFinishFailed=function(t){t.values;var a=t.errorFields;t.outOfDate;e.setState({activeKey:a[0].name[0]})},e.formRef=l.a.createRef(),e.state={editCont:!1,CONTACTS:[],sContact:null,ORGS:[],sOrg:null,sUsername:null,loading:!1,activeKey:"basic",fileIds:null,fileList:[],data:{},BasicFields:[{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Role",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"cpCode",size:"small",rules:[{required:!0,message:"Code is Required"}],type:"Input",readOnly:!0,labelAlign:"left",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"roleId",size:"small",rules:[{required:!0,message:"Role is required!!"}],type:"Select",data:[],itemStyle:{marginBottom:10}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{fieldCol:12,size:"small",Placeholder:"Last Name",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:5}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",rules:[{type:"email",message:"The input is not valid e-mail!"}],type:"Input",disabled:!1,itemStyle:{marginBottom:10}},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Others",value:"O"}],itemStyle:{marginBottom:10},type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{Placeholder:"Birth Place",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"birthPlace",size:"small",type:"Input",itemStyle:{marginBottom:20}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:"10px"}}],KinFields:[{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:1}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:1}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Contractor",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",rules:[{type:"email",message:"The input is not valid e-mail!"}],type:"input",itemStyle:{marginBottom:10}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}],BillingFields:[{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is Required"}],itemStyle:{marginBottom:1},rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"End Date is Required"}],itemStyle:{marginBottom:1},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{Placeholder:"Contract Payment Basis",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Total Fee",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"remunerationAmountPer",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is Required"}],onChange:function(t,a){var n=e.state.BillingFields;n[5].Placeholder="Total Fee ".concat(t?a.label:""),e.setState({BillingFields:n})},itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Total Fee is Required"}],itemStyle:{marginBottom:1}},{Placeholder:"Work Hours In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Days In A Week",rangeMin:!0,fieldCol:18,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hour is Reqired"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfDays",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Days are Required"}],itemStyle:{marginBottom:10}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}],ManagerFields:[{Placeholder:"Contractor Manager",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"lineManagerId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:10}}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editCont,n=t.visible,r=this.state,o=r.BasicFields,i=r.BillingFields,s=r.KinFields,c=r.ManagerFields,u=r.sContact,d=r.CONTACTS,m=r.ORGS,f=r.sOrg,p=r.fileIds,y=r.loading,v=r.fileList,g=r.activeKey;return l.a.createElement(ta.a,{title:a?"Edit Subcontractor":"Add Subcontractor",maskClosable:!1,centered:!0,visible:n,okButtonProps:{disabled:y,htmlType:"submit",form:"my-form"},okText:y?l.a.createElement(la.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{startDate:null}}},!a&&l.a.createElement(h.a,{span:7,style:{marginBottom:"1em"}},l.a.createElement(nt.a.Item,{name:["basic","organizationId"]},l.a.createElement(vt.a,{value:f,placeholder:"Organization",options:m,showArrow:!0,size:"small",allowClear:!0,onChange:this.onOrg,onClear:function(){return e.onClear(null,null)},showSearch:!0,optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),!a&&l.a.createElement(h.a,{span:7,style:{marginLeft:"auto"}},l.a.createElement(nt.a.Item,{name:["basic","contactPersonId"]},l.a.createElement(vt.a,{value:u,placeholder:"Contact Person",options:d,showArrow:!0,disabled:!f,size:"small",allowClear:!0,onChange:this.onPerson,onClear:function(){return e.onClear(f,null)},showSearch:!0,optionFilterProp:"label",filterOption:function(e,t){return t.label.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:"100%"}}))),l.a.createElement(h.a,{span:a?8:7,style:{marginLeft:"auto",marginBottom:10}},l.a.createElement(nt.a.Item,{name:["basic","username"],rules:[{type:"email",message:"The input is not valid e-mail!"},{required:!0,message:"Email is Required"}]},l.a.createElement(ht.a,{placeholder:"Email",size:"small",style:{width:"100%"}}))),l.a.createElement(In.a,{type:"card",activeKey:g,onChange:function(t){e.setState({activeKey:t})}},l.a.createElement(sr,{tab:"Contractor Details",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:o})),l.a.createElement(sr,{tab:"Subcontractor Contracts",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:i}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:v,onRemove:this.onRemove},!p&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(sr,{tab:"Next of Kin",key:"kin",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:s})),l.a.createElement(sr,{tab:"Contractor Manager",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:c})))))}}]),a}(n.Component),ur=Ye.a.Title,dr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getList()},e.getList=function(){var t=JSON.parse(pe().permissions).USERS;it.a.get(rr,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;if(he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(a){a.success&&e.setState({data:a.data,filterData:a.data,infoModal:!1,editCont:!1,permissions:t})}))},e.callBack=function(){e.getList()},e.handleDelete=function(t,a){var n=e.state,l=n.data,r=n.filterData,o=e.props.history;zn(o,"/sub-contractors",t,a,r,l).then((function(t){t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.closeModal=function(){e.setState({infoModal:!1,editCont:!1})},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){var a=e.contactPersonOrganization.contactPerson,n=a.firstName,l=a.lastName,r=a.email,o=a.phoneNumber,i=a.id,s=e.contactPersonOrganization.organization.name;return"Sub-00".concat(i.toString()).includes(t)||n&&n.toLowerCase().includes(t.toLowerCase())||l&&l.toLowerCase().includes(t.toLowerCase())||s&&s.toLowerCase().includes(t.toLowerCase())||r&&r.toLowerCase().includes(t.toLowerCase())||o&&o.startsWith(t)}))}):e.setState({filterData:a})},e.advancefilter=function(t,a,n){var l=e.state,r=l.data,o=l.searchedColumn;a?o[a].value=t:o=n,o.id.value||o.firstName.value||o.lastName.value||o.email.value||o.phoneNumber.value||o.gender.value.length>0||o.stateId.value.length>0||o.address.value||o.role.value.length>0||o.clearanceLevel.value.length>0||o.organization.value.length>0?e.setState({filterData:r.filter((function(e){var t=e.contactPersonOrganization.contactPerson,a=t.firstName,n=t.lastName,l=t.email,r=t.phoneNumber,i=t.id,s=t.gender,c=t.stateId,u=t.clearanceLevel,d=t.address,m=e.contactPersonOrganization.organizationId;return"Sub-".concat(i.toString()).includes(o.id.value)&&"".concat(null!==a&&void 0!==a?a:"").toLowerCase().includes(o.firstName.value.toLowerCase())&&"".concat(null!==n&&void 0!==n?n:"").toLowerCase().includes(o.lastName.value.toLowerCase())&&"".concat(null!==l&&void 0!==l?l:"").toLowerCase().includes(o.email.value.toLowerCase())&&"".concat(null!==r&&void 0!==r?r:"").toLowerCase().includes(o.phoneNumber.value.toLowerCase())&&"".concat(null!==d&&void 0!==d?d:"").toLowerCase().includes(o.address.value.toLowerCase())&&(o.gender.value.length>0?o.gender.value:[{value:","}]).some((function(e){return(o.gender.value.length>0?[s]:[","]).includes(e.value)}))&&(o.stateId.value.length>0?o.stateId.value:[{value:","}]).some((function(e){return(o.stateId.value.length>0?[c]:[","]).includes(e.value)}))&&(o.role.value.length>0?o.role.value:[{value:","}]).some((function(t){return(o.role.value.length>0?[e.roleId]:[","]).includes(t.value)}))&&(o.organization.value.length>0?o.organization.value:[{value:","}]).some((function(e){return(o.organization.value.length>0?[m]:[","]).includes(e.value)}))&&(o.clearanceLevel.value.length>0?o.clearanceLevel.value:[{value:","}]).some((function(e){return(o.clearanceLevel.value.length>0?[u]:[","]).includes(e.value)}))})),searchedColumn:o,openSearch:!1}):e.setState({searchedColumn:o,filterData:r})},e.filterModalUseEffect=function(){Promise.all([At(),Wt(),_t()]).then((function(t){var a=e.state.filterFields;a[11].data=t[0].success?t[0].data:[],a[14].data=t[1].success?t[1].data:[],a[15].data=t[2].success?t[2].data.filter((function(e){return 1!==e.value})):[],e.setState({filterFields:a})})).catch((function(e){console.log(e)}))},e.columns=[Object(tt.a)({title:"Code",dataIndex:["contactPersonOrganization","contactPersonId"],key:"contactPersonId",width:115,render:function(e){return"Sub-00".concat(e)}},Ea("contactPersonOrganization.contactPersonId","number")),Object(tt.a)({title:"First Name",dataIndex:["contactPersonOrganization","contactPerson","firstName"],key:"firstName",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(t.id,"/info")},className:"nav-link"},e)}},Ea("contactPersonOrganization.contactPerson.firstName","string")),Object(tt.a)({title:"Last Name",dataIndex:["contactPersonOrganization","contactPerson","lastName"],key:"lastName"},Ea("contactPersonOrganization.contactPerson.lastName","string")),Object(tt.a)(Object(tt.a)({title:"Organisation",dataIndex:["contactPersonOrganization","organization"],key:"organization"},Ea("contactPersonOrganization.organization.name","string")),{},{render:function(e,t){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}}),{title:"Phone",dataIndex:["contactPersonOrganization","contactPerson","phoneNumber"],key:"phoneNumber"},{title:"Email",dataIndex:["contactPersonOrganization","contactPerson","email"],key:"email"},Object(tt.a)({title:"Status",dataIndex:"active",key:"status",width:"8%",render:function(e){return l.a.createElement(jl,{text:"".concat(e),objName:"ACTIVE_STATUS",colorName:"ACTIVE_STATUS_COLORS"})}},Ea("active","string",!0,!0)),{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o,i;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Delete",danger:!0,disabled:!(null===(r=Object(on.a)(e))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){e.setState({infoModal:!0,editCont:a.id})},disabled:e.state&&!e.state.permissions.UPDATE},"Edit"),l.a.createElement(b.a.Item,{key:"View"},l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(a.id,"/info")},className:"nav-link"},"View")),l.a.createElement(b.a.Item,{key:"Contracts"},l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(a.id,"/contracts")},className:"nav-link"},"Contracts")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={infoModal:!1,editCont:!1,data:[],permissions:{},filterData:[],openSearch:!1,searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},firstName:{type:"Input",value:"",label:"First Name",showInColumn:!0},lastName:{type:"Input",value:"",label:"Last Name",showInColumn:!0},organization:{type:"Select",multi:!0,value:[],label:"Organisation",showInColumn:!0},phoneNumber:{type:"Input",value:"",label:"Phone Number",showInColumn:!0},email:{type:"Input",value:"",label:"Email",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},stateId:{type:"none",multi:!0,value:[],label:"State",showInColumn:!1,disabled:!1},clearanceLevel:{type:"none",multi:!0,value:[],label:"clearanceLevel",showInColumn:!1,disabled:!1},gender:{type:"Select",multi:!0,value:[],label:"Gender",showInColumn:!1},address:{type:"none",value:"",label:"Address",showInColumn:!1,disabled:!1},role:{type:"none",multi:!0,value:[],label:"Role",showInColumn:!1,disabled:!1}},filterFields:[{fieldCol:12,size:"small",Placeholder:"First Name",type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",type:"Text",labelAlign:"left"},{object:"obj",fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left"},{object:"obj",fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",type:"Text",labelAlign:"left"},{object:"obj",fieldCol:12,key:"phoneNumber",size:"small",type:"input"},{object:"obj",fieldCol:12,key:"email",size:"small",type:"Input"},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"gender",mode:"multiple",customValue:function(e,t){return t},size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],type:"Select"},{object:"obj",fieldCol:12,mode:"multiple",customValue:function(e,t){return t},key:"stateId",size:"small",type:"Select",data:[]},{Placeholder:"Role",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Organization",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,mode:"multiple",customValue:function(e,t){return t},key:"role",size:"small",type:"Select",data:[]},{object:"obj",fieldCol:12,mode:"multiple",customValue:function(e,t){return t},key:"organization",size:"small",type:"Select",data:[]},{Placeholder:"Clearance Level",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"clearanceLevel",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select"},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.infoModal),n=t.editCont,r=t.permissions,o=t.filterData,i=t.searchedColumn,s=t.filterFields,c=t.openSearch,u=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(ur,{level:4},"Sub Contractors")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"space-between",gutter:17},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small",disabled:!r.ADD},l.a.createElement(na.a,null),"Subcontactors")))),l.a.createElement(Ca,{filters:i,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:u,dataSource:o,size:"small",className:"fs-small"}))),c&&l.a.createElement(Sa,{title:"Filter Subcontractors",visible:c,filters:i,filterFields:s,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),a&&l.a.createElement(cr,{visible:a,editCont:n,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component);function mr(e){var t=e.value,a=e.shape,n=e.onChange,r=e.min,o=e.max;return l.a.createElement(yt.a,{size:"small",value:t,formatter:function(e){return Tt(e,a)},parser:function(e){return Nt(e,a)},onChange:n,min:r,max:o})}var fr=function(e){var t=Object(n.useState)({}),a=Object(G.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),s=Object(G.a)(i,2),c=s[0],u=s[1],d=Object(n.useState)(0),m=Object(G.a)(d,2),f=m[0],y=m[1],v=Object(n.useState)([20,25,30,40]),g=Object(G.a)(v,2),E=g[0],k=g[1],S=Object(n.useState)(0),C=Object(G.a)(S,2),j=C[0],O=C[1],x=Object(n.useState)(8),w=Object(G.a)(x,2),I=w[0],D=w[1];Object(n.useEffect)((function(){Xt("sub-contractors",e.conId).then((function(e){if(e.success){var t=e.data,a=t.contract,n=t.golobalVariables,l=t.employeeBuyRate;y(l),o(a),u(n)}}))}),[]);return l.a.createElement("div",null,r.hourlyBaseRate?l.a.createElement(p.a,{className:"buy-sell-calculator"},l.a.createElement(h.a,{span:12,className:"buy-cost calculator"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24,className:"mb-10"},l.a.createElement(Ye.a.Title,{level:5},"Buy Rate Calculator - Contractor")),l.a.createElement(h.a,{span:16,className:"label"},"Daily Hours"),l.a.createElement(h.a,{span:8,className:"item"},ue(null===r||void 0===r?void 0:r.dailyHours)),l.a.createElement(h.a,{span:16,className:"label"},"Hourly Cost"),l.a.createElement(h.a,{span:8,className:"item"},ce(null===r||void 0===r?void 0:r.hourlyBaseRate)),l.a.createElement(h.a,{span:5,offset:16,className:"item"},l.a.createElement(Ye.a.Text,{underline:!0,strong:!0},"Applicable")),c.map((function(e,t){return l.a.createElement(h.a,{span:24,key:t},l.a.createElement(p.a,null,"  ",l.a.createElement(h.a,{span:12,className:"label"},ie[e.name]?"Payroll Tax - ".concat(ie[e.name]):e.name),l.a.createElement(h.a,{span:4,className:"item"},"".concat(e.value,"%")),l.a.createElement(h.a,{span:4,className:"item"},l.a.createElement(De.a,{trigger:["click"],overlay:l.a.createElement(b.a,{style:{backgroundColor:"#f6f4f1"},onClick:function(e){!function(e,t){var a=c;a[t].apply=e;var n=null===r||void 0===r?void 0:r.hourlyBaseRate;a=a.map((function(e,t){return e.amount="Yes"===e.apply?(null===r||void 0===r?void 0:r.hourlyBaseRate)*e.value/100:0,n+=e.amount,e})),y(n+(null===r||void 0===r?void 0:r.hourlyBaseRate)),u(Object(et.a)(a))}(null===e||void 0===e?void 0:e.key,t)}},l.a.createElement(b.a.Item,{key:"Yes"},"Yes"),l.a.createElement(b.a.Item,{key:"No"},"No"))},l.a.createElement("span",{className:"mouse-pointer"},e.apply))),l.a.createElement(h.a,{span:4,className:"item"},ce(e.amount))))})),l.a.createElement(h.a,{span:16,className:"label my-30"},"Adjustment"),l.a.createElement(h.a,{span:8,className:"item my-30"},l.a.createElement(mr,{value:j,shape:"$",onChange:function(e){O(null!==e&&void 0!==e?e:0)}})),l.a.createElement(h.a,{span:16,className:"label bold my-20"}," Contractor Hourly Buy Rate"),l.a.createElement(h.a,{span:8,className:"item bold my-20"}," ",ce(f+j)),l.a.createElement(h.a,{span:12,className:"label mb-10"},"Daily Billable Hours"),l.a.createElement(h.a,{span:6,className:"item bold mb-10"},l.a.createElement(mr,{value:I,onChange:function(e){D(null!==e&&void 0!==e?e:0)}})),l.a.createElement(h.a,{span:16,className:"label bold"}," Contractor Daily Buy Rate"),l.a.createElement(h.a,{span:8,className:"item bold total-cost pr-5"}," ",ce(I*(f+j))))),l.a.createElement(h.a,{span:12,className:"sell-cost"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24,className:"mb-10"},l.a.createElement(Ye.a.Title,{level:5},"Sell Rate Calculator - Contractor ")),l.a.createElement(h.a,{span:7},"Expected CM %"),E.map((function(e,t){return l.a.createElement(h.a,{span:4,key:t},l.a.createElement(mr,{value:e,max:100,shape:"%",onChange:function(e){return function(e,t){E[t]=null!==e&&void 0!==e?e:0,k(Object(et.a)(E))}(e,t)}}))}))),l.a.createElement(p.a,{align:"bottom"},l.a.createElement(h.a,{span:8,className:"label bold"},"Contractor Daily Sell Rate"),E.map((function(e,t){return l.a.createElement(h.a,{span:4,className:"bold",key:t},ce(I*(f+j)/(1-e/100)))}))))):l.a.createElement(p.a,{className:"buy-sell-calculator ",align:"middle",justify:"center"},l.a.createElement(h.a,{span:12,className:"no-active"},l.a.createElement(Ye.a.Text,{type:"danger",mark:!0},"No Active Contract")),l.a.createElement(h.a,{span:12,className:"no-active"},l.a.createElement(Ye.a.Text,{type:"danger",mark:!0},"No Active Contract"))))},pr=Bn.b.Item,hr=In.a.TabPane,yr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(pe().permissions).USERS;or(t).then((function(n){n.success?e.setState({data:n.basic,editCont:t,permissions:a,infoModal:!1}):n.authError&&e.setState({notAuth:!0})}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){var a=e.props.history;zn(a,"/sub-contractors",t).then((function(e){e.success}))},e.toggleActiveStatus=function(t){(function(e){return $.b.loading({content:"Loading...",key:e}),it.a.put(rr+"/".concat(e,"/toggleActive"),{},{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l?(fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}):{success:l,data:o}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(t).then((function(t){t.success&&e.setState({data:Object(tt.a)(Object(tt.a)({},e.state.data),{},{active:!e.state.data.active})})}))},e.callBack=function(){var t=e.state.editCont;e.getRecord(t)},e.state={infoModal:!1,editCont:!1,data:{},permissions:{},notAuth:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,r=t.editCont,o=t.permissions,i=t.notAuth,c=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,"Basic Information"),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===o||void 0===o?void 0:o.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(r)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){e.setState({infoModal:!0})},disabled:!(null===o||void 0===o?void 0:o.UPDATE)},"Edit"),l.a.createElement(b.a.Item,{key:"contract"},l.a.createElement(s.b,{to:{pathname:"/sub-contractors/".concat(r,"/contracts")},className:"nav-link"},"Contracts")),l.a.createElement(b.a.Item,{key:"deactive",disabled:!(null===o||void 0===o?void 0:o.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to ".concat(a.active?"Deactivate":"Activate"),onConfirm:function(){return e.toggleActiveStatus(r)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," ",a.active?"Deactivate":"Activate"," "))))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:c,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(pr,{label:"First Name"},a.firstName),l.a.createElement(pr,{label:"Last Name"},a.lastName),l.a.createElement(pr,{label:"Phone"},a.phoneNumber," "),l.a.createElement(pr,{label:"Email"},a.email),l.a.createElement(pr,{label:"Address"},a.address),l.a.createElement(pr,{label:"Date Of Birth"},me(a.dateOfBirth,!0,!0)),l.a.createElement(pr,{label:"Gender"},oe[a.gender]),a.organization&&l.a.createElement(pr,{label:"Organisation"},l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(a.organization.id,"/info")},className:"nav-link"},a.organization.name))),r&&l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(hr,{tab:"Projects",key:"projects"},l.a.createElement(al,{targetId:r,customUrl:"helpers/work?type=P&employee=".concat(r)})),l.a.createElement(hr,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetType:"CON",targetId:r})),l.a.createElement(hr,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetType:"CON",targetId:r})),l.a.createElement(hr,{tab:"Cost Calculator",key:"cost-calculator"},l.a.createElement(fr,{conId:r}))),n&&l.a.createElement(cr,{visible:n,editCont:r,close:this.closeModal,callBack:this.callBack}),i&&l.a.createElement(ul,this.props))}}]),a}(n.Component),vr="".concat(J,"/sub-contractors-contracts"),gr=function(e){return it.a.get(vr+"?subContractorId=".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))};function br(){br=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Er=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.editCntrct;t&&e.getRecord(t)},e.onFinish=function(t){e.setState({loading:!0});var a=e.state.fileIds,n=e.props,l=n.editCntrct,r=n.editEmp,o=t.billing;o.startDate=me(o.startDate,!0),o.endDate=me(o.endDate,!0),o.subContractorId=r,o.fileId=a,l?(console.log("edit"),e.editRecord(o)):(console.log("emes"),e.addContract(o))},e.addContract=function(t){console.log(t);var a=e.props.callBack;(function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(vr,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))})(t).then((function(t){e.setState({loading:!1}),console.log(t),t.success&&a()}))},e.getRecord=function(t){var a;(a=t,it.a.get(vr+"/".concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;return n&&(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l.file=l.fileId?[{id:l.file.id,createdAt:l.file.createdAt,fileId:l.file.id,uid:l.file.uniqueName,name:l.file.originalName,type:l.file.type,url:"".concat(J,"/files/").concat(l.file.uniqueName),thumbUrl:ve(l.file.type)}]:[]),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){var a=t.success,n=t.data;console.log(t),a&&(n.startDate=me(n.startDate),n.endDate=me(n.endDate),e.formRef.current.setFieldsValue({billing:n}),e.setState({fileIds:n.fileId,fileList:n.file}))}))},e.editRecord=function(t){var a=e.props,n=a.editCntrct,l=a.callBack;(function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(vr+"/".concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l}})).catch((function(t){return $.b.error({content:t.message,key:e}),{error:"Please login again!",status:!1,message:t.message}}))})(n,t).then((function(t){e.setState({loading:!1}),t.success&&l()}))},e.handleUpload=function(){var t=Object(dn.a)(br().mark((function t(a){var n,l,r,o,i;return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editCntrct:!1,loading:!1,fileList:[],fileIds:null,data:{},BillingFields:[{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Start Date is required"}],labelAlign:"right",rangeMin:function(t){var a=e.formRef.current.getFieldValue().billing;return a.endDate&&t>a.endDate}},{object:"billing",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().billing;return a.startDate&&t<a.startDate}},{Placeholder:"Contract Payment Basis",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Rate",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"remunerationAmountPer",size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",rules:[{required:!0,message:"Payment Frequncy is required"}],onChange:function(t,a){var n=e.state.BillingFields;n[5].Placeholder="Total Fee ".concat(t?a.label:""),e.setState({BillingFields:n})}},{object:"billing",fieldCol:12,key:"remunerationAmount",size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Total Fee is Required"}]},{Placeholder:"Work Hours In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Days In A Week",rangeMin:!0,fieldCol:18,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Hour is Reqired"}],itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfDays",size:"small",type:"InputNumber",rangeMin:1,rangeMax:5,fieldStyle:{width:"100%"},rules:[{required:!0,message:"Work Days are Required"}],itemStyle:{marginBottom:10}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",size:"small",type:"Textarea"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editCntrct,a=e.visible,n=e.close,r=this.state,o=r.BillingFields,i=r.loading,s=r.fileIds,c=r.fileList;return l.a.createElement(ta.a,{title:t?"Edit Contract":"Add Contract",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:i,htmlType:"submit",form:"my-form"},okText:i?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{billing:{entryDate:me(new Date)}}},l.a.createElement(Rt,{FormFields:o})),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:c,onRemove:this.onRemove},!s&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))}}]),a}(n.Component),kr=(Ye.a.Title,Bn.b.Item),Sr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.id;e.fetchAll(t)},e.fetchAll=function(t){var a=JSON.parse(pe().permissions).USERS;Promise.all([gr(t),or(t)]).then((function(t){e.setState({data:t[0].data,filterData:t[0].data,intro:t[1].basic,billModal:!1,editCntrct:!1,permissions:a})})).catch((function(e){console.log(e)}))},e.getList=function(t){gr(t).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,billModal:!1,editCntrct:!1})}))},e.callBack=function(){var t=e.props.match.params.id;e.getList(t)},e.handleDelete=function(t,a){var n=e.state,l=n.data,r=n.filterData,o=e.props.history;zn(o,"/sub-contractors-contracts",t,a,r,l).then((function(t){t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){var a,n;return"00".concat(e.id).includes(t)||e.startDate&&"".concat(me(e.startDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||e.endDate&&"".concat(me(e.endDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||"".concat(null!==(a=ce(e.remunerationAmount))&&void 0!==a?a:"").toLowerCase().includes(t.toLowerCase())||"".concat(null!==(n=re[e.remunerationAmountPer])&&void 0!==n?n:"").toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",wdith:115,render:function(e){return"00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Rate",dataIndex:"remunerationAmount",key:"remunerationAmount",render:function(e){return"".concat(ce(e))}},Ea("remunerationAmount","number")),{title:"Contract Payment Basis",dataIndex:"remunerationAmountPer",key:"remunerationAmountPer",render:function(e){return re[e]}},{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o,i,s=null!==(r=null===(o=Object(on.a)(e))||void 0===o||null===(i=o.state)||void 0===i?void 0:i.permissions)&&void 0!==r?r:{},c=s.DELETE,u=s.UPDATE;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!c,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",disabled:!u,onClick:function(){e.setState({billModal:!0,editCntrct:a.id})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={intro:{},data:[],billModal:!1,editCntrct:!1,openSearch:!1,filterData:[],permissions:{}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.billModal,n=t.editCntrct,r=(t.data,t.intro),o=t.filterData,i=this.props.match.params.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Contract Information",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(kr,null,"Code: ",l.a.createElement("b",null,r.cpCode)),l.a.createElement(kr,null,"First Name: ",l.a.createElement("b",null,r.firstName)),l.a.createElement(kr,null,"Last Name: ",l.a.createElement("b",null,r.lastName)),l.a.createElement(kr,{style:{textAlign:"right"}},l.a.createElement(rt.a,{size:"small",type:"primary",onClick:function(){return e.setState({billModal:!0})}},l.a.createElement(na.a,null)," Contract"))),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}),a&&l.a.createElement(Er,{visible:a,editCntrct:n,close:function(){return e.setState({billModal:!1,editCntrct:!1})},callBack:this.callBack,editEmp:i}))}}]),a}(n.Component),Cr=a(653),jr=In.a.TabPane,Or=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.editCP;Promise.all([At(),zt(),_t()]).then((function(a){var n=e.state,l=n.BasicFields,r=n.SecurityFields;l.fields[11].data=a[0].data,r.fields[7].data=a[2].data,e.setState({BasicFields:l,SecurityFields:r,skill_data:a[1].data,orgs_data:a[2].data},(function(){t?e.getRecord(t):e.setState({associateFields:Object(tt.a)(Object(tt.a)({},e.state.associateFields),{},{fields:e.newAssociateField(0)}),SkillFields:Object(tt.a)(Object(tt.a)({},e.state.SkillFields),{},{fields:e.newSkillField(0)})})}))})).catch((function(e){console.log(e)}))},e.insertSkill=function(){var t,a=e.state.SkillFields,n=a.fields[a.fields.length-1],l=n?parseInt(n.key)+1:0;a.fields=(t=a.fields).concat.apply(t,Object(et.a)(e.newSkillField(l))),e.setState({SkillFields:a})},e.newSkillField=function(t,a){var n=e.state.skill_data,r=["skill".concat(t),"level".concat(t),t];return[{object:"skill",fieldCol:11,layout:{wrapperCol:{span:23}},key:r[0],size:"small",data:n||[],type:"Select",labelAlign:"left",onChange:function(t,a){var n=e.state.SkillFields;n.fields.map((function(e){return e.key===r[1]?(e.data=a?a.levels:[],e):e}));var l=e.skillRef.current.refs.skill_form.getFieldsValue().skill;l[r[1]]=void 0,e.skillRef.current.refs.skill_form.setFieldsValue({skill:l}),e.setState({SkillFields:n})}},{object:"skill",fieldCol:11,layout:{wrapperCol:{span:20}},key:r[1],size:"small",data:a||[],type:"Select",labelAlign:"left",itemStyle:{marginBottom:"5px"}},{fieldCol:2,size:"small",Placeholder:l.a.createElement(Ma.a,{style:{color:"red",margin:"auto"}}),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(t,a){var n=e.state.SkillFields;n.fields=n.fields.filter((function(e){return e.key!==r[0]&&e.key!==r[1]&&e.key!==r[2]}));var l=e.skillRef.current.refs.skill_form.getFieldsValue().skill;l[r[0]]=void 0,l[r[1]]=void 0,l[r[2]]=void 0,e.skillRef.current.refs.skill_form.setFieldsValue({skill:l}),e.setState({SkillFields:n})}}]},e.insertAssociate=function(){var t,a=e.state.associateFields,n=a.fields[a.fields.length-1],l=n?parseInt(n.key)+1:0;a.fields=(t=a.fields).concat.apply(t,Object(et.a)(e.newAssociateField(l))),e.setState({associateFields:a})},e.newAssociateField=function(t){var a=e.state.orgs_data,n=["organizationId".concat(t),"designation".concat(t),"startDate".concat(t),"endDate".concat(t),"id".concat(t),t];return[{object:"asso",fieldCol:6,layout:{wrapperCol:{span:23}},key:n[0],size:"small",data:a,type:"Select",onChange:function(a){var l,r=e.state.associateFields;e.setState({associateFields:Object(tt.a)(Object(tt.a)({},r),{},{fields:(null!==(l=null===r||void 0===r?void 0:r.fields)&&void 0!==l?l:[]).map((function(e){return e.key===n[2]?a?(e.rules[0].required=!0,e):(e.rules[0].required=!1,e):e}))})});var o=e.associateRef.current.refs.associate_form.getFieldsValue().asso;console.log("asso",o),o["id".concat(t)]=void 0,e.associateRef.current.refs.associate_form.setFieldsValue({asso:o})}},{object:"asso",fieldCol:6,layout:{wrapperCol:{span:23}},key:n[1],size:"small",type:"Input"},{object:"asso",fieldCol:5,layout:{wrapperCol:{span:23}},key:n[2],size:"small",rules:[{required:!1,message:"Start Date Required"}],type:"DatePicker"},{object:"asso",fieldCol:5,layout:{wrapperCol:{span:23}},key:n[3],size:"small",type:"DatePicker"},{object:"asso",fieldCol:6,key:n[4],hidden:!0,size:"small",type:"Input"},{fieldCol:2,size:"small",Placeholder:l.a.createElement(Ma.a,{style:{color:"red",margin:"auto"}}),key:t,type:"Text",style:{textAlign:"right"},fieldStyle:{cursor:"pointer"},onClick:function(t,a){var l=e.state.associateFields;l.fields=l.fields.filter((function(e){return e.key!==n[0]&&e.key!==n[1]&&e.key!==n[2]&&e.key!==n[3]&&e.key!==n[4]&&e.key!==n[5]})),e.setState({associateFields:l})}}]},e.submit=function(){e.basicRef.current&&e.basicRef.current.refs.basic_form.submit(),e.associateRef.current&&e.associateRef.current.refs.associate_form.submit(),e.skillRef.current&&e.skillRef.current.refs.skill_form.submit(),e.securityRef.current&&e.securityRef.current.refs.security_form.submit(),e.recruitmentRef.current&&e.recruitmentRef.current.refs.recruitment_form.submit()},e.BasicCall=function(t){var a;Object(tt.a)(Object(tt.a)({},t.basic),{},{dateOfBirth:me(null===t||void 0===t||null===(a=t.basic)||void 0===a?void 0:a.dateOfBirth,!0)});e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),t.basic),basicSubmitted:!0},(function(){var t=e.state,a=t.basicSubmitted,n=t.associateSubmitted,l=t.skillSubmitted,r=t.securitySubmitted,o=t.mergeObj;a&&n&&l&&r&&(e.props.editCP?e.editRecord(o):e.addPerson(o))}))},e.AssociateCall=function(t){var a=t.asso,n=[],l=a?Object.keys(a).length/5:0;if(a&&Object.keys(a).length>0)for(var r=0;r<l;r++){var o;if(a["organizationId".concat(r)])n.push({id:null!==(o=a["id".concat(r)])&&void 0!==o?o:0,designation:a["designation".concat(r)],organizationId:a["organizationId".concat(r)],startDate:me(a["startDate".concat(r)],!0),endDate:me(a["endDate".concat(r)],!0)})}e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),{},{contactPersonOrganizations:n}),associateSubmitted:!0},(function(){return e.validateForm()}))},e.SkillCall=function(t){for(var a=t.skill,n=[],l=0,r=Object.entries(null!==a&&void 0!==a?a:{});l<r.length;l++){var o=Object(G.a)(r[l],2),i=o[0],s=o[1];i.includes("level")&&s&&n.push(s)}e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),{},{standardSkillStandardLevelIds:n}),skillSubmitted:!0},(function(){return e.validateForm()}))},e.SecurityCall=function(t){var a,n,l=Object(tt.a)(Object(tt.a)({},t.sec),{},{clearanceGrantedDate:me(null===t||void 0===t||null===(a=t.sec)||void 0===a?void 0:a.clearanceGrantedDate,!0),clearanceExpiryDate:me(null===t||void 0===t||null===(n=t.sec)||void 0===n?void 0:n.clearanceExpiryDate,!0)});e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),l),securitySubmitted:!0},(function(){return e.validateForm()}))},e.RecruitmentCall=function(t){var a=Object(tt.a)({},t.rec);e.setState({mergeObj:Object(tt.a)(Object(tt.a)({},e.state.mergeObj),a),recruitmentSubmitted:!0},(function(){return e.validateForm()}))},e.validateForm=function(){var t=e.state,a=t.basicSubmitted,n=t.associateSubmitted,l=t.skillSubmitted,r=t.securitySubmitted,o=t.recruitmentSubmitted,i=t.mergeObj;a&&n&&l&&r&&o&&(e.props.editCP?(console.log("edit"),e.editRecord(i)):e.addPerson(i))},e.addPerson=function(t){var a,n=e.props.callBack;e.setState({basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,recruitmentSubmitted:!1,loading:!0}),(a=t,$.b.loading({content:"Loading...",key:1}),it.a.post(hl,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){e.setState({loading:!1}),t.success&&n(t.data)}))},e.getRecord=function(t){yl(t).then((function(t){if(t.success){for(var a=t.data,n=e.state,l=n.SkillFields,r=n.associateFields,o=n.skill_data,i={},s={},c=a.standardSkillStandardLevels,u=a.contactPersonOrganizations,d=c.length<u.length?u.length:c.length,m=function(t){var a=c[t],n=u[t];a&&o.map((function(n){n.levels.map((function(r){r.value===a.id&&(l.fields=l.fields.concat(e.newSkillField(t,n.levels)),i["level".concat(t)]=r.value,i["skill".concat(t)]=n.value)}))})),n&&(r.fields=r.fields.concat(e.newAssociateField(t)),s["id".concat(t)]=n.id,s["designation".concat(t)]=n.designation,s["organizationId".concat(t)]=n.organizationId,s["startDate".concat(t)]=n.startDate&&me(n.startDate),s["endDate".concat(t)]=n.endDate&&me(n.endDate))},f=0;f<d;f++)m(f);0===c.length&&(l.fields=l.fields.concat(e.newSkillField(0))),0===u.length&&(r.fields=r.fields.concat(e.newAssociateField(0)));var p={firstName:a.firstName,lastName:a.lastName,email:a.email,gender:a.gender,phoneNumber:a.phoneNumber,address:a.address,birthPlace:a.birthPlace,dateOfBirth:me(a.dateOfBirth),stateId:a.stateId},h={clearanceLevel:a.clearanceLevel,clearanceGrantedDate:a.clearanceGrantedDate&&me(a.clearanceGrantedDate),clearanceExpiryDate:a.clearanceExpiryDate&&me(a.clearanceExpiryDate),clearanceSponsorId:a.clearanceSponsorId,csidNumber:a.csidNumber},y={recruitmentProspect:a.recruitmentProspect,recruitmentAvailability:a.recruitmentAvailability,recruitmentSalaryEstimate:a.recruitmentSalaryEstimate,recruitmentNotes:a.recruitmentNotes,recruitmentContractType:a.recruitmentContractType};e.basicRef.current.refs.basic_form.setFieldsValue({basic:p}),e.associateRef.current.refs.associate_form.setFieldsValue({asso:s}),e.skillRef.current.refs.skill_form.setFieldsValue({skill:i}),e.securityRef.current.refs.security_form.setFieldsValue({sec:h}),e.recruitmentRef.current.refs.recruitment_form.setFieldsValue({rec:y}),e.setState({associateFields:r,SkillFields:l})}}))},e.editRecord=function(t){var a,n=e.props,l=n.editCP,r=n.callBack;t.id=l,e.setState({basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,recruitmentSubmitted:!1,loading:!0}),(a=t,$.b.loading({content:"Loading...",key:a.id}),it.a.put(hl+"/".concat(a.id),a,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:a.id}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),l?{success:l,data:o}:{success:l}})).catch((function(e){return ge(e,a.id,5)}))).then((function(t){e.setState({loading:!1}),t.success&&r(t.data)}))},e.onCancel=function(){var t=e.state,a=t.BasicFields,n=t.associateFields,l=t.SkillFields;delete a.initialValues,delete n.initialValues,delete l.initialValues,e.setState({basicSubmitted:!1,associateSubmitted:!1,skillSubmitted:!1,recruitmentSubmitted:!1,BasicFields:Object(tt.a)({},a),associateFields:Object(tt.a)({},n),SkillFields:Object(tt.a)({},l),mergeObj:{}},(function(){e.props.close()}))},e.basicRef=l.a.createRef(),e.associateRef=l.a.createRef(),e.skillRef=l.a.createRef(),e.securityRef=l.a.createRef(),e.recruitmentRef=l.a.createRef(),e.state={editCP:!1,basicSubmitted:!1,associateSubmitted:!1,detailSubmitted:!1,skillSubmitted:!1,securitySubmitted:!1,recruitmentSubmitted:!1,skill_data:[],orgs_data:[],loading:!1,BasicFields:{formId:"basic_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"First Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Last Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"firstName",size:"small",rules:[{required:!0,message:"First Name is Required"}],type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"lastName",size:"small",rules:[{required:!0,message:"Last Name is Required"}],type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Email",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"phoneNumber",size:"small",type:"input",labelAlign:"right",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"email",size:"small",type:"input",labelAlign:"right",itemStyle:{marginBottom:10},rules:[{type:"email",message:"The input is not valid e-mail!"},{required:!0,message:"Please input your E-mail!"}]},{Placeholder:"Gender",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"gender",rangeMin:!0,rules:[{required:!0,message:"Gender is Required"}],size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],type:"Select",itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"stateId",rules:[{required:!0,message:"State is Required"}],size:"small",type:"Select",data:[],itemStyle:{marginBottom:10}},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:1}},{Placeholder:"Birth Place",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"basic",fieldCol:12,key:"birthPlace",size:"small",type:"Input",itemStyle:{marginBottom:20}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:20}}]},associateFields:{formId:"associate_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",preserve:!1,fields:[]},SkillFields:{formId:"skill_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:9},wrapperCol:{span:0}},size:"middle",fields:[]},SecurityFields:{formId:"security_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"Clearance Level",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Date Granted",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"sec",fieldCol:12,key:"clearanceLevel",size:"small",data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select",itemStyle:{marginBottom:10},onChange:function(t){var a=e.state.SecurityFields.fields;t?(a[1].rangeMin=!0,a[4].rangeMin=!0,a[5].rangeMin=!0,a[8].rangeMin=!0,a[3].rules=[{required:!0,message:"Date Granted is required"}],a[6].rules=[{required:!0,message:"Expiry Date is required"}],a[7].rules=[{required:!0,message:"Current Sponsor is required"}],a[9].rules=[{required:!0,message:"CS # is required"}]):(a[1].rangeMin=!1,a[4].rangeMin=!1,a[5].rangeMin=!1,a[8].rangeMin=!1,a[3].rules=[{required:!1,message:""}],a[6].rules=[{required:!1,message:""}],a[7].rules=[{required:!1,message:""}],a[9].rules=[{required:!1,message:""}]),e.setState({SecurityFields:Object(tt.a)(Object(tt.a)({},e.state.SecurityFields),{},{fields:Object(et.a)(a)})})}},{object:"sec",fieldCol:12,key:"clearanceGrantedDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{Placeholder:"Expiry Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Current Sponsor",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"sec",fieldCol:12,key:"clearanceExpiryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"sec",fieldCol:12,key:"clearanceSponsorId",size:"small",type:"Select",labelAlign:"right",itemStyle:{marginBottom:10}},{Placeholder:"Clearance Subject ID",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"sec",fieldCol:12,key:"csidNumber",size:"small",type:"Input",labelAlign:"right",itemStyle:{marginBottom:10}}]},RecruitmentFields:{formId:"recruitment_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"small",fields:[{Placeholder:"Recruitment Prospects",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Availability",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"rec",fieldCol:12,key:"recruitmentProspect",size:"small",data:[{label:"Not Considered",value:"NCO"},{label:"Do Not Hire",value:"DNH"},{label:"Prospect",value:"PRO"},{label:"Assigned To Opportunity",value:"ATO"}],type:"Select",itemStyle:{marginBottom:10}},{object:"rec",fieldCol:12,key:"recruitmentAvailability",size:"small",data:[{label:"Immediate",value:"IMM"},{label:"Within A Month",value:"WMO"},{label:"Over A Month",value:"OMO"},{label:"Long-term Propect",value:"LTP"}],type:"Select",itemStyle:{marginBottom:10}},{Placeholder:"Salary estimate",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Preferred Contract Type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"rec",fieldCol:12,key:"recruitmentSalaryEstimate",size:"small",shape:"$",type:"InputNumber",labelAlign:"right",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"rec",fieldCol:12,key:"recruitmentContractType",size:"small",type:"Select",labelAlign:"right",data:[{label:"Part Time",value:"PTI"},{label:"Full Time",value:"FTI"},{label:"Casual",value:"CAS"},{label:"Contractor",value:"CON"}],itemStyle:{marginBottom:10}},{Placeholder:"Note",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"rec",fieldCol:24,key:"recruitmentNotes",type:"Textarea",rows:6,itemStyle:{marginBottom:10}}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editCP,n=t.visible,r=t.contactStatus,o=void 0===r?"Contact Person":r,i=this.state,s=i.BasicFields,c=i.associateFields,u=i.SkillFields,d=i.SecurityFields,m=i.RecruitmentFields,f=i.loading;return l.a.createElement(ta.a,{title:a?"Edit Contact":"Add Contact",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:f},okText:f?l.a.createElement(la.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(In.a,{type:"card"},l.a.createElement(jr,{tab:"Basic",key:"basic",forceRender:!0},l.a.createElement(pa,{ref:this.basicRef,Callback:this.BasicCall,FormFields:s})),l.a.createElement(jr,{tab:"Association",key:"association",forceRender:!0},l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:this.insertAssociate},l.a.createElement(Cr.a,null)," Insert Association")),l.a.createElement(h.a,{span:"24"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"6"},"Organisation"),l.a.createElement(h.a,{span:"6"},"Designation"),l.a.createElement(h.a,{span:"5"},"Start Date"),l.a.createElement(h.a,{span:"5"},"End Date")))),l.a.createElement(p.a,null,l.a.createElement(pa,{ref:this.associateRef,Callback:this.AssociateCall,FormFields:c}))),l.a.createElement(jr,{tab:"Skill",key:"skill",forceRender:!0},l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:this.insertSkill},l.a.createElement(Cr.a,null)," Insert Skill")),l.a.createElement(h.a,{span:"24"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"11"},"Standard Skill"),l.a.createElement(h.a,{span:"11"},"Standard Level")))),l.a.createElement(p.a,null,l.a.createElement(pa,{ref:this.skillRef,Callback:this.SkillCall,FormFields:u}))),l.a.createElement(jr,{tab:"Security Clearance",key:"security",forceRender:!0},l.a.createElement(pa,{ref:this.securityRef,Callback:this.SecurityCall,FormFields:d})),l.a.createElement(jr,{tab:"Recruitment",key:"recruitment",forceRender:!0,disabled:"Contact Person"!==o},l.a.createElement(pa,{ref:this.recruitmentRef,Callback:this.RecruitmentCall,FormFields:m}))))}}]),a}(n.Component),xr=Ye.a.Title,wr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){var e=JSON.parse(pe().permissions).CONTACT_PERSONS;it.a.get(hl,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return console.log(e),{error:"Please login again!",success:!1,message:e.message}})).then((function(t){t.success&&n.setState({data:t.data,filterData:t.data,openModal:!1,editCP:!1,status:!1,permissions:e})}))},n.handleDelete=function(e,t){console.log({id:e,index:t});var a=n.state,l=a.data,r=a.filterData,o=n.props.history;zn(o,"/contactpersons",e,t,r,l).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.toggelModal=function(e){n.setState({openModal:e,editCP:!1,status:!1})},n.Callback=function(){n.getData()},n.submit=function(){n.contactForm.current.refs.contact_form.submit()},n.generalFilter=function(e){var t=n.state.data;(e=e.replace(/\s+/g,"").toLowerCase())?n.setState({filterData:t.filter((function(t){var a="".concat(t.firstName?t.firstName:""," ").concat(t.lastName?t.lastName:""),n="".concat(t.lastName?t.lastName:""," ").concat(t.firstName?t.firstName:"");return"00".concat(t.id.toString()).includes(e)||a.toLowerCase().replace(/\s+/g,"").includes(e.toLowerCase())||n.toLowerCase().replace(/\s+/g,"").includes(e.toLowerCase())||t.email&&t.email.toLowerCase().replace(/\s+/g,"").includes(e.toLowerCase())||t.gender&&oe[t.gender].toLowerCase().includes(e.toLowerCase())||t.phoneNumber&&t.phoneNumber.startsWith(e)}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;t?o[t].value=e:o=a,o.id.value||o.firstName.value||o.lastName.value||o.email.value||o.phoneNumber.value||o.gender.value.length>0||o.stateId.value.length>0||o.address.value||o.skill.value.length>0||o.clearanceLevel.value.length>0||o.association.value.length>0||o.recruitmentProspect.value.length>0||o.recruitmentAvailability.value.length>0||o.recruitmentContractType.value.length>0?n.setState({filterData:r.filter((function(e){var t,a,n,l,r,i="Contact Person"===e.employementStatus;return"00".concat(e.id.toString()).includes(o.id.value)&&"".concat(null!==(t=e.firstName)&&void 0!==t?t:"").toLowerCase().includes(o.firstName.value.toLowerCase())&&"".concat(null!==(a=e.lastName)&&void 0!==a?a:"").toLowerCase().includes(o.lastName.value.toLowerCase())&&"".concat(null!==(n=e.email)&&void 0!==n?n:"").toLowerCase().includes(o.email.value.toLowerCase())&&"".concat(null!==(l=e.phoneNumber)&&void 0!==l?l:"").toLowerCase().includes(o.phoneNumber.value.toLowerCase())&&"".concat(null!==(r=e.address)&&void 0!==r?r:"").toLowerCase().includes(o.address.value.toLowerCase())&&(o.gender.value.length>0?o.gender.value:[{value:","}]).some((function(t){return(o.gender.value.length>0?[e.gender]:[","]).includes(t.value)}))&&(o.stateId.value.length>0?o.stateId.value:[{value:","}]).some((function(t){return(o.stateId.value.length>0?[e.stateId]:[","]).includes(t.value)}))&&(o.clearanceLevel.value.length>0?o.clearanceLevel.value:[{value:","}]).some((function(t){return(o.clearanceLevel.value.length>0?[e.clearanceLevel]:[","]).includes(t.value)}))&&(o.skill.value.length>0?o.skill.value:[{value:","}]).some((function(t){return(e.standardSkillStandardLevels&&e.standardSkillStandardLevels.length>0&&o.skill.value.length>0?e.standardSkillStandardLevels.map((function(e){return e.standardSkillId})):[","]).includes(t.value)}))&&(o.association.value.length>0?o.association.value:[{value:","}]).some((function(t){return(e.contactPersonOrganizations&&e.contactPersonOrganizations.length>0&&o.association.value.length>0?e.contactPersonOrganizations.map((function(e){return e.organizationId})):[","]).includes(t.value)}))&&(o.recruitmentProspect.value.length>0&&i?o.recruitmentProspect.value:[{value:","}]).some((function(t){return(o.recruitmentProspect.value.length>0?[e.recruitmentProspect]:[","]).includes(t.value)}))&&(o.recruitmentAvailability.value.length>0&&i?o.recruitmentAvailability.value:[{value:","}]).some((function(t){return(o.recruitmentAvailability.value.length>0?[e.recruitmentAvailability]:[","]).includes(t.value)}))&&(o.recruitmentContractType.value.length>0&&i?o.recruitmentContractType.value:[{value:","}]).some((function(t){return(o.recruitmentContractType.value.length>0?[e.recruitmentContractType]:[","]).includes(t.value)}))})),searchedColumn:o,openSearch:!1}):n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){Promise.all([At(),zt(),_t()]).then((function(e){var t=n.state.filterFields;t[11].data=e[0].success?e[0].data:[],t[15].data=e[1].success?e[1].data:[],t[17].data=e[2].success?e[2].data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.contactForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:115,render:function(e){return"00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"First Name",dataIndex:"firstName",key:"firstName",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/contacts/".concat(t.id,"/info")},className:"nav-link"},e)}},Ea("firstName","string")),Object(tt.a)({title:"Last Name",dataIndex:"lastName",key:"lastName"},Ea("lastName","string")),{title:"Gender",dataIndex:"gender",key:"gender",width:100,render:function(e){return oe[e]}},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone",dataIndex:"phoneNumber",key:"phoneNumber",width:150},Object(tt.a)({title:"Status",dataIndex:"employementStatus",key:"employementStatus",render:function(e,t){var a;return function(e,t){var a="Employee"===e?"Employees":"Sub Contractor"===e?"sub-contractors":"contacts";return t?l.a.createElement(s.b,{to:{pathname:"/".concat(a,"/").concat(t,"/info")},className:"nav-link"},e):e}(e,null===t||void 0===t||null===(a=t.employee)||void 0===a?void 0:a.id)}},Ea("employementStatus","string")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,{key:a},l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",onClick:function(){n.setState({openModal:!0,editCP:t.id,status:t.employementStatus})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"),l.a.createElement(b.a.Item,{key:"View"},l.a.createElement(s.b,{to:{pathname:"/contacts/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={openSearch:!1,filterData:[],status:!1,data:[],openModal:!1,editCP:!1,permissions:{},searchText:"",searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},firstName:{type:"Input",value:"",label:"First Name",showInColumn:!0},lastName:{type:"Input",value:"",label:"Last Name",showInColumn:!0},gender:{type:"Select",multi:!0,value:[],label:"Gender",showInColumn:!0,mode:"multiple",options:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}]},email:{type:"Input",value:"",label:"Email",showInColumn:!0},phoneNumber:{type:"Input",value:"",label:"Phone Number",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},stateId:{type:"none",multi:!0,value:[],label:"State",showInColumn:!1,disabled:!1},address:{type:"none",value:"",label:"Address",showInColumn:!1,disabled:!1},skill:{type:"none",multi:!0,value:[],label:"Skill",showInColumn:!1,disabled:!1},clearanceLevel:{type:"none",multi:!0,value:[],label:"clearanceLevel",showInColumn:!1,disabled:!1},association:{type:"none",multi:!0,value:[],label:"Association",showInColumn:!1,disabled:!1},recruitmentProspect:{type:"none",multi:!0,value:[],label:"Recruitment Prospects",showInColumn:!1,disabled:!1},recruitmentAvailability:{type:"none",multi:!0,value:[],label:"Availability",showInColumn:!1,disabled:!1},recruitmentContractType:{type:"none",multi:!0,value:[],label:"Contract Type",showInColumn:!1,disabled:!1}},filterFields:[{Placeholder:"First Name",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Last Name",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"firstName",size:"small",type:"input"},{object:"obj",fieldCol:12,key:"lastName",size:"small",type:"input"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"phoneNumber",size:"small",type:"input"},{object:"obj",fieldCol:12,key:"email",size:"small",type:"input"},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"gender",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],type:"Select"},{object:"obj",fieldCol:12,key:"stateId",mode:"multiple",customValue:function(e,t){return t},size:"small",type:"Select"},{Placeholder:"Clearance Level",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"clearanceLevel",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select"},{Placeholder:"Skill",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"skill",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[],type:"Select"},{Placeholder:"Association",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"association",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[],type:"Select"},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"address",size:"small",type:"Input"},{Placeholder:"Recruitment Prospects",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"recruitmentProspect",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"Not Considered",value:"NCO"},{label:"Do Not Hire",value:"DNH"},{label:"Prospect",value:"PRO"},{label:"Assigned To Opportunity",value:"ATO"}],type:"Select"},{Placeholder:"Availability",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"recruitmentAvailability",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"Immediate",value:"IMM"},{label:"Within A Month",value:"WMO"},{label:"Over A Month",value:"OMO"},{label:"Long-term Propect",value:"LTP"}],type:"Select"},{Placeholder:"Contract Type",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"recruitmentContractType",size:"small",mode:"multiple",customValue:function(e,t){return t},data:[{label:"Part Time",value:"PTI"},{label:"Full Time",value:"FTI"},{label:"Casual",value:"CAS"},{label:"Contractor",value:"CON"}],type:"Select"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.filterData,n=t.openModal,r=t.editCP,o=t.permissions,i=t.searchedColumn,s=t.openSearch,c=t.filterFields,u=t.status,d=this.columns;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(xr,{level:4},"Contacts")),l.a.createElement(h.a,{style:{textAlign:"end"},span:12},l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,{offset:1},l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,status:void 0})},disabled:!o.ADD},l.a.createElement(na.a,null),"Contact Person")))),l.a.createElement(Ca,{filters:i,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,className:"fixed-top fs-small",pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:d,dataSource:a,size:"small"}))),s&&l.a.createElement(Sa,{title:"Filter Contact Persons",visible:s,filters:i,filterFields:c,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,groupFrom:{General:[0,20],Recruitment:[20,26]},effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),n&&l.a.createElement(Or,{visible:n,editCP:r,contactStatus:u,close:this.toggelModal,callBack:this.Callback}))}}]),a}(n.Component);var Ir=Bn.b.Item,Dr=In.a.TabPane,Pr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n,l,r;return Object(c.a)(this,a),(r=t.call(this,e)).componentDidMount=function(){var e=r.state.userId;yl(e).then((function(e){if(e.success){var t=e.data;r.setState({data:Tr(t)})}else e.authError&&r.setState({notAuth:!0})}))},r.handleDelete=function(){var e=r.state.userId,t=r.props.history;zn(t,"/contactpersons",e).then((function(e){e.success}))},r.toggelModal=function(){r.setState({infoModal:!1})},r.Callback=function(e){console.log(e),e&&r.setState({data:Tr(e),infoModal:!1})},r.state={data:{},infoModal:!1,userId:null===e||void 0===e||null===(n=e.match)||void 0===n||null===(l=n.params)||void 0===l?void 0:l.id,notAuth:!1},r}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.infoModal,r=t.userId,o=t.notAuth,i=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,"Contact Information"),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete()},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"Edit",onClick:function(){e.setState({infoModal:!0})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))));return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(Bn.b,{title:i,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Ir,{label:"Name"},a.fullname),l.a.createElement(Ir,{label:"Phone"},a.phoneNumber),l.a.createElement(Ir,{label:"Email"},a.email),l.a.createElement(Ir,{label:"Gender"},a.gender),l.a.createElement(Ir,{label:"Date Of Birth"},a.dateOfBirth),l.a.createElement(Ir,{label:"Birth Place"},a.birthPlace),l.a.createElement(Ir,{label:"Status"},a.employementStatus))),l.a.createElement(h.a,{span:24},l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Dr,{tab:"Opportunities",key:"leads"},l.a.createElement(nl,{targetId:r,customUrl:"helpers/work?type=O&contact=".concat(r)})),l.a.createElement(Dr,{tab:"Opportunity Representative",key:"r-leads"},l.a.createElement(nl,{targetId:r,customUrl:"helpers/work?type=O&delegate=".concat(r)})),l.a.createElement(Dr,{tab:"Projects",key:"projects"},l.a.createElement(al,{targetId:r,customUrl:"helpers/work?type=P&contact=".concat(r)})),l.a.createElement(Dr,{tab:"Project Representative",key:"r-projects"},l.a.createElement(al,{targetId:r,customUrl:"helpers/work?type=P&delegate=".concat(r)})),l.a.createElement(Dr,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetType:"COP",targetId:r})),l.a.createElement(Dr,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetType:"COP",targetId:r})))),n&&l.a.createElement(Or,{visible:n,editCP:r,close:this.toggelModal,callBack:this.Callback}),o&&l.a.createElement(ul,this.props))}}]),a}(n.Component),Tr=function(e){var t,a;return{fullname:e.firstName+" "+e.lastName,email:e.email,gender:oe[null===e||void 0===e?void 0:e.gender],phoneNumber:e.phoneNumber,address:e.address,birthPlace:e.birthPlace,dateOfBirth:me(me(e.dateOfBirth),!0,!0),stateId:e.stateId,employementStatus:Nr(e.employementStatus,null===e||void 0===e||null===(t=e.employee)||void 0===t?void 0:t.id),employeeId:null===e||void 0===e||null===(a=e.employee)||void 0===a?void 0:a.id}};function Nr(e,t){var a="Employee"===e?"Employees":"Sub Contractor"===e?"sub-contractor":"contacts";return t?l.a.createElement(s.b,{to:{pathname:"/".concat(a,"/").concat(t,"/info")},className:"nav-link"},e):e}var Rr=a(165),Ar=a(329),Fr=a(655),zr=a(656),Lr=a(654),Mr=(a(448),a(248)),Br=a.n(Mr),_r=a(314),Yr=a.n(_r),Vr="".concat(J,"/timesheets/"),qr=function(e){return it.a.get(Vr+"".concat(e.startDate,"&").concat(e.endDate,"&").concat(e.userId),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message,data:[]}}))},Hr=function(e){return $.b.loading({content:"Loading...",key:1}),it.a.delete(Vr+"entries/".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))},Ur=function(e,t,a){return $.b.loading({content:"Loading...",key:1}),it.a.post(Vr+"".concat(e.startDate,"&").concat(e.endDate,"&").concat(e.userId,"/milestoneEntries").concat(t),a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:1}),{error:"Please login again!",status:!1,message:e.message}}))},Gr=function(){return it.a.get("".concat(Vr,"users"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;he(r);return n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))};function Wr(){Wr=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Kr=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.timeObj.milestoneEntryId;e.getRecord("PEN",t[0])},e.getRecord=function(t,a){var n=e.props.timeObj.notes;$n(t,a).then((function(t){t.success&&e.setState({fileList:t.fileList,fileIds:t.fileIds,notes:n})}))},e.handleUpload=function(){var t=Object(dn.a)(Wr().mark((function t(a){var n,l,r,o,i;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[].concat(Object(et.a)(e.state.fileList),[t.file]),fileIds:[].concat(Object(et.a)(e.state.fileIds),[t.file.fileId])});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState((function(e){var a=e.fileList.indexOf(t),n=e.fileList.slice(),l=e.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))},e.addNotes=function(){e.setState({loading:!0});var t,a,n=e.props,l=n.timeObj,r=n.callBack,o=e.state,i=o.notes,s=(o.fileIds,o.fileList),c={note:i,attachments:s.length>0?[s[0].fileId]:[],milestoneEntryIds:l.milestoneEntryId};(t=l.milestoneEntryId[0],a=c,$.b.loading({content:"Loading...",key:t}),it.a.patch(Vr+"milestoneEntriesUpdate",a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:t}),l?(o.notes,o.attachment,fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}):{success:l}})).catch((function(e){return $.b.error({content:e.message,key:t}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&(e.data.notes=i,r(e.data))}))},e.state={fileList:[],progress:0,fileIds:[],notes:void 0},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.editTime,r=t.loading,o=t.close,i=(t.timeObj,this.state),s=i.fileList,c=i.notes;return l.a.createElement(ta.a,{title:n?"Edit Attachments & Notes":"Add Attachments & Notes",maskClosable:!1,centered:!0,visible:a,onOk:function(){e.addNotes()},okButtonProps:Object(at.a)({disabled:r},"disabled",!1),okText:r?l.a.createElement(la.a,null):"Save",onCancel:o,width:540},l.a.createElement(p.a,{gutter:[0,30]},l.a.createElement(h.a,{span:24},l.a.createElement("div",null,l.a.createElement(Yr.a,{name:"file",multiple:!1,maxCount:1,listType:"picture",className:"upload-list-inline",disabled:!1,customRequest:this.handleUpload,onRemove:this.onRemove,fileList:s},s.length<1&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement(Lr.a,null)),l.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"))))),l.a.createElement(h.a,{span:24},l.a.createElement(Br.a,{placeholder:"Enter Your Notes....",autoSize:{minRows:3,maxRows:5},allowClear:!0,onChange:function(t){e.setState({notes:t.target.value})},value:c}))))}}]),a}(n.Component),$r=(a(302),a(204)),Jr=(a(546),Bn.b),Xr=Ye.a.Text,Zr=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),r=Object(G.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)({}),c=Object(G.a)(s,2),u=(c[0],c[1],[{title:"Date",dataIndex:"date",key:"date",align:"center",width:50},{title:"Day",dataIndex:"day",key:"day",align:"center",width:50},{title:"Hours",dataIndex:"hours",key:"hours",width:80,children:[{title:"Start",dataIndex:"startTime",key:"startTime",align:"center",width:40},{title:"Finish",dataIndex:"endTime",key:"endTime",align:"center",width:40}]},{title:l.a.createElement("span",null,"Breaks ",l.a.createElement("br",null)," ",l.a.createElement("span",{style:{fontSize:9}},"minutes")),dataIndex:"breakMinutes",key:"breakMinutes",align:"center",width:40},{title:l.a.createElement("span",null,"Daily ",l.a.createElement("br",null)," Total ",l.a.createElement("span",{style:{fontSize:9}},"hours")),dataIndex:"actualHours",key:"actualHours",align:"center",width:40},{title:"Comments",dataIndex:"notes",key:"notes",align:"center",render:function(e){return Qr(e,65)}}]);Object(n.useEffect)((function(){m()}),[]);var d=Object($r.useReactToPrint)({content:function(){return t.current},documentTitle:"timesheet",removeAfterPrint:!0}),m=function(){var t,a={milestoneEntryIds:e.milestoneEntryId};return(t=a,it.a.post("".concat(Vr,"print/milestoneEntries"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(t){t.success&&(i(t.data),d(),e.close())})),!0};return l.a.createElement("div",{style:{display:"none"}},l.a.createElement("div",{ref:t,style:{margin:"2mm 10mm 0mm 10mm",size:"A4"}},o.map((function(e,t){var a,n,r;return l.a.createElement("div",{key:t,style:{marginTop:20}},l.a.createElement(p.a,{justify:"space-between",align:"middle"},l.a.createElement(h.a,null,l.a.createElement(Ye.a.Title,{level:2,style:{margin:0}}," Timesheet ")),l.a.createElement(h.a,{style:{width:"60%",textAlign:"right"}},l.a.createElement("img",{src:"/onelm.png",width:200}))),l.a.createElement(p.a,null,e&&l.a.createElement(Bn.b,{column:2,bordered:!0,size:"small",style:{margin:"15px 0px",width:"100%"},className:"describe"},l.a.createElement(Jr,{label:"Company"}," ",e.company),l.a.createElement(Jr,{label:"Employee"},e.employee),l.a.createElement(Jr,{label:"Client",span:2},Qr(null===e||void 0===e||null===(a=e.milestone)||void 0===a?void 0:a.client,78)),l.a.createElement(Jr,{label:"Project",span:2},Qr(null===e||void 0===e||null===(n=e.milestone)||void 0===n?void 0:n.name,78)),l.a.createElement(Jr,{label:"Client Contact"},null===e||void 0===e||null===(r=e.milestone)||void 0===r?void 0:r.contact),l.a.createElement(Jr,{label:"Timesheet Period "},e.period))),l.a.createElement(ea.a,{rowClassName:function(e){return"Sunday"===e.day||"Saturday"===e.day?"weekendClass":"weekClass"},className:"cellSize fs-small",rowKey:function(e){return e.id},bordered:!0,size:"small",pagination:!1,columns:u,dataSource:e.milestone&&e.milestone.entries,style:{fontSize:"10px"}}),l.a.createElement(Bn.b,{column:3,bordered:!0,style:{marginBottom:10,marginTop:10},labelStyle:{padding:5},className:"describe"},l.a.createElement(Jr,{label:"Hours in Day "},e.milestone&&parseFloat(e.milestone.hoursPerDay).toFixed(2)),l.a.createElement(Jr,{label:"Total Hours "}," ",e.milestone&&parseFloat(e.milestone.totalHours).toFixed(2)," "),l.a.createElement(Jr,{label:"Invoiced Days "},e.milestone&&parseFloat(e.milestone.invoicedDays).toFixed(2))),l.a.createElement(p.a,{justify:"space-between",gutter:[0,15]},l.a.createElement(h.a,{span:24},l.a.createElement(Xr,{type:"danger",italic:!0,underline:!0,className:"sensitive"},"I certify that the below entries are a true record of attendance.")),l.a.createElement(h.a,{span:11},"Employee Declaration"),l.a.createElement(h.a,{span:11},"Manager Approval")),l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,{span:11,className:"signature"}),l.a.createElement(h.a,{span:11,className:"signature"})),l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,{span:6},"Signature"),l.a.createElement(h.a,{span:5},"Date"),l.a.createElement(h.a,{span:2}),l.a.createElement(h.a,{span:6},"Signature"),l.a.createElement(h.a,{span:5},"Date")),l.a.createElement("div",{className:"b-sensitive-bottom"}," "))}))))},Qr=function(e,t){return e?(e="".concat(e),"".concat(e.substring(0,t)).concat("".concat(e).length>t?"\u2026":"")):"--"},eo=Ye.a.Title,to=Ye.a.Link,ao=Ye.a.Text,no="",lo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){Promise.all([it.a.get("".concat(Vr,"milestones"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;return n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))]).then((function(t){var a=pe(),n=a.id,l=a.permissions,r=parseInt(n),o=JSON.parse(l).TIMESHEETS;t[0].success&&t[0].data.length>0&&(t[0].data[0].value,t[0].data.forEach((function(e){e.value===r&&e.value}))),e.setState({milestones:t[0].success?t[0].data:[],permissions:null!==o&&void 0!==o?o:{},loginId:r},(function(){e.columns(),e.getSheet()}))})).catch((function(e){console.log(e)}))},e.getSheet=function(){var t=e.state.sMilestone,a=e.state.sheetDates,n=a.startDate,l=a.endDate;t&&function(e){var t;return it.a.get("".concat(Vr,"milestone")+"/".concat(e.startDate,"&").concat(e.endDate,"&").concat(null!==(t=e.mileId)&&void 0!==t?t:0),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];n&&(l.timesheets.forEach((function(e){var t=Object(tt.a)(Object(tt.a)({},e),e.milestones[0]);delete t.milestones,r.push(t)})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization));return console.log(r),{success:n,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))}({mileId:t,startDate:n.format("DD-MM-YYYY"),endDate:l.format("DD-MM-YYYY")}).then((function(t){var a;e.setState({data:t.success&&t.data&&null!==(a=t.data)&&void 0!==a?a:[],sTimesheet:{timesheet:[],keys:[]}})})),e.columns()},e.columns=function(){var t=e.state.sheetDates,a=t.startDate,n=t.endDate,r=e.state.columns,o=void 0;r=[r[0],r[1]];for(var i=a.format("D");i<=n.format("D");i++){var s;o=null!==(s=o)&&void 0!==s?s:K()(a.format()),r.push({title:l.a.createElement("span",null,l.a.createElement("div",null,o.format("ddd")),l.a.createElement("div",null," ",o.format("DD MMM")," ")),heading:l.a.createElement("span",null,o.format("dddd - DD MM YYYY")),dataIndex:o.format("D/M"),key:o.format("D/M"),width:200,editable:!0,align:"center",render:function(e,t,a){if(e){var n=K.a.duration(e.breakHours,"hours");return n=n&&K()(K()().hours(n.hours()).minutes(n.minutes())).format("HH:mm"),l.a.createElement(Te.a,{title:e.notes&&"Note: ".concat(e.notes)},l.a.createElement(p.a,{style:{border:"1px solid"}},l.a.createElement(h.a,{span:24},"Start Time: ",e.startTime&&K()(e.startTime,["HH:mm"]).format("h:mm A")),l.a.createElement(h.a,{span:24},"End Time: ",e.endTime&&K()(e.endTime,["HH:mm"]).format("h:mm A")),l.a.createElement(h.a,{span:24},"Break: ",n&&n),l.a.createElement(h.a,{span:24},"Total Hours: ",e.actualHours&&e.actualHours))," ")}}}),o=o.add(1,"days")}e.setState({columns:r})},e.reviewTimeSheet=function(t,a,n,l){var r=e.state.sheetDates,o=r.startDate,i=r.endDate,s={pEntryId:t,userId:e.state.sMilestone,startDate:o.format("DD-MM-YYYY"),endDate:i.format("DD-MM-YYYY")};Ur(s,a).then((function(t){var a=e.state.data;a[n].status=l,t.success&&e.setState({data:a})}))},e.actionTimeSheet=function(t,a){var n=e.state.sheetDates,l=n.startDate,r=n.endDate,o=e.state.sTimesheet.keys,i={userId:e.state.sMilestone,startDate:l.format("DD-MM-YYYY"),endDate:r.format("DD-MM-YYYY")},s={milestoneEntries:o,note:null===a||void 0===a?void 0:a.notes};Ur(i,t,s).then((function(t){e.getSheet()}))},e.openAttachModal=function(t,a){console.log(t,a);var n={};if(a>=0)n={milestoneEntryId:[t.milestoneEntryId],milestoneId:t.milestoneId,notes:t.notes,milestone:t.milestone,status:t.status,rowIndex:a};else{var l=e.state.sTimesheet,r=l.keys,o=l.timesheet;n={milestoneEntryId:r,milestoneId:o[0].milestoneId,notes:o[0].notes,milestone:o[0].milestone,status:!1}}e.setState({timeObj:n,isAttach:!0})},e.exporPDF=function(t){console.log(t),e.setState({eData:t,isDownload:!0})},e.summaryFooter=function(t){var a=e.state.columns;if(t.length>0)return l.a.createElement(ea.a.Summary,{fixed:"top"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0}," "),a.map((function(e,a){var n=e.key,r=(e.dateObj,0);return t.map((function(e,a){var l;"user"!==n&&(r+="totalHours"===n?null!==(l=t[a].totalHours)&&void 0!==l?l:0:e[n]?e[n].actualHours:0)})),"user"===n?l.a.createElement(ea.a.Summary.Cell,{index:a+1,key:a+1},"Total Work In A day"):l.a.createElement(ea.a.Summary.Cell,{index:a+1,key:a+1,align:"center"},r&&r.toFixed(2))}))))},e.milestoneSelect=function(t,a){var n=!0,l=!0,r=!0;a.forEach((function(e){"SB"===e.status&&(n=!1),"SB"===e.status&&(l=!1),"AP"===e.status&&(r=!1)})),e.setState({sTimesheet:{timesheet:a,keys:t,cantApprove:n,cantReject:l,cantUnapprove:r}})},e.onActionFinished=function(t,a){e.actionTimeSheet(a,t),no.destroy()},e.multiAction=function(t){var a;console.log(t);var n=e.state.sheetDates.cMonth,r="Delete"!==t?l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"24"},l.a.createElement(eo,{level:5},"Notes")),l.a.createElement(h.a,{span:"24"},l.a.createElement(nt.a,{id:"my-form",onFinish:function(a){return e.onActionFinished(a,t)}},l.a.createElement(nt.a.Item,{noStyle:!0,name:"notes"},l.a.createElement(ht.a.TextArea,{placeholder:"Enter Your Notes....",autoSize:{minRows:3,maxRows:10},allowClear:!0}))))):"";no=ta.a.confirm({title:"".concat(t," timesheet for the month of ").concat(n.format("MMM YYYY")," ?"),width:520,icon:"Reject"===t?l.a.createElement(Rr.a,null):l.a.createElement(S.a,null),content:r,okButtonProps:{danger:null===(a="Delete"===t)||void 0===a||a,htmlType:"submit",form:"my-form"},okText:"Yes",cancelText:"No"})},e.attachCallBack=function(t){var a=e.state,n=a.data,l=a.timeObj.rowIndex;l>=0?(n[l].notes=t.notes,n[l].attachment=t.attachment,e.setState({data:n,isAttach:!1,editTime:!1,timeObj:!1})):e.getSheet()},e.state={isAttach:!1,sheetDates:{startDate:K()().startOf("month"),endDate:K()().endOf("month"),cMonth:K()()},timeObj:!1,eData:[],sMilestone:null,loginId:null,data:[],permissions:{},milestones:[],actionNotes:"",sTimesheet:{timesheet:[],keys:[]},columns:[{title:"Employee",dataIndex:"user",key:"user",fixed:"left",width:300,style:{height:110},render:function(t,a,n){return l.a.createElement(p.a,{gutter:[0,10],style:{height:90}},l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,{span:20},l.a.createElement(s.b,{to:{pathname:"/Employees/".concat(a.userId,"/info")},className:"nav-Tlink"},l.a.createElement(ao,null,"".concat(t)," "))),l.a.createElement(h.a,{style:{marginLeft:"auto"}},l.a.createElement(Te.a,{placement:"top",title:"Export",destroyTooltipOnHide:!0},l.a.createElement(Ar.a,{onClick:function(){e.exporPDF([a.milestoneEntryId],n)}})),l.a.createElement("span",{className:"AP"===a.status?"disabledanticon":"anticon"},l.a.createElement(Te.a,{placement:"top",title:"Upload",destroyTooltipOnHide:!0},l.a.createElement(Fr.a,{disabled:"AP"===a.status,onClick:function(){e.openAttachModal(a,n)},style:{color:"#1890ff",marginLeft:10}})))))),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},a.attachment&&l.a.createElement(h.a,{span:16},l.a.createElement(to,{href:"".concat(J,"/files/").concat(a.attachment.uid),download:a.attachment.name,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(fn.a,null)," "," ",l.a.createElement(Te.a,{placement:"top",title:a.attachment.name,destroyTooltipOnHide:!0},"".concat(a.attachment.name.substr(0,20)).concat(a.attachment.name.length>19?"\u2026":"")))),l.a.createElement(h.a,{style:{marginLeft:"auto"}},a.status&&l.a.createElement(jl,{text:a.status})),l.a.createElement(h.a,null,l.a.createElement(Te.a,{placement:"top",title:a.actionNotes,destroyTooltipOnHide:!0},a.actionNotes&&l.a.createElement(zr.a,{style:{fontSize:"small"}}))))))}},{title:"Total",dataIndex:"totalHours",key:"totalHours",fixed:"left",align:"center",width:100,render:function(e){return e&&e.toFixed(2)}}]},e}return Object(u.a)(a,[{key:"highlightRow",value:function(e){}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.columns,r=t.timeObj,o=t.milestones,i=t.sMilestone,s=t.isAttach,c=t.isDownload,u=t.eData,d=t.sTimesheet,m=t.permissions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(eo,{level:4},"Timesheet Approval")),l.a.createElement(h.a,null,l.a.createElement(vt.a,{placeholder:"Select Project",style:{width:300},options:o,value:i,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(t,a){e.setState({sMilestone:t},(function(){e.getSheet()}))}})),l.a.createElement(h.a,null,l.a.createElement(ft.a,{mode:"month",picker:"month",format:"MMM-YYYY",onChange:function(t){e.setState({sheetDates:{cMonth:null!==t&&void 0!==t?t:K()(),startDate:K()(null!==t&&void 0!==t?t:K()()).startOf("month"),endDate:K()(null!==t&&void 0!==t?t:K()()).endOf("month")}},(function(){e.getSheet()}))},defaultValue:K()()}))),l.a.createElement(ea.a,{sticky:!0,size:"small",style:{maxHeight:"fit-content"},className:"timeSheet-table fs-small",rowSelection:{selectedRowKeys:d.keys,fixed:!0,onChange:function(t,a){e.milestoneSelect(t,a)},getCheckboxProps:function(e){return{disabled:"SV"===e.timesheetStatus||"RJ"===e.timesheetStatus||"NC"===e.timesheetStatus||!m.UNAPPROVAL&&"AP"===e.timesheetStatus||!1===e.phase}}},scroll:{x:"'max-content'"},bordered:!0,pagination:!1,rowKey:"milestoneEntryId",columns:n,dataSource:Object(et.a)(a),summary:function(t){return e.summaryFooter(t)}}),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(h.a,null," ",l.a.createElement(rt.a,{disabled:d.keys.length<1,onClick:function(){return e.openAttachModal()}},"Import")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",disabled:d.keys.length<1,onClick:function(){e.exporPDF(d.keys)}},"Export")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",danger:!0,disabled:d.keys.length<1||!m.APPROVAL||d.cantReject,onClick:function(){return e.multiAction("Reject")}},"Reject")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"success",disabled:d.keys.length<1||!m.APPROVAL||d.cantApprove,onClick:function(){return e.multiAction("Approve")}},"Approve")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"not-success",disabled:d.keys.length<1||!m.UNAPPROVAL||d.cantUnapprove,onClick:function(){return e.multiAction("Unapprove")}},"Unapprove"))),s&&l.a.createElement(Kr,{visible:s,timeObj:r,callBack:this.attachCallBack,close:function(){return e.setState({isAttach:!1,timeObj:!1})}}),c&&l.a.createElement(Zr,{milestoneEntryId:u,close:function(){return e.setState({isDownload:!1})}}))}}]),a}(n.Component),ro=a(326),oo=a(657),io=a(166),so=a(103),co=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editTime,n=t.userId,l=JSON.parse(pe().permissions).TIMESHEETS;e.setState({permissions:l},(function(){l.UPDATE&&e.getRecord(n,a||{startTime:K()("9:00",["HH:mm"]),endTime:K()("18:00",["HH:mm"])})}))},e.submit=function(){e.TimeRef.current&&e.TimeRef.current.refs.time_form.submit()},e.TimeCall=function(t){var a=e.props,n=a.editTime,l=a.timeObj,r=a.sheetDates.startDate,o=t.obj,i=r.format("YYYY");o.milestoneEntryId=l.milestoneEntryId,o.entryId=l.entryId,o.milestoneId=l.milestoneId,o.date=K()("".concat(l.col,"/").concat(i),"D/M/YYYY").format("DD-MM-YYYY"),o.startTime=o.startTime.format("HH:mm"),o.endTime=o.endTime.format("HH:mm"),o.breakHours=o.breakHours?K.a.duration(o.breakHours.format("HH:mm")).asHours():0,n?e.editRecord(n.entryId,o):e.addTime(o)},e.addTime=function(t){e.setState({loading:!0});var a=e.props,n=a.callBack,l=a.sheetDates,r=a.user,o=l.startDate,i=l.endDate;(function(e,t){return $.b.loading({content:"Loading...",key:1}),it.a.post(Vr+"".concat(e.startDate,"&").concat(e.endDate,"&").concat(e.userId),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?($.b.success({content:r,key:1}),l.actualHours=l.hours,fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return ge(e,1,5)}))})({userId:r,startDate:o.format("DD-MM-YYYY"),endDate:i.endOf("month").format("DD-MM-YYYY")},t).then((function(t){t.success?n(t.data,!0):e.setState({loading:!1})}))},e.editRecord=function(t,a){e.setState({loading:!0});var n=e.props.callBack;(function(e,t){return $.b.loading({content:"Loading...",key:1}),it.a.put(Vr+"entries/".concat(e),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?($.b.success({content:r,key:1}),l.actualHours=l.hours,fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return ge(e,1,5)}))})(t,a).then((function(e){e.success&&n(e.data,!1)}))},e.handleDelete=function(){var t=e.props,a=t.editTime,n=t.callBack;Hr(a.entryId).then((function(e){e.success&&n({},!0)}))},e.getRecord=function(t,a){e.TimeRef.current.refs.time_form.setFieldsValue({obj:a})},e.TimeRef=l.a.createRef(),e.state={loading:!1,permissions:{},TimeFields:{formId:"time_form",justify:"center",FormCol:24,FieldSpace:{xs:12,sm:16,md:122},FormLayout:"inline",size:"middle",fields:[{object:"obj",fieldCol:8,key:"startTime",label:"Start",labelAlign:"right",type:"TimePicker",mode:"use12Hours",rangeMax:!1,rangeMin:15,size:"small",showTime:"hh:mm a"},{object:"obj",fieldCol:8,key:"endTime",label:"End",labelAlign:"right",type:"TimePicker",mode:"use12Hours",rangeMax:!1,rangeMin:15,size:"small",showTime:"hh:mm a"},{object:"obj",fieldCol:8,key:"breakHours",label:"Break",labelAlign:"right",rangeMin:15,rangeMax:!1,type:"TimePicker",size:"small",showTime:"HH:mm"},{object:"obj",fieldCol:24,style:{marginTop:"2%"},mode:{minRows:1,maxRows:3},key:"notes",label:"notes",labelAlign:"right",type:"Textarea",size:"small"}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editTime,n=t.visible,r=t.close,o=t.timeObj,i=this.state,s=i.TimeFields,c=i.loading,u=i.permissions,d=a?u.UPDATE&&n:u.ADD&&n;return l.a.createElement(ta.a,{title:l.a.createElement(p.a,null,l.a.createElement(h.a,{flex:1}," ",a?"Edit Entry":"Add Entry"," "),l.a.createElement(h.a,{flex:4},l.a.createElement("b",null," ",o.title," "))),maskClosable:!1,centered:!0,visible:d,onOk:function(){e.submit()},okButtonProps:{disabled:c},onCancel:r,width:540,footer:[l.a.createElement(rt.a,{key:"cancel",onClick:r}," Cancel "),l.a.createElement(rt.a,{key:"ok",type:"primary",loading:c,onClick:function(){e.submit()}}," Save ")]},l.a.createElement(pa,{ref:this.TimeRef,Callback:this.TimeCall,FormFields:s}))}}]),a}(n.Component),uo="".concat(J,"/opportunities"),mo=function(e){return it.a.get(uo+"/".concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o,i,s,c,u={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(null!==(r=n.contactPerson.firstName)&&void 0!==r?r:"","  ").concat(null!==(o=n.contactPerson.lastName)&&void 0!==o?o:""," - ").concat(null!==(i=n.contactPerson.phoneNumber)&&void 0!==i?i:""),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,status:n.status,phase:n.phase,title:n.title,stateId:n.stateId,stage:n.stage,linkedWorkId:n.linkedWorkId,mileId:!!(n.milestones&&n.milestones.length>0)&&n.milestones[0].id},d={tender:n.tender,tenderNumber:n.tenderNumber},m={cmPercentage:n.cmPercentage?n.cmPercentage:0,cm$:(n.value*n.cmPercentage/100).toFixed(2),getPercentage:n.getPercentage?n.getPercentage:0,goPercentage:n.goPercentage?n.goPercentage:0,totalMonths:n.startDate&&n.endDate?Math.ceil(me(n.endDate).diff(me(n.startDate),"months",!0)):0,endDate:me(n.endDate),startDate:me(n.startDate),value:n.value?n.value:0};m.goget=(m.getPercentage*m.goPercentage/100).toFixed(2),m.discount=(n.value*m.goget/100).toFixed(2),m.upside=(n.value-m.discount).toFixed(2);var f={hoursPerDay:n.hoursPerDay,entryDate:me(n.entryDate),startDate:me(n.startDate),endDate:me(n.endDate),bidDate:me(n.bidDate)},p={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,opportunityManagerId:n.opportunityManagerId},h=null!==(s=n.milestones)&&void 0!==s?s:[];return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,fe(null===e||void 0===e||null===(c=e.headers)||void 0===c?void 0:c.authorization),{success:a,data:n,basic:u,tender:d,billing:m,dates:f,manage:p,milestones:h}}return{success:a}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))},fo=function(e,t,a){return $.b.loading({content:"Loading...",key:a}),it.a.post("".concat(J).concat(e),t,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l,data:r[0]}})).catch((function(e){return ge(e,a,5)}))},po=function(e){return it.a.get("".concat(J).concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},ho=function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put("".concat(J).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r&&r[0]}})).catch((function(e){return ge(e,t,5)}))},yo=function(e){return it.a.get("".concat(uo,"/").concat(e,"/hierarchy"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},vo=function(e){return it.a.get("".concat(uo,"/get-holidays/").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},go=(a(303),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getProjects(),n.fetchHolidays(),n.projectLeaveRequest()},n.getTableSummary=function(e){var t=0;return e.forEach((function(e){var a=e.actualHours;t+=parseFloat(null!==a&&void 0!==a?a:0)})),l.a.createElement(ea.a.Summary,{fixed:"top"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0,colSpan:3}),l.a.createElement(ea.a.Summary.Cell,{index:1,align:"right"},"Total"),l.a.createElement(ea.a.Summary.Cell,{index:2,align:"center"},ue(t))))},n.getDateArray=function(){var e=n.state,t=e.holidays,a=e.data,l=void 0===a?[]:a,r=e.hoursEntry,o=void 0===r?{}:r,i=e.leaveDays,s=n.formRef.current.getFieldsValue(),c=s.times,u=s.dates.dateRange,d=void 0===u?[]:u,m=s.includes,f=m.isWeekend,p=m.isHoliday,h=m.isLeave,y=d||[],v=Object(G.a)(y,2),g=v[0],b=void 0===g?null:g,E=v[1],k=void 0===E?null:E,S=c.timeRange,C=c.breakHours,j=void 0===C?0:C,O=S||[],x=Object(G.a)(O,2),w=x[0],I=void 0===w?null:w,D=x[1],P=void 0===D?null:D,T=n.calculationDuration(I,P),N=j&&K.a.duration(j.format("HH:mm")).asHours();if(b&&k){for(var R=new Array;b.isSameOrBefore(k);){var A=b.format(n.dateFormat),F=b.format(n.dateKeyFormat);if(o[A]={startTime:I,endTime:P,breakHours:j,actualHours:ue(T-N)},b.isoWeekday()>5&&(o[A]=Object(tt.a)(Object(tt.a)({},o[A]),{},{holiday:"Weekend"}),f||(o[A]={holiday:"Weekend"})),t[F]&&(o[A]=Object(tt.a)(Object(tt.a)({},o[A]),{},{holiday:t[F]}),p||(o[A]={holiday:t[F]})),i[F]){var z=i[F],L=z.hours,M=z.leaveType;o[A]=Object(tt.a)(Object(tt.a)({},o[A]),{},{holiday:"Leave Applied - ".concat(L," hrs"),leaveApplied:"".concat(M)}),h||(o[A]={holiday:"Leave Applied - ".concat(L," hrs"),leaveApplied:"".concat(M)})}R.push(Object(tt.a)({key:F,date:A},o[A])),b=K()(b).add(1,"d")}l=R}else o={},l=[];n.setState({data:l,hoursEntry:o}),n.formRef.current.setFieldsValue({entry:Object(tt.a)({},o)})},n.projectLeaveRequest=function(e){var t,a,l=(null===(t=n.props)||void 0===t?void 0:t.bulkData).leaves,r=void 0===l?[]:l,o={},i=Object(g.a)(r);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s.workId===e||!s.workId){var c="".concat(s.leaveType);for(var u in s){if(K()(u,"D/M",!0).isValid())o[K()(s[u].date,"D-M-YYYY").format(n.dateKeyFormat)]={hours:s[u].hours,leaveType:c}}}}}catch(d){i.e(d)}finally{i.f()}n.setState({leaveDays:Object(tt.a)({},o)},(function(){n.getDateArray()}))},n.getProjects=function(){var e,t=n.state.BasicFields,a=null===(e=n.props)||void 0===e?void 0:e.bulkData,l=a.userId,r=a.monthStart,o=a.monthEnd;Ut({userId:l,phase:0,startDate:r.format(n.dateFormat),endDate:o.format(n.dateFormat)}).then((function(e){e.success&&(t[1].data=e.data,n.setState({BasicFields:t}))}))},n.fetchHolidays=function(){it.a.get("".concat(J,"/calendar-holidays/keyValueFormat"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success&&n.setState({holidays:e.data})}))},n.setHours=function(e,t){var a=n.state,l=a.hoursEntry,r=a.data,o=n.formRef.current.getFieldValue(["entry",e]),i=o.startTime,s=o.endTime,c=o.breakHours,u=n.calculationDuration(i,s),d=c?K.a.duration(c.format("HH:mm")).asHours():0;o.actualHours=ue(u-d),l[e]=o,r[t]=Object(tt.a)(Object(tt.a)({},r[t]),o),n.setState({hoursEntry:Object(tt.a)({},l),data:Object(et.a)(r)})},n.calculationDuration=function(e,t){return e&&t?K.a.duration(K()(t.format("hh:mm a"),"hh:mm a").diff(K()(e.format("hh:mm a"),"hh:mm a"))).asHours()<0?Math.abs(K.a.duration(K()(t,"HH:mm").add(1,"days").diff(K()(e.format("hh:mm a"),"hh:mm a"))).asHours()):Math.abs(K.a.duration(K()(t.format("hh:mm a"),"hh:mm a").diff(K()(e.format("hh:mm a"),"hh:mm a"))).asHours()):0},n.onSubmit=function(e){var t=e.dates,a=Object(G.a)(t.dateRange,2),l=a[0],r=void 0===l?null:l,o=a[1],i=void 0===o?null:o,s=t.workId,c=e.includes,u=c.isHoliday,d=void 0!==u&&u,m=c.isWeekend,f=void 0!==m&&m,p=n.props,h=p.bulkData,y=h.monthStart,v=h.monthEnd,g=h.userId,b=p.callBack,E=n.state.data;(function(e,t){return $.b.loading({content:"Loading...",key:1}),it.a.post(Vr+"bulkEntry/".concat(e.monthStart,"&").concat(e.monthEnd,"&").concat(e.userId),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?($.b.success({content:r,key:1}),l.actualHours=l.hours,fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return ge(e,1,5)}))})({monthStart:y.format(n.dateFormat),monthEnd:v.format(n.dateFormat),userId:g},{startDate:r.format("YYYY-MM-DD"),endDate:i.format("YYYY-MM-DD"),holidays:d,weekends:f,milestoneId:s,entries:E.reduce((function(e,t){var a=t.date,n=t.startTime,l=t.endTime,r=t.breakHours;return n&&l&&e.push({date:a,startTime:n.format("HH:mm"),endTime:l.format("HH:mm"),breakHours:r?K.a.duration(r.format("HH:mm")).asHours():0}),e}),[])}).then((function(e){e.success?b():n.setState({loading:!1})}))},n.onConfirm=function(){var e=ta.a.confirm({title:"Do you wish to proceed?",icon:l.a.createElement(Rr.a,null),content:"You are about to apply a bulk timesheet data entry. Any existing timesheet entries for the project and dates already entered will be overwritten.",okButtonProps:{htmlType:"submit",form:"my-form"},okText:"Yes",cancelText:"No",onOk:function(){e.destroy()},onCancel:function(){n.setState({loading:!0},(function(){e.destroy()}))}})},n.formRef=l.a.createRef();var r=e.bulkData,o=r.monthStart,i=r.monthEnd;return n.dateFormat="DD-MM-YYYY",n.dateKeyFormat="YYYY-MM-DD",n.columns=[{title:"Date",dataIndex:"date",key:"date",width:"22%",render:function(e,t){var a;return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null," ",me(t.key,!0,!0)," "),l.a.createElement(h.a,null,l.a.createElement(Te.a,{title:"Weekend"!==t.holiday?null!==(a=t.leaveApplied)&&void 0!==a?a:t.holiday:""},l.a.createElement(Ye.a.Text,{style:{color:"red",fontSize:10}},t.holiday))))}},{title:"Start Time",dataIndex:"startTime",key:"startTime",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:["entry",me(t.key,!0,n.dateFormat),"startTime"]},l.a.createElement(pt.a,{placeholder:"Start Time",use12Hours:!0,format:"hh:mm a",bordered:!1,minuteStep:15,showNow:!1,size:"small",onChange:function(e){n.setHours(me(t.key,!0,n.dateFormat),a)}}))}},{title:"End Time",dataIndex:"endTime",key:"endTime",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:["entry",me(t.key,!0,n.dateFormat),"endTime"]},l.a.createElement(pt.a,{placeholder:"End Time",use12Hours:!0,format:"hh:mm a",bordered:!1,minuteStep:15,showNow:!1,size:"small",onChange:function(e){n.setHours(me(t.key,!0,n.dateFormat),a)}}))}},{title:"Break",dataIndex:"breakHours",key:"breakHours",render:function(e,t,a){return l.a.createElement(nt.a.Item,{noStyle:!0,name:["entry",me(t.key,!0,n.dateFormat),"breakHours"]},l.a.createElement(pt.a,{placeholder:"Break",format:"HH:mm",minuteStep:15,showNow:!1,bordered:!1,size:"small",onChange:function(e){n.setHours(me(t.key,!0,n.dateFormat),a)}}))}},{title:"Daily Hours",dataIndex:"actualHours",key:"actualHours",align:"center"}],n.state={loading:!1,disabled:!1,holidays:[],leaveDays:[],BasicFields:[{Placeholder:"Project",fieldCol:6,rangeMin:!0,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:18,key:"workId",size:"small",rules:[{required:!0,message:"Project Is Required"}],data:[],type:"Select",onChange:function(e){n.projectLeaveRequest(e)}},{Placeholder:"Dates",rangeMin:!0,fieldCol:6,size:"small",type:"Text",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:18,key:"dateRange",rangeMin:function(e){return e&&!e.isBetween(o,i,"day","[]")},size:"small",type:"RangePicker",rules:[{required:!0,message:"Dates Are Required"}],fieldStyle:{width:"100%"},ranges:{"This Month":[o,i]},onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.formRef.current.getFieldsValue(),a=t.times;t.dates.dateRange,t.include;e=e||[],n.getDateArray(e[0],e[1],a)}},{Placeholder:"Time",fieldCol:6,size:"small",type:"Text",itemStyle:{marginBottom:"10px"}},{object:"times",fieldCol:18,key:"timeRange",type:"TimeRange",mode:"use12Hours",orderCheck:!1,rangeMax:!1,rangeMin:15,size:"small",showTime:"hh:mm a",onChange:function(e){var t=n.formRef.current.getFieldsValue(),a=t.times,l=t.dates.dateRange,r=void 0===l?[]:l;t.include;r=r||[],n.getDateArray(r[0],r[1],a)}},{Placeholder:"Break Hours",fieldCol:6,size:"small",type:"Text",itemStyle:{marginBottom:"10px"}},{object:"times",fieldCol:18,key:"breakHours",rangeMin:15,rangeMax:!1,type:"TimePicker",fieldStyle:{width:"auto"},size:"small",showTime:"HH:mm",onChange:function(e){var t=n.formRef.current.getFieldsValue(),a=t.times,l=t.dates.dateRange,r=void 0===l?[]:l;t.include;r=r||[],n.getDateArray(r[0],r[1],a)}},{fieldCol:24,size:"small",Placeholder:"Include",type:"Title",fieldStyle:{marginTop:"5px"},mode:5},{object:"includes",fieldCol:24,key:"isWeekend",size:"small",label:"Weekends",initialValue:!1,type:"Checkbox",valuePropName:"checked",itemStyle:{margin:"5px 10px"},onChange:function(e){var t=n.formRef.current.getFieldsValue(),a=t.times,l=t.dates.dateRange,r=void 0===l?[]:l;t.include;r=r||[],n.getDateArray(r[0],r[1],a)}},{object:"includes",fieldCol:24,key:"isHoliday",label:"Holidays",size:"small",initialValue:!1,type:"Checkbox",valuePropName:"checked",itemStyle:{margin:"5px 10px"},onChange:function(e){var t=n.formRef.current.getFieldsValue(),a=t.times,l=t.dates.dateRange,r=void 0===l?[]:l;t.include;r=r||[],n.getDateArray(r[0],r[1],a)}},{object:"includes",fieldCol:24,key:"isLeave",label:"Leave Applied Days",size:"small",initialValue:!1,type:"Checkbox",valuePropName:"checked",itemStyle:{margin:"5px 10px"},onChange:function(e){var t=n.formRef.current.getFieldsValue(),a=t.times,l=t.dates.dateRange,r=void 0===l?[]:l;t.include;r=r||[],n.getDateArray(r[0],r[1],a)}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.close,r=this.state,o=r.BasicFields,i=r.data,s=void 0===i?[]:i,c=r.loading,u=void 0!==c&&c;return l.a.createElement(ta.a,{title:"Bulk Time Entries",maskClosable:!1,destroyOnClose:!0,centered:!0,visible:a,okButtonProps:{disabled:u},okText:u?l.a.createElement(la.a,null):"Save",onCancel:n,onOk:function(){e.setState({loading:!0},(function(){e.onConfirm()}))},width:"85vw"},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,size:"small",layout:"inline",onFinish:this.onSubmit},l.a.createElement(p.a,{className:"moz-width"},l.a.createElement(h.a,{span:10},l.a.createElement(p.a,null,l.a.createElement(Rt,{FormFields:o}))),l.a.createElement(h.a,{span:14},l.a.createElement(ea.a,{sticky:!0,style:{height:"60vh",overflowY:"scroll",position:"relative"},pagination:!1,rowKey:function(e){return e.key},columns:this.columns,dataSource:s,on:!0,size:"small",className:"fs-v-small",summary:function(t){return e.getTableSummary(t)}})))))}}]),a}(n.Component)),bo=Ye.a.Title,Eo=Ye.a.Link,ko=Ye.a.Text,So=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){Gr().then((function(t){var a=0,n=function(e){var t=pe(),a=t.id,n=t.permissions,l=JSON.parse(n)[e],r={};return Object.entries(l).map((function(e){for(var t=Object(G.a)(e,2),a=t[0],n=t[1],l=0,o=Object.entries(n);l<o.length;l++){var i=Object(G.a)(o[l],2),s=(i[0],i[1]);if(r[a]=s,s)break}})),{anyPermissions:r,modulePermission:l,userLoginId:parseInt(a)}}("TIMESHEETS"),l=n.anyPermissions,r=n.userLoginId;t.success&&t.data.length>0&&(a=t.data.value,t.data.forEach((function(e){e.value===r&&(a=e.value)}))),e.setState({USERS:t.success?t.data:[],sUser:a,permissions:l,loginId:r},(function(){e.columns(),e.state.sUser&&e.getSheet()}))})).catch((function(e){console.log(e)}))},e.getProjects=function(t,a,n){Ut({userId:t,phase:0,startDate:a.format("DD-MM-YYYY"),endDate:n.format("DD-MM-YYYY")}).then((function(t){t.success&&e.setState({milestones:t.data})}))},e.getSheet=function(){var t=e.state,a=t.sUser,n=t.sheetDates,l=n.startDate,r=n.endDate;a&&qr({userId:a,startDate:l.format("DD-MM-YYYY"),endDate:r.format("DD-MM-YYYY")}).then((function(t){var a,n,l;e.setState({timesheet:null!==(a=t.data)&&void 0!==a?a:{},data:null!==(n=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.milestones)&&void 0!==n?n:[],sTMilestones:{milestones:[],keys:[]}})})),e.columns()},e.columns=function(){var t=e.state.sheetDates,a=t.sWeek,n=t.startDate,r=t.endDate,o=e.state,i=o.columns,s=o.sUser,c=o.loginId,u=o.permissions,d=void 0;i=[i[0],i[1]];for(var m=K()(a.format("YYYY-MM-DDTHH:mm:ss")).startOf("isoWeek"),f=K()(a.format("YYYY-MM-DDTHH:mm:ss")).endOf("isoWeek").diff(m,"days"),y=0;y<=f;y++){var v;d=null!==(v=d)&&void 0!==v?v:K()(m.format()),i.push({title:l.a.createElement("span",null,l.a.createElement("div",null,d.format("ddd")),l.a.createElement("div",null," ",d.format("DD MMM")," ")),heading:l.a.createElement("span",null,d.format("dddd - DD MM YYYY")),dateObj:K()(d.format()),dataIndex:d.format("D/M"),key:d.format("D/M"),className:(d.isBefore(n)||d.isAfter(r))&&"prevDates-TMcell",width:200,editable:!0,align:"center"}),d=d.add(1,"days")}e.setState({columns:i},(function(){var t=e.state.columns.map((function(t){return"project"===t.dataIndex||"totalHours"===t.dataIndex?t:Object(tt.a)(Object(tt.a)({},t),{},{render:function(a,o,i){if(!o.leaveRequest){var d=(!(null===u||void 0===u?void 0:u.ADD)||s===c)&&t.dateObj.isSameOrAfter(n)&&t.dateObj.isSameOrBefore(r),m=("SV"===o.status||"RJ"===o.status||!o.status)&&!1!==o.phase&&s===c;if(a){var f=K.a.duration(a.breakHours,"hours");return f=f&&K()(K()().hours(f.hours()).minutes(f.minutes())).format("HH:mm"),l.a.createElement(Te.a,{title:a.notes&&"Note: ".concat(a.notes)},l.a.createElement(p.a,{style:{border:"1px solid"}},l.a.createElement(h.a,{span:22},"Start Time:"," ",a.startTime&&K()(a.startTime,["HH:mm"]).format("h:mm A")),l.a.createElement(h.a,{span:2},m&&l.a.createElement(De.a,{placement:"bottomCenter",overlay:l.a.createElement(b.a,{onClick:e.handleMenuClick},l.a.createElement(b.a.Item,{disabled:!(null===u||void 0===u?void 0:u.UPDATE)&&s!==c,key:"Edit",onClick:function(){e.getRecord(o,i,t.dataIndex,t.heading)}},l.a.createElement(ro.a,null)),l.a.createElement(b.a.Item,{key:"delete",disabled:!(null===u||void 0===u?void 0:u.DELETE)&&s!==c,onClick:function(){e.deleteRecord(a,i,t.dataIndex)}},l.a.createElement(Hn.a,null)))},l.a.createElement(oo.a,{style:{cursor:"pointer"}}))),l.a.createElement(h.a,{span:24},"End Time:"," ",a.endTime&&K()(a.endTime,["HH:mm"]).format("h:mm A")),l.a.createElement(h.a,{span:24},"Break: ",f&&f),l.a.createElement(h.a,{span:24},"Total Hours:"," ",a.actualHours&&a.actualHours)))}return m&&d&&l.a.createElement(R.a,{style:{fontSize:24,color:"#1890ff"},onClick:function(){e.getRecord(o,i,t.dataIndex,t.heading)}})}if(a)return l.a.createElement(Te.a,{title:a.notes&&"Note: ".concat(a.notes)},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},"Off Hours: ",ue(a.hours)),l.a.createElement(h.a,null,"Status: "),l.a.createElement(h.a,{style:{marginLeft:"auto",marginRight:5}},l.a.createElement(Pe.b,{align:"end"},l.a.createElement(jl,{text:a.status}),l.a.createElement(Te.a,{placement:"top",title:a.statusMsg,destroyTooltipOnHide:!0},a.statusMsg&&l.a.createElement(zr.a,{style:{fontSize:"small"}}))))))}})}));e.setState({columns:t})}))},e.deleteRecord=function(t,a,n){Hr(t.entryId).then((function(l){if(l.success){var r=e.state.data;delete r[a][n],r[a].totalHours=r[a].totalHours-t.actualHours,e.setState({data:r})}}))},e.getRecord=function(t,a,n,l){var r={milestoneEntryId:t.milestoneEntryId,milestoneId:t.milestoneId,milestone:t.milestone,row:a,col:n,title:l};if(t[n]){var o=t[n].breakHours,i=K.a.duration(o,"hours"),s={entryId:t[n].entryId,startTime:K()(t[n].startTime,"HH:mm")._isValid?K()(t[n].startTime,"HH:mm"):null,endTime:K()(t[n].endTime,"HH:mm")._isValid?K()(t[n].endTime,"HH:mm"):null,breakHours:i&&K()().hours(i.hours()).minutes(i.minutes()),notes:t[n].notes&&t[n].notes};e.setState({isVisible:!0,editTime:s,timeObj:r})}else e.setState({isVisible:!0,editTime:!1,timeObj:r})},e.callBack=function(t,a){var n=e.state,l=n.data,r=n.timeObj,o=r.row,i=r.col;if(t.entryId=t.id,l[o].milestoneEntryId=t.milestoneEntryId,a){var s,c;l[o][i]=t,l[o].totalHours=(null!==(s=l[o].totalHours)&&void 0!==s?s:0)+(null!==(c=t.actualHours)&&void 0!==c?c:0)}else{var u,d,m=l[o][i].actualHours;l[o][i]=t,l[o].totalHours=(null!==(u=l[o].totalHours)&&void 0!==u?u:0)+(null!==(d=t.actualHours)&&void 0!==d?d:0)-m}e.setState({data:l,timeObj:!1,isVisible:!1,editTime:!1})},e.reviewTimeSheet=function(t,a,n,l){var r=e.state.sheetDates,o=r.startDate,i=r.endDate,s={pEntryId:t,userId:e.state.sUser,startDate:o.format("DD-MM-YYYY"),endDate:i.format("DD-MM-YYYY")};Ur(s,a).then((function(t){var a=e.state.data;t.success&&n>=0&&(a[n].status=l,e.setState({data:a}))}))},e.actionTimeSheet=function(t){var a=e.state.sheetDates,n=a.startDate,l=a.endDate,r=e.state.sTMilestones.keys,o={userId:e.state.sUser,startDate:n.format("DD-MM-YYYY"),endDate:l.format("DD-MM-YYYY")};Ur(o,t,{milestoneEntries:r}).then((function(t){e.getSheet()}))},e.openAttachModal=function(t,a){var n={};if(t.milestoneEntryId){if(a>=0)n={milestoneEntryId:[t.milestoneEntryId],milestoneId:t.milestoneId,notes:t.notes,milestone:t.milestone,status:t.status,rowIndex:a};else{var l=e.state.sTimesheet,r=l.keys,o=l.timesheet;n={milestoneEntryId:r,milestoneId:o[0].milestoneId,notes:o[0].notes,milestone:o[0].milestone,status:!1}}e.setState({timeObj:n,isAttach:!0})}else e.exportUploadError()},e.openBulkModal=function(){var t=e.state.sheetDates,a=t.startDate,n=t.endDate,l=e.state,r=l.sUser,o=l.data;e.setState({isBulk:{userId:r,monthStart:a,monthEnd:n,visible:!0,leaves:o.filter((function(e){return!0===e.leaveRequest}))}})},e.exportUploadError=function(){$.b.error({content:"Can't Upload/Export To Timesheet Without Any Time Entry",key:"empty"},3)},e.attachCallBack=function(t){var a=e.state,n=a.data,l=a.timeObj.rowIndex;l>=0?(n[l].notes=t.notes,n[l].attachment=t.attachment,e.setState({data:n,isAttach:!1,editTime:!1,timeObj:!1})):e.getSheet()},e.exporPDF=function(t){var a,n,l=t?[t]:null===(a=e.state)||void 0===a||null===(n=a.sTimesheet)||void 0===n?void 0:n.keys;l?e.setState({eData:l,isDownload:!0}):e.exportUploadError()},e.summaryFooter=function(t){var a=e.state.columns,n=e.state.sheetDates,r=n.startDate,o=n.endDate;if(t.length>0)return l.a.createElement(ea.a.Summary,{fixed:"top"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0}," "),a.map((function(e,a){var n=e.key,i=e.dateObj,s=0;return t.map((function(e,a){var l;"project"===n||e.leaveRequest||(s+="totalHours"===n?null!==(l=t[a].totalHours)&&void 0!==l?l:0:e[n]?e[n].actualHours:0)})),"project"===n?l.a.createElement(ea.a.Summary.Cell,{index:a+1,key:a+1},"Total Hours"):"totalHours"===n||i&&i.isSameOrAfter(r)&&i.isSameOrBefore(o)?l.a.createElement(ea.a.Summary.Cell,{index:a+1,key:a+1,align:"center"},ue(s)):l.a.createElement(ea.a.Summary.Cell,{index:a+1,key:a+1,align:"center",className:"prevDates-TMcell"},"0.00")}))))},e.milestoneSelect=function(t,a){e.setState({sTMilestones:{milestones:a,keys:t}})},e.multiAction=function(t){var a,n=e.state.sTMilestones,r=n.milestones,o=(n.keys,e.state.sheetDates.cMonth),i=l.a.createElement("div",null,r.map((function(e,t){var a=e.project,n=e.milestone,o=e.projectType;return l.a.createElement("div",{key:t},a,1===o&&" (".concat(n,")"),r.length-1>t&&",")}))),s=ta.a.confirm({title:"Do you wish to ".concat(t," timesheet for the month of ").concat(o.format("MMM YYYY")," ?"),icon:"Delete"===t?l.a.createElement(Rr.a,null):l.a.createElement(S.a,null),content:i,okButtonProps:{danger:null===(a="Delete"===t)||void 0===a||a},okText:"Yes",cancelText:"No",onOk:function(){e.actionTimeSheet(t),s.destroy()}})},e.handleSelWeek=function(t){var a=e.state.sheetDates,n=a.sWeek,l=a.startDate,r=a.endDate,o=a.cMonth;if("pWeek"===t){var i=K()(n.subtract(7,"days"));n.isSame(l)||e.setState({sheetDates:Object(tt.a)(Object(tt.a)({},a),{},{sWeek:i.isSameOrAfter(l)?i:K()(o).startOf("month")})},(function(){return e.columns()}))}else if("nWeek"===t){var s=K()(n.add(7,"days"));n.isSame(r)||e.setState({sheetDates:Object(tt.a)(Object(tt.a)({},a),{},{sWeek:s.isSameOrBefore(r)?s:K()(o).endOf("month")})},(function(){return e.columns()}))}},e.bulkCallBack=function(){var t=e.state,a=t.sUser,n=t.sheetDates,l=n.startDate,r=n.endDate;a&&qr({userId:a,startDate:l.format("DD-MM-YYYY"),endDate:r.format("DD-MM-YYYY")}).then((function(t){var a,n,l;e.setState({timesheet:null!==(a=t.data)&&void 0!==a?a:{},data:null!==(n=null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.milestones)&&void 0!==n?n:[],sTMilestones:{milestones:[],keys:[]},isBulk:!1})}))},e.state={isVisible:!1,proVisible:!1,isAttach:!1,sheetDates:{startDate:K()().startOf("month"),endDate:K()().endOf("month"),cMonth:K()(),sWeek:K()()},timeObj:!1,editTime:!1,loading:!1,eData:[],USERS:[],sUser:null,loginId:null,data:[],comments:null,sMilestone:{},permissions:{},milestones:[],sTMilestones:{milestones:[],keys:[]},columns:[{title:"Project",dataIndex:"project",key:"project",fixed:"left",width:300,render:function(t,a,n){var r;return a.leaveRequest?l.a.createElement(p.a,{gutter:[0,10]},l.a.createElement(h.a,{span:24},a.leaveType),l.a.createElement(h.a,{span:24},t," ")):l.a.createElement(p.a,{gutter:[0,10],style:{height:90}},l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,{span:19},l.a.createElement("div",null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(a.projectId,"/info")},className:"nav-link"},l.a.createElement(ko,{ellipsis:{tooltip:t}},t))),1===a.projectType&&l.a.createElement("div",null,l.a.createElement(s.b,{to:{pathname:"/projects/".concat(a.projectId,"/milestones/").concat(a.milestoneId,"/resources")},className:"nav-link"},l.a.createElement(ko,{ellipsis:{tooltip:a.milestone}},"(",a.milestone,")")))),l.a.createElement(h.a,{style:{marginLeft:"auto"}},l.a.createElement(Te.a,{placement:"top",title:"Export",destroyTooltipOnHide:!0},l.a.createElement(Ar.a,{onClick:function(){e.exporPDF(a.milestoneEntryId,n)}})),l.a.createElement("span",{className:"AP"===a.status?"disabledanticon":"anticon"},l.a.createElement(Te.a,{placement:"top",title:"Upload",destroyTooltipOnHide:!0},l.a.createElement(Fr.a,{disabled:"AP"===a.status,onClick:function(){e.openAttachModal(a,n)},style:{color:"#1890ff",marginLeft:10}})))))),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},a.attachment&&l.a.createElement(h.a,{span:16},l.a.createElement(Eo,{href:"".concat(J,"/files/").concat(a.attachment.uid),download:a.attachment.name,target:"_blank",rel:"noopener noreferrer",ellipsis:!0},l.a.createElement(Te.a,{placement:"topLeft",title:a.attachment.name,destroyTooltipOnHide:!0},l.a.createElement(fn.a,null)," ",null===(r=a.attachment)||void 0===r?void 0:r.name))),l.a.createElement(h.a,{style:{marginLeft:"auto"}},a.status&&l.a.createElement(jl,{text:a.status})),l.a.createElement(h.a,null,l.a.createElement(Te.a,{placement:"top",title:a.actionNotes,destroyTooltipOnHide:!0},a.actionNotes&&l.a.createElement(zr.a,{style:{fontSize:"small"}}))))))}},{title:"Monthly Total",dataIndex:"totalHours",key:"totalHours",fixed:"left",align:"center",width:100,render:function(e,t){return!t.leaveRequest&&ue(e)}}]},e}return Object(u.a)(a,[{key:"delRow",value:function(e){var t=this.state.data.filter((function(t,a){return a!=e}));this.setState({data:t})}},{key:"highlightRow",value:function(e){}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.loading,r=a.data,o=a.isVisible,i=a.proVisible,s=a.columns,c=a.editTime,u=a.timeObj,d=a.sheetDates,m=a.milestones,f=a.sMilestone,y=a.isAttach,v=a.isBulk,g=a.isDownload,b=a.eData,E=a.USERS,k=a.sUser,S=a.loginId,C=a.sTMilestones,j=a.permissions,O=(C.keys.length<1&&(k===S||(null===j||void 0===j||j.DELETE)),this.state.sheetDates),x=O.sWeek,w=O.startDate,I=O.endDate;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between",gutter:20},l.a.createElement(h.a,null,l.a.createElement(bo,{level:4},"Timesheet Submission")),l.a.createElement(h.a,{style:{marginLeft:"auto"}},l.a.createElement(vt.a,{placeholder:"Select User",options:E,value:k,style:{width:300},showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(e,a){t.setState({sUser:e},(function(){t.getSheet()}))}})),l.a.createElement(h.a,null,l.a.createElement(ft.a,{mode:"month",picker:"month",format:"MMM-YYYY",onChange:function(e){t.setState({sheetDates:{cMonth:null!==e&&void 0!==e?e:K()(),startDate:K()(null!==e&&void 0!==e?e:K()()).startOf("month"),sWeek:K()(null!==e&&void 0!==e?e:K()()).startOf("month"),endDate:K()(null!==e&&void 0!==e?e:K()()).endOf("month")}},(function(){t.getSheet()}))},defaultValue:K()()})),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",disabled:k!==S,onClick:function(){t.openBulkModal()}},"Add Time Entries"))),l.a.createElement(p.a,{justify:"end",gutter:[0,20]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{disabled:x.isSameOrBefore(w),value:"pWeek",size:"small",onClick:function(){return t.handleSelWeek("pWeek")}},l.a.createElement(io.a,null)),l.a.createElement(rt.a,{disabled:x.isSameOrAfter(I),value:"nWeek",size:"small",onClick:function(){return t.handleSelWeek("nWeek")}},l.a.createElement(so.a,null)))),l.a.createElement(ea.a,{sticky:!0,size:"small",style:{maxHeight:"fit-content"},className:"timeSheet-table fs-small",rowSelection:{onChange:function(e,a){t.milestoneSelect(e,a)},getCheckboxProps:function(e){return{disabled:k!==S||"SB"===e.status||"AP"===e.status||e.leaveRequest||!1===e.phase}}},scroll:{x:"'max-content'"},bordered:!0,pagination:!1,rowKey:function(e){return e.milestoneEntryId},columns:s,dataSource:Object(et.a)(r),summary:function(e){return t.summaryFooter(e)}}),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"success",disabled:k!==S||C.keys.length<1,onClick:function(){return t.multiAction("Submit")}},"Submit")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",danger:!0,disabled:C.keys.length<1&&(k!==S||!(null===j||void 0===j||null===(e=j.DELETE)||void 0===e?void 0:e.ANY)),onClick:function(){return t.multiAction("Delete")}},"Delete"))),o&&l.a.createElement(co,{visible:o,timeObj:u,editTime:c,sheetDates:d,user:k,close:function(){return t.setState({isVisible:!1,editTime:!1,timeObj:!1})},callBack:this.callBack}),y&&l.a.createElement(Kr,{visible:y,timeObj:u,close:function(){return t.setState({isAttach:!1,editTime:!1,timeObj:!1})},callBack:this.attachCallBack}),v&&l.a.createElement(go,{visible:!!(null===v||void 0===v?void 0:v.visible),bulkData:v,callBack:this.bulkCallBack,close:function(){return t.setState({isBulk:!1})}}),g&&l.a.createElement(Zr,{milestoneEntryId:b,close:function(){return t.setState({isDownload:!1})}}),i&&l.a.createElement(ta.a,{title:"Add Project",maskClosable:!1,centered:!0,visible:i,okButtonProps:{disabled:n},okText:n?l.a.createElement(la.a,null):"Add",width:550,onCancel:function(){t.setState({proVisible:!1,sMilestone:{}})},onOk:function(){var e=t.state,a=e.data,n=e.sMilestone;if(a.findIndex((function(e){return e.milestoneId===n.value}))>=0)$.b.error({content:"Project TimeSheet is already created...!"},5);else{var l=a.findIndex((function(e){return e.leaveRequest})),r=-1===l?a.length:l;a.splice(r,0,{milestoneId:n.value,project:n.label,phase:!0})}t.setState({proVisible:!1,data:Object(et.a)(a),sMilestone:{}})}},l.a.createElement(p.a,{justify:"center"},l.a.createElement(h.a,{span:22},l.a.createElement(vt.a,{placeholder:"Select Project",style:{width:"100%"},options:m,value:f.value,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onSelect:function(e,a){t.setState({sMilestone:a})}})))))}}]),a}(n.Component),Co=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){if(console.log(e.props),e.props.editOff){e.getRecord(e.state.data);e.state.default_hour}},e.submit=function(){e.timeRef.current.refs.off_form.submit()},e.BasicCall=function(t){var a=t.obj;e.props.editOff?(console.log("edit"),e.editRecord(a)):(console.log("emes"),e.addTimeOff(a))},e.addTimeOff=function(t){var a=e.props,n=a.rows,l=a.callBack;e.setState({loading:!0}),t.key=n,l(t,!1),e.onCancel()},e.getRecord=function(t){var a=t;console.log(a),e.timeRef.current.refs.off_form.setFieldsValue({obj:a})},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editOff,l=a.callBack;t.key=n,l(t,n),e.onCancel()},e.onCancel=function(){var t=e.state.timeFields;delete t.initialValues,e.setState({basicSubmitted:!1,timeFields:Object(tt.a)({},t)},(function(){e.props.close()}))},e.timeRef=l.a.createRef(),e.state={data:{type:"Sick Leave",b_date:K()("Nov 25 2020"),e_date:K()("Nov 25 2020"),h_off:8,d_off:1,desc:"I was sick"},default_hour:8,hasChanged:!1,loading:!1,timeFields:{formId:"off_form",FormCol:24,justifyField:"center",FormLayout:"inline",layout:{labelCol:{span:10},wrapperCol:{span:0}},size:"middle",fields:[{Placeholder:"TimeOff Type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"type",size:"small",type:"Select",data:[{value:"Sick Leave",label:"Sick Leave"},{value:"Vacations",label:"Vacations"},{value:"Training",label:"Training"}]},{Placeholder:"Begin Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"b_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj,l=n.b_date.format("YYYY MMM D");n.d_off=n.e_date.diff(l,"days")+1,console.log(n.d_off),n.h_off=n.d_off*a,this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(on.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(on.a)(e))},{object:"obj",fieldCol:12,key:"e_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.b_date=n.b_date?n.b_date:K()();var l=n.b_date.format("YYYY MMM D");n.d_off=n.e_date.diff(l,"days")+1,console.log(n.d_off),n.h_off=n.d_off*a,this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(on.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(on.a)(e))},{Placeholder:"Hours",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Days",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"h_off",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.d_off=n.h_off/a,n.b_date=n.b_date?n.b_date:K()();var l=n.d_off<=1?0:Math.ceil(n.d_off)-1;n.e_date=K()(n.b_date).add(l,"d"),this.timeRef.current.refs.off_form.setFieldsValue({obj:n}),this.setState({hasChanged:!1})}}.bind(Object(on.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(on.a)(e))},{object:"obj",fieldCol:12,key:"d_off",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},onBlur:function(e){var t=this.state,a=t.default_hour;if(t.hasChanged){var n=this.timeRef.current.refs.off_form.getFieldsValue().obj;n.h_off=n.d_off*a,n.b_date=n.b_date?n.b_date:K()();var l=n.d_off<=1?0:Math.ceil(n.d_off)-1;n.e_date=K()(n.b_date).add(l,"d"),this.timeRef.current.refs.off_form.setFieldsValue({obj:n})}}.bind(Object(on.a)(e)),onChange:function(e){this.setState({hasChanged:!0})}.bind(Object(on.a)(e))},{Placeholder:"Descriptions",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"desc",size:"small",type:"Textarea"},{Placeholder:"Attachments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"attach",size:"small",mode:"",Placeholder:l.a.createElement(l.a.Fragment,null,"Click or drag & Drop ",l.a.createElement(ol.a,null)),type:"Dragger",labelAlign:"right",valuePropName:"fileList",getValue:!0}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editOff,n=t.visible,r=this.setState,o=r.timeFields,i=r.loading;return l.a.createElement(ta.a,{title:a?"Edit Time Off":"Add Time Off",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:i},okText:i?l.a.createElement(la.a,null):"Save",onCancel:this.onCancel,width:900},l.a.createElement(pa,{ref:this.timeRef,Callback:this.BasicCall,FormFields:o}))}}]),a}(n.Component),jo=Ye.a.Title,Oo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleDelete=function(e){var t=Object(et.a)(n.state.data);n.setState({data:t.filter((function(t){return t.code!==e}))})},n.callBack=function(e,t){var a=n.state.data;!1===t?n.setState({data:[].concat(Object(et.a)(a),[e])}):(a[t]=e,n.setState({data:a}))},n.getRecord=function(e){n.setState({FormFields:Object(tt.a)(Object(tt.a)({},n.state.FormFields),{},{initialValues:{obj:e}}),editOff:e.key}),n.toggelModal(!0)},n.editRecord=function(e){e.key=n.state.editOff,e.code=e.key,n.state.data[e.key-1]=e,n.setState({data:Object(et.a)(n.state.data),mergeObj:{}},(function(){n.toggelModal(!1)}))},n.closeModal=function(){n.setState({infoModal:!1,editEmp:!1})},n.contactForm=l.a.createRef(),n.columns=[{title:"Type",dataIndex:"type",key:"type"},{title:"Descriptions",dataIndex:"desc",key:"desc"},{title:"Hours off",dataIndex:"h_off",key:"h_off"},{title:"Days Off",dataIndex:"d_off",key:"d_off"},{title:"Begin Date",dataIndex:"b_date",key:"b_date"},{title:"End Date",dataIndex:"e_date",key:"e_date"},{title:"Status",dataIndex:"status",key:"status"},{title:"...",key:"action",align:"center",width:"1%",render:function(e){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{danger:!0},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(e.code)},okText:"Yes",cancelText:"No"},"Delete")),l.a.createElement(b.a.Item,{onClick:function(){n.setState({infoModal:!0,editOff:e.key})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.col_Status=[{title:"Type",dataIndex:"type",key:"type"},{title:"Earned + Forwarded",dataIndex:"earn_f",key:"earn_f"},{title:"Consumed",dataIndex:"consumed",key:"consumed"},{title:"Available",dataIndex:"available",key:"available"}],n.state={data:[{key:1,type:"Sick Leaves",desc:"I was sick",h_off:8,d_off:1,b_date:"25 Nov 2020",e_date:"25 Nov 2020",status:"Approved"},{key:2,type:"Vacations",desc:"I want to go on trip",h_off:32,d_off:4,b_date:"12 Nov 2020",e_date:"16 Nov 2020",status:"Approved"},{key:3,type:"Training",desc:"I am expending my skills",h_off:8,d_off:1,b_date:"10 Oct 2020",e_date:"10 Oct 2020",status:"Approved"}],data_status:[{key:1,type:"Sick Leaves",earn_f:60,consumed:25,available:35},{key:2,type:"Vacations",earn_f:40,consumed:32,available:8},{key:3,type:"Training",earn_f:120,consumed:96,available:24}],infoModal:!1,editOff:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.data_status,r=t.infoModal,o=t.editOff;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{gutter:[0,100]},l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(jo,{level:4},"Time Offs")),l.a.createElement(h.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small"}," ",l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",onClick:function(){e.setState({infoModal:!0})},size:"small"}," ",l.a.createElement(na.a,null),"Add Timeoff")))),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{bordered:!0,columns:this.columns,dataSource:a,size:"small",className:"fs-small"})))),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(jo,{level:4},"Time Offs Status")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{bordered:!0,columns:this.col_Status,dataSource:n,size:"small",className:"fs-small"}))))),r&&l.a.createElement(Co,{visible:r,editOff:o,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),xo=In.a.TabPane,wo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props,a=t.editLead,n=t.project,l=e.state,r=l.ManageFields,o=l.DatesFields,i=l.BasicFields;n&&(r[4].Placeholder="Project Manager",r[5].key="projectManagerId",o[0].rangeMin=!0,o[2].rules=[{required:!0,message:"Start Date is Required"}],o[1].rangeMin=!0,o[3].rules=[{required:!0,message:"End Date is Required"}],o[4].rangeMin=!0,o[6].rules=[{required:!0,message:"Dailty Hours is Required"}]),a&&(i[10].disabled=!0);Promise.all([Yt(),_t(),At(),Bt("helpers/contact-persons?active=1&employee=1&associated=1&label=1"),a&&e.getRecord(a),qt()]).then((function(t){var a=e.state,n=a.BasicFields,l=a.ManageFields;t[1].success&&(t[1].data[0].disabled=!0),n[2].data=t[0].success?t[0].data:[],n[3].data=t[1].success?t[1].data:[],n[11].data=t[2].success?t[2].data:[],n[6].data=t[4].success?t[4].data:[],n[17].data=t[5].success?t[5].data:[],l[2].data=t[3].success?t[3].data:[],l[3].data=t[3].success?t[3].data:[],l[5].data=t[3].success?t[3].data:[],e.setState({BasicFields:n,ManageFields:l,DatesFields:o})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b,E;e.setState({loading:!0});var k=t.basic,S=t.tender,C=t.dates,j=t.billing,O=t.manage,x=e.props.editLead,w={panelId:null!==(a=k.panelId)&&void 0!==a?a:null,organizationId:null!==(n=k.organizationId)&&void 0!==n?n:null,contactPersonId:null!==(l=k.contactPersonId)&&void 0!==l?l:null,title:null!==(r=k.title)&&void 0!==r?r:"",type:null!==(o=k.type)&&void 0!==o?o:"",stateId:null!==(i=k.stateId)&&void 0!==i?i:null,qualifiedOps:null!==(s=k.qualifiedOps)&&void 0!==s&&s,stage:null!==(c=k.stage)&&void 0!==c?c:null,linkedWorkId:null!==(u=k.linkedWorkId)&&void 0!==u?u:null,tender:null!==(d=S.tender)&&void 0!==d?d:"",tenderNumber:null!==(m=S.tenderNumber)&&void 0!==m?m:"",value:null!==(f=j.value)&&void 0!==f?f:0,cmPercentage:null!==(p=j.cmPercentage)&&void 0!==p?p:0,goPercentage:null!==(h=j.goPercentage)&&void 0!==h?h:0,getPercentage:null!==(y=j.getPercentage)&&void 0!==y?y:0,accountDirectorId:null!==(v=O.accountDirectorId)&&void 0!==v?v:null,accountManagerId:null!==(g=O.accountManagerId)&&void 0!==g?g:null,opportunityManagerId:null!==(b=O.opportunityManagerId)&&void 0!==b?b:null,projectManagerId:null!==(E=O.projectManagerId)&&void 0!==E?E:null,hoursPerDay:C.hoursPerDay,startDate:me(C.startDate,!0),endDate:me(C.endDate,!0),bidDate:me(C.bidDate,!0),entryDate:me(C.entryDate,!0)};x?e.editProject(w):e.addOpportunity(w)},e.addOpportunity=function(t){var a,n=e.props.callBack;(a=t,$.b.loading({content:"Loading...",key:1},5),it.a.post(uo,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1},5),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return ge(e,1,5)}))).then((function(t){t.success?n():e.setState({loading:!1})}))},e.editProject=function(t){e.props.project?e.workWon(t):e.editRecord(t)},e.getRecord=function(t){return mo(t).then((function(t){if(t.success){var a=t.basic,n=t.tender,l=t.billing,r=t.dates,o=t.manage;e.formRef.current.setFieldsValue({basic:a,tender:n,billing:l,dates:r,manage:o});var i="helpers/contact-persons?organizationId=".concat(a.organizationId,"&associated=1");return Bt(i).then((function(e){return{success:e.success,data:e.data}}))}}))},e.editRecord=function(t){var a,n=e.props,l=n.editLead,r=n.callBack;t.id=l,(a=t,$.b.loading({content:"Loading...",key:a.id}),it.a.put(uo+"/".concat(a.id),a,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a.id},5),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l}})).catch((function(e){return ge(e,a.id,5)}))).then((function(t){t.success?r():e.setState({loading:!1})}))},e.workWon=function(t){var a,n,l=e.props,r=l.editLead,o=l.callBack;console.log("workWon"),(a=r,n=t,$.b.loading({content:"Loading...",key:a}),it.a.put(uo+"/".concat(a,"/win"),n,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l}})).catch((function(e){return ge(e,a,5)}))).then((function(t){t.success?o():e.setState({loading:!1})}))},e.formRef=l.a.createRef(),e.state={editLead:!1,formSubmitted:!1,check:!1,leadValue:0,SKILLS:[],STATES:[],ORGS:[],loading:!1,BasicFields:[{Placeholder:"Panel",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"Organisation",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"panelId",size:"small",rules:[{required:!0,message:"Panel is Required"}],data:[],type:"Select"},{object:"basic",fieldCol:12,key:"organizationId",size:"small",rules:[{required:!0,message:"Organisation is Required"}],data:[],type:"Select",onChange:function(t){if(t){var a="helpers/contact-persons?organizationId=".concat(t,"&associated=1");Bt(a).then((function(t){if(t.success){var a=e.state.BasicFields;a[6].data=t.data,e.setState({BasicFields:a})}}))}else{var n=e.state.BasicFields;n[6].data=[];var l=e.formRef.current.getFieldsValue().basic;l.contactPersonId=void 0,e.formRef.current.setFieldsValue({basic:l}),e.setState({BasicFields:n})}}},{Placeholder:"Delegate Contact Person",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"contactPersonId",size:"small",data:[],type:"Select"},{object:"basic",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input"},{Placeholder:"Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"type",size:"small",rules:[{required:!0,message:"Type is Required"}],data:[{label:"Milestone",value:1},{label:"Time & Materials",value:2}],type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Qualified Ops",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Stage",fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"qualifiedOps",size:"small",data:[{label:"True",value:!0},{label:"False",value:!1}],itemStyle:{marginBottom:1},type:"Select"},{object:"basic",fieldCol:12,key:"stage",size:"small",data:[{label:"Lead",value:"L"},{label:"Tender Released",value:"TR"},{label:"Bid Development",value:"BD"},{label:"Bid Submitted",value:"BS"}],itemStyle:{marginBottom:1},type:"Select"},{Placeholder:"Linked Project",fieldCol:24,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"linkedWorkId",size:"small",data:[],itemStyle:{marginBottom:1},type:"Select"}],tenderFields:[{Placeholder:"Tender Title",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Tender Number",size:"small",fieldCol:12,type:"Text"},{object:"tender",fieldCol:12,key:"tender",size:"small",type:"Input"},{object:"tender",fieldCol:12,key:"tenderNumber",size:"small",type:"Input"}],BillingFields:[{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Contribution Margin as a %",size:"small",fieldCol:12,type:"Text"},{object:"billing",fieldCol:12,key:"value",size:"small",shape:"$",type:"InputNumber",onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=ue(a.cmPercentage?t*a.cmPercentage/100:0),a.discount=ue(a.goget?t*a.goget/100:0),a.upside=ue(a.discount?t-a.discount:0),e.formRef.current.setFieldsValue({billing:a})},fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"cmPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=(a.value?a.value*t/100:0).toFixed(2),e.formRef.current.setFieldsValue({billing:a})}},{Placeholder:"Contribution Margin",size:"small",fieldCol:12,type:"Text"},{fieldCol:12,Placeholder:"Go:",type:"Text",size:"small",tooltip:!0,tooltipTitle:"Likelihood Of Opportunity Going Live"},{object:"billing",fieldCol:12,key:"cm$",size:"small",shape:"$",disabled:!0,type:"InputNumber",fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"goPercentage",size:"small",shape:"%",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100,onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.goget=(a.getPercentage?a.getPercentage*t/100:0).toFixed(2),a.discount=(a.goget&&a.value?a.value*a.goget/100:0).toFixed(2),a.upside=(a.discount?a.value-a.discount:0).toFixed(2),e.formRef.current.setFieldsValue({billing:a})}},{fieldCol:12,Placeholder:"Get: ",size:"small",type:"Text",tooltip:!0,tooltipTitle:"Likelihood Of Winning Opportunity"},{Placeholder:"GO/Get",size:"small",fieldCol:12,type:"Text"},{object:"billing",fieldCol:12,key:"getPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.goget=(a.goPercentage?a.goPercentage*t/100:0).toFixed(2),a.discount=(a.goget&&a.value?a.value*a.goget/100:0).toFixed(2),a.upside=(a.discount?a.value-a.discount:0).toFixed(2),e.formRef.current.setFieldsValue({billing:a})}},{object:"billing",fieldCol:12,key:"goget",size:"small",shape:"%",disabled:!0,type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Discounted Value (Forecast Amount)",size:"small",fieldCol:12,type:"Text"},{Placeholder:"Upside Value",size:"small",fieldCol:12,type:"Text"},{object:"billing",fieldCol:12,key:"discount",size:"small",disabled:!0,shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"upside",size:"small",disabled:!0,shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}}],DatesFields:[{Placeholder:"Expected Project Start Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Expected Project End Date",fieldCol:12,size:"small",type:"Text"},{object:"dates",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().dates;return a.endDate&&t>a.endDate}},{object:"dates",fieldCol:12,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().dates;return a.startDate&&t<a.startDate}},{Placeholder:"Work Hours Per Day",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Bid Due Date",fieldCol:12,size:"small",type:"Text"},{object:"dates",fieldCol:12,key:"hoursPerDay",size:"small",rangeMin:0,rangeMax:24,type:"InputNumber",fieldStyle:{width:"100%"}},{object:"dates",fieldCol:12,key:"bidDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"Entry Date",fieldCol:24,size:"small",type:"Text"},{object:"dates",fieldCol:12,key:"entryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}],ManageFields:[{Placeholder:"Account Director",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Account Manager",fieldCol:12,size:"small",type:"Text"},{object:"manage",fieldCol:12,key:"accountDirectorId",size:"small",data:[],type:"Select"},{object:"manage",fieldCol:12,key:"accountManagerId",size:"small",data:[],type:"Select"},{Placeholder:"Opportunity Manager",fieldCol:24,size:"small",type:"Text"},{object:"manage",fieldCol:12,key:"opportunityManagerId",size:"small",data:[],type:"Select"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editLead,a=e.visible,n=e.close,r=this.state,o=r.BasicFields,i=r.tenderFields,s=r.DatesFields,c=r.BillingFields,u=r.ManageFields,d=r.loading;return l.a.createElement(ta.a,{title:t?"Edit opportunity":"Add opportunity",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:d,htmlType:"submit",form:"my-form"},okText:d?l.a.createElement(la.a,null):"Save",onCancel:n,width:750},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{dates:{entryDate:me(new Date)}}},l.a.createElement(In.a,{type:"card"},l.a.createElement(xo,{tab:"Opportunity Info",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:o})),l.a.createElement(xo,{tab:"Tender Info",key:"tender",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:i})),l.a.createElement(xo,{tab:"Key Dates",key:"dates",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:s})),l.a.createElement(xo,{tab:"Forecast",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:c})),l.a.createElement(xo,{tab:"Manage",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:u})))))}}]),a}(n.Component),Io=Ye.a.Title,Do=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getList()},n.getList=function(){var e=JSON.parse(pe().permissions).OPPORTUNITIES;it.a.get(uo,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){n.setState({data:t.success?t.data:[],filterData:t.success?t.data:[],openModal:!1,editLead:!1,permissions:e})}))},n.handleDelete=function(e,t){var a=n.state,l=a.data,r=a.filterData,o=n.props.history;zn(o,"/opportunities",e,t,r,l).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.callBack=function(){n.getList()},n.closeModal=function(){n.setState({openModal:!1,editLead:!1})},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){var a=t.organization.name;return"00".concat(t.id.toString()).includes(e)||t.title&&t.title.toLowerCase().includes(e.toLowerCase())||a&&a.toLowerCase().includes(e.toLowerCase())||t.value&&ce(t.value).toLowerCase().includes(e.toLowerCase())||t.startDate&&"".concat(me(t.startDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.endDate&&"".concat(me(t.endDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.bidDate&&"".concat(me(t.bidDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.stage&&"".concat(X[t.stage]).toLowerCase().includes(e.toLowerCase())||t.type&&"".concat(ae[t.type]).toLowerCase().includes(e.toLowerCase())||t.phoneNumber&&t.phoneNumber.startsWith(e)}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;if(t?o[t].value=e:o=a,o.id.value||o.title.value||o.organization.value.length>0||o.revenue.value||o.startDate.value||o.endDate.value||o.bidDate.value||o.entryDate.value||o.panel.value.length>0||o.stage.value.length>0||o.status.value.length>0||o.type.value||o.stateId.value.length>0){var i,s,c,u,d=null!==(i=o.startDate.value)&&void 0!==i?i:["2010-10-19","2010-10-25"],m=null!==(s=o.endDate.value)&&void 0!==s?s:["2010-10-19","2010-10-25"],f=null!==(c=o.bidDate.value)&&void 0!==c?c:["2010-10-19","2010-10-25"],p=null!==(u=o.entryDate.value)&&void 0!==u?u:["2010-10-19","2010-10-25"];n.setState({filterData:r.filter((function(e){var t,a,n,l,r=e.organization.id;return"00".concat(e.id.toString()).includes(o.id.value)&&"".concat(null!==(t=e.title)&&void 0!==t?t:"").toLowerCase().includes(o.title.value.toLowerCase())&&"".concat(null!==(a=e.value.toString())&&void 0!==a?a:"").toLowerCase().includes(o.revenue.value.toString().toLowerCase())&&"".concat(null!==(n=e.type)&&void 0!==n?n:"").toLowerCase().includes(o.type.value.toLowerCase())&&"".concat(null!==(l=e.qualifiedOps)&&void 0!==l?l:"").toLowerCase().includes(o.qualifiedOps.value.toLowerCase())&&(o.organization.value.length>0?o.organization.value:[{value:","}]).some((function(e){return(o.organization.value.length>0?[r]:[","]).includes(e.value)}))&&(o.stateId.value.length>0?o.stateId.value:[{value:","}]).some((function(t){return(o.stateId.value.length>0?[e.stateId]:[","]).includes(t.value)}))&&(o.stage.value.length>0?o.stage.value:[{value:","}]).some((function(t){return(o.stage.value.length>0?[e.stage]:[","]).includes(t.value)}))&&(o.status.value.length>0?o.status.value:[{value:","}]).some((function(t){return(o.status.value.length>0?[e.status]:[","]).includes(t.value)}))&&(o.panel.value.length>0?o.panel.value:[{value:","}]).some((function(t){return(o.panel.value.length>0?[e.panelId]:[","]).includes(t.value)}))&&K()(o.startDate.value?me(e.startDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(d[0],d[1],void 0,"[]")&&K()(o.endDate.value?me(e.endDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(m[0],m[1],void 0,"[]")&&K()(o.bidDate.value?me(e.bidDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(f[0],f[1],void 0,"[]")&&K()(o.entryDate.value?me(e.entryDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(p[0],p[1],void 0,"[]")})),searchedColumn:o,openSearch:!1})}else n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){Promise.all([Yt(),_t(),At()]).then((function(e){var t=n.state.filterFields;t[2].data=e[0].success?e[0].data:[],t[3].data=e[1].success?e[1].data:[],t[10].data=e[2].success?e[2].data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.leadForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:"1%",render:function(e){return"00".concat(e)}},Ea("id","number")),Object(tt.a)({title:"Title",dataIndex:"title",key:"title",width:"18%",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/info")},className:"nav-link"}," ",e," ")}},Ea("title","string")),Object(tt.a)({title:"Organisation Name",dataIndex:"organization",width:"18%",key:"organization",render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},Ea("organization.name","string")),Object(tt.a)({title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(ce(e))}},Ea("value","number")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Bid Date",dataIndex:"bidDate",key:"bidDate",render:function(e){return e&&me(e,!0,!0)}},Ea("bidDate","date")),Object(tt.a)({title:"Stage",dataIndex:"stage",key:"stage",width:"1%",render:function(e){return X[e]}},Ea("stage","string")),Object(tt.a)({title:"Type",dataIndex:"type",key:"type",width:"1%",render:function(e){return ae[e]}},Ea("type","number")),Object(tt.a)({title:"Status",dataIndex:"status",key:"status",width:"1%",render:function(e){return Z[e]}},Ea("status","string",!0,"O")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){return n.setState({openModal:!0,editLead:t.id})},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"),1===t.type?l.a.createElement(b.a.Item,{key:"milestone"},l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(b.a.Item,{key:"position"},l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/milestones/").concat(null===t||void 0===t||null===(c=t.milestones)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.id,"/resources")},className:"nav-link"},"Postions")),l.a.createElement(b.a.Item,{key:"view"},l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(t.id,"/info")},className:"nav-link"},"View")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={data:[],openModal:!1,editLead:!1,permissions:{},filterData:[],openSearch:!1,searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},title:{type:"Input",value:"",label:"Title",showInColumn:!0},organization:{type:"Select",multi:!0,value:[],label:"Organization",showInColumn:!0},panel:{type:"Select",multi:!0,value:[],label:"panel",showInColumn:!0},revenue:{type:"Input",value:"",label:"Revenue",showInColumn:!0},startDate:{type:"Date",value:null,label:"Start Date",showInColumn:!0},endDate:{type:"Date",value:null,label:"End Date",showInColumn:!0,disabled:!0},bidDate:{type:"Date",value:null,label:"Bid Date",showInColumn:!0,disabled:!0},entryDate:{type:"Date",value:null,label:"Entry Date",showInColumn:!0,disabled:!0},stage:{type:"Select",multi:!0,value:[],label:"stage",showInColumn:!0},status:{type:"Select",multi:!0,value:[],label:"Status",showInColumn:!0},type:{type:"Select",value:"",label:"Type",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},stateId:{type:"none",multi:!0,value:[],label:"State",showInColumn:!1,disabled:!1},address:{type:"none",value:"",label:"Address",showInColumn:!1,disabled:!1},qualifiedOps:{type:"none",value:"",label:"Qualified Ops",showInColumn:!1,disabled:!1}},filterFields:[{Placeholder:"Panel",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Organisation",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"panel",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,mode:"multiple",key:"organization",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{Placeholder:"Name",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"title",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"type",size:"small",data:[{label:"Milestone",value:"1"},{label:"Time & Materials",value:"2"}],type:"Select"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Stage",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"stateId",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,key:"stage",mode:"multiple",customValue:function(e,t){return t},size:"small",data:[{label:"Lead",value:"L"},{label:"Tender Released",value:"TR"},{label:"Bid Development",value:"BD"},{label:"Bid Submitted",value:"BS"}],type:"Select"},{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Status",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"revenue",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"status",mode:"multiple",customValue:function(e,t){return t},size:"small",data:[{label:"Open",value:"O"},{label:"Lost",value:"L"},{label:"Did Not Proceed",value:"DNP"},{label:"Not Bid",value:"NB"}],type:"Select"},{Placeholder:"Expected Project Start Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Expected Project End Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Bid Due Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Entry Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"bidDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"entryDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editLead,r=t.permissions,o=t.filterData,i=t.searchedColumn,s=t.filterFields,c=t.openSearch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Io,{level:4},"Opportunities")),l.a.createElement(h.a,{style:{marginLeft:"auto"}},l.a.createElement(p.a,{justify:"space-between",gutter:"15"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,editLead:!1})},disabled:!r.ADD},l.a.createElement(na.a,null)," Add Opportunity")))),l.a.createElement(Ca,{filters:i,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}))),c&&l.a.createElement(Sa,{title:"Filter Opportunities",visible:c,filters:i,filterFields:s,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),a&&l.a.createElement(wo,{visible:a,editLead:n,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Po=a(658),To="".concat(J,"/projects"),No=function(e){return it.a.get(To+"/".concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o,i,s,c,u={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(n.contactPerson.firstName,"  ").concat(n.contactPerson.lastName," - ").concat(null!==(r=n.contactPerson.phoneNumber)&&void 0!==r?r:""),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,status:n.status,phase:n.phase,title:n.title,stateId:n.stateId,linkedWorkId:n.linkedWorkId},d={tender:n.tender,tenderNumber:n.tenderNumber},m={cmPercentage:null!==(o=n.cmPercentage)&&void 0!==o?o:0,cm$:(n.value*n.cmPercentage/100).toFixed(2),getPercentage:null!==(i=n.getPercentage)&&void 0!==i?i:0,goPercentage:null!==(s=n.goPercentage)&&void 0!==s?s:0,totalMonths:n.startDate&&n.endDate?Math.round(me(n.endDate).diff(me(n.startDate),"months",!0)):0,endDate:n.endDate?me(n.endDate):null,startDate:n.startDate?me(n.startDate):null,value:n.value?n.value:0};m.goget=m.getPercentage*m.goPercentage/100,m.discount=n.value*m.goget/100,m.upside=n.value-m.discount;var f={entryDate:n.entryDate&&me(n.entryDate),startDate:n.startDate&&me(n.startDate),hoursPerDay:n.hoursPerDay,endDate:n.endDate&&me(n.endDate),bidDate:n.bidDate&&me(n.bidDate)},p={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,projectManagerId:n.projectManagerId};return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,n.organizationName=n.organization&&n.organization.name,fe(null===e||void 0===e||null===(c=e.headers)||void 0===c?void 0:c.authorization),{success:a,data:n,basic:u,tender:d,billing:m,dates:f,manage:p}}return{success:a}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",status:!1,message:e.message}}))},Ro=function(e,t){return it.a.get("".concat(J).concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;(he(r),n)&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);return{success:n,data:l}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",success:!1,message:e.message}}))},Ao=function(e){return it.a.get("".concat(To,"/").concat(e,"/hierarchy"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Fo=function(e){return it.a.get(To+"/".concat(e,"/purchaseOrders"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},zo=function(e){return it.a.get("".concat(J).concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;(he(r),n)&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization);return{success:n,data:l}})).catch((function(e){var t;if(null===(t=e.response)||void 0===t?void 0:t.data){var a,n=e.response.status,l=null===(a=e.response)||void 0===a?void 0:a.data,r=l.message;return{authError:"Not Authorized!"===r,status:n,success:l.success,message:r}}return{error:"Please login again!",success:!1,message:e.message}}))},Lo=function(e){return it.a.get(To+"/".concat(e,"/schedules"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Mo=function(e,t){return console.log(e,Object(tt.a)(Object(tt.a)({},t),{},{notes:"abc",amount:100})),$.b.loading({content:"Loading...",key:e}),it.a.post(To+"/".concat(e,"/shutdownPeriods"),Object(tt.a)(Object(tt.a)({},t),{},{notes:"abc",amount:100}),{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(t){return ge(t,e,5)}))},Bo=function(e){return it.a.get(To+"/".concat(e,"/shutdownPeriods"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},_o=function(e,t,a){if(e)return t?K.a.parseZone(e).format(!0===a?"ddd DD MMM yyyy":a):K.a.parseZone(e)},Yo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props,t=e.parent,a=e.id,l=n.state.fiscalYear;"P"===t?function(e,t){var a=K()().subtract(1,"months").endOf("month").format("D-M-YYYY");return it.a.get("".concat(To,"/").concat(e,"/profit-loss?startDate=").concat(me(t.start,!0,"D-M-YYYY"),"&endDate=").concat(me(t.end,!0,"D-M-YYYY"),"&actualDate=").concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))}(a,l).then((function(e){if(e.success){var t=e.data,a=t.actualStatement,l=t.actualTotal,r=t.forecast,o=t.holidays,i=t.segmentsRevenue;n.calculateProjectData(a,l,null!==r&&void 0!==r?r:[],i,o)}})):vo(a).then((function(e){if(e.success){var t=e.data.holidays;n.calculateLeadData(t)}}))},n.getWeekdays=function(e,t,a){return me(new Date).isoWeekdayCalc({rangeStart:e,rangeEnd:t,weekdays:[1,2,3,4,5],exclusions:a})},n.calculateProjectData=function(e,t,a,l,r){var o=n.state,i=o.data,s=o.fiscalYear,c=n.props,u=c.billing,d=c.type,m=_o(u.startDate),f=_o(u.endDate),p=0,h=0,y={},v={sellTotal:0,buyTotal:0},g=_o(new Date).add(100,"years"),b=K()().set({date:1}),E=b.isBetween(s.start,s.end,"day","[]")?b:s.start;E=m.isBefore(E,"day")?E:m;for(var k,S=f.isAfter(s.end,"day")?s.end:f,C=function(){if(6!==j.isoWeekday()&&7!==j.isoWeekday()&&!r[_o(j,!0,"M/D/YYYY")]){r[_o(j,!0,"M/D/YYYY")]&&console.log(_o(j,!0,"M/D/YYYY"));var e=_o(j,!0,"MMM YY");j.isSameOrAfter(E,"day")&&j.isSameOrBefore(S),j.isSameOrAfter(_o(new Date),"month")&&a.forEach((function(t,a){var n,l;j.isBetween(_o(t.con_startDate),_o(null!==(n=t.con_endDate)&&void 0!==n?n:g),"day","[]")&&j.isBetween(_o(t.res_startDate),_o(null!==(l=t.res_endDate)&&void 0!==l?l:g),"day","[]")&&(y[e]?(y[e].monthTotalBuy+=t.forecastBuyRateDaily,y[e].monthTotalSell+=t.forecastSellRateDaily):y[e]={month:e,monthTotalBuy:t.forecastBuyRateDaily,monthTotalSell:t.forecastSellRateDaily},v.buyTotal+=t.forecastBuyRateDaily,v.sellTotal+=t.forecastSellRateDaily)})),i[0][e]?i[0][e]++:i[0][e]=1,p++}},j=_o(m);j.isSameOrBefore(f);j.add(1,"days"))C();2===d?h=u.value-(null!==(k=t.sellTotal)&&void 0!==k?k:0):1===d&&u.value;for(var O=_o(s.start);O.isSameOrBefore(s.end);O.add(1,"months")){var x,w,I,D,P,T=_o(O,!0,"MMM YY"),N=(i[0][T],0),R=0;if(2===d){if(e[T])N=null!==(w=null===(I=e[T])||void 0===I?void 0:I.monthTotalSell)&&void 0!==w?w:0,R=null!==(D=null===(P=e[T])||void 0===P?void 0:P.monthTotalBuy)&&void 0!==D?D:0;else if(y[T]){var A,F,z,L,M;if(h-=N=h-(null===(A=y[T])||void 0===A?void 0:A.monthTotalSell)<0?null!==(F=h)&&void 0!==F?F:0:null!==(z=null===(L=y[T])||void 0===L?void 0:L.monthTotalSell)&&void 0!==z?z:0,(null===(M=y[T])||void 0===M?void 0:M.monthTotalSell)>N){var B,_,Y=N/(null===(B=y[T])||void 0===B?void 0:B.monthTotalSell)*100;R=(null===(_=y[T])||void 0===_?void 0:_.monthTotalBuy)/100*Y}else{var V,q;R=null!==(V=null===(q=y[T])||void 0===q?void 0:q.monthTotalBuy)&&void 0!==V?V:0}}}else if(1===d){var H,U,G,W,$;N=parseFloat(null!==(H=l[T])&&void 0!==H?H:0),R=null!==(U=null!==(G=null===(W=e[T])||void 0===W?void 0:W.monthTotalBuy)&&void 0!==G?G:null===($=y[T])||void 0===$?void 0:$.monthTotalBuy)&&void 0!==U?U:0}var J=N-R;i[1][T]=N,i[2][T]=N&&R?R:0,i[3][T]=N&&R?J:0,i[4][T]=N&&R?J/N*100:0,i[0].total+=null!==(x=i[0][T])&&void 0!==x?x:0,i[1].total+=i[1][T],i[2].total+=i[2][T],i[3].total+=i[3][T]}i[4].total=i[3].total/i[1].total*100,n.setState({data:i},(function(){n.Columns()}))},n.calculateLeadData=function(e){for(var t=n.state,a=t.data,l=t.fiscalYear,r=n.props.billing,o=r.totalMonths>0?r.totalMonths:0,i=_o(r.startDate),s=_o(r.endDate),c=0,u=1;u<=o;u++){i=1===u?r.startDate:_o(i).set("date",1),s=u===o?r.endDate:_o(i).endOf("month");var d=n.getWeekdays(i,s,e);c+=d;var m=_o(i,!0,"MMM YY");a[0][m]=d,i=_o(i).add(1,"months")}var f=r.discount/c,p=f*r.cmPercentage/100,h=f-p;for(u=1;u<=o;u++){i=1===u?r.startDate:_o(i).set("date",1),s=u===o?r.endDate:_o(i).endOf("month");var y=_o(i,!0,"MMM YY"),v=a[0][y];a[1][y]=f*v,a[2][y]=h*v,a[3][y]=p*v,a[4][y]=r.cmPercentage,i.isBetween(_o(l.start),_o(l.end),"month","[]")&&(a[0].total+=v,a[1].total+=f*v,a[2].total+=h*v,a[3].total+=p*v),i=_o(i).add(1,"months")}a[4].total=a[3].total/a[1].total*100,n.setState({data:a},(function(){n.Columns()}))},n.Columns=function(){for(var e=n.props,t=(e.billing,e.parent),a=n.state,r=a.fiscalYear,o=a.data,i=[],s=function(){var e=_o(c,!0,"MMM YY"),a="P"===t?c.isSameOrAfter(_o(new Date),"month")?"#ff7875":"#a0df7d":"#ff7875";a=o[0][e]?a:"",i.push({title:e,align:"center",dataIndex:e,key:e,onCell:function(){return{style:{backgroundColor:a}}},onHeaderCell:function(){return{style:{backgroundColor:a}}},render:function(t,a){if(t&&!isNaN(o[0][e])){if("W"===a.key)return l.a.createElement("b",null,t," ");if("R"===a.key)return" ".concat(ce(t));if("C"===a.key)return" ".concat(ce(t));if("$"===a.key)return l.a.createElement("b",null," ".concat(ce(t)));if("%"===a.key)return l.a.createElement("b",null," ".concat(ue(t)," %"))}return"-"}})},c=_o(r.start);c.isSameOrBefore(_o(r.end));c.add(1,"months"))s();n.setState({columns:[{title:"Month",width:200,dataIndex:"label",key:"label",render:function(e,t){return"R"===t.key||"C"===t.key?e:"$"===t.key||"%"===t.key||"W"===t.key?l.a.createElement("b",null,e):void 0}},{title:"Total",dataIndex:"total",key:"total",width:130,render:function(e,t){if(e){if("W"===t.key)return l.a.createElement("b",null,e," ");if("R"===t.key)return" ".concat(ce(e));if("C"===t.key)return" ".concat(ce(e));if("$"===t.key)return l.a.createElement("b",null," ".concat(ce(e)));if("%"===t.key)return l.a.createElement("b",null," ".concat(ue(e)," %"))}return"-"}}].concat(i)})},n.state={billing:{},columns:[],fiscalYear:Ee("dates"),data:[{key:"W",label:"Working Days",total:0},{key:"R",label:"Revenue \n ".concat("O"===e.parent?"(discounted value)":""),total:0},{key:"C",label:"Cost of sale/services",total:0},{key:"$",label:"CM $",total:0},{key:"%",label:"CM %",total:0}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.columns;this.props.billing;return l.a.createElement(p.a,{justify:"start",gutter:[20,5]},l.a.createElement(h.a,null,l.a.createElement(ga.a,{color:"#a0df7d",className:"legends"}),l.a.createElement("span",null," Actual")),l.a.createElement(h.a,null,l.a.createElement(ga.a,{color:"#ff7875",className:"legends"}),l.a.createElement("span",null," Forecast")),l.a.createElement(h.a,{span:"24"},l.a.createElement(ea.a,{bordered:!0,rowKey:function(e){return e.label},columns:a,dataSource:t,size:"small",pagination:!1,className:"scroll-table fs-v-small full-width",scroll:{x:"max-content"}})))}}]),a}(n.Component),Vo=(In.a.TabPane,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.setFields=function(){var t=e.props.reason.api;return e.setState((function(e){return{Fields:e[t]}})),!0},e.fetchAll=function(t){Promise.all([_t(),e.setFields()]).then((function(t){var a=e.state.Fields;t[0].success&&(a[2].data=t[0].data,e.setState({Fields:a}))})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l=t.lost,r=e.props,o=r.editLead,i=r.close,s=e.props.reason.key;l.status=s,(a=o,n=l,it.a.put(uo+"/".concat(a,"/lost"),n,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),$.b.success({content:r,key:a}),{success:l}})).catch((function(e){return ge(e,a,5)}))).then((function(e){e.success&&i()}))},e.workWon=function(e){},e.formRef=l.a.createRef(),e.state={editLead:!1,check:!1,leadValue:0,loading:!1,Fields:[],Lost:[{Placeholder:"Successful Tenderder",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Winning Price",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:12,key:"wonById",size:"small",data:[],type:"Select"},{object:"lost",fieldCol:12,key:"winningPrice",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:12,key:"reason",size:"small",mode:"tags",data:[{label:"Price",value:"Price"},{label:"Resources",value:"Resources"},{label:"Approach",value:"Approach"}],type:"Select"},{Placeholder:"Customer Feedback",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"feedback",size:"small",mode:{minRows:2,maxRows:12},type:"Textarea"}],NotBid:[{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"reason",size:"small",mode:"tags",data:[{label:"Insufficient\xa0",value:"Insufficient\xa0"},{label:"Resources",value:"Resources"},{label:"Not Competitive",value:"Not Competitive"},{label:"Not Financially viable",value:"Not Financially viable"},{label:"Outside\xa0Scope of Services",value:"Outside\xa0Scope of Services"}],type:"Select"}],NotProceed:[{Placeholder:"Reason",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"lost",fieldCol:24,key:"reason",size:"small",mode:{minRows:5,maxRows:12},type:"Textarea"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.reason,n=e.close,r=this.state,o=r.Fields,i=r.loading;return l.a.createElement(ta.a,{title:a.msg,maskClosable:!1,centered:!0,visible:t,okButtonProps:{disabled:i,htmlType:"submit",form:"my-form"},okText:i?l.a.createElement(la.a,null):"Save",onCancel:n,width:750},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:o})))}}]),a}(n.Component)),qo=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/resources")},className:"nav-link"},e)}},Ea("title","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),{title:"Approved",dataIndex:"isApproved",key:"isApproved",align:"right",render:function(e){return l.a.createElement(jl,{text:null!==e&&void 0!==e?e:"CM"})}}],Ho=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","Date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","Date")),Object(tt.a)({title:"Total Hours",dataIndex:"billableHours",key:"billableHours",render:function(e){return ue(e)}},Ea("billableHours","number"))],Uo=[{title:"Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){var t,a;return e&&"".concat(null!==(t=e.firstName)&&void 0!==t?t:""," ").concat(null!==(a=e.lastName)&&void 0!==a?a:"")}},{title:"Buy Rate (Hourly)",dataIndex:"buyingRate",key:"buyingRate",render:function(e){return"".concat(ce(e))}},{title:"Sell Cost (Hourly)",dataIndex:"sellingRate",key:"sellingRate",render:function(e){return"".concat(ce(e))}}];function Go(e){e.key;var t=e.columns,a=e.data,r=e.expandable,o=e.checked,i=Object(n.useState)([]),s=Object(G.a)(i,2),c=s[0],u=s[1];return Object(n.useEffect)((function(){o&&u(a?1===a.length?[a[0].id]:-1!==a.findIndex((function(e){return!0===e.isMarkedAsSelected}))?[a[a.findIndex((function(e){return e.isMarkedAsSelected}))].id]:[]:[])}),[]),l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(ea.a,{bordered:!0,size:"small",className:"fs-small",rowKey:function(e){return e.id},columns:t,dataSource:a,pagination:!1,rowSelection:o&&{type:"radio",selectedRowKeys:c,getCheckboxProps:function(e){return{disabled:!0}}},expandable:r&&{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.opportunityResourceAllocations)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(Go,{data:e.opportunityResourceAllocations,columns:Uo,key:e.id,expandable:!1,checked:!0})}}}))}var Wo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.id;yo(t).then((function(a){if(a){var n=a.success,l=a.data;e.setState({leadId:t,data:n?l:[]})}}))},e.state={leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.desc,e.data);e.leadId,e.permissions;return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:qo,dataSource:t,size:"small",className:"fs-small",expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.opportunityResources)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(Go,{data:e.opportunityResources,columns:Ho,key:e.id,expandable:!0,checked:!1})}}})}}]),a}(n.Component),Ko=[{title:"Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){var t,a;return e&&"".concat(null!==(t=e.firstName)&&void 0!==t?t:""," ").concat(null!==(a=e.lastName)&&void 0!==a?a:"")}},{title:"Buy Rate (Hourly)",dataIndex:"buyingRate",key:"buyingRate",render:function(e){return"".concat(ce(e))}},{title:"Sell Rate (Hourly)",dataIndex:"sellingRate",key:"sellingRate",render:function(e){return"".concat(ce(e))}}];function $o(e){var t=e.columns,a=e.data,r=Object(n.useState)(a?1===a.length?[a[0].id]:-1!==a.findIndex((function(e){return!0===e.isMarkedAsSelected}))?[a[a.findIndex((function(e){return e.isMarkedAsSelected}))].id]:[]:[]),o=Object(G.a)(r,2),i=o[0];o[1];return l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(ea.a,{bordered:!0,size:"small",className:"fs-small",rowKey:function(e){return e.id},columns:t,dataSource:a,pagination:!1,rowSelection:{type:"radio",selectedRowKeys:i,getCheckboxProps:function(e){return{disabled:!0}}}}))}var Jo=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.id;yo(t).then((function(a){if(a){var n,l=a.success,r=a.data;e.setState({leadId:t,data:l?r[0].opportunityResources:[],milestoneId:l&&(null===r||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)})}}))},e.state={leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.desc,e.data);e.leadId,e.permissions,e.milestoneId;return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","Date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","Date")),Object(tt.a)({title:"Total Hours",dataIndex:"billableHours",key:"billableHours",render:function(e){return ue(e)}},Ea("billableHours","number"))],dataSource:t,size:"small",className:"fs-small",expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.opportunityResourceAllocations)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement($o,{data:e.opportunityResourceAllocations,columns:Ko,key:e.id})}}})}}]),a}(n.Component),Xo=a(315),Zo=a.n(Xo),Qo=function(e){var t=Object(n.useState)([]),a=Object(G.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(G.a)(i,2),c=s[0],u=s[1],d=nt.a.useForm(),m=Object(G.a)(d,1)[0],f=[Object(tt.a)({title:"Start Date",dataIndex:"startDate",render:function(e){return me(e,!0,!0)}},Ea("date","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",render:function(e){return me(e,!0,!0)}},Ea("date","date")),{title:"...",key:"action",align:"right",width:"1%",render:function(e,t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return E(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){return u(Object(tt.a)(Object(tt.a)({},t),{},{index:a}))}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}];Object(n.useEffect)((function(){y()}),[]),Object(n.useEffect)((function(){if(!0!==c&&!1!==c){var e={startDate:me(c.startDate),endDate:me(c.endDate)};m.setFieldsValue({projectShutdown:e})}}),[c]);var y=function(){Bo(e.id).then((function(e){e.success&&o(e.data)}))},v=function(t){Mo(e.id,t).then((function(e){e.success?k(e.data):console.log("err",e)}))},g=function(t,a){(function(e,t,a){return console.log(e,Object(tt.a)(Object(tt.a)({},a),{},{notes:"abc",amount:100})),$.b.loading({content:"Loading...",key:e}),it.a.put(To+"/".concat(e,"/shutdownPeriods/").concat(t),Object(tt.a)(Object(tt.a)({},a),{},{notes:"abc",amount:100}),{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(t){return ge(t,e,5)}))})(e.id,t,a).then((function(e){e.success?k(e.data,null===c||void 0===c?void 0:c.index):console.log("err",e)}))},E=function(t,a){var n=e.history,l="/projects/".concat(e.id,"/shutdownPeriods");zn(n,l,t,a,[],r).then((function(e){e.success&&o(e.data)}))},k=function(e,t){var a=r;if(t>=0){var n=a.findIndex((function(t){return t.id===e.id}));a[n]=e}else a=[].concat(Object(et.a)(a),[e]);o(Object(et.a)(a)),m.resetFields(),u(!1)};return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Zo.a,{level:4},"Project Shutdown Periods")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){u(!0)}},l.a.createElement(na.a,null)," Add Period")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{size:"small",bordered:!0,className:"fs-small",rowKey:function(e){return e.id},columns:f,dataSource:r})),l.a.createElement(ta.a,{title:"ShutDown Period",visible:c,width:700,onCancel:function(){m.resetFields(),u(!1)},okText:"Save",okButtonProps:{htmlType:"submit",form:"my-form"}},l.a.createElement(nt.a,{id:"my-form",form:m,onFinish:function(e){var t=e.projectShutdown,a={startDate:me(t.startDate,!0),endDate:me(t.endDate,!0)};(null===c||void 0===c?void 0:c.id)?g(null===c||void 0===c?void 0:c.id,a):v(a)},scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:[{Placeholder:"Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"End Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{object:"projectShutdown",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],data:[],type:"DatePicker"},{object:"projectShutdown",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],data:[],type:"DatePicker"}]}))))},ei=b.a.SubMenu,ti=Bn.b.Item,ai=In.a.TabPane,ni=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.getRecord(e)},n.getRecord=function(e){var t=JSON.parse(pe().permissions).OPPORTUNITIES;mo(e).then((function(a){a.success?(console.log(a.data),n.setState({data:a.data,basic:a.basic,billing:a.billing,leadId:e,infoModal:!1,lostModal:!1,renderTabs:!0,moveToProject:!1,permissions:t,calculatedValue:a.data.calculatedValue})):a.authError&&n.setState({notAuth:!0})}))},n.closeModal=function(){n.setState({infoModal:!1,moveToProject:!1,lostModal:!1})},n.handleDelete=function(e){var t=n.props.history;zn(t,"/opportunities",e).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.getCalculatedValue=function(e){var t;n.props.history;n.setState({valueSpin:!0}),(t=e,it.a.get("".concat(uo,"/").concat(t,"/calculatedValue"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){if(e.success){var t=!0;console.log({data:e.data,state:n.state.data.value,condition:e.data===n.state.data.value}),t=e.data!==n.state.data.value,n.setState({calculatedValue:e.data,valueSpin:!1,valueUpdateEnabled:t})}}))},n.updateOpportunityValue=function(e){var t;n.props.history;(t=e,it.a.put("".concat(uo,"/").concat(t,"/calculatedValue"),{},{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&(e.data.calculatedValue=n.state.calculatedValue,n.setState({data:e.data}))}))},n.callBack=function(){var e=n.state,t=e.leadId;e.moveToProject?n.props.history.push("/opportunities"):n.getRecord(t)},n.status=[{title:"Won",msg:"Opportunity Won?",api:"won",color:"#6fac45"},{title:"Lost",msg:"Opportunity Lost?",api:"Lost",key:"L",color:"#c00505"},{title:"Did Not Proceed",msg:"Did Not Proceed?",api:"NotProceed",key:"DNP",color:"#78abdb"},{title:"Not Bid",msg:"Not Bid On Opportunity?",api:"NotBid",key:"NB",color:"#8d8888"}],n.state={infoModal:!1,lostModal:!1,leadId:!1,data:{},basic:{},billing:{},renderTabs:!1,moveToProject:!1,permissions:{},notAuth:!1,valueUpdateEnabled:!0,valueSpin:!1,calculatedValue:0},n}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a,n,r=this,o=this.state,i=o.data,c=o.infoModal,u=o.lostModal,d=o.leadId,m=o.billing,f=o.renderTabs,y=o.moveToProject,v=o.permissions,g=o.basic,E=o.notAuth,k=o.calculatedValue,S=o.valueSpin,C=o.valueUpdateEnabled,j=l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,"Opportunity Information"),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{danger:!0,disabled:!(null===this||void 0===this||null===(e=this.state)||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return r.handleDelete(d)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(ei,{title:"Outcome",key:"Outcomes"},this.status.map((function(e){return l.a.createElement(b.a.Item,{key:e.title,disabled:!v.UPDATE,style:{color:e.color},className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:e.msg,onConfirm:function(){"Won"===e.title?r.setState({infoModal:!0,moveToProject:!0}):r.setState({lostModal:!0,moveToProject:e})},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," ",e.title," ")))}))),l.a.createElement(b.a.Item,{onClick:function(){r.setState({infoModal:!0})},disabled:!v.UPDATE}," ","Edit"," "),1===(g&&g.type)?l.a.createElement(b.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(d,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(b.a.Item,null,l.a.createElement(s.b,{to:{pathname:"/opportunities/".concat(d,"/milestones/").concat(null===i||void 0===i||null===(a=i.milestones)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.id,"/resources")},className:"nav-link"},"Postions")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null)))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:j,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ti,{label:"Project Name"},i.title),l.a.createElement(ti,{label:"Estimated Value"},l.a.createElement(p.a,{justify:"space-between",align:"middle"},l.a.createElement(h.a,null,ce(i.value)),i.value!==k?l.a.createElement(h.a,null,l.a.createElement(lt.a,{title:"Calculated Estimated Value is: ".concat(ce(k)),okText:"Update",cancelText:"No",onConfirm:function(){r.updateOpportunityValue(d)},okButtonProps:{disabled:!C},showCancel:!1,placement:"top"},l.a.createElement(rt.a,{type:"primary",size:"sm",onClick:function(){r.getCalculatedValue(d)}},l.a.createElement(Po.a,{spin:S})))):l.a.createElement(l.a.Fragment,null))),l.a.createElement(ti,{label:"Organisation"},i.organization?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(i.organizationId,"/info")},className:"nav-link"},i.organization.name):"No Organisation"),l.a.createElement(ti,{label:"Delegate Contact"}," ",g?g.ContactName:""),l.a.createElement(ti,{label:"Start Date"},me(i.startDate,!0,!0)," "),l.a.createElement(ti,{label:"End Date"},me(i.endDate,!0,!0)),l.a.createElement(ti,{label:"Bid Date"},me(i.bidDate,!0,!0)),l.a.createElement(ti,{label:"Status"},g.status?Z[g.status]:"")),f&&l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(ai,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetId:d,targetType:"WOR"})),l.a.createElement(ai,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetId:d,targetType:"WOR"})),l.a.createElement(ai,{tab:"Projected Profit & Loss",key:"profitloss"},l.a.createElement(Yo,{id:d,parent:"O",billing:m})),l.a.createElement(ai,{tab:"Resources",key:"resources"},1===g.type?l.a.createElement(Wo,{id:d,data:i}):l.a.createElement(Jo,{id:d,data:i})),l.a.createElement(ai,{tab:"Shutdown Periods",key:"shutdown"},l.a.createElement(Qo,{id:d}))),c&&l.a.createElement(wo,{visible:c,editLead:d,project:y,close:this.closeModal,callBack:this.callBack}),u&&l.a.createElement(Vo,{visible:u,editLead:d,reason:y,close:this.closeModal}),E&&l.a.createElement(ul,this.props))}}]),a}(n.Component),li=(In.a.TabPane,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.skillId?n.fetchRes():n.skillModal()},n.fetchRes=function(){var e=n.props,t=e.levelId,a=e.editRex,l=(e.cmRate,e.ceil),r="employees/get/by-skills?psslId=".concat(t,"&workType=O");Promise.all([Bt(r)]).then((function(e){var t=e[0].success?e[0].data:[],r=n.state.ResourceFields;if(a){var o={contactPersonId:a.contactPersonId,billableHours:a.billableHours,sellingRate:a.sellingRate,effortRate:a.effortRate,buyingRate:a.buyingRate};n.formRef.current.setFieldsValue({obj:o})}r[2].data=t,r[7].hint=n.ceilHint(l.short,l.long),n.setState({ResourceFields:r},(function(){(null===a||void 0===a?void 0:a.role)?n.checkRates(null===a||void 0===a?void 0:a.contactPersonId,{label:null===a||void 0===a?void 0:a.role}):n.setRates("No Active Contract","No Active Contract")}))})).catch((function(e){console.log(e)}))},n.checkRates=function(e,t){e?t.label.includes("Employee")?n.getRates("employees",e):t.label.includes("Sub Contractor")?n.getRates("sub-contractors",e):n.setRates("No Active Contract","No Active Contract"):n.setRates(void 0,void 0)},n.getRates=function(e,t){var a=n.props.cmRate;console.log(a,"cRate"),Xt(e,t,"contactPerson").then((function(e){if(e.success){var t=e.data.employeeBuyRate;n.setRates(ce(t),ce(t/(1-a/100)))}else n.setRates("No Active Contract","No Active Contract")}))},n.setRates=function(e,t){var a=n.state.ResourceFields;a[4].suggestion=e,a[5].suggestion=t,n.setState({ResourceFields:Object(et.a)(a)})},n.ceilHint=function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left"}},"ST Ceil(hourly): ",e),l.a.createElement("span",{style:{float:"right"}},"LT Ceil(hourly): ",t))},n.skillModal=function(){var e=n.props,t=e.editRex,a=e.panelId,l=e.leadId;vo(l).then((function(e){if(e.success){var t=e.data.holidays;n.setState({holidays:t})}})),Vt(a).then((function(e){var a=n.state,l=a.SkillFields,r=a.holidays;if(l[3].data=e.success?e.data:[],t){var o,i,s=l[3].data.findIndex((function(e){return e.value===t.panelSkillId}));l[6].data=l[3].data?l[3].data[s].levels:[],l[9].suggestion="".concat(ue(je(t.startDate,null!==(o=t.endDate)&&void 0!==o?o:t.startDate,r)*n.props.hours),"'"),console.log("".concat(ue(je(t.startDate,null!==(i=t.endDate)&&void 0!==i?i:t.startDate,r)*n.props.hours),"'"));var c={panelSkillId:t.panelSkillId,panelSkillStandardLevelId:t.panelSkillStandardLevelId,billableHours:t.billableHours,title:t.title,endDate:me(t.endDate),startDate:me(t.startDate)};n.formRef.current.setFieldsValue({obj:c})}n.setState({SkillFields:l})})).catch((function(e){console.log(e)}))},n.setBilHouRate=function(e,t){var a=n.state,l=a.SkillFields,r=a.holidays;l[9].suggestion=e?"".concat(ue(je(e,null!==t&&void 0!==t?t:e,r)*n.props.hours),"'"):"",n.setState({SkillFields:Object(et.a)(l)})},n.onFinish=function(e){n.setState({loading:!0});var t=n.props,a=t.editRex,l=t.skillId,r=e.obj;l||(r=Object(tt.a)(Object(tt.a)({},r),{},{startDate:me(r.startDate,!0),endDate:me(r.endDate,!0)})),a?l?n.editResource(r):n.editSkill(r):l?n.addResourse(r):n.addSkill(r)},n.addSkill=function(e){var t=n.props,a=t.leadId,l=t.callBack,r=t.crud;fo(r,e,a).then((function(e){e.success?l(e.data):n.setState({loading:!1})}))},n.addResourse=function(e){var t=n.props,a=t.callBack,l=(t.leadId,t.skillId);(function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.post("".concat(J).concat(e,"/").concat(t,"/allocations"),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return ge(e,t,5)}))})(t.crud,l,e).then((function(e){e.success?a(e.data):n.setState({loading:!1})}))},n.editSkill=function(e){var t=n.props,a=t.editRex,l=(t.leadId,t.callBack),r=t.crud;e.id=a.id,console.log(e),ho(r,a.id,e).then((function(e){e.success?l(e.data):n.setState({loading:!1})}))},n.editResource=function(e){var t=n.props,a=t.editRex,l=t.callBack,r=(t.leadId,t.skillId),o=t.crud;e.id=a,function(e,t,a,n){return $.b.loading({content:"Loading...",key:a}),console.log(e),it.a.put("".concat(J).concat(e,"/").concat(t,"/allocations/").concat(a),n,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l,data:r}})).catch((function(e){return ge(e,a,5)}))}(o,r,a.id,e).then((function(e){e.success?l(e.data):n.setState({loading:!1})}))},n.formRef=l.a.createRef(),n.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,holidays:[],SKILLS:[],STATES:[],ORGS:[],ResourceFields:[{Placeholder:"Resource",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Rate Of Effort",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"contactPersonId",size:"small",rules:[{required:!0,message:"Resource is Required"}],data:[],type:"Select",onChange:function(e,t){n.checkRates(e,t)}},{object:"obj",fieldCol:12,key:"effortRate",rules:[{required:!0,message:"Effort Rate is Required"}],size:"small",shape:"%",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100},{Placeholder:"Buy Rate (Hourly)",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Sell Rate (Hourly)",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",rules:[{required:!0,message:"Buying Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",rules:[{required:!0,message:"Selling Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}],SkillFields:[{Placeholder:"Position Title",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Panel Skill",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Title is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"panelSkillId",size:"small",rules:[{required:!0,message:"Skill is Required"}],data:[],type:"Select",onChange:function(e,t){var a=n.state.SkillFields;a[6].data=t?t.levels:[];var l=n.formRef.current.getFieldsValue().obj;l.panelSkillStandardLevelId=void 0,n.formRef.current.setFieldsValue({obj:l}),n.setState({SkillFields:a})}},{Placeholder:"Panel Skill Level",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"panelSkillStandardLevelId",size:"small",rules:[{required:!0,message:"Level is Required"}],data:[],type:"Select",onChange:function(e,t){n.fetchRes()}},{object:"obj",fieldCol:12,key:"startDate",rules:[{required:!0,message:"Start Date is Required"}],size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=n.formRef.current.getFieldValue().obj;return be(t,null===a||void 0===a?void 0:a.endDate,"start",e.pDates)},onChange:function(){var e=n.formRef.current.getFieldValue().obj;n.setBilHouRate(null===e||void 0===e?void 0:e.startDate,null===e||void 0===e?void 0:e.endDate)}},{Placeholder:"End Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Total Billable Hours",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=n.formRef.current.getFieldValue().obj;return be(t,null===a||void 0===a?void 0:a.startDate,"end",e.pDates)},onChange:function(){var e=n.formRef.current.getFieldValue().obj;n.setBilHouRate(null===e||void 0===e?void 0:e.startDate,null===e||void 0===e?void 0:e.endDate)}},{object:"obj",fieldCol:12,key:"billableHours",size:"small",rules:[{required:!0,message:"Billable Hours is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,r=(e.resource,e.skillId),o=this.state,i=o.ResourceFields,s=o.SkillFields,c=o.loading;return l.a.createElement(ta.a,{title:r?t?"Edit Resource":"Add Resource":t?"Edit Position":"Add Position",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:c,htmlType:"submit",form:"my-form"},okText:c?l.a.createElement(la.a,null):"Save",onCancel:n,width:750},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:r?{obj:{effortRate:100}}:{obj:{startDate:null}}},l.a.createElement(Rt,{FormFields:r?i:s})))}}]),a}(n.Component)),ri=Bn.b.Item;function oi(e){var t=Object(n.useState)(e.data),a=Object(G.a)(t,2),r=a[0],o=(a[1],Object(n.useState)(!1)),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(!1),d=Object(G.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(e.data?1===e.data.length?[e.data[0].id]:-1!==e.data.findIndex((function(e){return!0===e.isMarkedAsSelected}))?[e.data[e.data.findIndex((function(e){return e.isMarkedAsSelected}))].id]:[]:[]),h=Object(G.a)(p,2),y=h[0],v=h[1],g=[{title:"Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){return e&&"".concat(e.firstName," ").concat(e.lastName)}},{title:"Buy Rate (Hourly)",dataIndex:"buyingRate",key:"buyingRate",render:function(e){return"".concat(ce(e))}},{title:"Sell Rate (Hourly)",dataIndex:"sellingRate",key:"sellingRate",render:function(e){return"".concat(ce(e))}},{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===e||void 0===e||null===(r=e.permissions)||void 0===r?void 0:r.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete?",onConfirm:function(){return E(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",onClick:function(){f(Object(tt.a)(Object(tt.a)({},a),{},{tableIndex:n})),c(!0)},disabled:!(null===e||void 0===e||null===(o=e.permissions)||void 0===o?void 0:o.UPDATE)},"Edit Resource"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],E=function(t,a){var n=e.crud,l=e.history,o=e.skill;n+="/".concat(o,"/allocations"),zn(l,n,t,a,r,!1).then((function(t){t.success&&e.callBack()}))};return l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(ea.a,{bordered:!0,size:"small",key:e.skill,rowKey:function(e){return e.id},columns:g,dataSource:e.data,pagination:!1,className:"fs-small",rowSelection:{type:"radio",selectedRowKeys:y,onChange:function(t,a){e.leadId;var n=e.skill,l=e.crud;v(t),function(e,t,a){return it.a.patch("".concat(J).concat(e,"/").concat(t,"/allocations/").concat(a,"/mark-as-selected"),{},{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;if(he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),$.b.success({content:r,key:a}),l)return{success:l}})).catch((function(e){return $.b.error({content:e.message,key:a}),{error:"Please login again!",status:!1,message:e.message}}))}(l,n,a[0].id).then((function(e){console.log(e)}))}}}),s&&l.a.createElement(li,{visible:s,editRex:m,cmRate:e.cmRate,skillId:e.skill,leadId:e.leadId,levelId:e.levelId,panelId:e.panelId,mileId:e.mileId,crud:e.crud,ceil:e.ceil,close:function(){c(!1)},callBack:function(t){c(!1),e.callBack()}}))}var ii=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.match.params,a=t.proId,n=t.mileId,l=e.props.match.url,r=JSON.parse(pe().permissions).OPPORTUNITIES;Promise.all([mo(a),po(l)]).then((function(t){var o,i,s,c,u;e.setState({desc:t[0].success?t[0].data:{},mileDesc:(null===(o=t[0])||void 0===o?void 0:o.success)&&(null===(i=t[0])||void 0===i||null===(s=i.data)||void 0===s?void 0:s.milestones)?null===(c=t[0])||void 0===c||null===(u=c.data)||void 0===u?void 0:u.milestones.filter((function(e){return e.id==n}))[0]:{},editRex:!1,infoModal:!1,leadId:a,mileId:n,crud:l,data:t[1].success?t[1].data:[],filterData:t[1].success?t[1].data:[],permissions:r})})).catch((function(e){console.log(e)}))},e.getLeadSkills=function(){var t=e.state.crud;po(t).then((function(t){t.success&&e.setState({data:t.data,filterData:t.data,editRex:!1,infoModal:!1,skillId:!1,levelId:!1,tableIndex:!1,ceil:{}})}))},e.getSkilldEmployee=function(t,a,n,l,r,o,i){var s=e.state.mileDesc,c=s.startDate,u=s.endDate;e.setState({pDates:{startDate:c,endDate:u},infoModal:t,skillId:a,levelId:o,resource:n,editRex:l,tableIndex:r,ceil:i&&{short:i.shortTermCeil,long:i.longTermCeil}})},e.closeModal=function(){e.setState({infoModal:!1,editRex:!1,ceil:{}})},e.handleDelete=function(t,a){var n=e.state,l=n.crud,r=n.data,o=n.filterData,i=e.props.history;zn(i,l,t,a,o,r).then((function(t){t.success&&e.setState({data:Object(et.a)(t.data),filterData:Object(et.a)(t.filterData)})}))},e.callBack=function(t){var a=e.state,n=a.leadId;a.skillId,a.editRex,a.tableIndex;e.getLeadSkills(n)},e.generalFilter=function(t){var a=e.state.data;t?e.setState({filterData:a.filter((function(e){var a,n=e.panelSkill.label,l=e.panelSkillStandardLevel.levelLabel;return e.title&&e.title.toLowerCase().includes(t.toLowerCase())||"".concat(null!==n&&void 0!==n?n:"").toLowerCase().includes(t.toLowerCase())||"".concat(null!==l&&void 0!==l?l:"").toLowerCase().includes(t.toLowerCase())||e.startDate&&"".concat(me(e.startDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||e.endDate&&"".concat(me(e.endDate,!0,!0)).toLowerCase().includes(t.toLowerCase())||"".concat(null!==(a=e.billableHours)&&void 0!==a?a:"").toLowerCase().includes(t.toLowerCase())}))}):e.setState({filterData:a})},e.advancefilter=function(t,a,n){var l=e.state,r=l.data,o=l.searchedColumn;if(a?o[a].value=t:o=n,o.skill.value||o.billableHours.value||o.startDate.value||o.endDate.value){var i,s,c=["2010-10-19","2010-10-25"],u=null!==(i=o.startDate.value)&&void 0!==i?i:c,d=null!==(s=o.endDate.value)&&void 0!==s?s:c;e.setState({filterData:r.filter((function(e){var t;return"".concat(null!==(t=e.billableHours.toString())&&void 0!==t?t:"").toLowerCase().includes(o.billableHours.value.toString().toLowerCase())&&(o.skill.value.length>0?o.skill.value:[{value:","}]).some((function(t){return(o.skill.value.length>0?[e.panelSkillId]:[","]).includes(t.value)}))&&K()(o.startDate.value?me(e.startDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(u[0],u[1],void 0,"[]")&&K()(o.endDate.value?me(e.endDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(d[0],d[1],void 0,"[]")})),searchedColumn:o,openSearch:!1})}else e.setState({searchedColumn:o,filterData:r,openSearch:!1})},e.filterModalUseEffect=function(){var t=e.state.desc;Promise.all([Vt(t.panelId)]).then((function(t){var a=e.state.filterFields;a[2].data=t[0].success?t[0].data:[],e.setState({filterFields:a})})).catch((function(e){console.log(e)}))},e.columns=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","Date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","Date")),Object(tt.a)({title:"Total Hours",dataIndex:"billableHours",key:"billableHours",render:function(e){return ue(e)}},Ea("billableHours","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(t,a,n){var r,o,i,s,c,u,d,m,f;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(e))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return e.handleDelete(a.id,n)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){e.getSkilldEmployee(!0,!1,!1,a,n,a.panelSkillStandardLevelId)},disabled:!(null===(s=Object(on.a)(e))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE)},"Edit Position"),l.a.createElement(b.a.Item,{key:"add",onClick:function(){e.getSkilldEmployee(!0,a.id,!0,!1,n,a.panelSkillStandardLevelId,a.panelSkillStandardLevel)},disabled:!(null===(d=Object(on.a)(e))||void 0===d||null===(m=d.state)||void 0===m||null===(f=m.permissions)||void 0===f?void 0:f.ADD)},"Add Resouce"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],e.state={infoModal:!1,editRex:!1,leadId:!1,data:[],desc:{},mileDesc:{},ceil:{},skillId:!1,levelId:!1,crud:!1,mileId:!1,resource:!1,permissons:{ADD:!0},openSearch:!1,filterData:[],searchedColumn:{skill:{type:"Select",multi:!0,value:[],label:"Skill",showInColumn:!0},level:{type:"Select",multi:!0,value:[],label:"Level",showInColumn:!0},billableHours:{type:"Input",value:"",label:"Billable Hour"},startDate:{type:"Date",value:null,label:"Start Date",showInColumn:!0},endDate:{type:"Date",value:null,label:"End Date",showInColumn:!0,disabled:!0}},filterFields:[{Placeholder:"Skill",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Total Billable Hours",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"skill",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,key:"billableHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state,n=a.desc,r=a.filterData,o=(a.data,a.infoModal),i=a.editRex,c=a.leadId,u=(a.resource,a.skillId),d=a.levelId,m=a.permissions,f=a.mileId,y=a.crud,v=a.openSearch,g=a.filterFields,b=a.searchedColumn,E=a.mileDesc,k=a.pDates,S=a.ceil;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Opportunity Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ri,{label:"Project Name",contentStyle:{width:"25%"}},n.title),l.a.createElement(ri,{label:"Estimated Value"},"".concat(ce(n.value))),l.a.createElement(ri,{label:"Organisation",contentStyle:{width:"25%"}},n.organization?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(n.organizationId,"/info")},className:"nav-link"},n.organization.name):"No Organisation"),l.a.createElement(ri,{label:"Delegate Contact"}," ",n.ContactName),l.a.createElement(ri,{label:"Start Date"},me(n.startDate,!0,!0)," "),l.a.createElement(ri,{label:"End Date"},me(n.endDate,!0,!0)),l.a.createElement(ri,{label:"Bid Date"},me(n.bidDate,!0,!0)),l.a.createElement(ri,{label:"Status"},n.status?Z[n.status]:"")),1===n.type&&l.a.createElement(Bn.b,{style:{marginTop:15},title:"Milestone Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ri,{label:"Milestone Name"},E.title),l.a.createElement(ri,{label:"Start Date"},me(E.startDate,!0,!0)," "),l.a.createElement(ri,{label:"End Date"},me(E.endDate,!0,!0))),l.a.createElement(p.a,{justify:"end",span:4,gutter:[30,0]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return t.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){t.getSkilldEmployee(!0,!1,!1,!1,!1,!1)},disabled:m&&!m.ADD},"Add Position"))),l.a.createElement(Ca,{filters:b,filterFunction:this.advancefilter}),l.a.createElement(ea.a,{title:function(){return ka(5,t.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,size:"small",className:"fs-small",dataSource:r,expandable:{rowExpandable:function(e){return e.opportunityResourceAllocations.length>0},expandedRowRender:function(e){var a,r,o;return l.a.createElement(oi,{data:e.opportunityResourceAllocations,skill:e.id,levelId:e.panelSkillStandardLevelId,leadId:c,mileId:f,crud:y,cmRate:null!==(a=n.cmPercentage)&&void 0!==a?a:0,history:t.props.history,panelId:n.panelId,callBack:t.callBack,ceil:{short:null===(r=e.panelSkillStandardLevel)||void 0===r?void 0:r.shortTermCeil,long:null===(o=e.panelSkillStandardLevel)||void 0===o?void 0:o.longTermCeil},permissions:m})}}}),v&&l.a.createElement(Sa,{title:"Filter Resources",visible:v,filters:b,filterFields:g,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return t.setState({openSearch:!1})}}),o&&l.a.createElement(li,{visible:o,editRex:i,skillId:u,levelId:d,leadId:c,hours:null===n||void 0===n?void 0:n.hoursPerDay,cmRate:null!==(e=n.cmPercentage)&&void 0!==e?e:0,mileId:f,pDates:k,crud:y,panelId:n.panelId,close:this.closeModal,callBack:this.callBack,ceil:S}))}}]),a}(n.Component),si=In.a.TabPane,ci=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.fetchAll()},e.fetchAll=function(){var t=e.props.editPro;Promise.all([Yt(),_t(1),At(),Bt("helpers/contact-persons?active=1&employee=1&associated=1&label=1"),t&&e.getRecord(t),qt()]).then((function(t){var a=e.state,n=a.BasicFields,l=a.ManageFields;n[2].data=t[0].success?t[0].data:[],n[3].data=t[1].success?t[1].data:[],n[11].data=t[2].success?t[2].data:[],n[6].data=t[4].success?t[4].data:[],n[15].data=t[5].success?t[5].data:[],l[2].data=t[3].success?t[3].data:[],l[3].data=t[3].success?t[3].data:[],l[5].data=t[3].success?t[3].data:[],e.setState({BasicFields:n,ManageFields:l})})).catch((function(e){console.log(e)}))},e.onFinish=function(t){var a,n,l,r,o,i,s,c,u,d,m,f,p,h,y,v,g,b=t.basic,E=t.tender,k=t.dates,S=t.billing,C=t.manage,j=e.props.editPro,O={panelId:null!==(a=b.panelId)&&void 0!==a?a:null,organizationId:null!==(n=b.organizationId)&&void 0!==n?n:null,contactPersonId:null!==(l=b.contactPersonId)&&void 0!==l?l:null,title:null!==(r=b.title)&&void 0!==r?r:"",type:null!==(o=b.type)&&void 0!==o?o:"",stateId:null!==(i=b.stateId)&&void 0!==i?i:null,qualifiedOps:null!==(s=b.qualifiedOps)&&void 0!==s&&s,linkedWorkId:null!==(c=b.linkedWorkId)&&void 0!==c?c:null,tender:null!==(u=E.tender)&&void 0!==u?u:"",tenderNumber:null!==(d=E.tenderNumber)&&void 0!==d?d:"",value:null!==(m=S.value)&&void 0!==m?m:0,cmPercentage:null!==(f=S.cmPercentage)&&void 0!==f?f:0,goPercentage:null!==(p=S.goPercentage)&&void 0!==p?p:0,getPercentage:null!==(h=S.getPercentage)&&void 0!==h?h:0,accountDirectorId:null!==(y=C.accountDirectorId)&&void 0!==y?y:null,accountManagerId:null!==(v=C.accountManagerId)&&void 0!==v?v:null,projectManagerId:null!==(g=C.projectManagerId)&&void 0!==g?g:null,hoursPerDay:k.hoursPerDay,startDate:me(k.startDate,!0),endDate:me(k.endDate,!0),entryDate:me(k.entryDate,!0)};j?e.editRecord(O):e.addProject(O)},e.addProject=function(t){var a,n=e.props.callBack;e.setState({loading:!0}),(a=t,$.b.loading({content:"Loading...",key:1}),it.a.post(To,a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return ge(e,1)}))).then((function(t){t.success?n():e.setState({loading:!1})}))},e.getRecord=function(t){e.state.ManageFields;return No(t).then((function(t){if(t.success){var a=t.basic,n=t.tender,l=t.billing,r=t.dates,o=t.manage,i="helpers/contact-persons?organizationId=".concat(a.organizationId,"&associated=1"),s=Bt(i);return e.formRef.current.setFieldsValue({basic:a,tender:n,billing:l,dates:r,manage:o}),s}}))},e.editRecord=function(t){var a=e.props,n=a.editPro,l=a.callBack;t.id=n,e.setState({loading:!0}),function(e){return $.b.loading({content:"Loading...",key:e.id}),it.a.put(To+"/".concat(e.id),e,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:e.id}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l}})).catch((function(t){return ge(t,e.id,5)}))}(t).then((function(t){t.success?l():e.setState({loading:!1})}))},e.formRef=l.a.createRef(),e.state={editPro:!1,basicSubmitted:!1,check:!1,leadValue:0,SKILLS:[],STATES:[],ORGS:[],loading:!1,BasicFields:[{Placeholder:"Panel",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Organisation",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"panelId",size:"small",rules:[{required:!0,message:"Panel is Required"}],data:[],type:"Select"},{object:"basic",fieldCol:12,key:"organizationId",size:"small",rules:[{required:!0,message:"Organisation"}],data:[],type:"Select",onChange:function(t){if(t){var a="helpers/contact-persons?organizationId=".concat(t,"&associated=1");Bt(a).then((function(t){if(t.success){var a=e.state.BasicFields;a[6].data=t.data,e.setState({BasicFields:a})}}))}else{var n=e.state.BasicFields;n[6].data=[];var l=e.formRef.current.getFieldsValue().basic;l.contactPersonId=void 0,e.formRef.current.setFieldsValue({basic:l}),e.setState({BasicFields:n})}}},{Placeholder:"Customer Representative",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"contactPersonId",size:"small",data:[],type:"Select"},{object:"basic",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"Name is Required"}],type:"Input"},{Placeholder:"Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"type",size:"small",rules:[{required:!0,message:"Type is Required"}],data:[{label:"Milestone",value:1},{label:"Time & Materials",value:2}],type:"Select"},{object:"basic",fieldCol:12,key:"stateId",size:"small",data:[],type:"Select",itemStyle:{marginBottom:"10px"}},{Placeholder:"Qualified Ops",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Linked Project",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"qualifiedOps",size:"small",data:[{label:"True",value:!0},{label:"False",value:!1}],itemStyle:{marginBottom:1},type:"Select"},{object:"basic",fieldCol:12,key:"linkedWorkId",size:"small",data:[],itemStyle:{marginBottom:1},type:"Select"}],tenderFields:[{Placeholder:"Tender Title",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tender Number",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"tender",fieldCol:12,key:"tender",size:"small",type:"Input"},{object:"tender",fieldCol:12,key:"tenderNumber",size:"small",type:"Input"}],BillingFields:[{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contribution Margin as a %",size:"small",fieldCol:12,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"value",size:"small",shape:"$",type:"InputNumber",onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=ue(a.cmPercentage?t*a.cmPercentage/100:0),a.discount=ue(a.goget?t*a.goget/100:0),a.upside=ue(a.discount?t-a.discount:0),e.formRef.current.setFieldsValue({billing:a})},fieldStyle:{width:"100%"}},{object:"billing",fieldCol:12,key:"cmPercentage",size:"small",shape:"%",type:"InputNumber",rangeMin:0,rangeMax:100,fieldStyle:{width:"100%"},onChange:function(t){var a=e.formRef.current.getFieldsValue().billing;a.cm$=ue(a.value?a.value*t/100:0),e.formRef.current.setFieldsValue({billing:a})}},{Placeholder:"Contribution Margin",size:"small",fieldCol:24,type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"cm$",size:"small",shape:"$",readOnly:!0,type:"InputNumber",fieldStyle:{width:"100%"}}],DatesFields:[{Placeholder:"Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"End Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"startDate",size:"small",type:"DatePicker",rules:[{required:!0,message:"Start Date is Required"}],fieldStyle:{width:"100%"},rangeMin:function(t){var a=e.formRef.current.getFieldValue().dates;return a.endDate&&t>a.endDate}},{object:"dates",fieldCol:12,key:"endDate",rules:[{required:!0,message:"End Date is Required"}],size:"small",type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=e.formRef.current.getFieldValue().dates;return a.startDate&&t<a.startDate}},{Placeholder:"Work Hours Per Day",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Entry Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"dates",fieldCol:12,key:"hoursPerDay",size:"small",rangeMin:0,rangeMax:24,rules:[{required:!0,message:"Dailty Hours is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"dates",fieldCol:12,key:"entryDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}],ManageFields:[{Placeholder:"Account Director",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account Manager",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"accountDirectorId",size:"small",data:[],type:"Select"},{object:"manage",fieldCol:12,key:"accountManagerId",size:"small",data:[],type:"Select"},{Placeholder:"Project Manager",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"manage",fieldCol:12,key:"projectManagerId",size:"small",data:[],type:"Select"}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editPro,a=e.visible,n=e.close,r=e.onHold,o=this.state,i=o.BasicFields,s=o.tenderFields,c=o.DatesFields,u=o.BillingFields,d=o.ManageFields,m=o.loading;return l.a.createElement(ta.a,{title:t?"Edit Project":"Add Project",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:m||r,htmlType:"submit",form:"my-form"},okText:m?l.a.createElement(la.a,null):"Save",onCancel:n,width:750},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{dates:{entryDate:me(new Date)}}},l.a.createElement(In.a,{type:"card"},l.a.createElement(si,{tab:"Project Info",key:"basic",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:i})),l.a.createElement(si,{tab:"Tender Info",key:"tender",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:s})),l.a.createElement(si,{tab:"Key Dates",key:"dates",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:c})),l.a.createElement(si,{tab:"Forecast",key:"billing",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:u})),l.a.createElement(si,{tab:"Manage",key:"manage",forceRender:!0,className:"ant-form ant-form-inline ant-form-small"},l.a.createElement(Rt,{FormFields:d})))))}}]),a}(n.Component),ui=Ye.a.Title,di=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getList()},n.getList=function(){var e=JSON.parse(pe().permissions).PROJECTS;it.a.get(To,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(t){n.setState({data:t.success?t.data:[],filterData:t.success?t.data:[],openModal:!1,editPro:{id:!1,onHold:!1},permissions:e})}))},n.handleDelete=function(e,t){var a=n.state,l=a.data,r=a.filterData,o=n.props.history;zn(o,"/projects",e,t,r,l).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.callBack=function(){n.getList()},n.closeModal=function(){n.setState({openModal:!1,editPro:{id:!1,onHold:!1}})},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){var a=t.organization.name;return"00".concat(t.id.toString()).includes(e)||t.title&&t.title.toLowerCase().includes(e.toLowerCase())||a&&a.toLowerCase().includes(e.toLowerCase())||t.value&&"".concat(ce(t.value)).toLowerCase().includes(e.toLowerCase())||t.startDate&&"".concat(me(t.startDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.endDate&&"".concat(me(t.endDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.type&&"".concat(ae[t.type]).toLowerCase().includes(e.toLowerCase())||"".concat(Q[t.phase]).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;if(t?o[t].value=e:o=a,o.id.value||o.title.value||o.organization.value.length>0||o.revenue.value||o.startDate.value||o.endDate.value||o.entryDate.value||o.panel.value.length>0||o.stage.value.length>0||o.phase.value||o.type.value||o.stateId.value.length>0){var i,s,c,u=["2010-10-19","2010-10-25"],d=null!==(i=o.startDate.value)&&void 0!==i?i:u,m=null!==(s=o.endDate.value)&&void 0!==s?s:u,f=null!==(c=o.entryDate.value)&&void 0!==c?c:u;n.setState({filterData:r.filter((function(e){var t,a,n,l,r,i=e.organization.id;return"00".concat(e.id.toString()).includes(o.id.value)&&"".concat(null!==(t=e.title)&&void 0!==t?t:"").toLowerCase().includes(o.title.value.toLowerCase())&&"".concat(null!==(a=e.value.toString())&&void 0!==a?a:"").toLowerCase().includes(o.revenue.value.toString().toLowerCase())&&"".concat(null!==(n=e.type)&&void 0!==n?n:"").toLowerCase().includes(o.type.value.toLowerCase())&&"".concat(null!==(l=e.phase)&&void 0!==l?l:"").toLowerCase().includes(o.phase.value.toLowerCase())&&"".concat(null!==(r=e.qualifiedOps)&&void 0!==r?r:"").toLowerCase().includes(o.qualifiedOps.value.toLowerCase())&&(o.organization.value.length>0?o.organization.value:[{value:","}]).some((function(e){return(o.organization.value.length>0?[i]:[","]).includes(e.value)}))&&(o.stateId.value.length>0?o.stateId.value:[{value:","}]).some((function(t){return(o.stateId.value.length>0?[e.stateId]:[","]).includes(t.value)}))&&(o.stage.value.length>0?o.stage.value:[{value:","}]).some((function(t){return(o.stage.value.length>0?[e.stage]:[","]).includes(t.value)}))&&(o.panel.value.length>0?o.panel.value:[{value:","}]).some((function(t){return(o.panel.value.length>0?[e.panelId]:[","]).includes(t.value)}))&&K()(o.startDate.value?me(e.startDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(d[0],d[1],void 0,"[]")&&K()(o.endDate.value?me(e.endDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(m[0],m[1],void 0,"[]")&&K()(o.entryDate.value?me(e.entryDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(f[0],f[1],void 0,"[]")})),searchedColumn:o,openSearch:!1})}else n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){Promise.all([Yt(),_t(),At()]).then((function(e){var t=n.state.filterFields;t[2].data=e[0].success?e[0].data:[],t[3].data=e[1].success?e[1].data:[],t[10].data=e[2].success?e[2].data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.proForm=l.a.createRef(),n.columns=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",width:"1%",render:function(e){return"00".concat(e)}},Ea("id","number")),Object(tt.a)({title:"Title",dataIndex:"title",key:"title",width:"30%",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/info")},className:"nav-link"}," ",e," ")}},Ea("title","string")),Object(tt.a)({title:"Organisation Name",dataIndex:"organization",key:"organization",width:"20%",render:function(e){return e&&l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(e.id,"/info")},className:"nav-link"},e.name)}},Ea("organization.name","string")),Object(tt.a)({title:"Revenue",dataIndex:"value",key:"value",render:function(e){return"".concat(ce(e))}},Ea("value","number")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDtae",render:function(e){return me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Type",dataIndex:"type",key:"type",width:"1%",render:function(e){return ae[e]}},Ea("type","number")),Object(tt.a)({title:"Status",dataIndex:"phase",key:"phase",width:"1%",render:function(e){return l.a.createElement(jl,{text:"".concat(e),objName:"O_PHASE",colorName:"O_PHASE_COLORS"})}},Ea("phase","string",!0,!0)),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,c,u,d,m,f;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE)||t.phase,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",onClick:function(){return n.setState({openModal:!0,editPro:{id:t.id,onHold:!1===t.phase}})},disabled:!(null===(c=Object(on.a)(n))||void 0===c||null===(u=c.state)||void 0===u||null===(d=u.permissions)||void 0===d?void 0:d.UPDATE)},"Edit"),l.a.createElement(b.a.Item,{key:"order"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/purchase-order")},className:"nav-link"},"Purchase Order")),1===t.type?l.a.createElement(b.a.Item,{key:"milestone"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(b.a.Item,{key:"position"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/milestones/").concat(null===t||void 0===t||null===(m=t.milestones)||void 0===m||null===(f=m[0])||void 0===f?void 0:f.id,"/resources")},className:"nav-link"},"Postions")),l.a.createElement(b.a.Item,{key:"view"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/info")},className:"nav-link"},"View")),1===t.type?l.a.createElement(b.a.Item,{key:"schedule"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(t.id,"/schedules")},className:"nav-link"},"Schedules")):"")},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={data:[],openModal:!1,editPro:{id:!1,onHold:!1},permissions:{},filterData:[],openSearch:!1,searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},title:{type:"Input",value:"",label:"Title",showInColumn:!0},organization:{type:"Select",multi:!0,value:[],label:"Organization",showInColumn:!0},panel:{type:"Select",multi:!0,value:[],label:"panel",showInColumn:!0},revenue:{type:"Input",value:"",label:"Revenue",showInColumn:!0},startDate:{type:"Date",value:null,label:"Start Date",showInColumn:!0},endDate:{type:"Date",value:null,label:"End Date",showInColumn:!0,disabled:!0},entryDate:{type:"Date",value:null,label:"Entry Date",showInColumn:!0,disabled:!0},stage:{type:"Select",multi:!0,value:[],label:"stage",showInColumn:!0},type:{type:"Select",value:"",label:"Type",showInColumn:!0},Action:{type:"Input",value:"",label:"",showInColumn:!0,disabled:!0},stateId:{type:"Select",multi:!0,value:[],label:"State",showInColumn:!1,disabled:!1},address:{type:"Input",value:"",label:"Address",showInColumn:!1,disabled:!1},qualifiedOps:{type:"Select",value:"",label:"Qualified Ops",showInColumn:!1,disabled:!1},phase:{type:"Select",value:"",label:"Status",showInColumn:!0}},filterFields:[{Placeholder:"Panel",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Organisation",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"panel",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,mode:"multiple",key:"organization",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{Placeholder:"Name",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"title",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"type",size:"small",data:[{label:"Milestone",value:"1"},{label:"Time & Materials",value:"2"}],type:"Select"},{Placeholder:"State",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Qualified Ops",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"stateId",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,key:"qualifiedOps",size:"small",data:[{label:"True",value:"True"},{label:"False",value:"False"}],type:"Select"},{Placeholder:"Estimated Value",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"revenue",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Entry Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"entryDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Status",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"phase",size:"small",data:[{label:"Open",value:"true"},{label:"Close",value:"false"}],type:"Select"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.data,t.openModal),n=t.editPro,r=t.permissions,o=t.filterData,i=t.searchedColumn,s=t.filterFields,c=t.openSearch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(ui,{level:4},"Projects")),l.a.createElement(h.a,{style:{textAlign:"end"},span:4},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return e.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({openModal:!0,editPro:{id:!1,onHold:!1}})},disabled:!r.ADD},l.a.createElement(na.a,null),"Add Project")))),l.a.createElement(Ca,{filters:i,filterFunction:this.advancefilter}),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:o,size:"small",className:"fs-small"}))),c&&l.a.createElement(Sa,{title:"Filter Projects",visible:c,filters:i,filterFields:s,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return e.setState({openSearch:!1})}}),a&&l.a.createElement(ci,{visible:a,editPro:null===n||void 0===n?void 0:n.id,onHold:null===n||void 0===n?void 0:n.onHold,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),mi=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/resources")},className:"nav-link"},e)}},Ea("title","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),{title:"Approved",dataIndex:"isApproved",key:"isApproved",align:"right",render:function(e){return l.a.createElement(jl,{text:null!==e&&void 0!==e?e:"CM"})}}],fi=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Employee Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){var t,a;return"".concat(null!==(t=null===e||void 0===e?void 0:e.firstName)&&void 0!==t?t:""," ").concat(null!==(a=null===e||void 0===e?void 0:e.lastName)&&void 0!==a?a:"")}},Ea("contactPerson.firstName","string")),Object(tt.a)({title:"Billable Hours",dataIndex:"billableHours",key:"billableHours",width:"4%",render:function(e){return ue(e)}},Ea("billableHours","number")),Object(tt.a)({title:"Buy Rate (Hourly)",dataIndex:"buyingRate",key:"buyingRate",width:"4%",render:function(e){return e&&ce(e)}},Ea("buyingRate","number")),Object(tt.a)({title:"Sell Rate (Hourly)",dataIndex:"sellingRate",key:"sellingRate",width:"4%",render:function(e){return e&&ce(e)}},Ea("sellingRate","number")),Object(tt.a)({title:"CM $",dataIndex:"cm$",key:"cm$",render:function(e){return e&&ce(e)}},Ea("cm$","number")),Object(tt.a)({title:"CM %",dataIndex:"cmPercent",key:"cmPercent",render:function(e){return"".concat(ue(e)," %")}},Ea("cmPercent","number")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return me(e,!0,!0)}},Ea("startDate","Date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return me(e,!0,!0)}},Ea("endDate","Date"))];function pi(e){var t=e.columns,a=e.data;return l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(ea.a,{bordered:!0,size:"small",className:"fs-small",rowKey:function(e){return e.allocationId},columns:t,dataSource:a,pagination:!1}))}var hi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.id;Ao(t).then((function(a){if(a){var n=a.success,l=a.data;console.log(l),e.setState({leadId:t,data:n?l:[]})}}))},e.state={leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.desc,e.data);e.leadId,e.permissions;return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:mi,dataSource:t,size:"small",className:"fs-small",expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.opportunityResources)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(pi,{data:e.opportunityResources,columns:fi,expandable:!0,checked:!1})}}})}}]),a}(n.Component),yi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.id;Ao(t).then((function(a){if(a){var n,l=a.success,r=a.data;e.setState({leadId:t,data:l?r[0].opportunityResources:[],milestoneId:l&&(null===r||void 0===r||null===(n=r[0])||void 0===n?void 0:n.id)})}}))},e.state={leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.desc,e.data);e.leadId,e.permissions,e.milestoneId;return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Employee Name",dataIndex:"contactPerson",key:"contactPerson",render:function(e){var t,a;return"".concat(null!==(t=null===e||void 0===e?void 0:e.firstName)&&void 0!==t?t:""," ").concat(null!==(a=null===e||void 0===e?void 0:e.lastName)&&void 0!==a?a:"")}},Ea("contactPerson.firstName","string")),Object(tt.a)({title:"Billable Hours",dataIndex:"billableHours",key:"billableHours",width:"4%",render:function(e){return ue(e)}},Ea("billableHours","number")),Object(tt.a)({title:"Buy Rate (Hourly)",dataIndex:"buyingRate",key:"buyingRate",width:"4%",render:function(e){return e&&ce(e)}},Ea("buyingRate","number")),Object(tt.a)({title:"Sell Rate (Hourly)",dataIndex:"sellingRate",key:"sellingRate",width:"4%",render:function(e){return e&&ce(e)}},Ea("sellingRate","number")),Object(tt.a)({title:"CM $",dataIndex:"cm$",key:"cm$",render:function(e){return e&&ce(e)}},Ea("cm$","number")),Object(tt.a)({title:"CM %",dataIndex:"cmPercent",key:"cmPercent",render:function(e){return"".concat(ue(e)," %")}},Ea("cmPercent","number")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return me(e,!0,!0)}},Ea("startDate","Date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return me(e,!0,!0)}},Ea("endDate","Date"))],dataSource:t,size:"small",className:"fs-small"})}}]),a}(n.Component),vi=[Object(tt.a)({title:"Resource",dataIndex:"fullName",key:"fullName",render:function(e,t){return e}},Ea("fullName","string")),Object(tt.a)({title:"Total Hours",dataIndex:["total","totalHours"],key:"total",render:function(e){return e&&ue(e)}},Ea("total.totalHours","number")),Object(tt.a)({title:"Total Utilized Hours",dataIndex:["total","utilizedHours"],key:"utilized",render:function(e){return e&&ue(e)}},Ea("total.utilizedHours","number")),Object(tt.a)({title:"Total Remaining Hours",dataIndex:["total","remainingHours"],key:"remaining",render:function(e){return e&&ue(e)}},Ea("total.remainingHours","number")),Object(tt.a)({title:"Total Actual Revenue",dataIndex:["total","actualRevenue"],key:"actualRevenue",render:function(e){return e&&ce(e)}},Ea("total.actualRevenue","number")),Object(tt.a)({title:"Total Actual Cost",dataIndex:["total","actualCost"],key:"actualCost",render:function(e){return e&&ce(e)}},Ea("total.actualCost","number")),Object(tt.a)({title:"CM$",dataIndex:["total","cm$"],key:"cm$",render:function(e){return e&&ce(e)}},Ea("total.cm$","number")),Object(tt.a)({title:"CM%",dataIndex:["total","cmPercent"],key:"cmPercent",render:function(e){return"".concat(ue(null!==e&&void 0!==e?e:"-")," %")}},Ea("total.cmPercent","number"))],gi=[Object(tt.a)({title:"Duration",dataIndex:"dateString",key:"dateString"},Ea("dateString","string")),Object(tt.a)({title:"Working Days",dataIndex:"workDays",key:"workDays",render:function(e){return ue(null!==e&&void 0!==e?e:0)},sorter:function(e,t){return e.workDays-t.workDays}},Ea("workDays","string")),Object(tt.a)({title:"Effort Rate",dataIndex:"effortRate",key:"effortRate",render:function(e){return ue(null!==e&&void 0!==e?e:0)},sorter:function(e,t){return e.effortRate-t.effortRate}},Ea("effortRate","string")),Object(tt.a)({title:"Actual Hours",dataIndex:"actualHours",key:"actualHours",render:function(e){return ue(null!==e&&void 0!==e?e:0)},sorter:function(e,t){return e.actualHours-t.actualHours}},Ea("actualHours","string")),Object(tt.a)({title:"Actual Days",dataIndex:"actualDays",key:"actualDays",render:function(e){return ue(null!==e&&void 0!==e?e:0)},sorter:function(e,t){return e.actualDays-t.actualDays}},Ea("actualDays","number")),Object(tt.a)({title:"Actual Revenue",dataIndex:"actualRevenue",key:"actualRevenue",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("actualRevenue","number")),Object(tt.a)({title:"Actual Cost",dataIndex:"actualCost",key:"actualCost",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("actualCost","number")),Object(tt.a)({title:"CM $",dataIndex:"cm$",key:"cm$",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("cm$","number")),Object(tt.a)({title:"CM %",dataIndex:"cmPercent",key:"cmPercent",render:function(e){return"".concat(ue(null!==e&&void 0!==e?e:"-")," %")}},Ea("cmPercent","number"))];function bi(e){var t=e.columns,a=e.data;return l.a.createElement("div",{style:{paddingRight:20}},l.a.createElement(ea.a,{bordered:!0,size:"small",className:"fs-small project-tracking-nested",rowKey:function(e){return e.allocationId},rowClassName:function(e){return e.current?"current":"forecast"},columns:t,dataSource:a,pagination:!1,summary:function(e){console.log(e);var t=0,a=0,n=0,r=0,o=0,i=0,s=0,c=0;e.forEach((function(e){var l,u,d,m,f,p,h;t+=parseFloat(null!==(l=e.workDays)&&void 0!==l?l:0),a+=parseFloat(null!==(u=e.actualHours)&&void 0!==u?u:0),n+=parseFloat(null!==(d=e.actualDays)&&void 0!==d?d:0),r+=parseFloat(null!==(m=e.actualRevenue)&&void 0!==m?m:0),o+=parseFloat(null!==(f=e.actualCost)&&void 0!==f?f:0),i+=parseFloat(null!==(p=e.cm$)&&void 0!==p?p:0),s+=parseFloat(null!==(h=e.cmPercent)&&void 0!==h?h:0),e.cmPercent&&c++}));var u=0;return s>0&&(u=s/c),l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0},"Total"),l.a.createElement(ea.a.Summary.Cell,{index:1},ue(t)),l.a.createElement(ea.a.Summary.Cell,{index:2},"-"),l.a.createElement(ea.a.Summary.Cell,{index:3},ue(a)),l.a.createElement(ea.a.Summary.Cell,{index:4},ue(n)),l.a.createElement(ea.a.Summary.Cell,{index:5},ce(r)),l.a.createElement(ea.a.Summary.Cell,{index:6},ce(o)),l.a.createElement(ea.a.Summary.Cell,{index:7},ce(i)),l.a.createElement(ea.a.Summary.Cell,{index:8},ue(u)," %")))}}))}var Ei=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t,a,n=e.props.id,l=Ee("dates"),r=l.start,o=l.end;(t=n,a={startDate:r.format("DD-MM-YYYY"),endDate:o.format("DD-MM-YYYY")},it.a.get("".concat(To,"/").concat(t,"/tracking"),{headers:ye(),params:a}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){if(t){var a=t.success,l=t.data;e.setState({leadId:n,data:a?l:[]})}}))},e.state={leadId:!1,data:[],desc:{},skillId:!1,levelId:!1,resource:!1,permissons:{ADD:!0}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.desc,e.data);e.leadId,e.permissions;return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.employeeId},columns:vi,dataSource:t,size:"small",className:"fs-small",expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.currentYear)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(bi,{data:e.currentYear,columns:gi,expandable:!0,checked:!1})}},summary:function(e){console.log(e);var t=0,a=0,n=0,r=0,o=0,i=0,s=0,c=0;e.forEach((function(e){var l,u,d,m,f,p,h;t+=parseFloat(null!==(l=e.total.totalHours)&&void 0!==l?l:0),a+=parseFloat(null!==(u=e.total.utilizedHours)&&void 0!==u?u:0),n+=parseFloat(null!==(d=e.total.remainingHours)&&void 0!==d?d:0),r+=parseFloat(null!==(m=e.total.actualRevenue)&&void 0!==m?m:0),o+=parseFloat(null!==(f=e.total.actualCost)&&void 0!==f?f:0),i+=parseFloat(null!==(p=e.total.cm$)&&void 0!==p?p:0),s+=parseFloat(null!==(h=e.total.cmPercent)&&void 0!==h?h:0),e.total.cmPercent&&e.total.cmPercent>0&&c++}));var u=0;return s>0&&(u=s/c),l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0},"-"),l.a.createElement(ea.a.Summary.Cell,{index:1},"Total"),l.a.createElement(ea.a.Summary.Cell,{index:2},ue(t)),l.a.createElement(ea.a.Summary.Cell,{index:3},ue(a)),l.a.createElement(ea.a.Summary.Cell,{index:4},ue(n)),l.a.createElement(ea.a.Summary.Cell,{index:5},ce(r)),l.a.createElement(ea.a.Summary.Cell,{index:6},ce(o)),l.a.createElement(ea.a.Summary.Cell,{index:7},ce(i)),l.a.createElement(ea.a.Summary.Cell,{index:8},ue(u)," %")))}})}}]),a}(n.Component),ki=(a(547),Bn.b.Item),Si=In.a.TabPane,Ci=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props.match.params.proId;e.getRecord(t)},e.getRecord=function(t){var a=JSON.parse(pe().permissions).PROJECTS;No(t).then((function(n){n.success?e.setState({data:n.data,basic:n.basic,billing:n.billing,leadId:t,infoModal:!1,renderTabs:!0,permissions:a,calculatedValue:n.data.calculatedValue}):n.authError&&e.setState({notAuth:!0})}))},e.closeModal=function(){e.setState({infoModal:!1})},e.handleDelete=function(t){var a=e.props.history;zn(a,"/projects",t).then((function(e){e.success}))},e.callBack=function(){var t=e.state.leadId;e.getRecord(t)},e.OutcomeAction=function(t){var a,n,l=e.state,r=l.leadId,o=l.basic;(a=t,n=r,$.b.loading({content:"Loading...",key:n}),it.a.post(To+"/".concat(n,"/phase/").concat(a),{},{headers:ye()}).then((function(e){var t,a=e.data,l=a.success,r=a.message,o=a.data;return he(r),$.b.success({content:r,key:n}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l,data:o}})).catch((function(e){return ge(e,n,5)}))).then((function(a){a.success&&e.setState({basic:Object(tt.a)(Object(tt.a)({},o),{},{phase:"open"===t})})}))},e.state={valueSpin:!1,updateEnabled:!0,calculatedValue:0,infoModal:!1,leadId:!1,data:{},basic:{},billing:{},renderTabs:!1,permissions:{},notAuth:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.data,o=n.infoModal,i=n.leadId,c=n.billing,u=n.renderTabs,d=(n.calculatedValue,n.permissions),m=n.basic,f=n.notAuth,y=(n.valueSpin,n.updateEnabled,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,"Project Information"),l.a.createElement(h.a,null,l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===d||void 0===d?void 0:d.DELETE)||!1===m.phase,className:"pop-confirm-menu"},l.a.createElement(lt.a,{disabled:!(null===d||void 0===d?void 0:d.DELETE)||!1===m.phase,title:"Are you sure you want to delete ?",onConfirm:function(){return a.handleDelete(i)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.SubMenu,{title:"Outcome",key:"Outcome"},l.a.createElement(b.a.Item,{key:"Open",disabled:!d.UPDATE||!0===m.phase,style:{color:"#6fac45"},className:"pop-confirm-menu"},l.a.createElement(lt.a,{disabled:!d.UPDATE||!0===m.phase,title:"Do You Want To Open this Project?",onConfirm:function(){return a.OutcomeAction("open")},okText:"Yes",cancelText:"No"},l.a.createElement("div",null,"Open"))),l.a.createElement(b.a.Item,{key:"Close",disabled:!d.UPDATE||!1===m.phase,style:{color:"#c00505"},className:"pop-confirm-menu"},l.a.createElement(lt.a,{disabled:!d.UPDATE||!1===m.phase,title:"Do You Want To Close this Project?",onConfirm:function(){return a.OutcomeAction("close")},okText:"Yes",cancelText:"No"},l.a.createElement("div",null,"Close")))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){a.setState({infoModal:!0})},disabled:!(null===d||void 0===d?void 0:d.UPDATE)},"Edit"),l.a.createElement(b.a.Item,{key:"order"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/purchase-order")},className:"nav-link"},"Purchase Order")),1===(m&&m.type)?l.a.createElement(b.a.Item,{key:"milestone"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/milestones")},className:"nav-link"},"Milestones")):l.a.createElement(b.a.Item,{key:"position"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/milestones/").concat(null===r||void 0===r||null===(e=r.milestones)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id,"/resources")},className:"nav-link"},"Postions")),m&&1===m.type?l.a.createElement(b.a.Item,{key:"schedule"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(i,"/schedules")},className:"nav-link"},"Schedules")):"")},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)," Option ",l.a.createElement(Le.a,null))))));return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:y,size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(ki,{label:"Project Name"},r.title),l.a.createElement(ki,{label:"Contract Value"},l.a.createElement(p.a,{justify:"space-between",align:"middle"},ce(r.value))),l.a.createElement(ki,{label:"Organisation"},r.organizationName?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(r.organizationId,"/info")},className:"nav-link"},r.organizationName):"No Organisation"),l.a.createElement(ki,{label:"Delegate Contact"},m?m.ContactName:null),l.a.createElement(ki,{label:"Start Date"},me(r.startDate,!0,!0)),l.a.createElement(ki,{label:"End Date"},me(r.endDate,!0,!0)),l.a.createElement(ki,{label:"Status"},l.a.createElement(ga.a,{color:m.phase?"green":"red"},Q[m.phase]))),u&&l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(Si,{tab:"Comments",key:"comments"},l.a.createElement(Qn,{targetId:i,targetType:"WOR",onHold:!1===m.phase})),l.a.createElement(Si,{tab:"Attachments",key:"attachments"},l.a.createElement(sl,{targetId:i,targetType:"WOR",onHold:!1===m.phase})),l.a.createElement(Si,{tab:"Projected Profit & Loss",key:"profitloss"},l.a.createElement(Yo,{id:i,parent:"P",billing:c,type:r.type})),l.a.createElement(Si,{tab:"Resources",key:"resources"},1===m.type?l.a.createElement(hi,{id:i,data:r}):l.a.createElement(yi,{id:i,data:r})),2===m.type&&l.a.createElement(Si,{tab:"Project Tracking",key:"projectTracking"},l.a.createElement(Ei,{id:i,data:r})),l.a.createElement(Si,{tab:"Shutdown Periods",key:"shutdown"},l.a.createElement(Qo,{id:i}))),o&&l.a.createElement(ci,{visible:o,editPro:i,close:this.closeModal,callBack:this.callBack,onHold:!1===m.phase}),f&&l.a.createElement(ul,this.props))}}]),a}(n.Component);function ji(){ji=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}In.a.TabPane;var Oi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.openModal()},n.setBilHouRate=function(e,t,a){var l,r=n.state,o=r.ResourceFields,i=r.holidays,s=n.props.hours;e?(a=(null!==(l=a)&&void 0!==l?l:100)/100,o[13].suggestion="".concat(ue(je(e,null!==t&&void 0!==t?t:e,i)*s*a),"'")):o[13].suggestion="";n.setState({ResourceFields:Object(et.a)(o)})},n.checkRates=function(e,t){e?t.label.includes("Employee")?n.getRates("employees",e):t.label.includes("Sub Contractor")?n.getRates("sub-contractors",e):n.setRates("No Active Contract","No Active Contract"):n.setRates(void 0,void 0)},n.getRates=function(e,t){var a=n.props.cmRate;Xt(e,t,"contactPerson").then((function(e){if(e.success){var t=e.data.employeeBuyRate;n.setRates(ce(t),ce(t/(1-a/100)))}}))},n.setRates=function(e,t){var a=n.state.ResourceFields;a[16].suggestion=e,a[17].suggestion=t,n.setState({ResourceFields:Object(et.a)(a)})},n.openModal=function(){var e=n.props,t=e.editRex,a=e.panelId,l=e.proId;vo(l).then((function(e){if(e.success){var t=e.data.holidays;n.setState({holidays:t})}})),Vt(a).then((function(e){var a=n.state.ResourceFields;a[3].data=e.success?e.data:[],n.setState({ResourceFields:a},(function(){t&&n.getRecord(e.data)}))}))},n.onFinish=function(e){n.setState({loading:!0});var t=n.props.editRex,a=e.obj;a=Object(tt.a)(Object(tt.a)({},a),{},{startDate:me(a.startDate,!0),endDate:me(a.endDate,!0),isMarkedAsSelected:!0}),t?n.editRecord(a):n.addRecord(a)},n.addRecord=function(e){var t=n.props,a=t.proId,l=t.callBack;(function(e,t,a){return $.b.loading({content:"Loading...",key:a}),it.a.post("".concat(J).concat(e),t,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l}})).catch((function(e){return ge(e,a,5)}))})(t.crud,e,a).then((function(e){e.success?l():n.setState({loading:!1})}))},n.getRecord=function(e){var t=n.props,a=t.crud,l=t.editRex,r=t.hours;(function(e,t){return it.a.get("".concat(J).concat(e,"/").concat(t),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o,i,s,c,u,d,m,f,p,h,y,v,g,b,E={panelSkillId:n.panelSkillId,title:n.title,panelSkillStandardLevelId:n.panelSkillStandardLevelId,ltceil:null===(r=n.panelSkillStandardLevel)||void 0===r?void 0:r.longTermCeil,stceil:null===(o=n.panelSkillStandardLevel)||void 0===o?void 0:o.shortTermCeil,billableHours:n.billableHours,startDate:me(n.startDate),endDate:me(n.endDate),contactPersonId:null===n||void 0===n||null===(i=n.opportunityResourceAllocations)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.contactPersonId,buyingRate:null===n||void 0===n||null===(c=n.opportunityResourceAllocations)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.buyingRate,sellingRate:null===n||void 0===n||null===(d=n.opportunityResourceAllocations)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.sellingRate,effortRate:null===n||void 0===n||null===(f=n.opportunityResourceAllocations)||void 0===f||null===(p=f[0])||void 0===p?void 0:p.effortRate,allocationId:null===n||void 0===n||null===(h=n.opportunityResourceAllocations)||void 0===h||null===(y=h[0])||void 0===y?void 0:y.id,role:null===(v=n.opportunityResourceAllocations)||void 0===v||null===(g=v[0])||void 0===g?void 0:g.role};return fe(null===e||void 0===e||null===(b=e.headers)||void 0===b?void 0:b.authorization),{success:a,data:E}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(a,l).then((function(t){if(t.success){var a=t.data,l=a.panelSkillId,o=a.panelSkillStandardLevelId,i=a.endDate,s=a.startDate,c=a.stceil,u=a.ltceil,d=a.allocationId,m=a.contactPersonId,f=a.role,p=a.effortRate,h=e.findIndex((function(e){return e.value===l})),y="employees/get/by-skills?psslId=".concat(o,"&workType=P");Bt(y).then((function(a){var l=n.state,o=l.ResourceFields,y=l.holidays;o[6].data=e[h]?e[h].levels:[],o[7].data=a.success?a.data:[],o[13].suggestion="".concat(ue(je(s,null!==i&&void 0!==i?i:s,y)*r*(p/100)),"'"),o[19].hint=n.ceilHint(c,u),n.formRef.current.setFieldsValue({obj:t.data}),n.setState({ResourceFields:o,allocationId:d},(function(){f?n.checkRates(m,{label:f}):n.setRates("No Active Contract","No Active Contract")}))}))}}))},n.editRecord=function(e){var t=n.props,a=t.editRex,l=t.crud,r=t.callBack;e.id=a,function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put("".concat(J).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r[0]}})).catch((function(e){return ge(e,t,5)}))}(l,a,e).then((function(e){e.success?r():n.setState({loading:!1})}))},n.ceilHint=function(e,t){return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left"}},"ST Ceil(hourly): ",e),l.a.createElement("span",{style:{float:"right"}},"LT Ceil(hourly): ",t))},n.formRef=l.a.createRef(),n.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],data:{},holidays:[],ResourceFields:[{Placeholder:"Position Title",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Panel Skill",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",type:"Input"},{object:"obj",fieldCol:12,key:"panelSkillId",disabled:e.editRex,size:"small",rules:[{required:!0,message:"Skill is Required"}],data:[],type:"Select",onChange:function(e,t){var a=n.state.ResourceFields;a[6].data=t?t.levels:[];var l=n.formRef.current.getFieldsValue().obj;l.panelSkillStandardLevelId=void 0,l.contactPersonId=void 0,delete a[19].hint,n.formRef.current.setFieldsValue({obj:l}),n.setState({ResourceFields:a})}},{Placeholder:"Panel Level",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Resource",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"panelSkillStandardLevelId",disabled:e.editRex,size:"small",rules:[{required:!0,message:"Level is Required"}],data:[],type:"Select",onChange:function(){var e=Object(dn.a)(ji().mark((function e(t,a){var l,r,o,i,s,c,u;return ji().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.state.ResourceFields,!t){e.next=12;break}return r="employees/get/by-skills?psslId=".concat(t,"&workType=P"),e.next=5,Bt(r);case 5:o=e.sent,i=o.success,s=o.data,l[7].data=i?s:[],l[19].hint=n.ceilHint(a.stceil,a.ltceil),e.next=13;break;case 12:delete l[19].hint;case 13:c=n.formRef.current.getFieldsValue(),(u=c.obj).contactPersonId=void 0,n.formRef.current.setFieldsValue({obj:u}),n.setState({ResourceFields:l});case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{object:"obj",fieldCol:12,key:"contactPersonId",disabled:e.editRex,size:"small",rules:[{required:!0,message:"Resource is Required"}],data:[],type:"Select",onChange:function(e,t){n.checkRates(e,t)}},{Placeholder:"Start Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=n.formRef.current.getFieldValue().obj;return ke(t,null===a||void 0===a?void 0:a.endDate,e.pDates)},onChange:function(){var e=n.formRef.current.getFieldValue().obj,t=e.startDate,a=e.endDate,l=e.effortRate;n.setBilHouRate(t,a,l)}},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=n.formRef.current.getFieldValue().obj;return Se(t,null===a||void 0===a?void 0:a.startDate,e.pDates)},onChange:function(){var e=n.formRef.current.getFieldValue().obj,t=e.startDate,a=e.endDate,l=e.effortRate;n.setBilHouRate(t,a,l)}},{Placeholder:"Effort Rate",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Total Billable Hours",fieldCol:12,size:"small",type:"Text",rangeMin:!0},{object:"obj",fieldCol:12,key:"effortRate",rules:[{required:!0,message:"Effort Rate is Required"}],shape:"%",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100,onChange:function(){var e=n.formRef.current.getFieldValue().obj,t=e.startDate,a=e.endDate,l=e.effortRate;n.setBilHouRate(t,a,l)}},{object:"obj",fieldCol:12,key:"billableHours",size:"small",rules:[{required:!0,message:"Work Hour is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Buy Rate (Hourly)",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Sell Rate (Hourly)",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",rules:[{required:!0,message:"Buying Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",rules:[{required:!0,message:"Selling Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,r=e.onHold,o=this.state,i=o.ResourceFields,s=o.loading;return l.a.createElement(ta.a,{title:t?"Edit Resource":"Add Resource",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:s||r,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{obj:{effortRate:100}}},l.a.createElement(Rt,{FormFields:i})))}}]),a}(n.Component),xi="".concat(J,"/milestones"),wi=function(e){return it.a.get("".concat(J).concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ii=function(e,t){return it.a.get("".concat(J,"/").concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o={id:n.id,panelId:n.panelId,organizationId:n.organizationId,organizationName:n.organization&&n.organization.name,ContactName:n.contactPerson&&"".concat(n.contactPerson.firstName,"  ").concat(n.contactPerson.lastName," - ").concat(n.contactPerson.phoneNumber),contactPersonId:n.contactPersonId,qualifiedOps:n.qualifiedOps,type:n.type,title:n.title,stateId:n.stateId},i={tender:n.tender,tenderNumber:n.tenderNumber},s={cmPercentage:n.cmPercentage?n.cmPercentage:0,cm$:n.value*n.cmPercentage/100,getPercentage:n.getPercentage?n.getPercentage:0,goPercentage:n.goPercentage?n.goPercentage:0,totalMonths:n.startDate&&n.endDate?Math.ceil(me(n.endDate).diff(me(n.startDate),"months",!0)):0,endDate:me(n.endDate),startDate:me(n.startDate),value:n.value?n.value:0};s.goget=s.getPercentage*s.goPercentage/100,s.discount=n.value*s.goget/100,s.upside=n.value-s.discount;var c={entryDate:me(n.entryDate),startDate:me(n.startDate),hoursPerDay:n.hoursPerDay,endDate:me(n.endDate),bidDate:me(n.bidDate)},u={accountDirectorId:n.accountDirectorId,accountManagerId:n.accountManagerId,opportunityManagerId:n.opportunityManagerId,projectManagerId:n.projectManagerId};return n.ContactName=n.contactPerson&&n.contactPerson.firstName+" "+n.contactPerson.lastName,n.organizationName=n.organization&&n.organization.name,fe(null===e||void 0===e||null===(r=e.headers)||void 0===r?void 0:r.authorization),{success:a,data:n,basic:o,tender:i,billing:s,dates:c,manage:u}}return{success:a}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))},Di=function(e){return $.b.loading({content:"Loading...",key:1}),it.a.get("".concat(xi,"/approvals").concat(e?"?projectId="+e:""),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.destroy(1),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return ge(e,1,5)}))},Pi=function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.patch("".concat(xi).concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:e}),fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return ge(e,1,5)}))},Ti=Bn.b.Item,Ni=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAll()},n.fetchAll=function(e){var t=JSON.parse(pe().permissions).PROJECTS,a=n.props.match.url,l=n.props.match.params,r=l.proId,o=l.mileId;Promise.all([No(r),Ro(a)]).then((function(e){var l,i,s,c,u,d,m,f,p;n.setState({proDesc:(null===(l=e[0])||void 0===l?void 0:l.success)?e[0].data:{},mileDesc:(null===(i=e[0])||void 0===i?void 0:i.success)&&(null===(s=e[0])||void 0===s||null===(c=s.data)||void 0===c?void 0:c.milestones)?null===(u=e[0])||void 0===u||null===(d=u.data)||void 0===d?void 0:d.milestones.filter((function(e){return e.id==o}))[0]:{},editRex:!1,proId:r,crud:a,mileId:o,infoModal:!1,data:(null===(m=e[1])||void 0===m?void 0:m.success)?e[1].data:[],filterData:(null===(f=e[1])||void 0===f?void 0:f.success)?e[1].data:[],permissions:t,notAuth:null===e||void 0===e||null===(p=e[1])||void 0===p?void 0:p.authError})})).catch((function(e){console.log(e)}))},n.getLeadSkills=function(e){var t=n.state.crud;Ro(t).then((function(e){e.success&&n.setState({data:e.success?e.data:[],filterData:e.success?e.data:[],editRex:!1,infoModal:!1})}))},n.openModal=function(e){var t=n.state.mileDesc,a=t.startDate,l=t.endDate;n.setState({editRex:e,pDates:{startDate:a,endDate:l},infoModal:!0})},n.closeModal=function(){n.setState({infoModal:!1,editRex:!1})},n.handleDelete=function(e,t){var a=n.state,l=a.crud,r=a.data,o=a.filterData,i=n.props.history;zn(i,l,e,t,o,r).then((function(a){console.log(e,t),a.success&&n.setState({data:Object(et.a)(a.data),filterData:Object(et.a)(a.filterData)})}))},n.callBack=function(){var e=n.state.proId;n.getLeadSkills(e)},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){var a,n,l=t.opportunityResourceAllocations&&(null===(a=t.opportunityResourceAllocations[0])||void 0===a?void 0:a.contactPerson),r=l.firstName,o=l.lastName,i=t.opportunityResourceAllocations&&t.opportunityResourceAllocations[0],s=i.buyingRate,c=i.sellingRate,u=t.panelSkill.label,d=t.panelSkillStandardLevel.levelLabel;return t.title&&t.title.toLowerCase().includes(e.toLowerCase())||"".concat(null!==r&&void 0!==r?r:""," ").concat(null!==o&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==u&&void 0!==u?u:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==d&&void 0!==d?d:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(n=t.billableHours)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())||s&&ce(s).toLowerCase().includes(e.toLowerCase())||c&&ce(c).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;if(t?o[t].value=e:o=a,o.skill.value||o.billableHours.value||o.startDate.value||o.endDate.value||o.buyingRate.value||o.sellingRate.value||o.effortRate.value){var i,s,c=null!==(i=o.startDate.value)&&void 0!==i?i:[null,null],u=null!==(s=o.endDate.value)&&void 0!==s?s:[null,null];n.setState({filterData:r.filter((function(e){var t,a,n,l,r,i,s,d,m=e.opportunityResourceAllocations&&e.opportunityResourceAllocations[0],f=m.buyingRate,p=m.sellingRate,h=m.effortRate;return"".concat(null!==(t=e.billableHours.toString())&&void 0!==t?t:"").toLowerCase().includes(o.billableHours.value.toString().toLowerCase())&&(null!==(a=ce(f))&&void 0!==a?a:"").toLowerCase().includes(o.buyingRate.value.toString().toLowerCase())&&(null!==(n=ce(p))&&void 0!==n?n:"").toLowerCase().includes(o.sellingRate.value.toString().toLowerCase())&&(null!==(l=ce(h))&&void 0!==l?l:"").toLowerCase().includes(o.effortRate.value.toString().toLowerCase())&&(o.skill.value.length>0?o.skill.value:[{value:","}]).some((function(t){return(o.skill.value.length>0?[e.panelSkillId]:[","]).includes(t.value)}))&&K()(o.startDate.value?K()(e.startDate).format("YYYY-MM-DD"):"2010-10-20").isBetween(null!==(r=c[0])&&void 0!==r?r:"2010-10-19",null!==(i=c[1])&&void 0!==i?i:"2010-10-25",void 0,"[]")&&K()(o.endDate.value?K()(e.endDate).format("YYYY-MM-DD"):"2010-10-20").isBetween(null!==(s=u[0])&&void 0!==s?s:"2010-10-19",null!==(d=u[1])&&void 0!==d?d:"2010-10-25",void 0,"[]")})),searchedColumn:o,openSearch:!1})}else n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){var e=n.state.proDesc;Promise.all([Vt(e.panelId)]).then((function(e){var t=n.state.filterFields;t[2].data=e[0].success?e[0].data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.columns=[Object(tt.a)({title:"Title",dataIndex:"title",key:"title"},Ea("title","string")),Object(tt.a)({title:"Panel Skill",dataIndex:["panelSkill","label"],key:"panelSkill"},Ea("panelSkill.label","string")),Object(tt.a)({title:"Panel Level",dataIndex:["panelSkillStandardLevel","levelLabel"],key:"panelSkillStandardLevel"},Ea("panelSkillStandardLevel.levelLabel","string")),Object(tt.a)({title:"Employee Name",dataIndex:["opportunityResourceAllocations","0","contactPerson"],key:"contactPerson",render:function(e){var t,a;return"".concat(null!==(t=null===e||void 0===e?void 0:e.firstName)&&void 0!==t?t:""," ").concat(null!==(a=null===e||void 0===e?void 0:e.lastName)&&void 0!==a?a:"")}},Ea("opportunityResourceAllocations.0.contactPerson","string")),Object(tt.a)({title:"Billable Hours",dataIndex:"billableHours",key:"billableHours",render:function(e){return ue(e)}},Ea("billableHours","number")),Object(tt.a)({title:"Buy Rate (Hourly)",dataIndex:["opportunityResourceAllocations","0","buyingRate"],key:"opportunityResourceAllocations",render:function(e){return e&&ce(e)}},Ea("opportunityResourceAllocations.0.buyingRate","number")),Object(tt.a)({title:"Sell Rate (Hourly)",dataIndex:["opportunityResourceAllocations","0","sellingRate"],key:"opportunityResourceAllocations",render:function(e){return e&&ce(e)}},Ea("opportunityResourceAllocations.0.sellingRate","number")),Object(tt.a)({title:"CM $",dataIndex:["opportunityResourceAllocations","0","cm$"],key:"opportunityResourceAllocations$",render:function(e){return e&&ce(e)}},Ea("opportunityResourceAllocations.0.cm$","number")),Object(tt.a)({title:"CM %",dataIndex:["opportunityResourceAllocations","0","cmPercent"],key:"opportunityResourceAllocationsPercent",render:function(e){return"".concat(ue(e)," %")}},Ea("opportunityResourceAllocations.0.cmPercent","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,s,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",onClick:function(){return n.openModal(t.id)},disabled:!(null===(s=Object(on.a)(n))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE)},"Edit Resource"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={infoModal:!1,editRex:!1,proId:!1,mileId:!1,crud:!1,proDesc:{},mileDesc:{},permissions:{},openSearch:!1,filterData:[],searchedColumn:{skill:{type:"Select",multi:!0,value:[],label:"Skill",showInColumn:!0},level:{type:"Select",multi:!0,value:[],label:"Level",showInColumn:!0},name:{type:"Input",value:"",label:"Name",showInColumn:!0},billableHours:{type:"Input",value:"",label:"Billable Hour"},buyingRate:{type:"Input",value:"",label:"Buy Rate"},sellingRate:{type:"Input",value:"",label:"Sell Rate"},effortRate:{type:"Input",value:"",label:"Effort Rate"},startDate:{type:"Date",value:null,label:"Start Date",showInColumn:!0},endDate:{type:"Date",value:null,label:"End Date",showInColumn:!0,disabled:!0}},filterFields:[{Placeholder:"Skill",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Total Billable Hours",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,mode:"multiple",key:"skill",customValue:function(e,t){return t},size:"small",data:[],type:"Select"},{object:"obj",fieldCol:12,key:"billableHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"End Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"startDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"endDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Effort Rate",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Buy Rate (Hourly)",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"effortRate",shape:"%",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rangeMax:100},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Sell Rate (Hourly)",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}}],notAuth:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.proDesc,o=(n.data,n.infoModal),i=n.editRex,c=n.proId,u=n.permissions,d=n.crud,m=n.mileId,f=n.filterData,y=n.openSearch,v=n.searchedColumn,g=n.filterFields,b=n.pDates,E=n.notAuth,k=n.mileDesc;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Project Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Ti,{label:"Project Name",contentStyle:{width:"25%"}},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(r.id,"/info")},className:"nav-link"},r.title)),l.a.createElement(Ti,{label:"Estimated Value"},ce(null!==(e=r.value)&&void 0!==e?e:0)),l.a.createElement(Ti,{label:"Organisation",contentStyle:{width:"25%"}},r.organization?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(r.organizationId,"/info")},className:"nav-link"},r.organization.name):"No Organisation"),l.a.createElement(Ti,{label:"Start Date"},me(r.startDate,!0,!0)," "),l.a.createElement(Ti,{label:"End Date"},me(r.endDate,!0,!0))),1===r.type&&l.a.createElement(Bn.b,{style:{marginTop:15},title:"Milestone Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Ti,{label:"Milestone Name"},k.title),l.a.createElement(Ti,{label:"Start Date"},me(k.startDate,!0,!0)," "),l.a.createElement(Ti,{label:"End Date"},me(k.endDate,!0,!0)),l.a.createElement(Ti,{label:"Progress"},k.progress," %"),l.a.createElement(Ti,{label:"Approved"},l.a.createElement(jl,{text:null!==(t=k.isApproved)&&void 0!==t?t:"CM"}))),l.a.createElement(p.a,{justify:"end",span:4,gutter:[30,0]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return a.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){return a.openModal(!1)},disabled:!u.ADD||!1===r.phase},l.a.createElement(na.a,null)," Add Resource"))),l.a.createElement(Ca,{filters:v,filterFunction:this.advancefilter}),l.a.createElement(ea.a,{title:function(){return ka(5,a.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:f,size:"small",className:"fs-small"}),y&&l.a.createElement(Sa,{title:"Filter Resources",visible:y,filters:v,filterFields:g,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return a.setState({openSearch:!1})}}),o&&l.a.createElement(Oi,{visible:o,editRex:i,hours:null===r||void 0===r?void 0:r.hoursPerDay,proId:c,pDates:b,crud:d,cmRate:r.cmPercentage,mileId:m,panelId:r.panelId,onHold:!1===r.phase,close:this.closeModal,callBack:this.callBack}),E&&l.a.createElement(ul,this.props))}}]),a}(n.Component),Ri=(a(548),Ye.a.Text),Ai=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e;n.props.editMile&&n.getSubmittedData(),(e=1,it.a.get("".concat(J,"/calendar-holidays")+"?calendarId=".concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&(l=l.map((function(e){return e.date})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization)),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(e){e.success&&n.setState({holidays:e.data})}))},n.setHours=function(e,t,a){var l=n.state,r=l.data,o=l.amountEntry;r[a].amount=t,o[e.key]=t,n.setState({data:Object(et.a)(r),amountEntry:Object(tt.a)({},o)})},n.getWeekdays=function(e,t){var a=n.state.holidays;return K()().isoWeekdayCalc({rangeStart:e,rangeEnd:t,weekdays:[1,2,3,4,5],exclusions:a})},n.getDateArray=function(e,t,a){var l,r=n.state,o=r.BasicFields,i=r.data,s=r.amountEntry,c=r.accountedAmount;n.props.pDates;o[3].disabled=!1;var u=n.formRef.current.getFieldValue().dates,d=(null!==(l=null===u||void 0===u?void 0:u.amount)&&void 0!==l?l:0)<c?null===u||void 0===u?void 0:u.amount:c;if(a){var m=new Array;i=a.map((function(e){var t=K()(e.startDate).format("MMM-YYYY");return s[t]=parseFloat(e.amount),{key:t,month:t,amount:s[t]}}))}else if(e&&t){m=new Array;for(var f,p=d,h=(null!==(f=p)&&void 0!==f?f:0)/n.getWeekdays(e,t);e.isSameOrBefore(t);){var y=e.format("MMM-YYYY"),v=n.getWeekdays(e,e.isSame(t,"month")?t:K()(e).endOf("month")),g=parseFloat((h*v).toFixed(2));p-=g,s[y]=parseFloat((g+(p<=1?p:0)).toFixed(2)),m.push({key:y,month:y,amount:s[y]}),e=K()(e).set("date",1).add(1,"M")}i=Object(et.a)(m)}else if(e){var b=e.format("MMM-YYYY");s[b]=d,i=[{key:b,month:b,amount:s[b]}]}else n.formRef.current.setFieldsValue({dates:{startDate:null,endDate:null}}),o[3].disabled=!0,s={},i=[];n.setState({BasicFields:Object(et.a)(o),data:Object(et.a)(i),amountEntry:Object(tt.a)({},s)}),n.formRef.current.setFieldsValue({amount:s,dates:Object(tt.a)(Object(tt.a)({},u),{},{amount:d})})},n.getSubmittedData=function(){var e=n.props;(function(e,t){return it.a.get(To+"/".concat(e,"/schedules/").concat(t),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(e.proId,e.editMile.id).then((function(e){if(null===e||void 0===e?void 0:e.success){var t=e.data,a=t.id,l=t.notes,r=t.amount,o=t.startDate,i=t.endDate,s=t.segments,c=void 0===s?[]:s,u=t.paymentDate,d={id:a,notes:l,amount:r,startDate:me(o),endDate:me(i),paymentDate:u?me(u):null};n.formRef.current.setFieldsValue({dates:d}),n.getDateArray(d.startDate,d.endDate,c)}})).catch((function(e){console.log(e)}))},n.getFormValues=function(e){var t;n.setState({loading:!0});var a=e.dates,l=n.props,r=l.editMile,o=l.callBack,i=l.proId,s=(l.pDates,n.state),c=s.data,u=(s.fileIds,{startDate:me(a.startDate,!0),endDate:me(a.endDate,!0),paymentDate:me(a.paymentDate,!0),amount:a.amount,notes:null!==(t=a.notes)&&void 0!==t?t:"",segments:c.map((function(e){return{startDate:me(K()(e.month,"MMM/YYYY").startOf("month"),!0),endDate:me(K()(e.month,"MMM/YYYY").endOf("month"),!0),amount:e.amount}}))});r?function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put(To+"/".concat(e,"/schedules/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(e){return ge(e,t,5)}))}(i,r.id,u).then((function(e){n.setState({loading:!1}),e.success&&o(e.data)})):function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.post(To+"/".concat(e,"/schedules"),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(t){return ge(t,e,5)}))}(i,u).then((function(e){n.setState({loading:!1}),e.success&&o(e.data)}))},n.getTableSummary=function(){var e,t,a,r,o=n.state.data,i=0,s="",c=(null!==(e=null===(t=n.formRef)||void 0===t||null===(a=t.current)||void 0===a?void 0:a.getFieldValue())&&void 0!==e?e:{}).dates,u=void 0===c?{}:c;return o.forEach((function(e){var t=e.amount;i+=parseFloat(null!==t&&void 0!==t?t:0)})),parseFloat(se(null!==(r=u.amount)&&void 0!==r?r:0,2))!=parseFloat(se(i,2))&&(s="danger"),l.a.createElement(ea.a.Summary,{fixed:"top"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0},"Total"),l.a.createElement(ea.a.Summary.Cell,{index:1},l.a.createElement(Ri,{type:s},ce(i)))))},n.formRef=l.a.createRef(),n.state={data:[],amountEntry:{},loading:!1,disabled:!1,holidays:[],accountedAmount:e.accountedAmount(),BasicFields:[{Placeholder:"Start Date",rangeMin:!0,fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"startDate",size:"small",mode:"month",type:"DatePicker",rules:[{required:!0,message:"Start Date is Required"}],onChange:function(t){var a=n.formRef.current.getFieldsValue().dates,l=Fi(a,e.pDates),r=l.startDate,o=l.endDate;n.formRef.current.setFieldsValue({dates:Object(tt.a)(Object(tt.a)({},a),{},{endDate:o,startDate:r})}),n.getDateArray(r,o)},rangeMin:function(t){var a=n.formRef.current.getFieldsValue().dates.endDate;return be(t,a,"start",e.pDates)}},{Placeholder:"End Date",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"endDate",size:"small",mode:"month",type:"DatePicker",disabled:!0,onChange:function(t){var a=n.formRef.current.getFieldValue().dates,l=Fi(a,e.pDates),r=l.endDate,o=l.startDate;t&&n.formRef.current.setFieldsValue({dates:Object(tt.a)(Object(tt.a)({},a),{},{endDate:r})}),n.getDateArray(o,r)},rangeMax:function(t){var a=n.formRef.current.getFieldValue().dates.startDate;return be(t,K()(a),"end",e.pDates)}},{Placeholder:"Payment Date",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"paymentDate",size:"small",mode:"month",type:"DatePicker"},{Placeholder:"Amount",rangeMin:!0,fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"amount",size:"small",type:"InputNumber",rangeMin:0,shape:"$",rules:[{required:!0,message:"Amount is Required"}],disabled:!1,onBlur:function(){var e=n.formRef.current.getFieldValue().dates,t=void 0===e?{}:e,a=t.endDate,l=t.startDate;n.getDateArray(l,a)}},{Placeholder:"Description",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:24,key:"notes",size:"small",type:"Textarea",mode:{minRows:2,maxRows:3},fieldStyle:{height:"10vh"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.close,r=t.editMile,o=t.onHold,i=this.state,s=i.BasicFields,c=i.data,u=i.loading,d=i.disabled,m=[{title:"Month",dataIndex:"month",key:"month",render:function(e,t){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null," ",e," "))}},{title:"Amount",dataIndex:"amount",key:"amount",render:function(t,a,n){return l.a.createElement(nt.a.Item,{noStyle:!0,name:["amount",a.key]},l.a.createElement(yt.a,{min:0,placeholder:"amount",formatter:function(e){return Tt(e,"$")},parser:function(e){return Nt(e,"$")},style:{width:"100%"},size:"small",disabled:a.disabled,onChange:function(t){e.setHours(a,t,n)}}))}}];return l.a.createElement(ta.a,{title:r?"Edit Schedule":"New Schedule",maskClosable:!0,destroyOnClose:!0,visible:a,okButtonProps:{htmlType:"submit",form:"my-form",disabled:o||d,loading:u},okText:"Submit",onCancel:function(){$.b.destroy(),n()},width:1e3},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,size:"small",layout:"inline",onFinish:this.getFormValues},l.a.createElement(p.a,{className:"moz-width"},l.a.createElement(h.a,{span:12},l.a.createElement(p.a,null,l.a.createElement(Rt,{FormFields:s}))),l.a.createElement(h.a,{span:12},l.a.createElement(ea.a,{sticky:!0,style:{maxHeight:"40vh",overflowY:"scroll",position:"relative"},pagination:!1,rowKey:function(e){return e.key},columns:m,dataSource:c,size:"small",summary:function(t){return e.getTableSummary(t)}})))))}}]),a}(n.Component),Fi=function(e,t){var a,n,l;return{startDate:e.startDate?K.a.parseZone(e.startDate.isSame(t.startDate,"month")?t.startDate:null===(a=e.startDate)||void 0===a?void 0:a.startOf("month")):null,endDate:e.startDate?e.endDate?K.a.parseZone(e.endDate.isSame(t.endDate,"month")?t.endDate:null===(n=e.endDate)||void 0===n?void 0:n.endOf("month")):e.startDate?K.a.parseZone(e.startDate.isSame(t.endDate,"month")?t.endDate:null===(l=e.startDate)||void 0===l?void 0:l.endOf("month")):null:null}},zi=Bn.b.Item,Li=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.fetchAll(e)},n.fetchAll=function(e){var t=n.props.match.params.proId,a=JSON.parse(pe().permissions),l=a.PROJECTS,r=(a.OPPORTUNITIES,n.props.match.url);r=r.split("/"),r="".concat(r[1],"/").concat(r[2]),Promise.all([Ii(r),Lo(t)]).then((function(t){var a=n.state.columns;n.setState({desc:t[0].success&&t[0].data,data:t[1].success&&t[1].data,columns:Object(et.a)(a),proId:e,permissions:l})})).catch((function(e){console.log(e)}))},n.openModal=function(e){var t=n.state.desc,a=t.startDate,l=t.endDate;n.setState({pDates:{startDate:a,endDate:l},editMile:e,infoModal:!0})},n.closeModal=function(){n.setState({infoModal:!1,editMile:!1})},n.handleDelete=function(e,t){var a=n.state,l=a.data,r=a.proId,o=n.props.history,i="/projects/".concat(r,"/schedules");zn(o,i,e,t,l,!1).then((function(e){e.success&&n.setState({data:Object(et.a)(e.filterData)})}))},n.callBack=function(e){var t=n.state,a=t.editMile,l=t.data;a?l[a.rowIndex]=e:l.push(e),console.log(l),n.setState({data:Object(et.a)(l),infoModal:!1,editMile:!1})},n.state={infoModal:!1,editMile:!1,pDates:{},proId:!1,desc:{title:"",organization:{name:""},value:"",startDate:"",endDate:""},permissions:{},columns:[Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Payment Date",dataIndex:"paymentDate",key:"paymentDate",render:function(e){return me(e,!0,!0)}},Ea("paymentDate","date")),{title:"Amount",dataIndex:"amount",key:"amount",align:"center",render:function(e){return e}},{title:"Notes",dataIndex:"notes",key:"notes",align:"right",render:function(e){return l.a.createElement(Te.a,{placement:"top",title:e,destroyTooltipOnHide:!0},"".concat(e.substr(0,20)).concat(e.length>30?"\u2026":""))}},{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){n.openModal(Object(tt.a)(Object(tt.a)({},t),{},{rowIndex:a}))},disabled:n.state&&!n.state.permissions.UPDATE},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,r=t.infoModal,o=t.editMile,i=t.proId,c=t.permissions,u=t.columns,d=t.pDates;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Project Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(zi,{label:"Title"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(a.id,"/info")},className:"nav-link"},a.title)),l.a.createElement(zi,{label:"Value"},ce(a.value)),l.a.createElement(zi,{label:"Start Date"},me(a.startDate,!0,!0)),l.a.createElement(zi,{label:"End Date"},me(a.endDate,!0,!0)),l.a.createElement(zi,{label:"Status"},l.a.createElement(jl,{text:"".concat(null===a||void 0===a?void 0:a.phase),objName:"O_PHASE",colorName:"O_PHASE_COLORS"}))),l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){return e.openModal(!1)},disabled:!c.ADD||!1===(null===a||void 0===a?void 0:a.phase)},"Add Schedule"))),l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:u,dataSource:n,size:"small",className:"fs-small"}),r&&l.a.createElement(Ai,{visible:r,editMile:o,accountedAmount:function(){var e=parseFloat(a.value);return n.forEach((function(t){(null===o||void 0===o?void 0:o.id)!==t.id&&(e-=parseFloat(t.amount))})),e},onHold:!1===(null===a||void 0===a?void 0:a.phase),pDates:d,proId:i,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),Mi=(In.a.TabPane,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){var t=e.props,a=t.editRex,n=t.panelId;console.log({editRex:a},{panelId:n}),e.openModal()},e.openModal=function(){var t=e.props,a=t.editRex,n=t.panelId;Vt(n).then((function(t){var n=e.state.ResourceFields;n.fields[2].data=t.success?t.data:[],e.setState({ResourceFields:n},(function(){a&&e.getRecord(t.data)}))}))},e.submit=function(){e.resourceRef.current&&e.resourceRef.current.refs.resource_form.submit()},e.ResourceCall=function(t){var a=e.props.editRex,n=t.obj;n=Object(tt.a)(Object(tt.a)({},n),{},{s_date:me(n.s_date,!0),e_date:me(n.e_date,!0)}),a?e.editRecord(n):e.addRecord(n)},e.addRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.proId,l=a.callBack;console.log(n),fo(n,t).then((function(e){e.success&&l()}))},e.getRecord=function(t){var a=e.props,n=a.proId;a.editRex;po(n).then((function(a){if(console.log(a.data),a.success){var n=t.findIndex((function(e){return e.value===a.data.panelSkillId}));Mt().then((function(l){var r=e.state.ResourceFields;r.fields[3].data=t[n]?t[n].levels:[],r.fields[6].data=l.success?l.data:[],e.resourceRef.current.refs.resource_form.setFieldsValue({obj:a.data}),e.setState({ResourceFields:r})}))}}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=a.proId,r=a.callBack;t.id=n,ho(n,l,t).then((function(e){e.success&&r()}))},e.resourceRef=l.a.createRef(),e.state={editRex:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],ResourceFields:{formId:"resource_form",FormCol:24,FieldSpace:24,justifyField:"center",FormLayout:"inline",size:"middle",fields:[{Placeholder:"Bill Hours",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Buy Rate (Hourly)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"billableHours",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"buyingRate",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Sell Rate (Hourly)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Start Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"sellingRate",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"s_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"End Date",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"e_date",size:"small",type:"DatePicker",fieldStyle:{width:"100%"}}]}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.editRex,n=t.visible,r=t.close,o=this.state,i=o.ResourceFields,s=o.loading;return l.a.createElement(ta.a,{title:a?"Edit opportunity":"Add Resource",maskClosable:!1,centered:!0,visible:n,onOk:function(){e.submit()},okButtonProps:{disabled:s},okText:s?l.a.createElement(la.a,null):"Save",onCancel:r,width:900},l.a.createElement(pa,{ref:this.resourceRef,Callback:this.ResourceCall,FormFields:i}))}}]),a}(n.Component)),Bi=Bn.b.Item,_i=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params,t=e.proId,a=e.id;n.fetchAll(t,a)},n.fetchAll=function(e,t){Promise.all([mo(t),po(t)]).then((function(a){n.setState({desc:a[0].success?a[0].data:{},editRex:!1,ProId:e,resId:t,data:a[1].success?a[1].data:[]})})).catch((function(e){console.log(e)}))},n.getLeadSkills=function(e){po(e).then((function(e){e.success&&n.setState({desc:e.data,editRex:!1})}))},n.closeModal=function(){n.setState({infoModal:!1,editRex:!1})},n.handleDelete=function(e){var t,a,l=n.props.match.params.id;(t=l,a=e,console.log(t,a),it.a.delete(uo+"/".concat(t,"/resources/").concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success}))},n.callBack=function(){var e=n.state.ProId;n.getLeadSkills(e)},console.log(n.props),n.columns=[{title:"Billable Hours",dataIndex:"billableHours",key:"billableHours"},{title:"Buy Rate",dataIndex:"buyingRate",key:"buyingRate"},{title:"Sell Rate",dataIndex:"sellingRate",key:"sellingRate"},{title:"Start Date",dataIndex:"startDate",key:"startDate"},{title:"End Date",dataIndex:"endDate",key:"endDate"},{title:"...",key:"action",align:"center",width:"1%",render:function(e){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(e.id)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){console.log(e.id),n.setState({infoModal:!0,editRex:e.id})}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={infoModal:!1,editRex:!1,ProId:!1,data:[{billableHours:6,buyingRate:20,sellingRate:21,startDate:"Mon Nov 20 2020",endDate:"Fri Dec 20 2020"},{billableHours:6,buyingRate:20,sellingRate:22,startDate:"Mon Dec 22 2020",endDate:"Mon Jan 20 2021"},{billableHours:6,buyingRate:21,sellingRate:25,startDate:"Tue Jan 21 2021",endDate:"Tue Fri 10 2021"}],desc:{}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,r=t.infoModal,o=t.editRex,i=t.ProId;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Bi,{label:"First Name"},"Talha"),l.a.createElement(Bi,{label:"Last Name"},"Ahmed"),l.a.createElement(Bi,{label:"Skill"},"Andriod Developer"),l.a.createElement(Bi,{label:"Level"},"Senior")),l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null," ",l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.setState({infoModal:!0,editRex:!1})}},"Add New")," ")),l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:n,size:"small",className:"fs-small"}),r&&l.a.createElement(Mi,{visible:r,editRex:o,ProId:i,panelId:a.panelId,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component);function Yi(){Yi=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}In.a.TabPane;var Vi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getRecord()},e.OrderCall=function(t){var a=e.props.editRex,n=t.obj;n=Object(tt.a)(Object(tt.a)({},n),{},{fileId:e.state.fileIds,issueDate:me(n.issueDate,!0),expiryDate:me(n.expiryDate,!0)}),a?e.editRecord(n):e.addRecord(n)},e.addRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.ProId,l=a.callBack;console.log(n,t),function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.post(To+"/".concat(e,"/purchaseOrders"),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(t){return ge(t,e,5)}))}(n,t).then((function(e){e.success&&l(e.data)}))},e.getRecord=function(){var t,a,n=e.props,l=n.ProId,r=n.editRex;r&&(t=l,a=r,it.a.get(To+"/".concat(t,"/purchaseOrders/").concat(a),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(l=Object(tt.a)(Object(tt.a)({},l),{},{issueDate:me(l.issueDate),expiryDate:me(l.expiryDate),file:l.fileId?[{id:l.file.id,createdAt:l.file.createdAt,fileId:l.file.id,uid:l.file.uniqueName,name:l.file.originalName,type:l.file.type,url:"".concat(J,"/files/").concat(l.file.uniqueName),thumbUrl:ve(l.file.type)}]:[]}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))).then((function(t){var a=t.success,n=t.data;a&&(e.formRef.current.setFieldsValue({obj:n}),e.setState({fileIds:a?n.fileId:null,fileList:a?n.file:[]}))}))},e.editRecord=function(t){e.setState({loading:!0});var a=e.props,n=a.editRex,l=a.ProId,r=a.callBack;t.id=n,function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put(To+"/".concat(e,"/purchaseOrders/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(e){return ge(e,t,5)}))}(l,n,t).then((function(e){e.success&&r(e.data)}))},e.handleUpload=function(){var t=Object(dn.a)(Yi().mark((function t(a){var n,l,r,o,i;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.onSuccess,l=a.onError,r=a.file,o=a.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(t){var a=Math.floor(t.loaded/t.total*100);e.setState({progress:a}),100===a&&setTimeout((function(){return e.setState({progres:0})}),1e3),o({percent:t.loaded/t.total*100})}},i.append("files",r),Wn(i).then((function(t,a){if(t.success)n("Ok"),e.setState({fileList:[t.file],fileIds:t.file.fileId});else{console.log("Eroor: ",a);new Error("Some error");l({err:a})}}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.setState({fileIds:null,fileList:[]})},e.formRef=l.a.createRef(),e.state={editRex:!1,orderSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],fileList:[],fileIds:null,OrderFields:[{Placeholder:"Order Number",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Issue Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"orderNo",size:"small",rules:[{required:!0,message:"Order Number is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"issueDate",size:"small",rules:[{required:!0,message:"Issue Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"Expiry Date",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Value",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"expiryDate",size:"small",rules:[{required:!0,message:"Expiry Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"value",size:"small",rules:[{required:!0,message:"Value is Required"}],shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Expense",fieldCol:24,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"expense",size:"small",rules:[{required:!0,message:"Expense is Required"}],shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea",itemStyle:{marginBottom:1}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"comment",size:"small",type:"Textarea",itemStyle:{marginBottom:1}}]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,r=e.onHold,o=this.state,i=o.OrderFields,s=o.loading,c=o.fileList;return l.a.createElement(ta.a,{title:t?"Edit Purchase Order":"Add Purchase Order",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:s||r,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.OrderCall,scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:i})),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:1,fileList:c,onRemove:this.onRemove},c.length<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload"))))}}]),a}(n.Component),qi=(Ye.a.Title,Bn.b.Item),Hi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.fetchAll(e)},n.fetchAll=function(e){var t=JSON.parse(pe().permissions).PROJECTS;Promise.all([No(e),Fo(e)]).then((function(a){n.setState({desc:a[0].success?a[0].data:{},editRex:!1,ProId:e,openModal:!1,data:a[1].success?a[1].data:[],filterData:a[1].success?a[1].data:[],permissions:t})})).catch((function(e){console.log(e)}))},n.getRecords=function(e){Fo(e).then((function(e){e.success&&n.setState({data:e.success?e.data:[],filterData:e.success?e.data:[],editRex:!1,openModal:!1})}))},n.openModal=function(e,t,a){n.setState({openModal:e,editRex:t,tableIndex:a})},n.closeModal=function(){n.setState({openModal:!1,editRex:!1,tableIndex:!1})},n.handleDelete=function(e,t){var a=n.state,l=a.ProId,r=a.data,o=a.filterData,i=n.props.history,s="/projects/".concat(l,"/purchaseOrders");console.log(e,t),zn(i,s,e,t,o,r).then((function(e){e.success&&n.setState({data:Object(et.a)(e.data),filterData:Object(et.a)(e.filterData)})}))},n.callBack=function(e){var t=n.state,a=t.tableIndex,l=t.data;!1!==a?l[a]=e:l.push(e),n.setState({data:l,filterData:Object(et.a)(l),openModal:!1,editRex:!1,tableIndex:!1})},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){return"00".concat(t.id.toString()).includes(e)||t.value&&ce(t.value).toLowerCase().includes(e.toLowerCase())||t.expense&&ce(t.expense).toLowerCase().includes(e.toLowerCase())||t.issueDate&&"".concat(me(t.issueDate,!0,!0)).toLowerCase().includes(e.toLowerCase())||t.expiryDate&&"".concat(me(t.expiryDate,!0,!0)).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;if(t?o[t].value=e:o=a,o.issueDate.value||o.expiryDate.value||o.value1.value||o.value2.value||o.expense1.value||o.expense2.value||o.comment.value||o.description.value){var i,s,c=null!==(i=o.issueDate.value)&&void 0!==i?i:["2010-10-19","2010-10-25"],u=null!==(s=o.expiryDate.value)&&void 0!==s?s:["2010-10-19","2010-10-25"];n.setState({filterData:r.filter((function(e){var t,a;return K()(o.issueDate.value?me(e.issueDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(c[0],c[1],void 0,"[]")&&K()(o.expiryDate.value?me(e.expiryDate,!0,"YYYY-MM-DD"):"2010-10-20").isBetween(u[0],u[1],void 0,"[]")&&"".concat(null!==(t=e.comment)&&void 0!==t?t:"").toLowerCase().includes(o.comment.value.toLowerCase())&&"".concat(null!==(a=e.description)&&void 0!==a?a:"").toLowerCase().includes(o.description.value.toLowerCase())})),searchedColumn:o,openSearch:!1})}else n.setState({searchedColumn:o,filterData:r,openSearch:!1})};e.match.params.proId;return n.columns=[Object(tt.a)({title:"Order Number",dataIndex:"orderNo",key:"orderNo"},Ea("orderNo","string",!0)),Object(tt.a)({title:"Issue Date",dataIndex:"issueDate",key:"issueDate",render:function(e){return me(e,!0,!0)}},Ea("issueDate","date")),Object(tt.a)({title:"Expiry Date",dataIndex:"expiryDate",key:"expiryDate",render:function(e){return me(e,!0,!0)}},Ea("expiryDate","date")),Object(tt.a)({title:"Value",dataIndex:"value",key:"value",render:function(e){return"".concat(ce(e))}},Ea("value","number")),Object(tt.a)({title:"Expense",dataIndex:"expense",key:"expense",render:function(e){return"".concat(ce(e))}},Ea("expense","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,s,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){n.openModal(!0,t.id,a)},disabled:!(null===(s=Object(on.a)(n))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE)},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={openModal:!1,editRex:!1,ProId:!1,tableIndex:!1,openSearch:!1,desc:{title:"Service",organization:{name:"PSO"},value:"1000.00",startDate:"12 10 2020",endDate:"12 4 2021"},searchedColumn:{id:{type:"Input",value:"",label:"Code",showInColumn:!0},value1:{type:"Input",value:null,label:"Value <",showInColumn:!0},value2:{type:"Input",value:"",label:"Value >",showInColumn:!0},expense1:{type:"Input",value:"",label:"Expense <",showInColumn:!0},expense2:{type:"Input",value:"",label:"Expense >",showInColumn:!0},issueDate:{type:"Date",value:null,label:"Issue Date",showInColumn:!0},expiryDate:{type:"Date",value:null,label:"Expiry Date",showInColumn:!0,disabled:!0},description:{type:"Input",value:"",label:"Expiry Date",showInColumn:!0,disabled:!0},comment:{type:"Input",value:"",label:"Expiry Date",showInColumn:!0,disabled:!0}},filterFields:[{Placeholder:"Issue Date",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Expiry Date",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"issueDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"expiryDate",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Value",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Expense",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:5,key:"value1",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"<",fieldCol:1,size:"small",type:"Text",fieldStyle:{textAlign:"center"}},{object:"obj",fieldCol:5,key:"value2",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:".",fieldCol:1,size:"small",type:"Text",fieldStyle:{textAlign:"center"}},{object:"obj",fieldCol:5,key:"expense1",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"<",fieldCol:1,size:"small",type:"Text"},{object:"obj",fieldCol:5,key:"expense2",size:"small",shape:"$",type:"InputNumber",fieldStyle:{width:"100%"}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea"},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"comment",size:"small",type:"Textarea"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.filterData,r=t.openModal,o=t.editRex,i=t.ProId,c=t.permissions,u=t.searchedColumn,d=t.openSearch,m=t.filterFields;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Purchase Orders",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(qi,{label:"Project Name",style:{width:250}},a.title),l.a.createElement(qi,{label:"Estimated Value"},"".concat(ce(a.value))),l.a.createElement(qi,{label:"Organisation"},a.organization?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(a.organizationId,"/info")},className:"nav-link"},a.organization.name):"No Organisation"),l.a.createElement(qi,{label:"Delegate Contact"}," ",a.ContactName),l.a.createElement(qi,{label:"Start Date"},me(a.startDate,!0,!0)," "),l.a.createElement(qi,{label:"End Date"},me(a.endDate,!0,!0)),l.a.createElement(qi,{label:"Bid Date"},me(a.bidDate,!0,!0)),l.a.createElement(qi,{label:"Status"},a.status?Z[a.status]:"")),l.a.createElement(p.a,{justify:"end",gutter:"20"},l.a.createElement(h.a,null," ",l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){e.openModal(!0,!1,!1)},disabled:c&&!c.ADD||!1===a.phase}," ",l.a.createElement(na.a,null)," Add Purchase Order")," ")),l.a.createElement(Ca,{filters:u,filterFunction:this.advancefilter}),l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:n,size:"small",className:"fs-small"}),r&&l.a.createElement(Vi,{onHold:!1===a.phase,visible:r,editRex:o,ProId:i,close:this.closeModal,callBack:this.callBack}),d&&l.a.createElement(Sa,{title:"Purchase Order - filter",visible:d,filters:u,filterFields:m,filterFunction:this.advancefilter,onClose:function(){return e.setState({openSearch:!1})}}))}}]),a}(n.Component),Ui=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.openModal()},n.checkRates=function(e,t){e?t.label.includes("Employee")?n.getRates("employees",e):t.label.includes("Sub Contractor")?n.getRates("sub-contractors",e):n.setRates("No Active Contract","No Active Contract"):n.setRates(void 0,void 0)},n.setRates=function(e,t){var a=n.state.ExpenseFields;a[16].suggestion=e,a[17].suggestion=t,n.setState({ExpenseFields:Object(et.a)(a)})},n.openModal=function(){var e=n.props.editRex;kn().then((function(t){var a=n.state.ExpenseFields;a[1].data=t.success?t.data:[],n.setState({ExpenseFields:a},(function(){e&&n.getRecord(t.data)}))}))},n.onFinish=function(e){n.setState({loading:!0});var t=n.props.editRex,a=e.obj;t?n.editRecord(a):n.addRecord(a)},n.addRecord=function(e){var t=n.props,a=t.proId,l=t.callBack;(function(e,t,a){return $.b.loading({content:"Loading...",key:a}),it.a.post("".concat(J).concat(e),t,{headers:ye()}).then((function(e){var t,n=e.data,l=n.success,r=n.message;return he(r),$.b.success({content:r,key:a}),l&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:l}})).catch((function(e){return ge(e,a,5)}))})(t.crud,e,a).then((function(e){e.success?l():n.setState({loading:!1})}))},n.getRecord=function(e){var t=n.props;(function(e,t){return it.a.get("".concat(J).concat(e,"/").concat(t),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n?(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}):{success:n}})).catch((function(e){return{error:"Please login again!",status:!1,message:e.message}}))})(t.crud,t.editRex).then((function(t){if(t.success){e.findIndex((function(e){return e.value===t.data.panelSkillId}));n.formRef.current.setFieldsValue({obj:t.data})}}))},n.editRecord=function(e){var t=n.props,a=t.editRex,l=t.crud,r=t.callBack;e.id=a,function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put("".concat(J).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r[0]}})).catch((function(e){return ge(e,t,5)}))}(l,a,e).then((function(e){e.success?r():n.setState({loading:!1})}))},n.formRef=l.a.createRef(),n.state={editRex:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],data:{},ExpenseFields:[{Placeholder:"Expense",fieldCol:24,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"expenseId",size:"small",rules:[{required:!0,message:"Expense is Required"}],data:[],type:"Select",fieldStyle:{width:"50%"}},{Placeholder:"Buy Rate",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Sell Rate",fieldCol:12,rangeMin:!0,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",rules:[{required:!0,message:"Buying Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",rules:[{required:!0,message:"Selling Rate is Required"}],type:"InputNumber",fieldStyle:{width:"100%"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editRex,a=e.visible,n=e.close,r=e.onHold,o=this.state,i=o.ExpenseFields,s=o.loading;return l.a.createElement(ta.a,{title:t?"Edit Expense":"Add Expense",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:s||r,htmlType:"submit",form:"my-form"},okText:s?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{obj:{effortRate:100}}},l.a.createElement(Rt,{FormFields:i})))}}]),a}(n.Component);function Gi(){Gi=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Wi=Bn.b.Item,Ki=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAll()},n.fetchAll=function(){var e=Object(dn.a)(Gi().mark((function e(t){var a,l,r,o,i,s;return Gi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=JSON.parse(pe().permissions),l=a.OPPORTUNITIES,r=(r=n.props.match.url).replace("projects","opportunities"),console.log(r),o=n.props.match.params,i=o.proId,s=o.mileId,Promise.all([No(i),zo(r)]).then((function(e){var t,a,o,c,u,d,m,f,p;n.setState({proDesc:(null===(t=e[0])||void 0===t?void 0:t.success)?e[0].data:{},mileDesc:(null===(a=e[0])||void 0===a?void 0:a.success)&&(null===(o=e[0])||void 0===o||null===(c=o.data)||void 0===c?void 0:c.milestones)?null===(u=e[0])||void 0===u||null===(d=u.data)||void 0===d?void 0:d.milestones.filter((function(e){return e.id==s}))[0]:{},editRex:!1,proId:i,crud:r,mileId:s,infoModal:!1,data:(null===(m=e[1])||void 0===m?void 0:m.success)?e[1].data:[],filterData:(null===(f=e[1])||void 0===f?void 0:f.success)?e[1].data:[],permissions:l,notAuth:null===e||void 0===e||null===(p=e[1])||void 0===p?void 0:p.authError})})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getMilestoneExpenses=function(e){var t=n.state.crud;zo(t).then((function(e){e.success&&n.setState({data:e.success?e.data:[],filterData:e.success?e.data:[],editRex:!1,infoModal:!1})}))},n.openModal=function(e){var t=n.state.mileDesc,a=t.startDate,l=t.endDate;n.setState({editRex:e,pDates:{startDate:a,endDate:l},infoModal:!0})},n.closeModal=function(){n.setState({infoModal:!1,editRex:!1})},n.handleDelete=function(e,t){var a=n.state,l=a.crud,r=a.data,o=a.filterData,i=n.props.history;zn(i,l,e,t,o,r).then((function(a){console.log(e,t),a.success&&n.setState({data:Object(et.a)(a.data),filterData:Object(et.a)(a.filterData)})}))},n.callBack=function(){var e=n.state.proId;n.getMilestoneExpenses(e)},n.generalFilter=function(e){var t=n.state.data;e?n.setState({filterData:t.filter((function(t){var a=t.expenseType.label;return"".concat(null!==a&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())||t.buyingRate&&ce(t.buyingRate).toLowerCase().includes(e.toLowerCase())||t.sellingRate&&ce(t.sellingRate).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.advancefilter=function(e,t,a){var l=n.state,r=l.data,o=l.searchedColumn;t?o[t].value=e:o=a,o.label.value||o.buyingRate.value||o.sellingRate.value?n.setState({filterData:r.filter((function(e){var t,a;return console.log("HELLLLLOOO",{label:e.expenseType.id,value:o.label.value}),(null!==(t=ce(e.buyingRate))&&void 0!==t?t:"").toLowerCase().includes(o.buyingRate.value.toString().toLowerCase())&&(null!==(a=ce(e.sellingRate))&&void 0!==a?a:"").toLowerCase().includes(o.sellingRate.value.toString().toLowerCase())&&(o.label.value.length>0?o.label.value:[{value:","}]).some((function(t){return(o.label.value.length>0?[e.expenseType.id]:[","]).includes(t.value)}))})),searchedColumn:o,openSearch:!1}):n.setState({searchedColumn:o,filterData:r,openSearch:!1})},n.filterModalUseEffect=function(){Promise.all([kn()]).then((function(e){var t=n.state.filterFields;t[1].data=e[0].success?e[0].data:[],n.setState({filterFields:t})})).catch((function(e){console.log(e)}))},n.columns=[Object(tt.a)({title:"Expense",dataIndex:["expenseType","label"],key:"label"},Ea("label","string")),Object(tt.a)({title:"Buy Rate",dataIndex:"buyingRate",key:"buyingRate",render:function(e){return e&&ce(e)}},Ea("buyingRate","number")),Object(tt.a)({title:"Sell Rate",dataIndex:"sellingRate",key:"sellingRate",render:function(e){return e&&ce(e)}},Ea("sellingRate","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,s,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",onClick:function(){return n.openModal(t.id)},disabled:!(null===(s=Object(on.a)(n))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE)},"Edit Expense"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={infoModal:!1,editRex:!1,proId:!1,mileId:!1,crud:!1,proDesc:{},mileDesc:{},permissions:{},openSearch:!1,filterData:[],searchedColumn:{label:{type:"Select",multi:!0,value:[],label:"Expense",showInColumn:!0},buyingRate:{type:"Input",value:"",label:"Buy Rate"},sellingRate:{type:"Input",value:"",label:"Sell Rate"}},filterFields:[{Placeholder:"Expense",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,mode:"multiple",key:"label",customValue:function(e,t){return t},size:"small",data:[],type:"Select",fieldStyle:{width:"50%"}},{Placeholder:"Buy Rate",fieldCol:12,size:"small",type:"Text"},{Placeholder:"Sell Rate",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:12,key:"buyingRate",shape:"$",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}},{object:"obj",fieldCol:12,key:"sellingRate",shape:"$",size:"small",type:"InputNumber",fieldStyle:{width:"100%"}}],notAuth:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.state,r=n.proDesc,o=(n.data,n.infoModal),i=n.editRex,c=n.proId,u=n.permissions,d=n.crud,m=n.mileId,f=n.filterData,y=n.openSearch,v=n.searchedColumn,g=n.filterFields,b=(n.pDates,n.notAuth),E=n.mileDesc;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Project Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Wi,{label:"Project Name"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(r.id,"/info")},className:"nav-link"},r.title)),l.a.createElement(Wi,{label:"Estimated Value"},ce(null!==(e=r.value)&&void 0!==e?e:0)),l.a.createElement(Wi,{label:"Organisation"},r.organization?l.a.createElement(s.b,{to:{pathname:"/organisations/".concat(r.organizationId,"/info")},className:"nav-link"},r.organization.name):"No Organisation"),l.a.createElement(Wi,{label:"Start Date"},me(r.startDate,!0,!0)," "),l.a.createElement(Wi,{label:"End Date"},me(r.endDate,!0,!0))),1===r.type&&l.a.createElement(Bn.b,{style:{marginTop:15},title:"Milestone Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(Wi,{label:"Milestone Name"},E.title),l.a.createElement(Wi,{label:"Start Date"},me(E.startDate,!0,!0)," "),l.a.createElement(Wi,{label:"End Date"},me(E.endDate,!0,!0)),l.a.createElement(Wi,{label:"Progress"},E.progress," %"),l.a.createElement(Wi,{label:"Approved"},l.a.createElement(jl,{text:null!==(t=E.isApproved)&&void 0!==t?t:"CM"}))),l.a.createElement(p.a,{justify:"end",span:4,gutter:[30,0]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"default",size:"small",onClick:function(){return a.setState({openSearch:!0})}},l.a.createElement(aa.a,null),"Filter")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){return a.openModal(!1)},disabled:!u.ADD||!1===r.phase},l.a.createElement(na.a,null)," Add Expense"))),l.a.createElement(Ca,{filters:v,filterFunction:this.advancefilter}),l.a.createElement(ea.a,{title:function(){return ka(5,a.generalFilter)},bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.columns,dataSource:f,size:"small",className:"fs-small"}),y&&l.a.createElement(Sa,{title:"Filter Expenses",visible:y,filters:v,filterFields:g,filterFunction:this.advancefilter,effectFunction:this.filterModalUseEffect,effectRender:!0,onClose:function(){return a.setState({openSearch:!1})}}),o&&l.a.createElement(Ui,{visible:o,editRex:i,proId:c,crud:d,cmRate:r.cmPercentage,mileId:m,onHold:!1===r.phase,close:this.closeModal,callBack:this.callBack}),b&&l.a.createElement(ul,this.props))}}]),a}(n.Component);a(549);function $i(){$i=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Ji=Ye.a.Text,Xi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.approval?n.getApprovingData():n.getSubmittedData()},n.setHours=function(e,t,a){var l=n.state,r=l.data,o=l.hoursEntry;r[a].hours=t,o[e.key]=t,n.setState({data:Object(et.a)(r),hoursEntry:Object(tt.a)({},o)})},n.getLeaveDetail=function(e,t,a){return{Placeholder:l.a.createElement("div",null,l.a.createElement("div",null,"Current Balance: ",e),l.a.createElement("div",null,"Required Balance: ",a),l.a.createElement("div",null,"Overdraw Allowances: ",t)),fieldCol:24,note:!0,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px",border:"1px black solid",paddingLeft:"10px"}}},n.getDateArray=function(e,t,a,l){var r;console.log({LeaveRequestType:a});var o=n.props,i=o.showDetails,s=o.readOnly,c=n.state,u=c.BasicFields,d=c.contractDetails,m=c.holidays,f=c.data,p=c.hoursEntry,h=null!==a&&void 0!==a?a:{},y=h.include_off_days,v=h.balance,g=void 0===v?-1:v,b=h.minimum_balance,E=h.minimum_balance_required,k=h.id,S=null!==(r=null===d||void 0===d?void 0:d.hoursPerDay)&&void 0!==r?r:0;if(l){var C=new Array;f=l.map((function(e){var t=e.date,a=e.hours;t=me(t);var n=!y&&("Sun"===t.format("ddd")||"Sat"===t.format("ddd")?"Weekend":m[t.format("M/D/YYYY")]);return i&&(g+=a),p[t.format("M/D/YYYY")]="".concat(a),{key:t.format("M/D/YYYY"),date:t.format("YYYY-MM-DD"),hours:"".concat(a),disabled:n}})),u[u[2].note?8:7].disabled=s}else if(e&&t){for(C=new Array;e.isSameOrBefore(t);){var j,O,x=!y&&("Sun"===e.format("ddd")||"Sat"===e.format("ddd")?"Weekend":m[e.format("M/D/YYYY")]),w=e.format("M/D/YYYY"),I=x?0:null!==(j=p[w])&&void 0!==j?j:S;p[w]=x?0:null!==(O=p[w])&&void 0!==O?O:S,C.push({key:w,date:e.format("YYYY-MM-DD"),hours:I,disabled:x}),e=K()(e).add(1,"d")}f=C,u[u[2].note?8:7].disabled=!1}else if(e){var D,P,T=!y&&("Sun"===e.format("ddd")||"Sat"===e.format("ddd")?"Weekend":m[e.format("M/D/YYYY")]),N=e.format("M/D/YYYY"),R=T?0:null!==(D=p[N])&&void 0!==D?D:S;p[N]=T?0:null!==(P=p[N])&&void 0!==P?P:S,f=[{key:N,date:e.format("YYYY-MM-DD"),hours:T?0:R,disabled:T}],u[u[2].note?8:7].disabled=!1}else n.formRef.current.setFieldsValue({dates:{startDate:null,endDate:null}}),u[u[2].note?8:7].disabled=!0,p={},f=[];k&&g>=0&&i?u[2].note?u[2]=n.getLeaveDetail(g,b,E):u.splice(2,0,n.getLeaveDetail(g,b,E)):u[2].note&&u.splice(2,1),n.setState({BasicFields:Object(et.a)(u),data:f,LeaveRequestType:a,hoursEntry:p}),n.formRef.current.setFieldsValue({hours:p})},n.getApprovingData=function(){var e=n.state.BasicFields,t=n.props.edit;Nl(t).then((function(t){if(t.success){var a=t.data,l=t.data,r=l.workId,o=l.typeId,i=l.work,s=l.type,c=l.holidays,u=l.contractDetails,d=l.startDate,m=l.endDate,f=t.entries,p=t.fileIds,h=t.fileList;console.log(s.id),e[3].data=r?[{value:r,label:null===i||void 0===i?void 0:i.title}]:[],e[1].data=o?[Object(tt.a)(Object(tt.a)({},s),{},{name:s.label})]:[{id:null,name:"Unpaid"}],e.map((function(e){return"Text"!==e.type&&(e.disabled=!0),e})),n.setState({BasicFields:e,holidays:null!==c&&void 0!==c?c:{},contractDetails:null!==u&&void 0!==u?u:{},fileList:null!==h&&void 0!==h?h:[],fileIds:null!==p&&void 0!==p?p:[]});var y=Object(tt.a)(Object(tt.a)({},a),{},{startDate:me(d),endDate:me(m)});n.getDateArray(y.startDate,y.endDate,s,f),n.formRef.current.setFieldsValue({dates:y})}}))},n.getSubmittedData=function(){var e=n.state.BasicFields,t=n.props,a=t.edit,l=t.readOnly,r=pe().id;Promise.all([Ht(r,"O",0),it.a.get("".concat(J,"/leave-request-types/getOwn"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n){var r=l.holidays,o=l.contractDetails,i=l.LeaveRequestTypes,s=[{id:0,name:"Unpaid",include_off_days:!1}];return(void 0===i?[]:i).forEach((function(e,t){var a={};Object.entries(e).forEach((function(e){var t=Object(G.a)(e,2),n=t[0],l=t[1],r=n.replace(/([A-Z])/g,"_$1").toLowerCase();a[r]=l})),s.push(a)})),{success:n,data:l,holidays:r,contractDetails:o,LeaveRequestTypes:s}}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})),a&&Nl(a)]).then((function(t){var r,o,i;console.log(t);var s=t[1],c=s.success,u=s.contractDetails,d=s.holidays,m=s.LeaveRequestTypes;s.fileList,s.fileIds;if(e[3].data=t[0].success?t[0].data:[],e[1].data=c?m:[],e.map((function(e){return"Text"!==e.type&&(e.disabled=l),"typeId"===e.key&&t[2]&&(e.disabled=!0),e})),n.setState({BasicFields:e,holidays:c&&null!==d&&void 0!==d?d:{},contractDetails:c&&null!==u&&void 0!==u?u:{},fileList:null!==(r=t[2].fileList)&&void 0!==r?r:[],fileIds:null!==(o=t[2].fileIds)&&void 0!==o?o:[]}),a&&(null===(i=t[2])||void 0===i?void 0:i.success)){var f=t[2],p=f.entries,h=f.data,y=h.typeId?h.type:{id:0,name:"Unpaid"},v=Object(tt.a)(Object(tt.a)({},h),{},{desc:h.desc,typeId:null===y||void 0===y?void 0:y.id,startDate:me(p[0].date),endDate:me(p[p.length-1].date)});n.getDateArray(v.startDate,v.endDate,y,p),n.formRef.current.setFieldsValue({dates:v})}})).catch((function(e){console.log(e)}))},n.getFormValues=function(e){var t;n.setState({loading:!0});var a=e.dates,l=n.props,r=l.edit,o=l.callBack,i=n.state,s=i.data,c=i.fileIds,u={desc:null!==(t=a.desc)&&void 0!==t?t:"",typeId:a.typeId||0,workId:a.workId,entries:s,attachments:null!==c&&void 0!==c?c:[]};console.log("newVal---\x3e",u),r?function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.patch("".concat(Tl,"/").concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:e}),l&&fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:o}})).catch((function(t){return ge(t,e,120,{marginTop:"15vh"})}))}(r,u).then((function(e){n.setState({loading:!1}),e.success&&o()})):function(e){return $.b.loading({content:"Loading...",key:1}),it.a.post(Tl,e,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),$.b.success({content:"Success!",key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n}})).catch((function(e){return ge(e,1,120,{marginTop:"15vh"})}))}(u).then((function(e){n.setState({loading:!1}),e.success&&o()}))},n.getTableSummary=function(e){var t=0;return e.forEach((function(e){var a=e.hours;t+=parseFloat(null!==a&&void 0!==a?a:0)})),l.a.createElement(ea.a.Summary,{fixed:"top"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0},"Total"),l.a.createElement(ea.a.Summary.Cell,{index:1},ue(t))))},n.handleUpload=function(){var e=Object(dn.a)($i().mark((function e(t){var a,l,r,o,i;return $i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.onSuccess,l=t.onError,r=t.file,o=t.onProgress,i=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);n.setState({progress:t}),100===t&&setTimeout((function(){return n.setState({progres:0})}),1e3),o({percent:e.loaded/e.total*100})}},i.append("files",r),Wn(i).then((function(e,t){if(e.success)a("Ok"),n.setState({fileList:[].concat(Object(et.a)(n.state.fileList),[e.file]),fileIds:[].concat(Object(et.a)(n.state.fileIds),[e.file.fileId])});else{console.log("Eroor: ",t);new Error("Some error");l({err:t})}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onRemove=function(e){n.setState((function(t){var a=t.fileList.indexOf(e),n=t.fileList.slice(),l=t.fileIds;return n.splice(a,1),l.splice(a,1),{fileIds:l,fileList:n}}))},n.formRef=l.a.createRef(),n.attachRef=l.a.createRef(),n.columns=[{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null," ",me(e,!0,!0)," "),l.a.createElement(h.a,{style:{marginLeft:"auto",color:"red"}},t.disabled))}},{title:"Hours",dataIndex:"hours",key:"hours",render:function(t,a,r){return l.a.createElement(nt.a.Item,{noStyle:!0,name:["hours",me(a.date,!0,"M/D/YYYY")]},l.a.createElement(yt.a,{placeholder:"Hours",size:"small",disabled:e.readOnly,onChange:function(e){n.setHours(a,e,r)}}))}}],n.state={data:[],reRender:!1,hoursEntry:{},loading:!1,fileList:[],fileIds:[],holidays:{},contractDetails:{},LeaveRequestType:{},BasicFields:[{Placeholder:"Leave Type",rangeMin:!0,fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"typeId",size:"small",rules:[{required:!0,message:"Leave Type is Required"}],data:[],fieldNames:{label:"name",value:"id"},type:"Select",onChange:function(e,t){var a=n.formRef.current.getFieldsValue().dates,l=a.startDate,r=a.endDate;n.getDateArray(l,r,null!==t&&void 0!==t?t:{})}},{Placeholder:"Project Name",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"workId",size:"small",data:[],type:"Select"},{Placeholder:"Start Date",rangeMin:!0,fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"startDate",size:"small",type:"DatePicker",rules:[{required:!0,message:"Start Date is Required"}],fieldStyle:{width:"100%"},onChange:function(e){var t=n.formRef.current.getFieldsValue().dates,a=t.startDate,l=t.endDate,r=n.state.LeaveRequestType;n.getDateArray(a,l,r)},rangeMin:function(e){var t=n.formRef.current.getFieldsValue().dates.endDate;return t&&e>t}},{Placeholder:"End Date",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:16,key:"endDate",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},disabled:!0,onChange:function(e){var t=n.formRef.current.getFieldsValue().dates,a=t.endDate,l=t.startDate,r=n.state.LeaveRequestType;n.getDateArray(l,a,r)},rangeMax:function(e){var t=n.formRef.current.getFieldsValue().dates.startDate;return t&&e<t}},{Placeholder:"Description",fieldCol:8,size:"small",type:"Text",labelAlign:"right",itemStyle:{marginBottom:"10px"}},{object:"dates",fieldCol:24,key:"desc",size:"small",type:"Textarea",mode:{minRows:2,maxRows:3},fieldStyle:{height:"10vh"}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.close,r=t.edit,o=t.readOnly,i=this.state,s=i.BasicFields,c=i.fileList,u=i.data,d=(i.fileIds,i.loading),m=i.contractDetails,f=[{title:"Date",dataIndex:"date",key:"date",render:function(e,t){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null," ",me(e,!0,!0)," "),l.a.createElement(h.a,{style:{marginLeft:"auto",color:"red"}},t.disabled))}},{title:"Hours",dataIndex:"hours",key:"hours",render:function(t,a,n){var r;return l.a.createElement(nt.a.Item,{noStyle:!0,name:["hours",me(a.date,!0,"M/D/YYYY")]},l.a.createElement(yt.a,{max:null!==(r=null===m||void 0===m?void 0:m.hoursPerDay)&&void 0!==r&&r,min:0,placeholder:"Hours",size:"small",disabled:a.disabled||o,onChange:function(t){e.setHours(a,t,n)}}))}}];return l.a.createElement(ta.a,{title:o?"View Request":r?"Edit Leave Request":"New Leave Request",maskClosable:!0,destroyOnClose:!0,visible:a,okButtonProps:{htmlType:"submit",form:"my-form",disabled:o,loading:d},okText:"Submit",onCancel:function(){$.b.destroy(),n()},width:1e3},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,size:"small",layout:"inline",onFinish:this.getFormValues},l.a.createElement(p.a,{className:"moz-width"},l.a.createElement(h.a,{span:12},l.a.createElement(p.a,null,l.a.createElement(Rt,{FormFields:s})),l.a.createElement(Ji,{style:{marginTop:10,marginBottom:2}},"Attachments"),l.a.createElement(mt.a,{customRequest:this.handleUpload,listType:"picture-card",maxCount:4,fileList:c,onRemove:this.onRemove,disabled:o},c.length<4&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))),l.a.createElement(h.a,{span:12},l.a.createElement(ea.a,{sticky:!0,style:{maxHeight:"40vh",overflowY:"scroll",position:"relative"},pagination:!1,rowKey:function(e){return e.key},columns:f,dataSource:u,size:"small",summary:function(t){return e.getTableSummary(t)}})))))}}]),a}(n.Component),Zi=Ye.a.Title,Qi=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.getData()},n.getData=function(){var e=pe().permissions,t=JSON.parse(e).LEAVE_REQUESTS;it.a.get(Tl,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){var t,a,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;return"Leave Requests not found"!==n&&$.b.error({content:n,key:1}),{error:"Please login again!",success:!1,message:e.message}})).then((function(e){n.setState({openModal:!1,readOnly:!1,editRequest:!1,reload:!1,request:(null===e||void 0===e?void 0:e.success)?e.data:[],permissions:t},(function(){return n.setState({reload:!0})}))}))},n.closeModal=function(){n.setState({openModal:!1,editRequest:!1,readOnly:!1})},n.handleDelete=function(e,t){var a=n.state.request,l=n.props.history;zn(l,"/leave-requests",e,t,a,!1).then((function(e){e.success&&n.setState({request:Object(et.a)(e.filterData)})}))},n.callBack=function(e){n.getData()},n.typeColumns=[{title:"Type",dataIndex:"name",key:"name"},{title:"Accrued",dataIndex:"carryForward",key:"carryForward",render:function(e){return ue(e)}},{title:"Earned YTD",dataIndex:"earned",key:"earned",render:function(e,t){return ue(t.balanceHours-t.carryForward+t.used)}},{title:"Used YTD",dataIndex:"used",key:"used",render:function(e){return ue(e)}},{title:"Balance",dataIndex:"balanceHours",key:"balanceHours",render:function(e){return ue(e)}}],n.requestColumns=[{title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e,t){return e&&me(e,!0,!0)}},{title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e,t){return e&&me(e,!0,!0)}},{title:"Leave Type",dataIndex:"leaveRequestName",key:"leaveRequestName"},{title:"Project",dataIndex:"project",key:"project"},{title:"Hours",dataIndex:"totalHours",key:"totalHours",render:function(e){return ue(e)}},{title:"Status",dataIndex:"status",key:"status",render:function(e,t){return l.a.createElement(Pe.b,{align:"end"},l.a.createElement(jl,{text:e}),l.a.createElement(Te.a,{placement:"top",title:t.note,destroyTooltipOnHide:!0},t.note&&l.a.createElement(zr.a,{style:{fontSize:"large"}})))}},{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i,s,c,u;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE)||"AP"===t.status,className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"update",disabled:!(null===(s=Object(on.a)(n))||void 0===s||null===(c=s.state)||void 0===c||null===(u=c.permissions)||void 0===u?void 0:u.UPDATE),onClick:function(){n.setState({openModal:!0,editRequest:t.id,readOnly:t.status})}},"AP"===t.status?"View":"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={request:[],readOnly:!1,editRequest:!1,permissions:{},type:[],reload:!0,openModal:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.request,n=t.openModal,r=t.editRequest,o=t.permissions,i=t.readOnly,s=t.reload;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Zi,{level:4},"Leave Requests")),l.a.createElement(h.a,{style:{marginLeft:"auto"}},l.a.createElement(rt.a,{type:"primary",size:"small",disabled:!o.ADD,onClick:function(){e.setState({openModal:!0,readOnly:!1})}},l.a.createElement(na.a,null),"Add Request")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{bordered:!0,style:{maxHeight:"40vh",overflowY:"scroll"},pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:this.requestColumns,dataSource:a,size:"small",className:"fs-small"}))),l.a.createElement(p.a,{style:{marginTop:"20px"},justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Zi,{level:4},"Leave Balance")),l.a.createElement(h.a,{span:24},s&&l.a.createElement(Yl,{editable:!1,style:{maxHeight:"30vh",overflowY:"scroll"}}))),n&&l.a.createElement(Xi,{visible:n,close:this.closeModal,edit:r,callBack:this.getData,readOnly:"AP"===i,showDetails:!i||"SB"===i||"RJ"===i}))}}]),a}(n.Component),es=Ye.a.Title,ts=Ye.a.Text,as="",ns=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAll()},n.fetchAll=function(){var e=n.state.queryRequest,t=e.startDate,a=e.endDate,l=e.workId,r=e.userId,o={startDate:me(t,!0,"DD-MM-YYYY"),endDate:me(a,!0,"DD-MM-YYYY"),workId:l,userId:r},i=pe(),s=i.id,c=i.permissions,u=parseInt(s),d=JSON.parse(c).LEAVE_REQUESTS,m="startDate=".concat(null===o||void 0===o?void 0:o.startDate,"&endDate=").concat(null===o||void 0===o?void 0:o.endDate,"&userId=").concat(null===o||void 0===o?void 0:o.userId,"&workId=").concat(null===o||void 0===o?void 0:o.workId);Promise.all([Jt("LEAVE_REQUESTS"),Rl(m),it.a.get("".concat(J,"/auth/users"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(l,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))]).then((function(e){n.setState({WORKS:e[0].success?e[0].data:[],loginId:u,permissions:d,request:e[1].success?e[1].data:[],filterRequest:e[1].success?e[1].data:[],USERS:e[2].success?e[2].data:[],readRequest:!1})})).catch((function(e){console.log(e)}))},n.getData=function(){var e,t,a=n.state.queryRequest,l=a.startDate,r=a.endDate,o=a.workId,i=a.userId,s={startDate:null!==(e=me(l,!0,"DD-MM-YYYY"))&&void 0!==e?e:void 0,endDate:null!==(t=me(r,!0,"DD-MM-YYYY"))&&void 0!==t?t:void 0,workId:o,userId:i},c="";c=s.startDate?"startDate=".concat(null===s||void 0===s?void 0:s.startDate,"&endDate=").concat(null===s||void 0===s?void 0:s.endDate,"&userId=").concat(null===s||void 0===s?void 0:s.userId,"&workId=").concat(null===s||void 0===s?void 0:s.workId):"userId=".concat(null===s||void 0===s?void 0:s.userId,"&workId=").concat(null===s||void 0===s?void 0:s.workId),Rl(c).then((function(e){e.success&&n.setState({request:e.data,filterRequest:e.data,readRequest:!1,sRequest:{request:[],keys:[]}})}))},n.requestSelect=function(e,t){var a=!0,l=!0,r=!0;t.forEach((function(e){"SB"===e.status&&(a=!1),"SB"===e.status&&(l=!1),"AP"===e.status&&(r=!1)})),n.setState({sRequest:{request:t,keys:e,cantApprove:a,cantReject:l,cantUnapprove:r}})},n.onActionFinished=function(e,t){(function(e,t){return it.a.post("".concat(Tl,"/").concat(e),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data;if(fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:l}})).catch((function(e){var t,a,n=null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message;return $.b.error({content:n,key:1}),{error:"Please login again!",success:!1,message:e.message}}))})(t,{leaveRequests:n.state.sRequest.keys,note:e}).then((function(e){e.success&&n.getData(),as.destroy()}))},n.multiAction=function(e){var t=l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"24"},l.a.createElement(es,{level:5},"Notes")),l.a.createElement(h.a,{span:"24"},l.a.createElement(nt.a,{id:"my-form",onFinish:function(t){return n.onActionFinished(t.notes,e)}},l.a.createElement(nt.a.Item,{noStyle:!0,name:"notes"},l.a.createElement(ht.a.TextArea,{placeholder:"Enter Your Notes....",autoSize:{minRows:3,maxRows:10},allowClear:!0})))));as=ta.a.confirm({title:"leaveRequestsReject"===e?"Reject Leave Requests":"Approve Leave Requests",icon:"leaveRequestsReject"===e?l.a.createElement(Rr.a,{style:{color:"red"}}):l.a.createElement(S.a,{style:{color:"green"}}),content:t,okButtonProps:{htmlType:"submit",form:"my-form"},okText:"Yes",cancelText:"No"})},n.closeModal=function(){n.setState({openModal:!1,readRequest:!1})},n.generalFilter=function(e){var t=n.state.request;e?n.setState({filterRequest:t.filter((function(t){var a,n,l,r,o,i;return"".concat(null!==(a=t.employeeName)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(n=t.project)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(l=t.leaveRequestName)&&void 0!==l?l:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(r=me(t.startDate,!0,!0))&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(o=me(t.endDate,!0,!0))&&void 0!==o?o:"").toLowerCase().includes(e.toLowerCase())||"".concat(null!==(i=me(t.submittedAt,!0,!0))&&void 0!==i?i:"").toLowerCase().includes(e.toLowerCase())||"".concat(ee[t.status]).toLowerCase().includes(e.toLowerCase())}))}):n.setState({filterData:t})},n.requestColumns=[Object(tt.a)({title:"Resource",dataIndex:"employeeName",key:"employeeName"},Ea("employeeName","string")),Object(tt.a)({title:"Project",dataIndex:"project",key:"project"},Ea("project","string")),Object(tt.a)({title:"Leave Type",dataIndex:"leaveRequestName",key:"leaveRequestName"},Ea("leaveRequestName","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e,t){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e,t){return e&&me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Submit Date",dataIndex:"submittedAt",key:"submittedAt",render:function(e,t){return e&&me(e,!0,!0)}},Ea("submittedAt","date")),Object(tt.a)(Object(tt.a)({title:"Status",dataIndex:"status",key:"status"},Ea("status","string")),{},{render:function(e,t){return l.a.createElement(Pe.b,{align:"end"},l.a.createElement(jl,{text:e}),l.a.createElement(Te.a,{placement:"top",title:t.note,destroyTooltipOnHide:!0},t.note&&l.a.createElement(zr.a,{style:{fontSize:"large"}})))}}),Object(tt.a)({title:"Total Hours",dataIndex:"totalHours",key:"totalHours",align:"center",render:function(e,t){return e&&l.a.createElement(ts,{strong:!0},ue(e))}},Ea("totalHours","number")),{title:"...",key:"action",align:"center",width:"1%",render:function(e){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{onClick:function(){n.setState({openModal:!0,readRequest:e.id})}},"View"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}],n.state={request:[],filterRequest:[],readRequest:!1,canApprove:!1,loginId:{},permissions:{},sRequest:{request:[],keys:[]},WORKS:[],USERS:[],queryRequest:{startDate:me(new Date).startOf("month"),endDate:me(new Date).endOf("month"),workId:null,userId:null}},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.request,t.filterRequest),n=t.sRequest,r=t.openModal,o=t.readRequest,i=t.queryRequest,s=t.WORKS,c=t.USERS,u=t.permissions,d=i.startDate,m=(i.endDate,i.workId),f=i.userId;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(es,{level:4},"Approve Requests")),l.a.createElement(h.a,null,l.a.createElement(vt.a,{placeholder:"Select Project",style:{width:250},options:s,value:m,allowClear:!0,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onChange:function(t,a){e.setState({queryRequest:Object(tt.a)(Object(tt.a)({},i),{},{workId:t})},(function(){e.getData()}))}})),l.a.createElement(h.a,null,l.a.createElement(vt.a,{allowClear:!0,placeholder:"Select User",options:c,value:f,style:{width:250},showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onChange:function(t,a){e.setState({queryRequest:Object(tt.a)(Object(tt.a)({},i),{},{userId:t})},(function(){e.getData()}))}})),l.a.createElement(h.a,null,l.a.createElement(ft.a,{mode:"month",picker:"month",format:"MMM-YYYY",value:d,onChange:function(t){e.setState({queryRequest:Object(tt.a)(Object(tt.a)({},i),{},{startDate:t&&me(t).startOf("month"),endDate:t&&me(t).endOf("month")})},(function(){e.getData()}))}})),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,e.generalFilter)},rowSelection:{selectedRowKeys:n.keys,onChange:function(t,a){e.requestSelect(t,a)},getCheckboxProps:function(e){return{disabled:"SV"===e.status||"RJ"===e.status||"NC"===e.status||!u.UNAPPROVAL&&"AP"===e.status}}},scroll:{x:"'max-content'"},pagination:{pageSize:pe().pageSize},bordered:!0,rowKey:function(e){return e.id},columns:this.requestColumns,dataSource:a,size:"small",className:"fs-small"}))),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",danger:!0,disabled:n.keys.length<1||!u.APPROVAL||n.cantReject,onClick:function(){return e.multiAction("leaveRequestsReject")}},"Reject")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"success",disabled:n.keys.length<1||!u.APPROVAL||n.cantApprove,onClick:function(){return e.multiAction("leaveRequestsApprove")}},"Approve")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"not-success",disabled:n.keys.length<1||!u.UNAPPROVAL||n.cantUnapprove,onClick:function(){return e.multiAction("leaveRequestsUnapprove")}},"Unapprove"))),r&&l.a.createElement(Xi,{visible:r,close:this.closeModal,edit:o,callBack:this.getData,readOnly:!0,approval:!0}))}}]),a}(n.Component),ls=a(319),rs=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props.crud),n.openModal()},n.openModal=function(){var e=n.props.editMile;e&&n.getRecord(e)},n.onFinish=function(e){var t=n.props.editMile;n.setState({loading:!0});var a=e.obj;a=Object(tt.a)(Object(tt.a)({},a),{},{startDate:me(a.startDate,!0),endDate:me(a.endDate,!0)}),t?n.editRecord(a):n.addRecord(a)},n.addRecord=function(e){var t=n.props,a=t.proId,l=t.callBack,r=t.crud;e.projectId=a,function(e,t){return $.b.loading({content:"Loading...",key:1}),console.log(e),it.a.post("".concat(J).concat(e),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message,r=a.data;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:r}})).catch((function(e){return ge(e,1,5)}))}(r,e).then((function(e){e.success?l(e.data):n.setState({loading:!1})}))},n.getRecord=function(){var e=n.props.editMile;e.startDate=me(e.startDate),e.endDate=me(e.endDate),n.formRef.current.setFieldsValue({obj:e})},n.editRecord=function(e){var t=n.props,a=t.editMile,l=t.callBack;(function(e,t,a){return $.b.loading({content:"Loading...",key:t}),it.a.put("".concat(J).concat(e,"/").concat(t),a,{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.message,o=n.data;return he(r),$.b.success({content:r,key:t}),l&&fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:o[0]}})).catch((function(e){return ge(e,t,5)}))})(t.crud,a.id,e).then((function(e){e.success?l(e.data):n.setState({loading:!1})}))},n.formRef=l.a.createRef(),n.state={editMile:!1,resourceSubmitted:!1,check:!1,loading:!1,SKILLS:[],STATES:[],ORGS:[],data:{},PMileFields:[{Placeholder:"Title",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Progress",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"title is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"progress",shape:"%",size:"small",type:"InputNumber",fieldStyle:{width:"100%"},rangeMin:0,rangeMax:100},{Placeholder:"Start Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"End Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=n.formRef.current.getFieldValue().obj;return ke(t,a.endDate,e.pDates)}},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=n.formRef.current.getFieldValue().obj;return Se(t,a.startDate,e.pDates)}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea"}],LMileFields:[{Placeholder:"Title",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{Placeholder:"Start Date",fieldCol:12,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"title",size:"small",rules:[{required:!0,message:"title is Required"}],type:"Input"},{object:"obj",fieldCol:12,key:"startDate",size:"small",rules:[{required:!0,message:"Start Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMin:function(t){var a=n.formRef.current.getFieldValue().obj;return ke(t,a.endDate,e.pDates)}},{Placeholder:"End Date",fieldCol:24,size:"small",rangeMin:!0,type:"Text",labelAlign:"right"},{object:"obj",fieldCol:12,key:"endDate",size:"small",rules:[{required:!0,message:"End Date is Required"}],type:"DatePicker",fieldStyle:{width:"100%"},rangeMax:function(t){var a=n.formRef.current.getFieldValue().obj;return Se(t,a.startDate,e.pDates)}},{Placeholder:"Description",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"obj",fieldCol:24,key:"description",size:"small",type:"Textarea"}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editMile,a=e.visible,n=e.close,r=e.work,o=e.onHold,i=this.state,s=i.PMileFields,c=i.LMileFields,u=i.loading;return l.a.createElement(ta.a,{title:t?"Edit Milestone":"Add Milestone",maskClosable:!1,centered:!0,visible:a,okButtonProps:{disabled:u||o||"AP"===t.isApproved||"SB"===t.isApproved,htmlType:"submit",form:"my-form"},okText:u?l.a.createElement(la.a,null):"Save",onCancel:n,width:900},l.a.createElement(nt.a,{id:"my-form",ref:this.formRef,onFinish:this.onFinish,scrollToFirstError:!0,size:"small",layout:"inline",initialValues:{obj:{progress:0}}},l.a.createElement(Rt,{FormFields:"opportunities"===r?c:s})))}}]),a}(n.Component),os=Bn.b.Item,is=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.proId;n.fetchAll(e)},n.resRoute=function(e){var t=n.props.match.url;return t=t.split("/"),"/".concat(t[1],"/").concat(t[2],"/").concat(t[3],"/").concat(e,"/resources")},n.fetchAll=function(e){var t=JSON.parse(pe().permissions),a=t.PROJECTS,l=t.OPPORTUNITIES,r=n.props.match.url,o=n.props.match.url,i=(o=o.split("/"))[1];o="".concat(o[1],"/").concat(o[2]),Promise.all([Ii(o),wi(r)]).then((function(t){var o=n.state.columns;"opportunities"===i&&o.splice(3,2),n.setState({desc:t[0].success&&t[0].data,data:t[1].success&&t[1].data,columns:Object(et.a)(o),proId:e,customUrl:r,work:i,permissions:"opportunities"===i?l:a})})).catch((function(e){console.log(e)}))},n.openModal=function(e){var t=n.state.desc,a=t.startDate,l=t.endDate;n.setState({pDates:{startDate:a,endDate:l},editMile:e,infoModal:!0})},n.closeModal=function(){n.setState({infoModal:!1,editMile:!1})},n.handleDelete=function(e,t){var a=n.state,l=a.customUrl,r=a.data,o=n.props.history;zn(o,l,e,t,r,!1).then((function(e){e.success&&n.setState({data:Object(et.a)(e.filterData)})}))},n.callBack=function(e){var t=n.state,a=(t.proId,t.editMile),l=t.data;a?l[a.rowIndex]=e:l.push(e),n.setState({data:Object(et.a)(l),infoModal:!1})},n.state={infoModal:!1,editMile:!1,pDates:{},proId:!1,desc:{title:"",organization:{name:""},value:"",startDate:"",endDate:""},permissions:{},customUrl:"opportunity",columns:[Object(tt.a)({title:"Title",dataIndex:"title",key:"title",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/resources")},className:"nav-link"},e)}},Ea("title","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return me(e,!0,!0)}},Ea("endDate","date")),{title:"Progress",dataIndex:"progress",key:"progress",align:"center",render:function(e){return l.a.createElement(ls.a,{percent:e,size:"small"})}},{title:"Approved",dataIndex:"isApproved",key:"isApproved",align:"right",render:function(e){var t=null!==e&&void 0!==e?e:"CM";return l.a.createElement(jl,{text:t})}},{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r,o,i;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:!(null===(r=Object(on.a)(n))||void 0===r||null===(o=r.state)||void 0===o||null===(i=o.permissions)||void 0===i?void 0:i.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{title:"Are you sure you want to delete ?",onConfirm:function(){return n.handleDelete(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){n.openModal(Object(tt.a)(Object(tt.a)({},t),{},{rowIndex:a}))},disabled:n.state&&!n.state.permissions.UPDATE},"Edit Milestone"),l.a.createElement(b.a.Item,{key:"position"},l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/resources")},className:"nav-link"},"Positions")),l.a.createElement(b.a.Item,{key:"expense"},l.a.createElement(s.b,{to:{pathname:"milestones/".concat(t.id,"/expenses")},className:"nav-link"},"Expenses")))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.desc,n=t.data,r=t.infoModal,o=t.editMile,i=t.proId,c=t.permissions,u=t.columns,d=t.customUrl,m=t.pDates,f=t.work;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Bn.b,{title:"Project Details",size:"small",bordered:!0,layout:"horizontal"},l.a.createElement(os,{label:"Title"},l.a.createElement(s.b,{to:{pathname:"/projects/".concat(a.id,"/info")},className:"nav-link"},a.title)),l.a.createElement(os,{label:"Value"},ce(a.value)),l.a.createElement(os,{label:"Start Date"},me(a.startDate,!0,!0)," "),l.a.createElement(os,{label:"End Date"},me(a.endDate,!0,!0)),l.a.createElement(os,{label:"Bid Date"},me(a.bidDate,!0,!0))),l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){return e.openModal(!1)},disabled:!c.ADD||!1===(null===a||void 0===a?void 0:a.phase)},"Add Milestone"))),l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:u,dataSource:n,size:"small",className:"fs-small"}),r&&l.a.createElement(rs,{visible:r,editMile:o,onHold:!1===(null===a||void 0===a?void 0:a.phase),pDates:m,proId:i,crud:d,work:f,close:this.closeModal,callBack:this.callBack}))}}]),a}(n.Component),ss=Bn.b.Item,cs=function(e){var t,a=Object(n.useState)([]),r=Object(G.a)(a,2),o=r[0],i=r[1],s=Object(n.useRef)();Object(n.useEffect)((function(){var t="/".concat(e.mileId,"/export");Pi(t).then((function(t){t.success&&(i(t.data),c(),e.close())}))}),[]);var c=Object($r.useReactToPrint)({content:function(){return s.current},documentTitle:"Milestone Certificate",removeAfterPrint:!0});return l.a.createElement("div",{style:{display:"none"}},l.a.createElement("div",{ref:s,style:{margin:"2mm 10mm 0mm 10mm",size:"A4"}},l.a.createElement(p.a,{justify:"space-around"},"                                ",l.a.createElement(h.a,{span:24,className:"txt-center mb-40 mt-10"},l.a.createElement("img",{src:"/onelm.png",width:"32%"})),l.a.createElement(h.a,{span:24,className:"txt-center"},l.a.createElement(Ye.a.Title,{level:4},"MILESTONE ACCEPTANCE CERTIFICATE")),l.a.createElement(h.a,{span:22},l.a.createElement(Bn.b,{column:1,bordered:!0,className:"certficate-describe right small"},l.a.createElement(ss,{label:"Task"},null===o||void 0===o?void 0:o.projectName),l.a.createElement(ss,{label:"Purchase Order Number"},null!==(t=null===o||void 0===o?void 0:o.purchaseOrderNo)&&void 0!==t?t:"--"),l.a.createElement(ss,{label:"Purchase Order Date"},(null===o||void 0===o?void 0:o.purchaseOrderDate)?me(null===o||void 0===o?void 0:o.purchaseOrderDate,!0,!0):"--"),l.a.createElement(ss,{label:"Milestone Name"},null===o||void 0===o?void 0:o.milestoneName),l.a.createElement(ss,{label:"Deliverable/s",span:6,className:"paragraph"},l.a.createElement(Ye.a.Paragraph,{ellipsis:{rows:6,expandable:!1}},null===o||void 0===o?void 0:o.milestoneDesc)))),l.a.createElement(h.a,{span:24,className:"txt-center"},l.a.createElement(Ye.a.Title,{level:4},"ACCEPTANCE")),l.a.createElement(h.a,{span:11},l.a.createElement(Ye.a.Title,{level:5},"This Deliverable is offered to the Commonwealth:"),l.a.createElement(Bn.b,{column:1,bordered:!0,className:"certficate-describe large"},l.a.createElement(ss,{label:"Signature"}," "),l.a.createElement(ss,{label:"Date"}))),l.a.createElement(h.a,{span:11},l.a.createElement(Ye.a.Title,{level:5},"This deliverable is accepted on behalf of the ____________________"),l.a.createElement(Bn.b,{column:1,bordered:!0,className:"certficate-describe large"},l.a.createElement(ss,{label:"Signature"}),l.a.createElement(ss,{label:"Date"}))),l.a.createElement(h.a,{span:11},"                 ",l.a.createElement(Ye.a.Title,{level:5},"1LM Representative:"),l.a.createElement(Bn.b,{column:1,bordered:!0,className:"certficate-describe representative small"},l.a.createElement(ss,{label:"Title and Name:"}," "),l.a.createElement(ss,{label:"Task Position:"}),l.a.createElement(ss,{label:"Telephone:"}),l.a.createElement(ss,{label:"Mobile:"}))),l.a.createElement(h.a,{span:11},l.a.createElement(Ye.a.Title,{level:5},"______________ Representative:"),l.a.createElement(Bn.b,{column:1,bordered:!0,className:"certficate-describe representative small"},l.a.createElement(ss,{label:"Rank and Name:"}," "),l.a.createElement(ss,{label:"Position:"}),l.a.createElement(ss,{label:"Organisation:"}),l.a.createElement(ss,{label:"Address:"}),l.a.createElement(ss,{label:"Telephone:"}),l.a.createElement(ss,{label:"Email:"}))))))},us=(a(550),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.fetchAll()},n.fetchAll=function(){Promise.all([Jt("PROJECTS"),Di()]).then((function(e){var t=pe().permissions,a=JSON.parse(t).TIMESHEETS;n.setState({PROJECTS:e[0].success?e[0].data:[],data:e[1].success?e[1].data:[],permissions:null!==a&&void 0!==a?a:{}})})).catch((function(e){console.log(e)}))},n.getProjects=function(e){Di(e).then((function(e){e.success&&n.setState({data:e.data,sTMilestones:{milestones:[],keys:[]}})}))},n.uploading=function(){var e=n.state,t=e.sMile,a=e.data,l=e.sIndex,r=e.fileList;(function(e,t){return $.b.loading({content:"Loading...",key:1}),it.a.put("".concat(xi,"/").concat(e,"/upload"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message,r=a.data;return he(l),$.b.success({content:l,key:1}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:r}})).catch((function(e){return ge(e,1,5)}))})(t,{fileId:r[0].fileId}).then((function(e){console.log(r[0],r[0].uniqueName),e.success&&(a[l].fileName=r[0].uid,n.setState({data:Object(et.a)(a),infoModal:!1,sMile:!1,sIndex:!1,fileList:[]}))}))},n.OutcomeAction=function(e,t){if("delete-certificate"===e)(function(e){return $.b.loading({content:"Loading...",key:e}),it.a.delete("".concat(xi,"/").concat(e,"/delete-certificate"),{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:e}),fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return ge(e,1,5)}))})(t).then((function(e){e.success&&n.getProjects()}));else{var a=n.state,l=(a.data,{milestones:a.sTMilestones.keys});Pi("/".concat(e),l).then((function(e){e.success&&n.getProjects()}))}},n.handleUpload=function(e){var t=e.file;n.setState({loading:!0});var a=new FormData;a.append("files",t),Wn(a).then((function(e,t){if(e.success)n.setState({fileList:[e.file],loading:!1});else{n.setState({loading:!1}),console.log("Eroor: ",t);new Error("Some error")}}))},n.multiAction=function(e){var t,a=n.state.sTMilestones.milestones,r=a.length,o=l.a.createElement("div",null,a.map((function(e,t){var a=e.projectName,n=e.milestoneName;e.projectType;return l.a.createElement("div",{key:t},a," (".concat(n,")"),r-1>t&&",")}))),i=ta.a.confirm({title:"Do you wish to ".concat(e," Certificate").concat(r>1?"s":""," for"),icon:"unapprove"===e?l.a.createElement(Rr.a,null):l.a.createElement(S.a,null),content:o,okButtonProps:{danger:null===(t="unapprove"===e)||void 0===t||t},okText:"Okay",cancelText:"Cancel",onOk:function(){n.OutcomeAction(e),i.destroy()}})},n.milestoneSelect=function(e,t){var a=!1,l=!1,r=!1;t.forEach((function(e){""!==e.isApproved&&(l=!0),"SB"!==e.isApproved&&(a=!0),"AP"!==e.isApproved&&(r=!0)})),n.setState({sTMilestones:{milestones:t,keys:e,cantApprove:a,cantSubmit:l,cantUnapprove:r}})},n.state={infoModal:!1,data:[{project:"dummy",milestoneId:0}],sMile:!1,sIndex:!1,desc:{title:"",organization:{name:""},value:"",startDate:"",endDate:""},permissions:{},loading:!1,fileList:[],printing:!1,PROJECTS:[],sTMilestones:{milestones:[],keys:[]},columns:[Object(tt.a)({title:"Project",dataIndex:"projectName",key:"projectName",className:"project-column",render:function(e,t,a){var r=n.state.permissions;return l.a.createElement(p.a,{gutter:[0,5],style:{minHeight:45.84}},l.a.createElement(h.a,{span:22},l.a.createElement(s.b,{to:{pathname:"projects/".concat(t.projectId,"/info")},className:"nav-link"},e)),t.fileName&&l.a.createElement(h.a,{span:12},l.a.createElement(p.a,{gutter:10},l.a.createElement(h.a,null,l.a.createElement("a",{href:"".concat(J,"/files/").concat(t.fileName),download:t.fileName,target:"_blank",rel:"noopener noreferrer"},l.a.createElement(fn.a,null),"Certificate")),l.a.createElement(h.a,null,l.a.createElement(lt.a,{title:"Do You Want To Delete Certificate?",onConfirm:function(){return n.OutcomeAction("delete-certificate",t.milestoneId)},okText:"Yes",cancelText:"No"},l.a.createElement(Hn.a,{className:"milestone-delete",disabled:"AP"===t.isApproved||!r.APPROVAL||!0===!t.phase}))))))}},Ea("projectName","string")),Object(tt.a)({title:"Miletsone",dataIndex:"milestoneName",key:"milestoneName",align:"center",render:function(e,t){return l.a.createElement(s.b,{to:{pathname:"projects/".concat(t.projectId,"/milestones/").concat(t.milestoneId,"/resources")},className:"nav-link"},e)}},Ea("milestoneName","string")),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",align:"center",render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",align:"center",render:function(e){return me(e,!0,!0)}},Ea("endDate","date")),Object(tt.a)({title:"Status",dataIndex:"isApproved",key:"isApproved",align:"center",render:function(e){var t=""===e?"CM":e;return l.a.createElement(jl,{text:t})}},Ea("isApproved","string",!0)),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){var r=n.state;r.permissions,r.basic;return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"Export",onClick:function(){return n.setState({printing:!0,sMile:t.milestoneId,sIndex:a})}},"Export"),l.a.createElement(b.a.Item,{key:"Upload",disabled:"SB"!==t.isApproved||!0===!t.phase,onClick:function(){return n.setState({infoModal:!0,sMile:t.milestoneId,sIndex:a})}},"Upload"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=(t.desc,t.infoModal),n=t.data,r=t.sMile,o=t.permissions,i=t.loading,s=t.columns,c=t.fileList,u=t.printing,d=t.PROJECTS,m=t.sTMilestones;return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(Ye.a.Title,{level:4},"Milestone Approval")),l.a.createElement(h.a,{offset:5},l.a.createElement(vt.a,{placeholder:"Select Project",style:{width:300},allowClear:!0,options:d,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onChange:function(t,a){e.getProjects(t)}}))),l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.milestoneId},rowSelection:{selectedRowKeys:m.keys,onChange:function(t,a){e.milestoneSelect(t,a)},getCheckboxProps:function(e){return{disabled:!o.UNAPPROVAL&&"AP"===e.isApproved||!1===e.phase}}},columns:s,dataSource:n,size:"small",className:"fs-small"}),l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",disabled:!o.UPDATE||m.keys.length<1||m.cantSubmit,onClick:function(){return e.multiAction("Submit")}},"Submit")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"success",disabled:!o.APPROVAL||m.keys.length<1||m.cantApprove,onClick:function(){return e.multiAction("approve")}},"Approve")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"not-success",disabled:!o.UNAPPROVAL||m.keys.length<1||m.cantUnapprove,onClick:function(){return e.multiAction("unapprove")}},"Unapprove"))),l.a.createElement(ta.a,{title:"Upload Certifiate",maskClosable:!1,centered:!0,visible:a,onOk:this.uploading,okButtonProps:{disabled:0===c.length},okText:"Upload",onCancel:function(){return e.setState({infoModal:!1,sMile:!1,sIndex:!1,loading:!1,fileList:[]})},width:540,confirmLoading:i,destroyOnClose:!0},l.a.createElement("div",null,l.a.createElement(mt.a.Dragger,{name:"file",multiple:!1,maxCount:1,listType:"picture",className:"upload-list-inline",customRequest:this.handleUpload,onRemove:function(){return e.setState({fileList:[]})},fileList:c},l.a.createElement(mn.a,{image:c.length>0?mn.a.PRESENTED_IMAGE_DEFAULT:mn.a.PRESENTED_IMAGE_SIMPLE,description:l.a.createElement("p",{className:"import-empty"},"Click or drag file to this area to upload")})))),u&&l.a.createElement(cs,{mileId:r,close:function(){return e.setState({printing:!1,sMile:!1})}}))}}]),a}(n.Component)),ds=a(202),ms=a(603),fs=a(607),ps=(a(551),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getListData=function(e){var t;switch(e.date()){case 8:t=[{type:"warning",content:"This is warning event.",dec:"Description: This is warning event."},{type:"success",content:"This is usual event.",dec:"Description: This is warning event."}];break;case 10:t=[{type:"warning",content:"This is warning event.",dec:"Description: This is warning event."},{type:"success",content:"This is usual event.",dec:"Description: This is usual event."},{type:"error",content:"This is error event.",dec:"Description: TThis is error event."}];break;case 15:t=[{type:"warning",content:"This is warning event",dec:"Description: TThis is error event."},{type:"success",content:"This is very long usual event\u3002\u3002....",dec:"ou can\u2019t write good content for a website without knowing why you\u2019re writing it.Is the website content selling a product? Is it meant to attract new clients? Is it building traffic to support advertising and sponsorships? Once you know the main goal of the website content you\u2019re producing, you\u2019ll be better positioned to write copy that will help achieve that goal.But before you even write one word of content for a website, know who you\u2019re writing it for."},{type:"error",content:"This is error event 1.",dec:"Description: This is error event 1."},{type:"error",content:"This is error event 2.",dec:"Description: This is error event 2."},{type:"error",content:"This is error event 3.",dec:"Description: TThis is error event 3."},{type:"error",content:"This is error event 4.",dec:"Description: TThis is error event 4."}]}return t||[]},e.popover=function(e){return l.a.createElement("div",null,l.a.createElement("p",null,l.a.createElement("b",null,"Detail: "),e.content),l.a.createElement("p",null,l.a.createElement("b",null,"Description: "),e.dec))},e.dateCellRender=function(t){var a=e.getListData(t);return l.a.createElement("ul",{className:"events"},a.map((function(t){return l.a.createElement("li",{key:t.content},l.a.createElement(ds.a,{content:e.popover(t),title:t.type},l.a.createElement("span",null,l.a.createElement(ms.a,{status:t.type,text:t.content}))))})))},e.getMonthData=function(e){if(8===e.month())return 1394},e.monthCellRender=function(t){var a=e.getMonthData(t);return a?l.a.createElement("div",{className:"notes-month"},l.a.createElement("section",null,a),l.a.createElement("span",null,"Backlog number")):null},e}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement(fs.a,{dateCellRender:this.dateCellRender,monthCellRender:this.monthCellRender})}}]),a}(n.Component));function hs(){hs=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var ys="".concat(J,"/auth"),vs=function(e){return it.a.post("".concat(J,"/login"),e).then((function(e){localStorage.clear();var t=e.data,a=t.success,n=t.data,l=t.message;if(a){$.b.success({content:l,key:"logout"},5);var r={};n.role.permissions.map((function(e){r[e.resource]||(r[e.resource]={}),r[e.resource][e.action]||(r[e.resource][e.action]={}),r[e.resource][e.action][e.grant]=!0})),n.permissions=JSON.stringify(r),delete n.role.permissions,n.role=JSON.stringify(n.role);for(var o=Object.keys(n),i=o.length-1;i>=0;i--){var s=o[i];localStorage.setItem(s,n[s])}return{success:a,data:n}}$.b.error({content:l,key:"logout"},5)})).catch((function(e){return $.b.error({content:e.message,key:"logout"},5),{error:"Please login again!",status:!1,message:e.message}}))},gs=function(){var e=Object(dn.a)(hs().mark((function e(t){return hs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",it.a.post("".concat(J,"/forgotPassword"),t).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(a)return $.b.success({content:l,key:"logout"},5),{success:a,data:n}})).catch((function(e){return $.b.error({content:e.message,key:"logout"},5),{error:"Something went wrong!",status:!1,message:e.message}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bs=function(){var e=Object(dn.a)(hs().mark((function e(t,a){return hs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",it.a.post("".concat(J,"/resetPassword/").concat(t),a).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(a)return $.b.success({content:l,key:"logout"},5),{success:a,data:n}})).catch((function(e){var t;return $.b.error({content:null!==(t=e.response.data.message)&&void 0!==t?t:e.message,key:"logout"},5),{error:"Something went wrong!",status:!1,message:e.message}})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Es=function(){var e=localStorage.getItem("accessToken"),t=localStorage.getItem("jwtExpired");return e&&t?"jwtExpired":!!e},ks=function(e){var t=nt.a.useForm(),a=Object(G.a)(t,1)[0],r=Object(n.useState)(!0),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)([{fieldCol:12,size:"small",Placeholder:"Contact person Code",rangeMin:!0,type:"Text",labelAlign:"left"},{Placeholder:"Date Of Birth",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:12,key:"cpCode",size:"small",readOnly:!0,rules:[{required:!0,message:"Select Contact Person !!"}],type:"Input",labelAlign:"left",itemStyle:{marginBottom:20}},{object:"basic",disabled:!0,fieldCol:12,key:"dateOfBirth",size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:20}},{fieldCol:12,size:"small",Placeholder:"First Name",disabled:!1,type:"Text",labelAlign:"left"},{Placeholder:"Last Name",fieldCol:12,size:"small",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",readOnly:!0,fieldCol:12,key:"firstName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:20}},{object:"basic",readOnly:!0,fieldCol:12,key:"lastName",size:"small",type:"Input",labelAlign:"left",disabled:!1,itemStyle:{marginBottom:20}},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{fieldCol:12,size:"small",Placeholder:"Email",disabled:!1,type:"Text",labelAlign:"left"},{object:"basic",readOnly:!0,fieldCol:12,key:"phoneNumber",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"basic",readOnly:!0,fieldCol:12,key:"email",size:"small",type:"Input",disabled:!1,itemStyle:{marginBottom:20}},{Placeholder:"Gender",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"State For Payroll Tax Purpose",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"basic",readOnly:!0,fieldCol:12,key:"gender",size:"small",data:[{label:"Male",value:"M"},{label:"Female",value:"F"},{label:"Other",value:"O"}],itemStyle:{marginBottom:20},type:"Select",disabled:!0},{object:"basic",readOnly:!0,fieldCol:12,key:"stateId",size:"small",type:"Select",disabled:!0,data:[],itemStyle:{marginBottom:20}},{Placeholder:"Address",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"basic",fieldCol:24,key:"address",size:"small",type:"Input",itemStyle:{marginBottom:30},onChange:function(){s(!1)}}]),u=Object(G.a)(c,2),d=u[0],m=u[1];Object(n.useEffect)((function(){f(),a.setFieldsValue({basic:e.data})}),[]);var f=function(){At().then((function(e){if(e.success){var t=d.map((function(t){return"stateId"===t.key?Object(tt.a)(Object(tt.a)({},t),{},{data:e.data}):t}));m(t)}}))};return l.a.createElement(nt.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20},onFinish:function(e){var t,a=e.basic;(t={address:a.address},it.a.patch("".concat(ys,"/address"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:"logout"}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&s(!0)}))}},l.a.createElement(Rt,{FormFields:d}),l.a.createElement(rt.a,{type:"primary",disabled:i,htmlType:"submit",style:{margin:"0 15px 0 auto"}}," Edit Address "))},Ss=function(e){var t=e.data,a=t.contracts,n=t.activeContractId,r=[Object(tt.a)({title:"Code",dataIndex:"id",key:"id",wdith:115,render:function(e){return"00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"Start Date",dataIndex:"startDate",key:"startDate",render:function(e){return e&&me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({title:"End Date",dataIndex:"endDate",key:"endDate",render:function(e){return e&&me(e,!0,!0)}},Ea("endDate","date")),{title:"Employment Type",dataIndex:"type",key:"type",render:function(e){return ne[e]}},Object(tt.a)({title:"Base Remuneration",dataIndex:"remunerationAmount",key:"remunerationAmount",render:function(e){return"".concat(ce(e))}},Ea("remunerationAmount","number"))];return l.a.createElement(ea.a,{bordered:!0,pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:r,onRow:function(e){return{className:e.id===n&&"active-contract"}},dataSource:a,size:"small",className:"fs-small contract-table",expandable:{defaultExpandedRowKeys:[n],expandedRowRender:function(e){return l.a.createElement(Cs,{data:e,key:e.id})}}})};function Cs(e){var t,a=e.data,r=nt.a.useForm(),o=Object(G.a)(r,1)[0],i=Object(n.useState)(null!==(t=a.file)&&void 0!==t?t:[]),s=Object(G.a)(i,2),c=s[0],u=(s[1],Object(n.useState)([{Placeholder:"Employment Status",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Back Office Rate of Effort",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Payslip Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,disabled:!0,key:"type",size:"small",data:[{label:"Casual",value:1},{label:"Part Time",value:2},{label:"Full Time",value:3}],type:"Select",itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"bohPercent",disabled:!0,size:"small",shape:"%",type:"InputNumber",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"payslipEmail",disabled:!0,size:"small",type:"input",itemStyle:{marginBottom:1}},{Placeholder:"Work Hours In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Work Days In A Week",rangeMin:!0,fieldCol:6,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Contract Start Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:6,key:"noOfHours",disabled:!0,size:"small",type:"InputNumber",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1}},{object:"billing",fieldCol:6,key:"noOfDays",disabled:!0,size:"small",type:"InputNumber",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"billing",fieldCol:12,key:"startDate",disabled:!0,size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1}},{Placeholder:"Contract End Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Annual Base Salary",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"endDate",disabled:!0,size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"remunerationAmount",disabled:!0,size:"small",type:"InputNumber",shape:"$",fieldStyle:{width:"100%"},itemStyle:{marginBottom:1}},{Placeholder:"Pay Frequence",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Leave Policy",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:12,key:"payFrequency",disabled:!0,size:"small",data:[{label:"Hourly",value:1},{label:"Daily",value:2},{label:"Weekly",value:3},{label:"Fortnightly",value:4},{label:"Monthly",value:5}],type:"Select",itemStyle:{marginBottom:1}},{object:"billing",fieldCol:12,key:"leaveRequestPolicyId",disabled:!0,size:"small",data:[],type:"Select",itemStyle:{marginBottom:10}},{Placeholder:"Comments",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"billing",fieldCol:24,key:"comments",disabled:!0,size:"small",type:"Textarea",itemStyle:{marginBottom:1}}])),d=Object(G.a)(u,2),m=d[0],f=d[1];Object(n.useEffect)((function(){o.setFieldsValue({billing:a}),p()}),[]);var p=function(){$t().then((function(e){if(e.success){var t=m,n=a.type;t[19].data=e.data,t[13].Placeholder=1===n?"Hourly Base Salary":"Annual Base Salary",f(Object(et.a)(t))}}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a,{id:"my-form",form:o,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(Rt,{FormFields:m}),l.a.createElement("p",{style:{marginTop:10,marginBottom:2}},"Signed Contract"),l.a.createElement(mt.a,{listType:"picture-card",maxCount:1,fileList:c},c.length<1&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))))}var js=ht.a.Password,Os=Ye.a.Title,xs=function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),r=a[0],o=a[1];return l.a.createElement(p.a,{style:{padding:50,paddingTop:20}},l.a.createElement(h.a,{span:6},l.a.createElement(Os,{level:2},"Password"),l.a.createElement(Os,{level:5},"After a successful password update, you will be redirected to the login page where you can log in with your new password.")),l.a.createElement(h.a,{span:12},l.a.createElement(nt.a,{id:"sdsda",scrollToFirstError:!0,size:"small",layout:"vertical",wrapperCol:{span:16},onFinish:function(e){var t;console.log(e),(t=e,it.a.patch("".concat(ys,"/password"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:"logout"},5),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){var t,a=null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.message;return $.b.error({content:a||e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&(localStorage.clear(),o(!0))}))}},l.a.createElement(nt.a.Item,{name:"oldPassword",label:"Current Password",rules:[{required:!0,message:"Please input your current password!"}]},l.a.createElement(js,{autoComplete:"new-password"})),l.a.createElement(nt.a.Item,{name:"newPassword",label:"New Password",rules:[{required:!0,message:"Please input your New password!"},{min:6,message:"New Password Should have atleast 6 Character"}],hasFeedback:!0},l.a.createElement(js,{autoComplete:"new-password"})),l.a.createElement(nt.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("newPassword")!==a?Promise.reject(new Error("Passwords do not match!")):Promise.resolve()}}}]},l.a.createElement(js,{autoComplete:"new-password"})),l.a.createElement(nt.a.Item,null,l.a.createElement(rt.a,{type:"primary",htmlType:"submit"}," Reset Password ")))),r&&l.a.createElement(i.a,{to:{pathname:"/"}}))};function ws(){ws=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Is=function(e){var t=nt.a.useForm(),a=Object(G.a)(t,1)[0],r=Object(n.useState)({detailFile:[],detailFile_loading:!1,bankFile:[],bankFile_loading:!1,tfnFile:[],tfnFile_loading:!1}),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)([{Placeholder:"Superannuation",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Superannuation Fund/ SMSF Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Account type",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationName",size:"small",type:"Input",itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationType",size:"small",data:[{label:"Public",value:"P"},{label:"SMSF",value:"S"}],type:"Select",itemStyle:{marginBottom:20},onChange:function(e){j(e)}}]),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)([{Placeholder:"Next Of Kin",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Phone",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinName",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"kin",fieldCol:12,key:"nextOfKinPhoneNumber",size:"small",type:"input",itemStyle:{marginBottom:20}},{Placeholder:"Email",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Relationship to Employee",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"kin",fieldCol:12,key:"nextOfKinEmail",size:"small",type:"input",itemStyle:{marginBottom:20}},{object:"kin",fieldCol:12,key:"nextOfKinRelation",size:"small",data:[{label:"Spouse",value:"Spouse"},{label:"Partner",value:"Partner"},{label:"Sibling",value:"Sibling"},{label:"Parent",value:"Parent"},{label:"Child",value:"Child"},{label:"Friend",value:"Friend"}],type:"Select"}]),p=Object(G.a)(f,2),y=p[0],v=(p[1],Object(n.useState)([{Placeholder:"Banking/Tax Details",fieldCol:24,size:"small",type:"Title",mode:3,labelAlign:"right"},{Placeholder:"Bank Account Name",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Bank Account Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankName",size:"small",type:"Input",onChange:function(e){O(e)},itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"bankAccountNo",size:"small",type:"Input",onChange:function(e){O(e)},itemStyle:{marginBottom:20}},{Placeholder:"BSB Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Tax File Number",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"bankBsb",size:"small",type:"Input",onChange:function(e){O(e)},itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"tfn",size:"small",type:"Input",onChange:function(e){O(e)},itemStyle:{marginBottom:20}},{Placeholder:"Tax-free Threshold",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"HELP (HECS)",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"bank",fieldCol:12,key:"taxFreeThreshold",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:20}},{object:"bank",fieldCol:12,key:"helpHECS",size:"small",data:[{label:"Yes",value:!0},{label:"No",value:!1}],type:"Select",itemStyle:{marginBottom:20}}])),g=Object(G.a)(v,2),b=g[0],E=g[1],k=Object(n.useState)({}),S=Object(G.a)(k,2),C=(S[0],S[1]);Object(n.useEffect)((function(){var t=e.data,n=t.train,l=t.bank,r=t.kin,o=t.detail,i=t.tfn;console.log(i),a.setFieldsValue({train:n,bank:l,kin:r,detail:o}),j(),O(),s({detailFile:o.file,detailFile_loading:!1,bankFile:l.file,bankFile_loading:!1,tfnFile:i.file,tfnFile_loading:!1})}),[]);var j=function(e){var t=a.getFieldsValue().detail,n=t.superAnnuationName,l=t.superannuationType,r=d;"P"===l?(r.splice(5,r.length),r=r.concat([{Placeholder:"Membership / Account",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"USI Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Membership / Account is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"USI Number is required"}],itemStyle:{marginBottom:20}}])):"S"===l?(r.splice(5,r.length),r=r.concat([{Placeholder:"SMSF ABN",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"ESA Address",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationAbnOrUsi",size:"small",type:"Input",rules:[{required:!0,message:"SMSF ABN is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationAddress",size:"small",type:"Input",rules:[{required:!0,message:"ESA Address is required"}],itemStyle:{marginBottom:20}},{Placeholder:"Bank Account Name",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"BSB Number",rangeMin:!0,fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankName",size:"small",type:"Input",rules:[{required:!0,message:"Account Name is required"}],itemStyle:{marginBottom:20}},{object:"detail",fieldCol:12,key:"superannuationBankBsb",size:"small",type:"Input",rules:[{required:!0,message:"BSB Number is required"}],itemStyle:{marginBottom:20}},{Placeholder:"Bank Account Number",rangeMin:!0,fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"detail",fieldCol:12,key:"superannuationBankAccountOrMembershipNumber",size:"small",type:"Input",rules:[{required:!0,message:"Account Number is required"}],itemStyle:{marginBottom:"20px"}}])):r.splice(5,r.length);var o={superAnnuationName:n,superannuationType:l};a.setFieldsValue({detail:o}),m(r)},O=function(){var e=JSON.parse(pe().permissions).PROFILE,t=a.getFieldsValue().bank,n=t.bankAccountNo,l=t.bankBsb,r=t.bankName,o=t.tfn,i=b;n||l||r||o?(i[1].rangeMin=!0,i[2].rangeMin=!0,i[5].rangeMin=!0,i[6].rangeMin=!0,i[3].rules=[{required:!0,message:"Account Name is required"}],i[4].rules=[{required:!0,message:"Account Number is required"}],i[7].rules=[{required:!0,message:"BSB Number is required"}],i[8].rules=[{required:!0,message:"Tax File Number is required"}]):(i[1].rangeMin=!1,i[2].rangeMin=!1,i[5].rangeMin=!1,i[6].rangeMin=!1,i[3].rules=[{required:!1,message:""}],i[4].rules=[{required:!1,message:""}],i[7].rules=[{required:!1,message:""}],i[8].rules=[{required:!1,message:""}]),E(Object(et.a)(i)),C(e)},x=function(){var e=Object(dn.a)(ws().mark((function e(t,a){var n,l,r,o,i;return ws().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.onSuccess,l=t.onError,r=t.file,t.onProgress,s((function(e){return Object(tt.a)(Object(tt.a)({},e),{},Object(at.a)({},"".concat(a,"_loading"),!0))})),"pdf"===(o=r.name.split("."))[o.length-1]?(i=new FormData,{headers:{"content-type":"multipart/form-data"}},i.append("files",r),Wn(i).then((function(e,t){if(e.success)n("Ok"),s((function(t){var n;return Object(tt.a)(Object(tt.a)({},t),{},(n={},Object(at.a)(n,a,[e.file]),Object(at.a)(n,"".concat(a,"_loading"),!1),n))}));else{console.log("Eroor: ",t);var r=new Error("Some error");s((function(e){return Object(tt.a)(Object(tt.a)({},e),{},Object(at.a)({},"".concat(a,"_loading"),!1))})),l({error:r})}}))):($.b.error({content:"Only Pdfs Files Are Allowed ",key:1}),s((function(e){return Object(tt.a)(Object(tt.a)({},e),{},Object(at.a)({},"".concat(a,"_loading"),!1))})));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),w=function(e){s((function(t){return Object(tt.a)(Object(tt.a)({},t),{},Object(at.a)({},e,[]))}))};return l.a.createElement(nt.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20},onFinish:function(e){var t,a,n,l,r,o,s,c,u,d,m=Object(tt.a)(Object(tt.a)(Object(tt.a)(Object(tt.a)({},e.detail),e.kin),e.bank),{},{superannuationFileId:null!==(t=null===(a=i.detailFile)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.fileId)&&void 0!==t?t:null,bankAccountFileId:null!==(l=null===(r=i.bankFile)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.fileId)&&void 0!==l?l:null,tfnFileId:null!==(s=null===(c=i.tfnFile)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.fileId)&&void 0!==s?s:null});(d=m,it.a.patch("".concat(ys,"/settings"),d,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:"logout"}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success}))}},l.a.createElement(Rt,{FormFields:d}),l.a.createElement(h.a,{span:12,style:{marginBottom:20}},l.a.createElement("p",{style:{marginBottom:2}},"Superannuation Form"),l.a.createElement(mt.a,{customRequest:function(e){return x(e,"detailFile")},listType:"text",maxCount:1,name:"super form",fileList:i.detailFile,onRemove:function(){return w("detailFile")}},i.detailFile.length<1&&l.a.createElement(rt.a,{icon:l.a.createElement(ol.a,null),loading:i.detailFile_loading},"Upload Superannuation"))),l.a.createElement(Rt,{FormFields:y}),l.a.createElement(Rt,{FormFields:b}),l.a.createElement(h.a,{span:12,style:{marginBottom:10}},l.a.createElement("p",{style:{marginBottom:2}},"Bank Details"),l.a.createElement(mt.a,{customRequest:function(e){return x(e,"bankFile")},listType:"text",maxCount:1,fileList:i.bankFile,name:"TFN Declaration",onRemove:function(){return w("bankFile")}},i.bankFile.length<1&&l.a.createElement(rt.a,{icon:l.a.createElement(ol.a,null),loading:i.bankFile_loading},"Upload Bank Details"))),l.a.createElement(h.a,{span:12,style:{marginBottom:10}},l.a.createElement("p",{style:{marginBottom:2}},"TFN Declaration"),l.a.createElement(mt.a,{customRequest:function(e){return x(e,"tfnFile")},listType:"text",maxCount:1,fileList:i.tfnFile,name:"TFN Declaration",onRemove:function(){return w("tfnFile")}},i.tfnFile.length<1&&l.a.createElement(rt.a,{icon:l.a.createElement(ol.a,null),loading:i.tfnFile_loading},"Upload TFN Declaration"))),l.a.createElement(h.a,{span:24,style:{padding:20}},l.a.createElement(rt.a,{htmlType:"submit",type:"primary",size:"middle",style:{float:"right"}},"Save")))},Ds=function(e){var t=nt.a.useForm(),a=Object(G.a)(t,1)[0],r=Object(n.useState)([{Placeholder:"Clearance Level",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Date Granted",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"security",fieldCol:12,key:"clearanceLevel",disabled:!0,size:"small",data:[{label:"BV - Baseline Vetting",value:"BV"},{label:"NV1 - Negative Vetting 1",value:"NV1"},{label:"NV2 - Negative Vetting 2",value:"NV2"},{label:"PV - Positive Vetting",value:"PV"},{label:"No clearance",value:"NC"}],type:"Select",itemStyle:{marginBottom:10}},{object:"security",fieldCol:12,key:"clearanceGrantedDate",disabled:!0,size:"small",type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{Placeholder:"Expiry Date",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{Placeholder:"Current Sponsor",fieldCol:12,size:"small",type:"Text",labelAlign:"right"},{object:"security",fieldCol:12,key:"clearanceExpiryDate",size:"small",disabled:!0,type:"DatePicker",fieldStyle:{width:"100%"},itemStyle:{marginBottom:10}},{object:"security",fieldCol:12,key:"clearanceSponsorId",disabled:!0,size:"small",type:"Select",labelAlign:"right",itemStyle:{marginBottom:10}},{Placeholder:"Clearance Subject ID",fieldCol:24,size:"small",type:"Text",labelAlign:"right"},{object:"security",fieldCol:12,key:"csidNumber",disabled:!0,size:"small",type:"Input",labelAlign:"right",itemStyle:{marginBottom:10}}]),o=Object(G.a)(r,2),i=o[0],s=o[1];return Object(n.useEffect)((function(){_t().then((function(e){if(e.success){var t=Object(et.a)(i);t[7].data=e.data,s(Object(et.a)(t))}})),a.setFieldsValue({security:e.data})}),[]),l.a.createElement(nt.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",style:{padding:50,paddingTop:20}},l.a.createElement(Rt,{FormFields:i}))},Ps=function(e){var t=nt.a.useForm(),a=Object(G.a)(t,1)[0],r=Object(n.useState)([]),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)({}),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)({}),p=Object(G.a)(f,2),y=p[0],v=p[1],g=Object(n.useState)(0),b=Object(G.a)(g,2),E=b[0],k=b[1],S=Object(n.useState)(!0),C=Object(G.a)(S,2),j=C[0],O=C[1];Object(n.useEffect)((function(){zt().then((function(t){if(t.success){s(t.data);var n={};t.data.forEach((function(e){n[e.value]=null===e||void 0===e?void 0:e.levels})),m(n),k(e.data.length),a.setFieldsValue({resource:e.data})}}))}),[]);var x=function(e){if(!isNaN(e)){var t,n=a.getFieldsValue().resource,l=null===n||void 0===n||null===(t=n[e])||void 0===t?void 0:t.standardSkillId;return isNaN(l)?[]:d[l]}return[]};return l.a.createElement(nt.a,{id:"my-form",form:a,scrollToFirstError:!0,size:"small",layout:"inline",onFieldsChange:function(){return O(!1)},style:{padding:50,paddingTop:20,textAlign:"center"},onFinish:function(e){var t,a,n=null!==(t=null===e||void 0===e?void 0:e.resource)&&void 0!==t?t:{},l=[];Object.entries(n).forEach((function(e){var t=Object(G.a)(e,2),a=(t[0],t[1]);!a.standardLevelId&&a.id&&l.push(a.id)})),(a={standardSkillStandardLevelIds:l},it.a.post("".concat(ys,"/addSkill"),a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:"logout"}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success&&(k(e.data.length),O(!0))}))}},l.a.createElement(nt.a.List,{name:"resource"},(function(e,t){var a=t.add,n=t.remove;return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt.a.Item,{style:{margin:"0px 20px 10px auto"}},l.a.createElement(rt.a,{size:"small",onClick:function(){return a()},type:"primary"}," ",l.a.createElement(Cr.a,null)," Insert Skill")),e.map((function(e,t){return l.a.createElement("span",{className:"ant-row",key:e.key,style:{width:"100%",marginBottom:10}},l.a.createElement(h.a,{span:11},l.a.createElement(nt.a.Item,Object.assign({},e,{label:"Standard Skill",name:[e.name,"standardSkillId"]}),l.a.createElement(vt.a,{style:{width:"100%"},size:"small",options:i,onChange:function(){return v(!y)},disabled:e.name<E}))),l.a.createElement(h.a,{span:11},l.a.createElement(nt.a.Item,Object.assign({},e,{label:"Standard Level",name:[e.name,"id"]}),l.a.createElement(vt.a,{style:{width:"100%"},size:"small",disabled:e.name<E,options:x(e.name)}))),l.a.createElement(h.a,{span:"auto"},l.a.createElement(Ma.a,{style:{color:"".concat(e.name<E?"grey":"red"),margin:"auto"},onClick:function(){e.name>E-1&&n(e.name)}})))})),l.a.createElement(nt.a.Item,{style:{marginTop:8}},l.a.createElement(rt.a,{size:"small",type:"primary",htmlType:"submit",disabled:j}," Save  ")))})))},Ts=In.a.TabPane,Ns=function(){var e=Object(n.useState)(!1),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(!1),d=Object(G.a)(u,2),m=d[0],f=d[1],p=Object(n.useState)(!1),h=Object(G.a)(p,2),y=h[0],v=h[1],g=Object(n.useState)(!1),b=Object(G.a)(g,2),E=b[0],k=b[1],S=JSON.parse(pe().role).type;Object(n.useEffect)((function(){C()}),[]);var C=function(){it.a.get("".concat(ys,"/settings"),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;if(he(l),a){var r,o,i,s,c,u=n.contactPersonOrganization?n.contactPersonOrganization.contactPerson:{},d={cpCode:"Emp-00".concat(u.id),firstName:u.firstName,lastName:u.lastName,gender:u.gender,dateOfBirth:me(u.dateOfBirth),phoneNumber:u.phoneNumber,email:u.email,address:u.address,stateId:u.stateId,username:n.username},m={superannuationName:n.superannuationName,superannuationBankName:n.superannuationBankName,superannuationBankAccountOrMembershipNumber:n.superannuationBankAccountOrMembershipNumber,superannuationAbnOrUsi:n.superannuationAbnOrUsi,superannuationBankBsb:n.superannuationBankBsb,superannuationAddress:n.superannuationAddress,superannuationType:n.superannuationType,superannuationFileId:n.superannuationFileId,file:(null===n||void 0===n||null===(r=n.superannuationFile)||void 0===r?void 0:r.id)?[{id:n.superannuationFile.id,createdAt:n.superannuationFile.createdAt,fileId:n.superannuationFile.id,uid:n.superannuationFile.uniqueName,name:n.superannuationFile.originalName,type:n.superannuationFile.type,url:"".concat(J,"/files/").concat(n.superannuationFile.uniqueName),thumbUrl:ve(n.superannuationFile.type)}]:[]},f={tfnFileId:n.tfnFileId,file:(null===n||void 0===n||null===(o=n.tfnFile)||void 0===o?void 0:o.id)?[{id:n.tfnFile.id,createdAt:n.tfnFile.createdAt,fileId:n.tfnFile.id,uid:n.tfnFile.uniqueName,name:n.tfnFile.originalName,type:n.tfnFile.type,url:"".concat(J,"/files/").concat(n.tfnFile.uniqueName),thumbUrl:ve(n.tfnFile.type)}]:[]},p={nextOfKinDateOfBirth:me(n.nextOfKinDateOfBirth),nextOfKinEmail:n.nextOfKinEmail,nextOfKinGender:n.nextOfKinGender,nextOfKinName:n.nextOfKinName,nextOfKinPhoneNumber:n.nextOfKinPhoneNumber,nextOfKinRelation:n.nextOfKinRelation},h=n.bankAccounts.length>0?n.bankAccounts[0]:{},y={bankName:h.name,bankAccountNo:h.accountNo,bankBsb:h.bsb,tfn:n.tfn,taxFreeThreshold:n.taxFreeThreshold,helpHECS:n.helpHECS,bankAccountFileId:h.fileId,file:(null===h||void 0===h||null===(i=h.file)||void 0===i?void 0:i.id)?[{id:h.file.id,createdAt:h.file.createdAt,fileId:h.file.id,uid:h.file.uniqueName,name:h.file.originalName,type:h.file.type,url:"".concat(J,"/files/").concat(h.file.uniqueName),thumbUrl:ve(h.file.type)}]:[]},v="NAC",g=(null!==(s=n.employmentContracts)&&void 0!==s?s:[]).map((function(e,t){var a;return"NAC"===v&&(v=null==e.endDate||me(e.startDate)<=me(K()())&&me(e.endDate)>=me(K()())?e.id:"NAC"),Object(tt.a)(Object(tt.a)({},e),{},{startDate:me(null===e||void 0===e?void 0:e.startDate),endDate:me(null===e||void 0===e?void 0:e.endDate),file:(null===(a=e.file)||void 0===a?void 0:a.id)?[{id:e.file.id,createdAt:e.file.createdAt,fileId:e.file.id,uid:e.file.uniqueName,name:e.file.originalName,type:e.file.type,url:"".concat(J,"/files/").concat(e.file.uniqueName),thumbUrl:ve(e.file.type)}]:[]})})),b={clearanceLevel:u.clearanceLevel,clearanceGrantedDate:me(u.clearanceGrantedDate),clearanceExpiryDate:me(u.clearanceExpiryDate),clearanceSponsorId:u.clearanceSponsorId,csidNumber:u.csidNumber},E=u.standardSkillStandardLevels;return fe(null===e||void 0===e||null===(c=e.headers)||void 0===c?void 0:c.authorization),{success:a,data:n,basic:d,detail:m,tfn:f,kin:p,bank:y,billing:{contracts:g,activeContractId:v},sClearance:b,resourceSkill:E}}return{success:a}})).catch((function(e){return console.log("err",e),{error:"Please login again!",status:!1,message:e.message}})).then((function(e){e&&e.success&&(r(e.basic),c(e.billing),f({kin:e.kin,detail:e.detail,bank:e.bank,tfn:e.tfn}),v(e.sClearance),k(e.resourceSkill)),console.log(e.billing)}))};return l.a.createElement(In.a,{type:"card",defaultActiveKey:"personal"},l.a.createElement(Ts,{tab:"Personal Details",key:"personal"},a&&l.a.createElement(ks,{data:a})),"Employee"===S&&l.a.createElement(Ts,{tab:"Contract",key:"contract"},s&&l.a.createElement(Ss,{data:s})),l.a.createElement(Ts,{tab:"Other Details",key:"others"}," ",m&&l.a.createElement(Is,{data:m})," "),l.a.createElement(Ts,{tab:"Security Clearance",key:"security"}," ",m&&l.a.createElement(Ds,{data:y})," "),l.a.createElement(Ts,{tab:"Password",key:"password "}," ",l.a.createElement(xs,null)," "),l.a.createElement(Ts,{tab:"Skills",key:"skills"}," ",l.a.createElement(Ps,{data:E})," "),l.a.createElement(Ts,{tab:"Attachments",key:"attachments"}," ",l.a.createElement(sl,{targetType:"emp",targetId:pe().id})," "))},Rs=Ye.a.Title,As=function(){var e=nt.a.useForm(),t=Object(G.a)(e,1)[0];Object(n.useEffect)((function(){it.a.get("".concat(J,"/auth/training"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}})).then((function(e){e.success&&t.setFieldsValue({notes:e.data})}))}),[]);return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:"24"},l.a.createElement(Rs,{level:3},"Training")),l.a.createElement(h.a,{span:"24"},l.a.createElement(nt.a,{id:"my-form",onFinish:function(e){var t;(t={training:e.notes},it.a.patch("".concat(J,"/auth/training"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),$.b.success({content:r,key:"logout"}),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return $.b.error({content:e.message,key:"logout"}),{error:"Please login again!",status:!1,message:e.message}}))).then((function(e){e.success}))},form:t},l.a.createElement(nt.a.Item,{noStyle:!0,name:"notes"},l.a.createElement(ht.a.TextArea,{placeholder:"Enter Your Notes....",autoSize:{minRows:10,maxRows:20},allowClear:!0})),l.a.createElement(rt.a,{type:"primary",htmlType:"submit",style:{margin:"10px 15px 0px 0px"}}," Submit "))))},Fs="".concat(J,"/expenses"),zs=function(e,t){return it.a.get("".concat(Fs).concat(e?"/available":"").concat(t?"?sheetId=".concat(t):""),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return he(l),fe(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))};function Ls(){Ls=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Ms=Ye.a.Text,Bs=function(e){var t=e.visible,a=e.close,r=e.callBack,o=["AP","SB"].includes(t.status),i=Object(n.useState)([]),s=Object(G.a)(i,2),c=s[0],u=s[1],d=Object(n.useState)(),m=Object(G.a)(d,2),f=(m[0],m[1]),p=Object(n.useState)({}),h=Object(G.a)(p,2),y=h[0],v=h[1],g=nt.a.useForm(),b=Object(G.a)(g,1)[0],E=Object(n.useState)([{Placeholder:"Expense Type",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"Project",fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"expenseTypeId",disabled:o,size:"small",rules:[{required:!0,message:"type is Required"}],data:[],type:"Select"},{object:"basic",fieldCol:12,key:"projectId",disabled:t.isInSheet,size:"small",initialValue:null,data:[],type:"Select"},{Placeholder:"Date",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"Amount",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{object:"basic",fieldCol:12,key:"date",disabled:o,size:"small",rules:[{required:!0,message:"Date is Required"}],data:[],type:"DatePicker",fieldStyle:{width:"100%"}},{object:"basic",fieldCol:12,key:"amount",disabled:o,size:"small",shape:"$",rules:[{required:!0,message:"Amount is Required"}],type:"InputNumber"},{object:"basic",fieldCol:1,key:"isReimbursed",disabled:o,size:"small",initialValue:!1,type:"Checkbox",valuePropName:"checked",itemStyle:{margin:"10px 0px"}},{Placeholder:"Reimbursable",fieldCol:10,size:"small",type:"Text",itemStyle:{margin:"10px 0px"}},{Placeholder:"Notes",fieldCol:24,size:"small",type:"Text"},{object:"basic",fieldCol:24,key:"notes",initialValue:null,disabled:o,size:"small",type:"Textarea",rows:5,placeholder:"Note"}]),k=Object(G.a)(E,2),S=k[0],C=k[1];Object(n.useEffect)((function(){O(),j(),!0!==t&&(t.date=me(t.date),b.setFieldsValue({basic:t}))}),[]);var j=function(){var e=pe(),t=(e.id,e.permissions),a=void 0===t?"":t,n=JSON.parse(a).EXPENSES;v(void 0===n?{}:n)},O=function(){var e=pe(),a=e.id,n=e.permissions,l=void 0===n?"":n,r=JSON.parse(l).EXPENSES;v(void 0===r?{}:r),Promise.all([Ht(a,"O",0),kn(),!0!==t&&$n("EXP",t.id)]).then((function(e){var t,a=S;a[3].data=e[0].success?e[0].data:[],a[2].data=e[1].success?e[1].data:[],C(Object(et.a)(a)),u((null===(t=e[2])||void 0===t?void 0:t.success)?e[2].fileList:[])}))},x=function(){var e=Object(dn.a)(Ls().mark((function e(t){var a,n,l,r,o;return Ls().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.onSuccess,n=t.onError,l=t.file,r=t.onProgress,o=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);f(t),100===t&&setTimeout((function(){return f(0)}),1e3),r({percent:e.loaded/e.total*100})}},o.append("files",l),Wn(o).then((function(e,t){if(e.success)a("Ok"),u([].concat(Object(et.a)(c),[e.file]));else{console.log("Eroor: ",t);new Error("Some error");n({err:t})}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(ta.a,{title:!0!==t?"Edit Expense":"Add Expense",visible:t,width:650,onCancel:a,okText:"Save",okButtonProps:{htmlType:"submit",form:"my-form",disabled:o||!y.UPDATE||!y.ADD}},l.a.createElement(nt.a,{id:"my-form",form:b,onFinish:function(e){var a,n=e.basic;n=Object(tt.a)(Object(tt.a)({},n),{},{isBillable:!1,projectId:null!==(a=n.projectId)&&void 0!==a?a:null,attachments:c.map((function(e,t){return e.fileId}))}),!0===t?function(e){return console.log("data",e),$.b.loading({content:"Loading...",key:1},5),it.a.post(Fs,e,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return he(n),$.b.success({content:n,key:1},5),fe(e.headers&&e.headers.authorization),{success:a,data:l}})).catch((function(e){return $.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))}(n).then((function(e){e.success?r(e.data):console.log("err",e)})):function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(Fs+"/".concat(e),t,{headers:ye()}).then((function(t){var a=t.data,n=a.success,l=a.message,r=a.data;return he(l),$.b.success({content:l,key:e},5),fe(t.headers&&t.headers.authorization),{success:n,data:r}})).catch((function(t){return ge(t,e,5)}))}(t.id,n).then((function(e){e.success?r(e.data,null===t||void 0===t?void 0:t.index):console.log("err",e)}))},scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(Rt,{FormFields:S}),l.a.createElement(Ms,{style:{marginTop:10,marginBottom:2}},"Attachments"),l.a.createElement(mt.a,{customRequest:x,listType:"picture-card",maxCount:4,fileList:c,onRemove:function(e){var t=c.indexOf(e);c.splice(t,1),u(Object(et.a)(c))},disabled:o},c.length<4&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))))},_s=Ye.a.Text,Ys=Ye.a.Title,Vs=function(e){var t,a=Object(n.useState)(!1),r=Object(G.a)(a,2),o=r[0],i=r[1],s=Object(n.useState)({data:[],filtered:[]}),c=Object(G.a)(s,2),u=c[0],d=c[1],m=Object(n.useState)({}),f=Object(G.a)(m,2),y=f[0],v=f[1],g=[Object(tt.a)({title:"Code",dataIndex:"id",render:function(e){return"00".concat(e)}},Ea("id","number",!0)),Object(tt.a)({title:"Type",dataIndex:"expenseTypeName"},Ea("expenseTypeName","string")),Object(tt.a)({title:"Project",dataIndex:"projectName"},Ea("projectName","string")),Object(tt.a)({title:"Date",dataIndex:"date",render:function(e){return me(e,!0,!0)},align:"center"},Ea("date","date")),Object(tt.a)({title:"Amount",dataIndex:"amount",align:"center",render:function(e){return ce(e)}},Ea("amount","number")),{title:"Files",dataIndex:"attachments",align:"center",render:function(e,t,a){return(null===e||void 0===e?void 0:e.length)?l.a.createElement(ds.a,{title:"Files",destroyTooltipOnHide:!0,overlayStyle:{maxWidth:300},trigger:"hover",content:l.a.createElement("div",null,l.a.createElement(mt.a,{listType:"text",openFileDialogOnClick:!0,maxCount:4,fileList:e.map((function(e){return e.url="".concat(J,"/files/").concat(e.uid),e})),disabled:!0}))},l.a.createElement(_s,{underline:!0,italic:!0},"View")):null}},Object(tt.a)({title:"Reimbursable",dataIndex:"isReimbursed",align:"center",width:"1%",render:function(e){return e&&l.a.createElement(St.a,null)}},Ea("isReimbursed","string")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:t.isInSheet||!(null===y||void 0===y?void 0:y.DELETE),className:"pop-confirm-menu"},l.a.createElement(lt.a,{disabled:t.isInSheet,title:"Are you sure you want to delete ?",onConfirm:function(){return S(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){return i(Object(tt.a)(Object(tt.a)({},t),{},{index:a}))}},"AP"===t.status||"SB"===t.status?"View":"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}];Object(n.useEffect)((function(){E(),k()}),[]);var E=function(){zs().then((function(e){var t,a;(null===e||void 0===e?void 0:e.success)&&d({data:null!==(t=null===e||void 0===e?void 0:e.data)&&void 0!==t?t:[],filtered:null!==(a=null===e||void 0===e?void 0:e.data)&&void 0!==a?a:[]})}))},k=function(){var e=pe(),t=(e.id,e.permissions),a=void 0===t?"":t,n=JSON.parse(a).EXPENSES;v(void 0===n?{}:n)},S=function(t,a){var n=u.data,l=u.filtered,r=e.history;zn(r,"/expenses",t,a,l,n).then((function(e){e.success&&d({filtered:Object(et.a)(e.filterData),data:Object(et.a)(e.data)})}))},C=function(e){e?(e=e.replace(/\s+/g,"").toLowerCase(),d((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{filtered:t.data.filter((function(t){return"00".concat(t.id.toString().replace(/\s+/g,"")).includes(e)||t.expenseTypeName&&t.expenseTypeName.toLowerCase().replace(/\s+/g,"").includes(e)||t.projectName&&t.projectName.toLowerCase().replace(/\s+/g,"").includes(e)||t.amount&&"".concat(ce(t.amount)).toLowerCase().replace(/\s+/g,"").includes(e)||t.date&&"".concat(me(t.date,!0,!0)).toLowerCase().replace(/\s+/g,"").includes(e)}))})}))):d((function(e){return Object(tt.a)(Object(tt.a)({},e),{},{filtered:e.data})}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ys,{level:4},"Expense Lines")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){i(!0)},disabled:!y.ADD},l.a.createElement(na.a,null)," Add Expense")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,C)},size:"small",bordered:!0,className:"fs-small",pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},columns:g,dataSource:null!==(t=null===u||void 0===u?void 0:u.filtered)&&void 0!==t?t:[]}))),o&&l.a.createElement(Bs,{visible:o,close:function(){i(!1)},callBack:function(e,t){var a=u.data,n=u.filtered;if(t>=0){var l=a.findIndex((function(t){return t.id===e.id})),r=n.findIndex((function(t){return t.id===e.id}));a[l]=e,n[r]=e}else a=[].concat(Object(et.a)(a),[e]),n=[].concat(Object(et.a)(n),[e]);d({data:Object(et.a)(a),filtered:Object(et.a)(n)}),i(!1)}}))},qs="".concat(J,"/expense-sheets"),Hs=function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.post("".concat(qs).concat(e),t,{headers:ye()}).then((function(t){var a,n=t.data,l=n.success,r=n.data,o=n.message;return he(o),$.b.success({content:o,key:e}),fe(null===t||void 0===t||null===(a=t.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return ge(e,1,5)}))};function Us(){Us=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Gs=Ye.a.Text,Ws=(Ye.a.Title,function(e){var t=e.visible,a=e.close,r=e.expenses,o=e.callBack,i=e.adminView,s=["AP","SB"].includes(t.status),c=nt.a.useForm(),u=Object(G.a)(c,1)[0],d=Object(n.useState)([]),m=Object(G.a)(d,2),f=m[0],y=m[1],v=Object(n.useState)([]),g=Object(G.a)(v,2),b=g[0],E=g[1],k=Object(n.useState)(),S=Object(G.a)(k,2),C=(S[0],S[1]),j=Object(n.useState)({}),O=Object(G.a)(j,2),x=O[0],w=O[1],I=Object(n.useState)([]),D=Object(G.a)(I,2),P=D[0],T=D[1],N=Object(n.useState)([{Placeholder:"Title",rangeMin:!0,fieldCol:12,size:"small",type:"Text"},{Placeholder:"Project",fieldCol:12,size:"small",type:"Text"},{disabled:i||s,object:"basic",fieldCol:12,key:"label",size:"small",rules:[{required:!0,message:"Title is Required"}],type:"Input"},{disabled:i||s,object:"basic",fieldCol:12,key:i?"projectName":"projectId",size:"small",initialValue:null,data:[],type:i?"Input":"Select",onChange:function(e){M(e)}},{disabled:null===(null===t||void 0===t?void 0:t.projectId),object:"basic",fieldCol:1,key:"isBillable",size:"small",initialValue:void 0,type:"Checkbox",valuePropName:"checked",itemStyle:{marginTop:"10px",display:null!==i&&void 0!==i?i:"none"}},{Placeholder:"Billable",fieldCol:5,size:"small",type:"Text",itemStyle:{marginTop:"10px",display:null!==i&&void 0!==i?i:"none"}}]),R=Object(G.a)(N,2),A=R[0],F=R[1],z=[Object(tt.a)({title:"Code",dataIndex:"id",render:function(e){return"00".concat(e)}},Ea("id","number")),Object(tt.a)({title:"Type",dataIndex:"expenseTypeName"},Ea("expenseTypeName","string")),Object(tt.a)({title:"Date",dataIndex:"date",render:function(e){return me(e,!0,!0)}},Ea("date","date")),Object(tt.a)({title:"Project",dataIndex:"projectName"},Ea("projectName","string")),Object(tt.a)({title:"Amount",dataIndex:"amount",render:function(e){return ce(e)}},Ea("amount","number")),{title:"Files",dataIndex:"attachments",align:"center",render:function(e,t,a){return(null===e||void 0===e?void 0:e.length)?l.a.createElement(ds.a,{title:"Files",destroyTooltipOnHide:!0,overlayStyle:{maxWidth:300},trigger:"hover",content:l.a.createElement("div",null,l.a.createElement(mt.a,{listType:"text",openFileDialogOnClick:!0,maxCount:4,fileList:e.map((function(e){return e.url="".concat(J,"/files/").concat(e.uid),e})),disabled:!0}))},l.a.createElement(Gs,{underline:!0,italic:!0},"View")):null}},{title:"Reimbursable",dataIndex:"isReimbursed",ellipsis:!0,render:function(e){return e&&l.a.createElement(St.a,null)}}];Object(n.useEffect)((function(){!0!==t&&u.setFieldsValue({basic:t}),L()}),[]);var L=function(){var e=pe(),a=e.id,n=e.permissions,l=void 0===n?"":n,r=JSON.parse(l).EXPENSES;w(void 0===r?{}:r),Promise.all([!i&&Ht(a,"O",0),!0!==t&&$n("ESH",t.id)]).then((function(e){var a,n,l=A;l[3].data=(null===(a=e[0])||void 0===a?void 0:a.success)?e[0].data:[],F(Object(et.a)(l)),T((null===(n=e[1])||void 0===n?void 0:n.success)?e[1].fileList:[]),i?(y(null===t||void 0===t?void 0:t.expenseSheetExpenses),E(null===t||void 0===t?void 0:t.expenseSheetExpensesIds)):M(null===t||void 0===t?void 0:t.projectId)}))},M=function(e){var a,n=e,l=null!==(a=null===t||void 0===t?void 0:t.expenseSheetExpensesIds)&&void 0!==a?a:[],o=r;e&&(o=null===r||void 0===r?void 0:r.filter((function(e){return e.projectId==n}))),y(Object(et.a)(o)),E(l)},B={selectedRowKeys:b,onChange:function(e){E(e)},preserveSelectedRowKeys:!1,getCheckboxProps:function(){return{disabled:s}}},_=function(e){(function(e){return $.b.loading({content:"Loading...",key:1},5),it.a.post(qs,e,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.message,l=t.data;return he(n),$.b.success({content:n,key:1},5),fe(e.headers&&e.headers.authorization),{success:a,data:l}})).catch((function(e){return $.b.error({content:"Error!",key:1},5),{error:"Please login again!",status:!1,message:e.message}}))})(e).then((function(e){e.success?o(e.data):console.log("err",e)}))},Y=function(e,a){if(i){var n=u.getFieldsValue().basic;t.isBillable=n.isBillable,function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(qs+"/".concat(e,"/isBillable"),t,{headers:ye()}).then((function(t){var a=t.data,n=a.success,l=a.message,r=a.data;return he(l),$.b.success({content:l,key:e},5),fe(t.headers&&t.headers.authorization),{success:n,data:r}})).catch((function(t){return ge(t,e,5)}))}(t.id,a).then((function(e){e.success?o(t,null===t||void 0===t?void 0:t.index):console.log("err",e)}))}else(function(e,t){return $.b.loading({content:"Loading...",key:e}),it.a.put(qs+"/".concat(e),t,{headers:ye()}).then((function(t){var a=t.data,n=a.success,l=a.message,r=a.data;return he(l),$.b.success({content:l,key:e},5),fe(t.headers&&t.headers.authorization),{success:n,data:r}})).catch((function(t){return ge(t,e,5)}))})(t.id,a).then((function(e){e.success?o(e.data,null===t||void 0===t?void 0:t.index):console.log("err",e)}))},V=function(){var e=Object(dn.a)(Us().mark((function e(t){var a,n,l,r,o;return Us().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.onSuccess,n=t.onError,l=t.file,r=t.onProgress,o=new FormData,{headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){var t=Math.floor(e.loaded/e.total*100);C(t),100===t&&setTimeout((function(){return C(0)}),1e3),r({percent:e.loaded/e.total*100})}},o.append("files",l),Wn(o).then((function(e,t){if(e.success)a("Ok"),T([].concat(Object(et.a)(P),[e.file]));else{console.log("Eroor: ",t);new Error("Some error");n({err:t})}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(ta.a,{title:"".concat(i?"Approve":!0===t?"Add":"Edit"," Expense Sheet"),visible:t,width:900,onCancel:a,okText:"Save",okButtonProps:{htmlType:"submit",form:"my-form",disabled:null===(null===t||void 0===t?void 0:t.projectId)&&i||!i&&(b.length<1||s||t&&!x.UPDATE||!t&&!x.ADD)}},l.a.createElement(nt.a,{id:"my-form",form:u,onFinish:function(e){var a,n=e.basic;n=Object(tt.a)(Object(tt.a)({},n),{},{projectId:null!==(a=n.projectId)&&void 0!==a?a:null,expenseSheetExpenses:b,attachments:P.map((function(e,t){return e.fileId}))}),(null===t||void 0===t?void 0:t.id)?Y(t.id,n):_(n)},scrollToFirstError:!0,size:"small",layout:"inline"},l.a.createElement(p.a,{gutter:[0,20]},l.a.createElement(h.a,{span:24,style:{display:"flex",flexWrap:"wrap"}},l.a.createElement(Rt,{FormFields:A})),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{size:"small",bordered:!0,className:"fs-small",pagination:!1,rowKey:function(e){return e.id},scroll:{y:250},rowSelection:!t.adminView&&B,columns:z,dataSource:f,summary:function(e){var a=0,n=0;return e.forEach((function(e){var l,r,o;if(!t.adminView&&b.includes(e.id))a+=parseFloat(null!==(l=e.amount)&&void 0!==l?l:0),e.isBillable?parseFloat(null!==(r=e.amount)&&void 0!==r?r:0):0,n+=e.isReimbursed?parseFloat(null!==(o=e.amount)&&void 0!==o?o:0):0;else if(t.adminView){var i,s,c;a+=parseFloat(null!==(i=e.amount)&&void 0!==i?i:0),e.isBillable?parseFloat(null!==(s=e.amount)&&void 0!==s?s:0):0,n+=e.isReimbursed?parseFloat(null!==(c=e.amount)&&void 0!==c?c:0):0}})),l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,l.a.createElement(ea.a.Summary.Cell,{index:0}),l.a.createElement(ea.a.Summary.Cell,{index:1},"Total:"),l.a.createElement(ea.a.Summary.Cell,{index:2},ce(a)),l.a.createElement(ea.a.Summary.Cell,{index:3,colSpan:2},"Total Reimbursable:"),l.a.createElement(ea.a.Summary.Cell,{index:4},ce(n)),l.a.createElement(ea.a.Summary.Cell,{index:5})))}})),l.a.createElement(h.a,{span:24},l.a.createElement(Gs,{style:{marginTop:10,marginBottom:2}},"Attachments"),l.a.createElement(mt.a,{disabled:i||s,customRequest:V,listType:"picture-card",maxCount:4,fileList:P,onRemove:function(e){var t=P.indexOf(e);P.splice(t,1),T(Object(et.a)(P))}},P.length<4&&l.a.createElement("div",{style:{marginTop:10}},l.a.createElement(pl.a,null),l.a.createElement("div",{style:{marginTop:8}},"Upload")))))))}),Ks=Ye.a.Title,$s=ft.a.RangePicker,Js="",Xs=function(){var e,t,a,r=Object(n.useState)([]),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)({keys:[],data:[]}),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)(),y=Object(G.a)(f,2),v=y[0],g=y[1],E=Object(n.useState)(!1),k=Object(G.a)(E,2),C=k[0],j=k[1],O=Object(n.useState)({}),x=Object(G.a)(O,2),w=x[0],I=x[1],D=Object(n.useState)({filterSatrtDate:me(new Date).startOf("month"),filterEndDate:me(new Date).endOf("month"),filterProject:null}),P=Object(G.a)(D,2),T=P[0],N=P[1],R=T.filterSatrtDate,A=T.filterEndDate,F=(T.filterProject,[Object(tt.a)({title:"Code",dataIndex:"id",render:function(e){return"00".concat(e)}},Ea("id","number")),Object(tt.a)({title:"Title",dataIndex:"label"},Ea("label","string")),Object(tt.a)({title:"Project",dataIndex:"projectName"},Ea("projectName","string")),Object(tt.a)({title:"Amount",dataIndex:"amount",align:"center",render:function(e){return ce(e)}},Ea("amount","number")),Object(tt.a)({title:"Status",dataIndex:"status",align:"center",render:function(e,t){return l.a.createElement("span",null,l.a.createElement(jl,{text:e})," ",t.notes&&l.a.createElement(Te.a,{title:t.notes,placement:"top",destroyTooltipOnHide:!0},l.a.createElement(zr.a,null)))}},Ea("status","string",!0,"SB")),Object(tt.a)({title:"Submitted At",dataIndex:"submittedAt",align:"center",render:function(e){return me(e,!0,!0)}},Ea("submittedAt","date")),Object(tt.a)({title:"Submitted By",dataIndex:"submittedBy",align:"center"},Ea("submittedBy","string")),{title:"Billable",dataIndex:"isBillable",align:"center",render:function(e){return e&&l.a.createElement(St.a,null)}},{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"edit",onClick:function(){return B(t.id,a)}},"View"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}]);Object(n.useEffect)((function(){L()}),[]),Object(n.useEffect)((function(){M(T)}),[T]);var z={selectedRowKeys:d.keys,onChange:function(e,t){var a=!1,n=!1,l=!1;t.forEach((function(e){"SB"===e.status&&(n=!0),"AP"===e.status&&(l=!0,a=!0),"RJ"!==e.status&&"SV"!==e.status||(n=!0,l=!0,a=!0)})),m({keys:e,data:t,cantReject:l,cantApprove:a,cantUnapprove:n})},getCheckboxProps:function(e){return{disabled:["RJ","SV"].includes(e.status)}}},L=function(){var e=pe(),t=(e.id,e.permissions),a=JSON.parse(t).EXPENSES;I(void 0===a?{}:a),Jt("LEAVE_REQUESTS").then((function(e){e.success&&(e.data.unshift({value:0,label:"No Project"}),s(e.data))}))},M=function(e){(function(e){var t=null!==e&&void 0!==e?e:{},a=t.filterSatrtDate,n=t.filterEndDate,l=t.filterProject,r="".concat(qs,"/approvalExpenseSheets?").concat(a?"startDate=".concat(me(a,!0,"DD/MM/YYYY")):"").concat(n?"&endDate=".concat(me(n,!0,"DD/MM/YYYY")):"","&projectId=").concat(null!==l&&void 0!==l?l:null);return it.a.get(r,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return he(l),fe(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(e).then((function(e){e.success&&g(e.data)}))},B=function(e,t){(function(e){return it.a.get("".concat(qs,"/").concat(e),{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return he(l),fe(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})(e).then((function(e){e.success&&j(Object(tt.a)(Object(tt.a)({},e.data),{},{index:t,adminView:!0}))}))},_=function(e){var t,a=d.data,n=void 0===a?[]:a,r=n.length,o=l.a.createElement("div",null,n.map((function(e,t){var a=e.label;e.projectName,e.projectType;return l.a.createElement("div",{key:t},a,r-1>t&&",")})),l.a.createElement("div",{style:{margin:10}},l.a.createElement(nt.a,{id:"my-form",onFinish:function(t){return Y(t,e)}},l.a.createElement(nt.a.Item,{noStyle:!0,name:"notes"},l.a.createElement(ht.a.TextArea,{placeholder:"Enter Your Notes....",autoSize:{minRows:3,maxRows:10},allowClear:!0})))));Js=ta.a.confirm({title:"Do you wish to ".concat(e," listed sheet").concat(r>1?"s":""),icon:l.a.createElement(S.a,null),content:o,okText:"Yes",cancelText:"No",okButtonProps:{danger:null===(t="reject"===e)||void 0===t||t,htmlType:"submit",form:"my-form"}})},Y=function(e,t){var a=e.notes;V(t,a),Js.destroy()},V=function(e,t){var a=d.keys,n={sheets:void 0===a?[]:a,notes:t};Hs("/".concat(e,"Many"),n).then((function(e){e.success&&(m({keys:[],data:[]}),M())}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ks,{level:4},"Expense Sheet Approval")),l.a.createElement(h.a,null,l.a.createElement(vt.a,{placeholder:"Select Project",style:{width:300},allowClear:!0,options:i,showSearch:!0,optionFilterProp:["label","value"],filterOption:function(e,t){var a=t.label.toLowerCase().indexOf(e.toLowerCase())>=0,n=t.value.toString().toLowerCase().indexOf(e.toLowerCase())>=0;return a||n},onChange:function(e){N((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{filterProject:e})}))}})),l.a.createElement(h.a,null,l.a.createElement($s,{format:"ddd DD MMM yyyy",value:[R,A],size:"small",onChange:function(e){N((function(t){var a,n;return Object(tt.a)(Object(tt.a)({},t),{},{filterSatrtDate:null!==(a=null===e||void 0===e?void 0:e[0])&&void 0!==a?a:null,filterEndDate:null!==(n=null===e||void 0===e?void 0:e[1])&&void 0!==n?n:null})}))}})),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{size:"small",bordered:!0,className:"fs-small",pagination:{pageSize:pe().pageSize,hideOnSinglePage:!0,responsive:!0,size:"small"},rowKey:function(e){return e.id},rowSelection:z,columns:F,dataSource:v})),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"end",gutter:[20,200]},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",danger:!0,disabled:(null===d||void 0===d?void 0:d.cantReject)||!(null===w||void 0===w?void 0:w.APPROVAL)||(null===(e=d.keys)||void 0===e?void 0:e.length)<1,onClick:function(){return _("reject")}},"Reject")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"success",disabled:(null===d||void 0===d?void 0:d.cantApprove)||!(null===w||void 0===w?void 0:w.APPROVAL)||(null===(t=d.keys)||void 0===t?void 0:t.length)<1,onClick:function(){return _("approve")}},"Approve")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{className:"not-success",disabled:(null===d||void 0===d?void 0:d.cantUnapprove)||!(null===w||void 0===w?void 0:w.UNAPPROVAL)||(null===(a=d.keys)||void 0===a?void 0:a.length)<1,onClick:function(){return _("unapprove")}},"Unapprove"))))),C&&l.a.createElement(Ws,{visible:C,close:function(){j(!1)},adminView:!0,callBack:function(e,t){var a=v.findIndex((function(t){return t.id===e.id})),n=v;t>=0&&(n[a]=e),g(Object(et.a)(n)),j(!1)}}))},Zs=(new Date,new Date,new Date,new Date,new Date,new Date,Ye.a.Title),Qs=function(e){var t,a,r=Object(n.useState)({keys:[],data:[]}),o=Object(G.a)(r,2),i=o[0],s=o[1],c=Object(n.useState)(!1),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)({data:[],filtered:[]}),y=Object(G.a)(f,2),v=y[0],g=y[1],E=Object(n.useState)([]),k=Object(G.a)(E,2),C=k[0],j=k[1],O=Object(n.useState)({}),x=Object(G.a)(O,2),w=x[0],I=x[1],D=[Object(tt.a)({title:"Code",dataIndex:"id",render:function(e){return"00".concat(e)}},Ea("id","number")),Object(tt.a)({title:"Title",dataIndex:"label"},Ea("label","string")),Object(tt.a)({title:"Project",dataIndex:"projectName"},Ea("projectName","string")),Object(tt.a)({title:"Employee Name",dataIndex:"createdBy"},Ea("createdBy","string")),Object(tt.a)({title:"Amount",dataIndex:"amount",align:"center",render:function(e){return ce(e)}},Ea("amount","number")),Object(tt.a)({title:"Status",dataIndex:"status",align:"center",render:function(e,t){return l.a.createElement("div",null,l.a.createElement(jl,{text:e})," ",t.notes&&l.a.createElement(Te.a,{title:t.notes,placement:"top",destroyTooltipOnHide:!0},l.a.createElement(zr.a,null)))}},Ea("status","string",!0,"SB")),Object(tt.a)({title:"Submited At",dataIndex:"submittedAt",align:"center",render:function(e){return me(e,!0,!0)}},Ea("date","date")),{title:"...",key:"action",align:"center",width:"1%",render:function(e,t,a){return l.a.createElement(De.a,{overlay:l.a.createElement(b.a,null,l.a.createElement(b.a.Item,{key:"delete",danger:!0,disabled:["AP","SB"].includes(t.status)||!w.DELETE,className:"pop-confirm-menu"},l.a.createElement(lt.a,{disabled:["AP","SB"].includes(t.status),title:"Are you sure you want to delete ?",onConfirm:function(){return N(t.id,a)},okText:"Yes",cancelText:"No"},l.a.createElement("div",null," Delete "))),l.a.createElement(b.a.Item,{key:"edit",onClick:function(){return A(Object(tt.a)(Object(tt.a)({},t),{},{index:a}))}},"Edit"))},l.a.createElement(rt.a,{size:"small"},l.a.createElement(ze.a,null)))}}];Object(n.useEffect)((function(){P(),T()}),[]);var P=function(){(function(e){var t=null!==e&&void 0!==e?e:{},a=t.filterSatrtDate,n=t.filterEndDate,l=t.filterProject,r="".concat(qs,"?").concat(a?"startDate=".concat(me(a,!0,"DD/MM/YYYY")):"").concat(n?"&endDate=".concat(me(n,!0,"DD/MM/YYYY")):"","&projectId=").concat(null!==l&&void 0!==l?l:null);return it.a.get(r,{headers:ye()}).then((function(e){var t=e.data,a=t.success,n=t.data,l=t.message;return he(l),fe(e.headers&&e.headers.authorization),{success:a,data:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))})().then((function(e){var t,a;e.success&&g({data:null!==(t=null===e||void 0===e?void 0:e.data)&&void 0!==t?t:[],filtered:null!==(a=null===e||void 0===e?void 0:e.data)&&void 0!==a?a:[]})}))},T=function(){var e=pe(),t=(e.id,e.permissions),a=JSON.parse(t).EXPENSES;I(void 0===a?{}:a)},N=function(t,a){var n=v.data,l=v.filtered,r=e.history;zn(r,"/expense-sheets",t,a,l,n).then((function(e){e.success&&g({filtered:Object(et.a)(e.filterData),data:Object(et.a)(e.data)})}))},R={selectedRowKeys:i.keys,onChange:function(e,t){var a=!1;t.forEach((function(e){"SV"!==e.status&&"RJ"!==e.status&&(a=!0)})),s({keys:e,data:t,checkDisable:a})},getCheckboxProps:function(e){return{disabled:["AP","SB"].includes(e.status)}}},A=function(e){zs(!0,null===e||void 0===e?void 0:e.id).then((function(t){t.success&&j(t.data),m(e)}))},F=function(){var e=i.keys;Hs("/submitMany",{sheets:void 0===e?[]:e}).then((function(e){e.success&&(s({keys:[],data:[]}),P())}))},z=function(e){e?(e=e.replace(/\s+/g,"").toLowerCase(),g((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{filtered:t.data.filter((function(t){return"00".concat(t.id.toString().replace(/\s+/g,"")).includes(e)||t.label&&t.label.toLowerCase().replace(/\s+/g,"").includes(e)||t.projectName&&t.projectName.toLowerCase().replace(/\s+/g,"").includes(e)||t.createdBy&&t.createdBy.toLowerCase().replace(/\s+/g,"").includes(e)||"SV"!==t.status&&ee[t.status].toLowerCase().replace(/\s+/g,"").includes(e)||t.amount&&"".concat(ce(t.amount)).toLowerCase().replace(/\s+/g,"").includes(e)||t.submittedAt&&"".concat(me(t.submittedAt,!0,!0)).toLowerCase().replace(/\s+/g,"").includes(e)}))})}))):g((function(e){return Object(tt.a)(Object(tt.a)({},e),{},{filtered:e.data})}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Zs,{level:4},"Expense Sheets")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",size:"small",onClick:function(){A(!0)}},l.a.createElement(na.a,null)," Add Expense Sheet")),l.a.createElement(h.a,{span:24},l.a.createElement(ea.a,{title:function(){return ka(5,z)},size:"small",bordered:!0,className:"fs-small",pagination:{pageSize:pe().pageSize},rowKey:function(e){return e.id},rowSelection:R,columns:D,dataSource:null!==(t=v.filtered)&&void 0!==t?t:[]})),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,null,l.a.createElement(rt.a,{type:"primary",className:"success",disabled:i.checkDisable||!w.ADD||(null===(a=i.keys)||void 0===a?void 0:a.length)<1,onClick:function(){return function(){var e=i.data,t=void 0===e?[]:e,a=t.length,n=l.a.createElement("div",null,t.map((function(e,t){var n=e.label;e.projectName,e.projectType;return l.a.createElement("div",{key:t},n,a-1>t&&",")}))),r=ta.a.confirm({title:"Do you wish to submit sheet".concat(a>1?"s":""," for"),icon:l.a.createElement(S.a,null),content:n,okText:"Yes",cancelText:"No",onOk:function(){F(),r.destroy()}})}()}},"Submit"))))),d&&l.a.createElement(Ws,{visible:d,close:function(){m(!1)},callBack:function(e,t){var a=v.data,n=v.filtered;if(t>=0){var l=a.findIndex((function(t){return t.id===e.id})),r=n.findIndex((function(t){return t.id===e.id}));a[l]=e,n[r]=e}else a=[].concat(Object(et.a)(a),[e]),n=[].concat(Object(et.a)(n),[e]);g({data:Object(et.a)(a),filtered:Object(et.a)(n)}),m(!1)},expenses:C}))},ec=function(e){var t=e.match.path;t=t.replaceAll("/calculator-","");var a=Object(n.useState)("permanent"===t?1:"casual"===t?2:3),r=Object(G.a)(a,2),o=r[0],i=(r[1],Object(n.useState)(t.charAt(0).toUpperCase()+t.slice(1))),s=Object(G.a)(i,2),c=s[0],u=(s[1],Object(n.useState)([])),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)({rfqt:0,margin:8,gst:0,cm1:20,cm2:25,cm3:30,cm4:40,dailyHours:8,weaklyHours:38,pWeekDays:5,hourlyBaseRate:.9,weekInYear:"Permanent"===c?52:8,stateTax:[],dslGst:[{value:"Inc GST"},{value:"Exc GST"}]}),v=Object(G.a)(y,2),g=v[0],E=v[1];Object(n.useEffect)((function(){var e;(e=o,it.a.get("".concat(J,"/global-variables/calculator-variable?type=").concat(e),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),n&&fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))).then((function(e){if(e.success){var t,a,n,l=e.data,r=l.gst,o=l.golobalVariables,i=l.stateTax;g.gst=r,g.stateTax=i,g.selectedDslGst=null===(t=g.dslGst)||void 0===t?void 0:t[0].value,g.selectedState=null===i||void 0===i||null===(a=i[0])||void 0===a?void 0:a.value,E(g);var s={name:"Payroll Tax",value:null===i||void 0===i||null===(n=i[0])||void 0===n?void 0:n.tax,apply:"Yes"};o.splice(1,0,s),f(o)}}))}),[]);var k=function(){var e=0;return m.map((function(t){"Yes"===t.apply&&(e+=t.value)})),e},S=function(){var e,t=g.gst,a=g.rfqt;return"Exc GST"==(null===g||void 0===g?void 0:g.selectedDslGst)?g.rfqt:Math.abs(a/(((e=t)+100)/e)-a)},C=function(){var e=g.margin;return Math.abs(S()*(e/100)-S())},j=function(e){return C()*(1-e/100)},O=function(e){return g.dailyHours?j(e)/g.dailyHours/(k()/100*1+1):0},x=function(e){return"Permanent"===c?function(e){return O(e)*g.weaklyHours*g.weekInYear}(e):function(e){return O(e)*g.weekInYear}(e)};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:16},l.a.createElement(p.a,{className:"buy-sell-calculator"},l.a.createElement(h.a,{span:24,className:"buy-cost calculator"},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24,className:"mb-10"},l.a.createElement(Ye.a.Title,{level:5},"Permanent"==c?"Employee Salary Calculator":"Contractor"==c?"Contractor Rate Calculator":"Casual Rate Calculator")),l.a.createElement(h.a,{span:6,className:"label bold"},"Daily Sell Rate",l.a.createElement(vt.a,{size:"small",placeholder:"Select GST",options:g.dslGst,value:g.selectedDslGst,style:{width:"90px",marginLeft:"3px"},onSelect:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{selectedDslGst:e})}))}})),l.a.createElement(h.a,{span:6}),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.rfqt,shape:"$",onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{rfqt:null!==e&&void 0!==e?e:0})}))}})),l.a.createElement(h.a,{span:9}),"Exc GST"==(null===g||void 0===g?void 0:g.selectedDslGst)?l.a.createElement(h.a,{span:24,className:"label my-10"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{span:6,className:"label"},"Daily Sell Rate ex GST"),l.a.createElement(h.a,{span:3,className:"item"},"".concat(ue(g.gst),"%")),l.a.createElement(h.a,{span:3,className:"item"}),l.a.createElement(h.a,{span:3,className:"item"}," ",ce(S())),l.a.createElement(h.a,{span:9,className:"item"})),l.a.createElement(h.a,{span:6,className:"label"},"Daily Sell Rate ex Panel Provider Margin"),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.margin,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{margin:null!==e&&void 0!==e?e:0})}))},shape:"%"})),l.a.createElement(h.a,{span:3,className:"item"}),l.a.createElement(h.a,{span:3,className:"item"}," ",ce(C())),l.a.createElement(h.a,{span:9,className:"item"}),l.a.createElement(h.a,{span:11,offset:1,className:"label bold"},"Expected CM %"),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.cm1,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{cm1:null!==e&&void 0!==e?e:0})}))},shape:"%"})),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.cm2,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{cm2:null!==e&&void 0!==e?e:0})}))},shape:"%"})),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.cm3,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{cm3:null!==e&&void 0!==e?e:0})}))},shape:"%"})),l.a.createElement(h.a,{span:3,className:"item"},l.a.createElement(tc,{value:g.cm4,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{cm4:null!==e&&void 0!==e?e:0})}))},shape:"%"})),l.a.createElement(h.a,{span:24,className:"label"}),l.a.createElement(h.a,{span:12,className:"label bold my-20"},"Daily Buy Rate available to offer"),l.a.createElement(h.a,{span:3,className:"item bold my-20"},ce(j(g.cm1))),l.a.createElement(h.a,{span:3,className:"item bold my-20"},ce(j(g.cm2))),l.a.createElement(h.a,{span:3,className:"item bold my-20"},ce(j(g.cm3))),l.a.createElement(h.a,{span:3,className:"item bold my-20"},ce(j(g.cm4))),l.a.createElement(h.a,{span:6,className:"label"},"Project Daily Hours"),l.a.createElement(h.a,{span:3,className:"item"}),l.a.createElement(h.a,{span:3,className:"item bold  mb-10"},l.a.createElement(tc,{value:g.dailyHours,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{dailyHours:null!==e&&void 0!==e?e:0})}))}})),l.a.createElement(h.a,{span:12,className:"item"}),l.a.createElement(h.a,{span:6,className:"label"},"Project Weekly Hours"),l.a.createElement(h.a,{span:3,className:"label"},"".concat(g.dailyHours," * ").concat(g.pWeekDays)),l.a.createElement(h.a,{span:3,className:"label item"},g.dailyHours*g.pWeekDays),l.a.createElement(h.a,{span:24,className:"label my-20"}),l.a.createElement(h.a,{span:24,className:"label"},l.a.createElement(h.a,{span:12},l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,{span:6},"Select State"),l.a.createElement(h.a,{span:12},l.a.createElement(vt.a,{size:"small",placeholder:"Select State",options:g.stateTax,value:g.selectedState,style:{width:"100%"},onSelect:function(e,t){var a=t.tax;E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{selectedState:e})})),e={name:"Payroll Tax",value:a,apply:"Yes"},1===m.length?m[0]=e:m[1]=e,f(m)}}))))),l.a.createElement(h.a,{span:24,className:"label my-20"}),l.a.createElement(h.a,{span:12,className:"label bold"},"Hourly Rate including On-cost"),l.a.createElement(h.a,{span:3,className:"item bold"},ce(j(g.cm1)/g.dailyHours)),l.a.createElement(h.a,{span:3,className:"item bold"},ce(j(g.cm2)/g.dailyHours)),l.a.createElement(h.a,{span:3,className:"item bold"},ce(j(g.cm3)/g.dailyHours)),l.a.createElement(h.a,{span:3,className:"item bold"},ce(j(g.cm4)/g.dailyHours)),l.a.createElement(h.a,{span:3,offset:9,className:"item"},l.a.createElement(Ye.a.Text,{underline:!0,strong:!0},"Applicable")),l.a.createElement(h.a,{span:12,className:"item"}),l.a.createElement(h.a,{span:12},null===m||void 0===m?void 0:m.map((function(e,t){return l.a.createElement(h.a,{span:24,key:t},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:16,className:"label"},ie[e.name]?"Payroll Tax - ".concat(ie[e.name]):e.name),l.a.createElement(h.a,{span:4,className:"item"},"".concat(e.value,"%")),l.a.createElement(h.a,{span:4,className:"item"},l.a.createElement(De.a,{trigger:["click"],overlay:l.a.createElement(b.a,{style:{backgroundColor:"#f6f4f1"},onClick:function(e){!function(e,t){var a=m;a[t].apply=e,f(Object(et.a)(a))}(null===e||void 0===e?void 0:e.key,t)}},l.a.createElement(b.a.Item,{key:"Yes"},"Yes"),l.a.createElement(b.a.Item,{key:"No"},"No"))},l.a.createElement("span",{className:"mouse-pointer"},e.apply)))))}))),l.a.createElement(h.a,{span:12,className:"item"}),l.a.createElement(h.a,{span:24},l.a.createElement(h.a,{span:10,offset:2},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:12,className:"label bold my-20"},"Total On-cost Ratio"),l.a.createElement(h.a,{span:12,className:"bold my-20"},"".concat(ue(k(),2),"%"))))),l.a.createElement(h.a,{span:12,className:"label bold"},"Hourly Base Rate"),l.a.createElement(h.a,{span:3,className:"item bold"},ce(O(g.cm1))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(O(g.cm2))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(O(g.cm3))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(O(g.cm4))),"Permanent"===c&&l.a.createElement(h.a,{span:24},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:7,offset:1,className:"label"},"Weekly Hours - Standard Employment Contract"),l.a.createElement(h.a,{span:4,className:"item bold "},l.a.createElement(tc,{value:g.weaklyHours,onChange:function(e){E((function(t){return Object(tt.a)(Object(tt.a)({},t),{},{weaklyHours:null!==e&&void 0!==e?e:0})}))}})))),l.a.createElement(h.a,{span:24},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:7,offset:1,className:"label"},"Permanent"===c?"Week in a Year":"Daily Hours in a Day"),l.a.createElement(h.a,{span:4,className:"item"},null===g||void 0===g?void 0:g.weekInYear))),l.a.createElement(h.a,{span:12,className:"label bold"},"Permanent"==c?"Annual Base Salary":"Daily Base Rate"),l.a.createElement(h.a,{span:3,className:"item bold"},ce(x(g.cm1))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(x(g.cm2))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(x(g.cm3))),l.a.createElement(h.a,{span:3,className:"item bold"},ce(x(g.cm4))))))))};function tc(e){var t=e.value,a=e.shape,n=e.onChange,r=e.min,o=e.max;return l.a.createElement(yt.a,{size:"small",value:t,formatter:function(e){return Tt(e,a)},parser:function(e){return Nt(e,a)},onChange:n,min:r,max:o})}var ac=a(88),nc="".concat(J,"/reports"),lc=function(e){var t=Ee("dates"),a=t.start,n=t.end;return it.a.get("".concat(nc,"/work-in-hand-forecast?fiscalYearStart=").concat(a.format("YYYY-MM-DD"),"&fiscalYearEnd=").concat(n.format("YYYY-MM-DD")).concat(e?"&"+e:""),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=a.message;return he(r),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:l}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},rc=function(e){var t=Ee("dates");t.start,t.end;return it.a.get("".concat(J,"/forecastReportLabel/"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=void 0===l?[]:l,o=a.message;he(o);var i={};if(n){var s,c=Object(g.a)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value,d=u.values;i[u.title]=d}}catch(m){c.e(m)}finally{c.f()}}return fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:i}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},oc=[{name:"INCOME/REVENUE",key:"INCOME/REVENUE",identifier:"revenue_total",className:"title-row"},{name:"Revenue - T&M Basis",identifier:"revenue_total",key:"Revenue - T&M Basis",className:"data-title-row",default:0},{name:"Revenue - Milestone Basis",identifier:"revenue_total",key:"Revenue - Milestone Basis",className:"data-title-row",default:0},{name:"Revnue - Other",identifier:"revenue_total",key:"Revnue - Other",className:"data-title-row",editable:!0},{name:"Revenue - Security Clearance Fee",identifier:"revenue_total",key:"Revenue - Security Clearance Fee",className:"data-title-row",editable:!0},{name:"Misc Income",identifier:"revenue_total",key:"Misc Income",className:"data-title-row",editable:!0},{name:"Adjustment",identifier:"revenue_total",key:"Revenue - Adjustment",className:"data-title-row",editable:!0},{},{className:"total-row",name:"TOTAL REVENUE",identifier:"revenue_total",key:"TOTAL REVENUE",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?fc(t[e]):"-"}}],ic=[{},{name:"COST OF SALES - COS",key:"COST OF SALES - COS cos",identifier:"cost_total",className:"title-row"},{name:"Salaries & Wages - Permanent",key:"Salaries & Wages - Permanent cos",identifier:"cost_total",className:"data-title-row"},{name:"Salaries & Wages - Casual",key:"Salaries & Wages - Casual cos",identifier:"cost_total",className:"data-title-row"},{name:"Superannuation - Permanent",key:"Superannuation - Permanent cos",identifier:"cost_total",className:"data-title-row"},{name:"Superannuation - Casual",key:"Superannuation - Casual cos",identifier:"cost_total",className:"data-title-row"},{name:"Bonus/STI",key:"Bonus/STI cos",className:"data-title-row",identifier:"cost_total",editable:!0},{name:"Superannuation on Bonus/STI",key:"Superannuation on Bonus/STI cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Employee Leave Entitlements AL/LSL",key:"Employee Leave Entitlements AL/LSL cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Training & Education",key:"Training & Education cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Recruitment Expenses",key:"Recruitment Expenses cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Staff amenities",key:"Staff amenities cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Fringe Benefits Tax",key:"Fringe Benefits Tax cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Subcontractor Services",key:"Subcontractor Services cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Payroll Tax",key:"Payroll Tax cos",className:"data-title-row",identifier:"cost_total",editable:!0},{name:"Security Clearance Sponsorship",key:"Security Clearance Sponsorship cos",className:"data-title-row",editable:!0},{name:"Travel - Client Funded",key:"Travel - Client Funded cos",className:"data-title-row",editable:!0},{name:"Travel - Milestone Inclusive",key:"Travel - Milestone Inclusive cos",className:"data-title-row",editable:!0},{name:"Membership Fee",key:"Membership Fee cos",className:"data-title-row",editable:!0},{name:"Adjustment",key:"Adjustment cos",className:"data-title-row",editable:!0},{},{},{className:"total-row",name:"TOTAL COST OF SALES - COS",key:"TOTAL COST OF SALES - COS cos",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?fc(t[e]):"-"}}],sc=[{},{className:"total-row",name:"CONTRIBUTION MARGIN",key:"CONTRIBUTION MARGIN",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,mc(e,8,t)-mc(e,31,t)},render:function(e,t){return e=e.startsWith("FY")?"total":e,fc(t[e])}},{},{className:"total-row",name:"C.M. %",key:"C.M. %",renderCalculation:function(e,t){t=t.startsWith("FY")?"total":t;var a=mc(e,8,t);return a?(a-mc(e,31,t))/a*100:0},render:function(e,t){return e=e.startsWith("FY")?"total":e,fc(t[e],"float")}},{}],cc=[{},{name:"DIRECT OVERHEAD - DOH",key:"DIRECT OVERHEAD - DOH doh",className:"title-row"},{name:"Salaries & Wages - Permanent",key:"Salaries & Wages - Permanent doh",className:"data-title-row"},{name:"Superannuation - Permanent",key:"Superannuation - Permanent doh",className:"data-title-row"},{name:"Travel Allowances",key:"Travel Allowances doh",className:"data-title-row",editable:!0},{name:"Bonus/STI",key:"Bonus/STI doh",className:"data-title-row",editable:!0},{name:"Employee Leave Entitlements AL/LSL",key:"Employee Leave Entitlements AL/LSL doh",className:"data-title-row",editable:!0},{name:"Subcontractor Services",key:"Subcontractor Services doh",className:"data-title-row",editable:!0},{name:"Payroll Tax",key:"Payroll Tax doh",className:"data-title-row",editable:!0},{name:"Other Personnel Expenses",key:"Other Personnel Expenses doh",className:"data-title-row",editable:!0},{name:"Occupancy Expenses ",key:"Occupancy Expenses doh",className:"data-title-row",editable:!0},{name:"Equipment Expenses ",key:"Equipment Expenses doh",className:"data-title-row",editable:!0},{name:"Communication Expenses ",key:"Communication Expenses doh",className:"data-title-row",editable:!0},{name:"Outside Services Expenses ",key:"Outside Services Expenses doh",className:"data-title-row",editable:!0},{name:"Travel Expenses",key:"Travel Expenses doh",className:"data-title-row",editable:!0},{name:"Entertainment - Client ",key:"Entertainment - Client doh",className:"data-title-row",editable:!0},{name:"Entertainment - Staff ",key:"Entertainment - Staff doh",className:"data-title-row",editable:!0},{name:"Other General Expenses ",key:"Other General Expenses doh",className:"data-title-row",editable:!0},{},{className:"total-row",name:"TOTAL DIRECT OVERHEAD - DOH",key:"TOTAL DIRECT OVERHEAD - DOH doh"}],uc=[{},{className:"total-row",name:"EARNINGS BEFORE INCOME TAX - EBIT",key:"EARNINGS BEFORE INCOME TAX - EBIT",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,mc(e,8,t)-mc(e,31,t)-mc(e,56,t)},render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?fc(t[e]):"-"}},{},{name:"Interest Income",key:"Interst Income tax",className:"data-title-row",editable:!0},{name:"Interest Expense",key:"Interest Expense tax",operation:"-",className:"data-title-row",editable:!0},{name:"Indirect Overhead",key:"Indirect Overhead tax",operation:"-",className:"data-title-row",editable:!0},{name:"Other Income",key:"Other Income tax",className:"data-title-row",editable:!0}],dc=[{className:"total-row",name:"PROFIT BEFORE TAX",key:"PROFIT BEFORE TAX profit",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,mc(e,58,t)+mc(e,60,t)-mc(e,61,t)-mc(e,62,t)+mc(e,63,t)},render:function(e,t){return e=e.startsWith("FY")?"total":e,fc(t[e])}},{},{name:"Income Tax Expense",key:"Income Tax Expense profit",className:"data-title-row",renderCalculation:function(e,t,a){return t=t.startsWith("FY")?"total":t,mc(e,64,t)*a},render:function(e,t){return e=e.startsWith("FY")?"total":e,fc(t[e])}},{},{className:"total-row",name:"NET PROFIT",key:"NET PROFIT profit",renderCalculation:function(e,t,a){return t=t.startsWith("FY")?"total":t,mc(e,64,t)-mc(e,64,t)*a},render:function(e,t){return e=e.startsWith("FY")?"total":e,fc(t[e])}}],mc=function(e,t,a){if(!e||!e[t])return 0;var n=a?e[t][a]:e[t];return isNaN(parseFloat(n))?0:parseFloat(n)},fc=function(e,t){return"float"===t?"".concat(e<0?"(".concat(ue(Math.abs(e)),")"):ue(e)," %"):"".concat(e<0?"(".concat(ce(Math.abs(e)),")"):ce(e))},pc=(a(244),["title","editable","children","dataIndex","key","record","indexing","handleSave"]);function hc(){hc=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var yc=Ye.a.Title,vc=l.a.createContext(null),gc=function(){console.log("setted focus");for(var e={},t=Object(ac.a)(Array,oc.concat(ic,sc,cc,uc,dc)),a=0,n=1;n<t.length;n++){var l=t[n];l.editable&&(a&&(e[a.key]=l.key),a=l)}return e["Income Tax Expense profit"]="Revenue - Security Clearance Fee",e}(),bc=function(e){e.title;var t=e.editable,a=e.children,r=e.dataIndex,o=(e.key,e.record),i=e.indexing,s=e.handleSave,c=Object(ya.a)(e,pc),u=Object(n.useRef)(null),d=Object(n.useContext)(vc),m=function(){var e=Object(dn.a)(hc().mark((function e(t){var a;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.getFieldValue([o.key,r]),d.isFieldTouched([o.key,r]))try{s(i,r,a),setTimeout((function(){d.setFields([{name:[o.key,r],touched:!1}]),t&&d.getFieldInstance([gc[o.key],r]).focus()}),1e3)}catch(n){console.log("Save failed:",n)}else t&&d.getFieldInstance([gc[o.key],r]).focus();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=a;return t&&(f=l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(nt.a.Item,{style:{margin:0},name:[o.key,r]},l.a.createElement(yt.a,{ref:u,className:"table-inputNumber-border",controls:!1,size:"small",formatter:function(e){return Tt(e,"$")},parser:function(e){return Nt(e,"$")},onBlur:function(){return m()},onPressEnter:function(e){return m(!0)}}))))),l.a.createElement("td",c,f)};var Ec=function(){var e=nt.a.useForm(),t=Object(G.a)(e,1)[0],a=Ee("dates"),r=a.start,o=a.end,i=K()(o).format("[FY]YY"),s=K()().subtract(1,"month").endOf("month"),c=Object(n.useState)([]),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)(void 0),y=Object(G.a)(f,2),v=y[0],g=y[1],b=Object(n.useState)(!0),E=Object(G.a)(b,2),k=E[0],S=E[1],C=Object(n.useState)([{title:"Whole A$",dataIndex:"name",key:"name",width:250,onHeaderCell:function(){return{className:"whole"}},onCell:function(e){return{className:e.className}},fixed:"left"},{title:"".concat(i," Forecast"),children:[{title:"Revenue AU$",children:[]}]}]),j=Object(G.a)(C,2),O=j[0],x=j[1];Object(n.useEffect)((function(){w(),Promise.all([rc(),lc()]).then((function(e){var a,n=e[0].success?e[0].data:{},l=e[1].success?e[1].data:{};I(l,n),g(null!==(a=l.INCOME_TAX_RATES)&&void 0!==a?a:{}),t.setFieldsValue(n)}))}),[]);var w=function(){for(var e=Object(et.a)(O),t=[kc({year:"YTD",era:"",totalKey:"YTD"})],a=de(r);a.isSameOrBefore(o);a.add(1,"months")){var n={year:de(a,"MMM YY"),era:a.isBefore(K()(),"month")?"Actual":"Forecast"};t.push(kc(n,P))}t.push(kc({year:i,era:"Forcast",totalKey:"total"})),e[1].children[0].children=t,x(e)},I=function(e,t){var a=e.MILESTONE_BASE,n=e.TIME_BASE,l=e.PERMANENT_SALARIES,r=e.PERMANENT_SUPER,o=e.CASUAL_SALARIES,i=e.CASUAL_SUPER,s=e.DOH_SALARIES,c=e.DOH_SUPER,u=e.INCOME_TAX_RATES;oc[1]=Object(tt.a)(Object(tt.a)({},oc[1]),n),oc[2]=Object(tt.a)(Object(tt.a)({},oc[2]),a),ic[2]=Object(tt.a)(Object(tt.a)({},ic[2]),l),ic[3]=Object(tt.a)(Object(tt.a)({},ic[3]),o),ic[4]=Object(tt.a)(Object(tt.a)({},ic[4]),r),ic[5]=Object(tt.a)(Object(tt.a)({},ic[5]),i),ic[5]=Object(tt.a)(Object(tt.a)({},ic[5]),i),cc[2]=Object(tt.a)(Object(tt.a)({},cc[2]),s),cc[3]=Object(tt.a)(Object(tt.a)({},cc[3]),c);var d=Object(ac.a)(Array,Object(et.a)(oc).concat(Object(et.a)(ic),Object(et.a)(sc),Object(et.a)(cc),Object(et.a)(uc),Object(et.a)(dc)));d=d.map((function(e){return t[e.key]&&(e=Object(tt.a)(Object(tt.a)({},e),t[e.key])),e})),D(d,u)},D=function(e){var t,a,n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(et.a)(e),o=(null===O||void 0===O||null===(t=O[1])||void 0===t||null===(a=t.children)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.children)||[];o.forEach((function(e){var t=Object(G.a)(e.children,1)[0].dataIndex;r[8][t]=0,r[31][t]=0,r[56][t]=0;for(var a=0;a<r.length;a++)K()(t,"MMM YY",!0).isValid()&&(a<8?r[8][t]+=mc(r,a,t):a>8&&a<31?r[31][t]+=mc(r,a,t):a>35&&a<56&&(r[56][t]+=mc(r,a,t)))}));var i=[33,35,58,64,66,68];return o.forEach((function(e){var t=Object(G.a)(e.children,1)[0].dataIndex;i.forEach((function(e){var a,n,o;r[e]=Object(tt.a)(Object(tt.a)({},r[e]),{},Object(at.a)({},t,null===(a=r)||void 0===a||null===(n=a[e])||void 0===n||null===(o=n.renderCalculation)||void 0===o?void 0:o.call(n,r,t,l[t])))}))})),r=r.map((function(e){for(var t=0,a=0,n=0;n<o.length;n++){var l=Object(G.a)(o[n].children,1)[0],r=l.dataIndex,i=l.title;if(K()(r,"MMM YY",!0).isValid()){var s=+e[r]||0;a+=s,"Actual"===i&&(t+=s)}}return Object(tt.a)(Object(tt.a)({},e),{},{YTD:t,total:a})})),S(!1),m(r),!0},P=function(e,t,a,n){var l=Object(et.a)(d);return l[e][t]=a,D(l,v)},T={body:{cell:bc}},N=O.map((function e(t){var a=Object(tt.a)(Object(tt.a)({},t),{},{onCell:function(e,a){return{record:e,editable:"name"!==t.dataIndex&&!t.totalCol&&e.editable,dataIndex:t.dataIndex,title:t.title,indexing:a,handleSave:P}}});return t.children&&(a.children=t.children.map(e)),a}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{style:{backgroundColor:"#0463AC",paddingRight:15},justify:"space-between",align:"middle"},l.a.createElement(h.a,{span:20},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(yc,{level:5,style:{color:"#fff",marginBottom:0,paddingLeft:5}},"Forecast ",i," - ",s.format("MMMM")," Month End")),l.a.createElement(h.a,{span:24},l.a.createElement(yc,{level:5,style:{color:"#fff",marginBottom:0,paddingLeft:5}},"Profit & Loss Statement - ",s.format("DD MMMM YYYY"))))),l.a.createElement(h.a,null,l.a.createElement(lt.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return t.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(rt.a,{type:"primary",size:"small"},"Save")))),l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(nt.a,{form:t,component:!1,onFinish:function(e){var t;S(!0),(t=e,$.b.loading({content:"Updating Forecast",key:1}),it.a.put("".concat(J,"/forecastReportLabel/updateReport/"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=(a.data,a.message);return he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n&&$.b.success({content:"Forecast Updated Successfully",key:1}),{success:n}})).catch((function(e){return ge(e,1,5)}))).then((function(e){S(!1)}))}},l.a.createElement(vc.Provider,{value:t},l.a.createElement(ea.a,{components:T,bordered:!0,loading:k,size:"small",pagination:!1,rowKey:function(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.name},columns:N,rowClassName:function(e){return e.className},dataSource:d,className:"scroll-table fs-v-small full-width wih-report",scroll:{x:"max-content",y:"65vh"}}))))))},kc=function(e){var t=e.year,a=e.era,n=e.totalKey;return{title:t,align:"center",children:[{title:a,dataIndex:t,key:t,totalCol:!!n,width:100,align:"center",onCell:function(e){return{className:n?"fin-total":""}},render:function(e,a,l){return a.render?a.render(t,a):n?a[n]?fc(a[n]):"-":e>=0||e<=0?ce(e):"total-row"===a.className?"-":void 0!==a.default?ce(a.default):""}}]}},Sc="".concat(J,"/reports"),Cc=function(e,t){var a;return t=t||"",it.a.get("".concat(Sc).concat(null!==(a=t)&&void 0!==a?a:"","/bench-resources").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},jc=function(e,t){return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/workforce-skills").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Oc=function(e,t){return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/allocations").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},xc=function(e,t){return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/allocations-all").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},wc=function(e,t){return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/timesheet-summary").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Ic=function(e,t){return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/leave-request-summary-view").concat(e?"?"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Dc=function(e,t){var a=Ee("dates"),n=a.start,l=a.end;return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/project-revenue-analysis?fiscalYearStart=").concat(n.format("YYYY-MM-DD"),"&fiscalYearEnd=").concat(l.format("YYYY-MM-DD")).concat(e?"&"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Pc=function(e,t){var a=Ee("dates"),n=a.start,l=a.end;return it.a.get("".concat(Sc).concat(null!==t&&void 0!==t?t:"","/client-revenue-analysis?fiscalYearStart=").concat(n.format("YYYY-MM-DD"),"&fiscalYearEnd=").concat(l.format("YYYY-MM-DD")).concat(e?"&"+e:""),{headers:ye()}).then((function(e){var a,n=e.data,l=n.success,r=n.data,o=n.message;return he(o),t&&$.b.success({content:"Creating Report",key:"report"}),fe(null===e||void 0===e||null===(a=e.headers)||void 0===a?void 0:a.authorization),{success:l,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))},Tc=function(e,t){it()({method:"get",url:"".concat(J,"/").concat(e),responseType:"blob",headers:ye()}).then((function(e){var a=window.URL.createObjectURL(e.data),n=document.createElement("a");n.href=a,n.download="".concat(t,"_").concat(K()().format("YYYY-MM-DDTHH:mm:ss")),n.click(),$.b.success({content:"Downloading!",key:"report"})})).catch((function(e){console.log(e)}))},Nc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Kt("helpers/work",!0).then((function(e){var n=Object(et.a)(t);n[5].data=e.success?e.options:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Date Range",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"dates",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Resource Type",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"resourceType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Employee",value:1},{label:"Sub Contractor",value:2}],type:"Select"},{Placeholder:"Exclude Projects",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeWorkId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"}],searchValue:{dates:{type:"Date",value:null,label:"Dates",showInColumn:!0,disabled:!0},resourceType:{type:"Select",multi:!0,value:[],label:"Resource Type",showInColumn:!1,disabled:!1},excludeWorkId:{type:"Select",multi:!0,color:"orange",value:[],label:"Exclude Projects",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},Rc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([zt(),Lt()]).then((function(e){var n=Object(et.a)(t);n[1].data=e[0].success?e[0].data:[],n[3].data=e[1].success?e[1].data:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Skill",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"skillId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Level",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"levelId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Resource Type",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"resourceType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Employee",value:1},{label:"Sub Contractor",value:2}],type:"Select"}],searchValue:{skillId:{type:"Select",multi:!0,value:[],label:"Skill",showInColumn:!1,disabled:!1},levelId:{type:"Select",multi:!0,value:[],label:"Level",showInColumn:!1,disabled:!1},resourceType:{type:"Select",multi:!0,value:[],label:"Resource Type",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=l||{},o=(r.skillId,r.levelId,Yc(a));n(o,a)}}},Ac=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([_t(),Kt("helpers/work",!0),Mt(),zt(),Lt()]).then((function(e){var n=Object(et.a)(t);n[3].data=e[0].success?e[0].data:[],n[9].data=e[1].success?e[1].options:[],n[15].data=e[2].success?e[2].data:[],n[19].data=e[3].success?e[3].data:[],n[21].data=e[4].success?e[4].data:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Date Allocation Range",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"dates",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Organisation",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"organizationId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Opportunity/Project Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Milestone",value:1},{label:"Time & Materials",value:2}],type:"Select"},{Placeholder:"Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workStatus",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Opportunity"},{value:1,label:"Project"}],type:"Select"},{Placeholder:"Opportunity/Project",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Opportunity/Project Status",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workPhase",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Closed"},{value:1,label:"Open"}],type:"Select"},{Placeholder:"Booking Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"bookingType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Reserved"},{value:1,label:"Soft-booked"},{value:2,label:"Allocated"},{value:3,label:"Unallocated"}],type:"Select"},{Placeholder:"Resources",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"contactPersonId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Resource Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"resourceType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Contact Person",value:0},{label:"Employee",value:1},{label:"Sub Contractor",value:2}],type:"Select"},{Placeholder:"Skill",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"skillId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Level",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"levelId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"}],searchValue:{dates:{type:"Date",value:null,label:"Dates",showInColumn:!0,disabled:!0},organizationId:{type:"Select",multi:!0,value:[],label:"Organisation",showInColumn:!1,disabled:!1},workType:{type:"Select",multi:!0,value:[],label:"Opportunity/Project Type",showInColumn:!1,disabled:!1},workStatus:{type:"Select",multi:!0,value:[],label:"Type",showInColumn:!1,disabled:!1},workId:{type:"Select",multi:!0,value:[],label:"Opportunity/Project",showInColumn:!1,disabled:!1},contactPersonId:{type:"Select",multi:!0,value:[],label:"Resources",showInColumn:!1,disabled:!1},resourceType:{type:"Select",multi:!0,value:[],label:"Resource Type",showInColumn:!1,disabled:!1},bookingType:{type:"Select",multi:!0,value:[],label:"Booking Type",showInColumn:!1,disabled:!1},workPhase:{type:"Select",multi:!0,value:[],label:"Opportunity/Project Status",showInColumn:!1,disabled:!1},skillId:{type:"Select",multi:!0,value:[],label:"Skill",showInColumn:!1,disabled:!1},levelId:{type:"Select",multi:!0,value:[],label:"Level",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},Fc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([_t(),Kt("helpers/work",!0),Mt(),zt(),Lt()]).then((function(e){var n=Object(et.a)(t);n[3].data=e[0].success?e[0].data:[],n[9].data=e[1].success?e[1].options:[],n[15].data=e[2].success?e[2].data:[],n[19].data=e[3].success?e[3].data:[],n[21].data=e[4].success?e[4].data:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Date Allocation Range",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"dates",size:"small",type:"RangePicker",fieldStyle:{width:"100%"}},{Placeholder:"Organisation",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"organizationId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workStatus",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Opportunity"},{value:1,label:"Project"}],type:"Select"},{Placeholder:"Opportunity/Project Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Milestone",value:1},{label:"Time & Materials",value:2}],type:"Select"},{Placeholder:"Opportunity/Project",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Opportunity/Project Status",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workPhase",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Closed"},{value:1,label:"Open"}],type:"Select"},{Placeholder:"Booking Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"bookingType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Reserved"},{value:1,label:"Soft-booked"},{value:2,label:"Allocated"},{value:3,label:"Unallocated"}],type:"Select"},{Placeholder:"Resources",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"contactPersonId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Resource Type",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"resourceType",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{label:"Employee",value:1},{label:"Sub Contractor",value:2}],type:"Select"},{Placeholder:"Skill",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"skillId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Level",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"levelId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"}],searchValue:{dates:{type:"Date",value:null,label:"Dates",showInColumn:!0,disabled:!0},organizationId:{type:"Select",multi:!0,value:[],label:"Organisation",showInColumn:!1,disabled:!1},workType:{type:"Select",multi:!0,value:[],label:"Opportunity/Project Type",showInColumn:!1,disabled:!1},workPhase:{type:"Select",multi:!0,value:[],label:"Opportunity/Project Status",showInColumn:!1,disabled:!1},workStatus:{type:"Select",multi:!0,value:[],label:"Type",showInColumn:!1,disabled:!1},workId:{type:"Select",multi:!0,value:[],label:"Opportunity/Project",showInColumn:!1,disabled:!1},contactPersonId:{type:"Select",multi:!0,value:[],label:"Resources",showInColumn:!1,disabled:!1},resourceType:{type:"Select",multi:!0,value:[],label:"Resource Type",showInColumn:!1,disabled:!1},bookingType:{type:"Select",multi:!0,value:[],label:"Booking Type",showInColumn:!1,disabled:!1},skillId:{type:"Select",multi:!0,value:[],label:"Skill",showInColumn:!1,disabled:!1},levelId:{type:"Select",multi:!0,value:[],label:"Level",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},zc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([_t(),Kt("helpers/work?type=P",!0)]).then((function(e){var n=Object(et.a)(t);n[1].data=e[0].success?e[0].data:[],n[3].data=e[1].success?e[1].options:[],n[5].data=e[1].success?e[1].options:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Organisation",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"organizationId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Projects",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"projectId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Exclude Projects",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeProjectId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Project Status",fieldCol:12,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"workPhase",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Closed"},{value:1,label:"Open"}],type:"Select"}],searchValue:{organizationId:{type:"Select",multi:!0,value:[],label:"Organisation",showInColumn:!1,disabled:!1},projectId:{type:"Select",multi:!0,value:[],label:"Projects",showInColumn:!1,disabled:!1},workPhase:{type:"Select",multi:!0,value:[],label:"Opportunity/Project Status",showInColumn:!1,disabled:!1},excludeProjectId:{type:"Select",multi:!0,color:"orange",value:[],label:"Exclude Projects",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},Lc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){_t().then((function(e){var n=Object(et.a)(t);n[1].data=e.success?e.data:[],n[3].data=e.success?e.data:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Organisation",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"organizationId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Exclude Organisation",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeOrganizationId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"}],searchValue:{organizationId:{type:"Select",multi:!0,value:[],label:"Organisation",showInColumn:!1,disabled:!1},excludeOrganizationId:{type:"Select",multi:!0,value:[],color:"orange",label:"Exclude Organisation",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},Mc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([it.a.get("".concat(J,"/employees/get/contact-persons"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=[];if(l.map((function(e){r.push({value:e.id,label:e.firstName+" "+e.lastName})})),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n)return{success:n,data:Ce(r,"label")}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})),Ft(),Kt("helpers/work?type=P",!0)]).then((function(e){var n=Object(et.a)(t);n[3].data=e[0].success?e[0].data:[],n[5].data=e[1].success?e[1].data:[],n[9].data=e[2].success?e[2].options:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Select Month",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"date",size:"small",mode:"month",format:"MMM YYYY",type:"DatePicker",fieldStyle:{width:"100%"}},{Placeholder:"Employee",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"contactPersonId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Leave Type",fieldCol:22,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"leaveTypeId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Leave Status",fieldCol:22,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"leaveStatus",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:0,label:"Rejected"},{value:1,label:"Submitted"},{value:2,label:"Approved"}],type:"Select"},{Placeholder:"Project",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"projectId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"}],searchValue:{date:{type:"Date",mode:"monthRange",value:null,label:"Selected Month",showInColumn:!0,disabled:!0},contactPersonId:{type:"Select",multi:!0,value:[],label:"Employee",showInColumn:!1,disabled:!1},leaveTypeId:{type:"Select",multi:!0,value:[],label:"Leave Types",showInColumn:!1,disabled:!1},leaveStatus:{type:"Select",multi:!0,value:[],label:"Leave Status",showInColumn:!1,disabled:!1},projectId:{type:"Select",multi:!0,value:[],label:"Projects",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n(r,a)}}},Bc=function(e){var t=e.fields,a=e.setFields,n=e.getCompData;return{effectRender:!0,filterModalUseEffect:function(){Promise.all([Gr(),Kt("helpers/work?type=P",!0),_t()]).then((function(e){var n=Object(et.a)(t);n[1].data=e[0].success?e[0].data:[],n[3].data=e[1].success?e[1].options:[],n[5].data=e[2].success?e[2].data:[],n[7].data=e[0].success?e[0].data:[],n[9].data=e[1].success?e[1].options:[],n[11].data=e[2].success?e[2].data:[],a(Object(et.a)(n))}))},fields:[{Placeholder:"Employee",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"employeeId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Project",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"projectId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Organisation",fieldCol:22,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"organizationId",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Exclude Employee",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeEmployeeId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Exclude Project",fieldCol:24,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeProjectId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Exclude Organisation",fieldCol:22,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"excludeOrganizationId",icon:"cross",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[],type:"Select"},{Placeholder:"Timesheet Status",fieldCol:22,size:"small",type:"Text"},{object:"obj",fieldCol:24,key:"status",size:"small",mode:"multiple",rangeMax:"responsive",customValue:function(e,t){return{selectedIds:e,option:t}},getValueProps:function(e){return{value:null===e||void 0===e?void 0:e.selectedIds}},data:[{value:1,label:"Not Submitted"},{value:2,label:"Submitted"},{value:3,label:"Approved"},{value:4,label:"Rejected"}],type:"Select"}],searchValue:{employeeId:{type:"Select",multi:!0,value:[],label:"Employees",showInColumn:!1,disabled:!1},excludeEmployeeId:{color:"orange",type:"Select",multi:!0,value:[],label:"Exclude Employees",showInColumn:!1,disabled:!1},projectId:{type:"Select",multi:!0,value:[],label:"Projects",showInColumn:!1,disabled:!1},excludeProjectId:{color:"orange",type:"Select",multi:!0,value:[],label:"Exclude Projects",showInColumn:!1,disabled:!1},organizationId:{type:"Select",multi:!0,value:[],label:"Organisations",showInColumn:!1,disabled:!1},excludeOrganizationId:{color:"orange",type:"Select",multi:!0,value:[],label:"Exclude Organisations",showInColumn:!1,disabled:!1},status:{type:"Select",multi:!0,value:[],label:"Status",showInColumn:!1,disabled:!1}},callFilters:function(e,t,a,l){var r=Yc(a);n({queryParam:r,tagsValues:a})}}};var _c=function(e){var t=e.compName,a=e.compKey,r=e.visible,o=e.invisible,i=e.getCompData,s=e.tags,c=Object(n.useState)([]),u=Object(G.a)(c,2),d=u[0],m=u[1],f=Object(n.useState)(!1),p=Object(G.a)(f,2),h=p[0],y=p[1],v={bench:Nc({fields:d,setFields:m,getCompData:i}),skillResources:Rc({fields:d,setFields:m,getCompData:i}),positions:Ac({fields:d,setFields:m,getCompData:i}),allocations:Fc({fields:d,setFields:m,getCompData:i}),projectRevenue:zc({fields:d,setFields:m,getCompData:i}),clientRevenue:Lc({fields:d,setFields:m,getCompData:i}),leave_summary:Mc({fields:d,setFields:m,getCompData:i}),timesheet_summary:Bc({fields:d,setFields:m,getCompData:i})},g=(null===v||void 0===v?void 0:v[a])||{},b=g.searchValue,E=g.callFilters,k=g.filterModalUseEffect,S=g.effectRender;return Object(n.useEffect)((function(){var e;return m(null===(e=v[a])||void 0===e?void 0:e.fields),function(){}}),[]),Object(n.useEffect)((function(){h||y(r)}),[r]),h&&l.a.createElement(Sa,{title:t,visible:r,filters:null!==s&&void 0!==s?s:b,filterFields:d||[],filterFunction:E,destroyOnClose:!0,effectFunction:k,effectRender:S,onClose:function(){return o()}})},Yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",a=Object.entries(e);a.length;return a.map((function(e,a){var n,l,r=Object(G.a)(e,2),o=r[0],i=r[1],s=i.value,c=i.type,u=i.multi;i.mode;if(t&&((null===s||void 0===s||null===(n=s.selectedIds)||void 0===n?void 0:n.length)||(null===s||void 0===s?void 0:s.value)||(null===s||void 0===s?void 0:s.length))&&(t+="&"),"Select"===c&&u)t+="".concat((null===s||void 0===s||null===(l=s.selectedIds)||void 0===l?void 0:l.length)?"".concat(o,"=")+"".concat(null===s||void 0===s?void 0:s.selectedIds):"");else if("Select"===c)t+="".concat("".concat(o,"=")+"".concat(null===s||void 0===s?void 0:s.value));else if("Date"===c){var d=s||[],m=Object(G.a)(d,2),f=m[0],p=m[1];t+="".concat(f?"startDate="+f:"").concat(f&&p?"&":"").concat(p?"endDate="+p:"")}else t+="".concat(s?"".concat(o,"=")+"".concat(s):"")})),t},Vc=Ye.a.Title,qc=(Ye.a.Text,[Object(tt.a)({key:"name",dataIndex:"name",title:"Resource Name"},Ea("name","string")),Object(tt.a)({key:"resourceType",dataIndex:"resourceType",title:"Resource Type",width:"23.79%"},Ea("resourceType","string")),ea.a.EXPAND_COLUMN,Object(tt.a)({key:"employmentType",dataIndex:"employmentType",title:"Employee Status",width:"30.22%"},Ea("employmentType","string")),Object(tt.a)(Object(tt.a)({key:"buyRate",dataIndex:"buyRate",title:"Buy Rate (Hourly)",width:"23.79%"},Ea("buyRate","number")),{},{render:function(e){return ce(e)}})]),Hc=[Object(tt.a)({key:"Standard skill",dataIndex:"skill",title:"Skill",width:"30.22%"},Ea("skill","string")),Object(tt.a)({key:"level",dataIndex:"level",title:"Stnadard Level",width:"23.79%"},Ea("level","string"))];var Uc=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(null),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(!1),v=Object(G.a)(y,2),g=v[0],b=v[1];Object(n.useEffect)((function(){E()}),[]);var E=function(e,t){b(!0),Cc(e).then((function(a){a.success&&(r(a.data),e&&(c(!1),f(t))),b(!1)}))},k=function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Vc,{level:5},"Unallocated Resources")),l.a.createElement(h.a,{span:6},l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){!function(){b(!0);var e=Yc(null!==m&&void 0!==m?m:{});Cc(e,"/export").then((function(e){e.success&&Tc(e.data,"Unallocated Resources"),b(!1)}))}()}},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return c(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:m,filterFunction:function(e,t){var a=Object(tt.a)({},m);a[t].value=e;var n=Yc(a);E(n,m)}})))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{title:function(){return k()},columns:qc,loading:g,rowKey:"index",dataSource:a,expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.skills)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(p.a,{justify:"end"},l.a.createElement(h.a,{span:13},l.a.createElement(xa,{dataSource:e.skills,rowKey:"skill",columns:Hc,className:"expandtable-margin"})))}}})),l.a.createElement(_c,{compName:"Filters",compKey:"bench",tags:m,visible:s,getCompData:E,invisible:function(){return c(!1)}}))},Gc=Ye.a.Title;Ye.a.Text;var Wc=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(null),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(!1),v=Object(G.a)(y,2),g=v[0],b=v[1],E=[Object(tt.a)({key:"skill",dataIndex:"skill",title:"Standard Skill",width:"25%"},Ea("skill","string",!0)),Object(tt.a)({key:"skillLevel",dataIndex:"skillLevel",title:"Standard Level"},Ea("skillLevel","string")),Object(tt.a)({key:"name",dataIndex:"name",title:"Resource Name"},Ea("name","string")),Object(tt.a)({key:"resourceType",dataIndex:"resourceType",title:"Resource Type"},Ea("resourceType","string")),Object(tt.a)({key:"employmentType",dataIndex:"employmentType",title:"Employee Status"},Ea("employmentType","string")),Object(tt.a)({key:"buyRate",dataIndex:"buyRate",title:"Buy Rate (Hourly)",render:function(e){return ce(e)}},Ea("buyRate","number"))];Object(n.useEffect)((function(){k()}),[]);var k=function(e,t){b(!0),jc(e).then((function(a){a.success&&(r(a.data),c(!1),e&&f(Object(tt.a)({},t))),b(!1)}))},S=function(){b(!0);var e=Yc(null!==m&&void 0!==m?m:{});jc(e,"/export").then((function(e){e.success&&Tc(e.data,"Workforce Skill "),b(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Gc,{level:5},"Workforce Skill ")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:S},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return c(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:m,filterFunction:function(e,t){var a=Object(tt.a)({},m);a[t].value=e;var n=Yc(a);k(n,m)}})))},sticky:!0,rowKey:"index",loading:g,columns:E,pagination:!1,dataSource:a})),l.a.createElement(_c,{compName:"Filters",compKey:"skillResources",tags:m,visible:s,getCompData:k,invisible:function(){return c(!1)}}))},Kc=Ye.a.Title;Ye.a.Text;var $c=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(null),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(!1),v=Object(G.a)(y,2),g=v[0],b=v[1],E=[Object(tt.a)({key:"title",dataIndex:"title",fixed:!0,title:"Title",width:260},Ea("title","string",!0)),Object(tt.a)({key:"workType",dataIndex:"workType",title:"Type",width:100},Ea("workType","string")),Object(tt.a)({key:"workStatus",dataIndex:"workStatus",title:"Status",width:100},Ea("workStatus","string")),Object(tt.a)({key:"organization",dataIndex:"organization",title:"Organisation Name",width:200},Ea("organization","string")),Object(tt.a)({key:"milestone",dataIndex:"milestone",title:"Milestone",width:100},Ea("milestone","string")),Object(tt.a)({key:"position",dataIndex:"position",title:"Position Title",width:100},Ea("position","string")),Object(tt.a)({key:"skill",dataIndex:"skill",title:"Standard Skill",width:250},Ea("skill","string")),Object(tt.a)({key:"skillLevel",dataIndex:"skillLevel",title:"Standard Level",width:80},Ea("skillLevel","string")),Object(tt.a)({key:"name",dataIndex:"name",title:"Resource Name",width:180},Ea("name","string")),Object(tt.a)({key:"resourceType",dataIndex:"resourceType",title:"Resource Type",width:80},Ea("resourceType","string")),Object(tt.a)({key:"employmentType",dataIndex:"employmentType",title:"Employee Status",width:80},Ea("employmentType","string")),Object(tt.a)({key:"bookingType",dataIndex:"bookingType",title:"Booking Type",width:80},Ea("bookingType","string")),Object(tt.a)({key:"buyRate",dataIndex:"buyRate",title:"Buy Rate (Hourly)",width:80,render:function(e){return ce(e)}},Ea("buyRate","number")),Object(tt.a)({key:"sellRate",dataIndex:"sellRate",title:"Sell Rate (Hourly)",width:80,render:function(e){return ce(e)}},Ea("sellRate","number")),Object(tt.a)({key:"CMPercent",dataIndex:"CMPercent",title:"CM%",width:80,render:function(e){return ue(e)+" %"}},Ea("CMPercent","number")),Object(tt.a)({key:"startDate",dataIndex:"startDate",title:"Position Start Date",width:130,render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({key:"endDate",dataIndex:"endDate",title:"Position End Date",width:130,render:function(e){return me(e,!0,!0)}},Ea("endDate","date"))];Object(n.useEffect)((function(){k()}),[]);var k=function(e,t){b(!0),Oc(e).then((function(a){a.success&&(r(a.data),e&&(c(!1),f(t))),b(!1)}))},S=function(){b(!0);var e=Yc(null!==m&&void 0!==m?m:{});Oc(e,"/export").then((function(e){e.success&&Tc(e.data,"Position Allocations"),b(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Kc,{level:5},"Opportunity & Project Position Allocations ")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:S},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return c(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:m,filterFunction:function(e,t){var a=Object(tt.a)({},m);a[t].value=e;var n=Yc(a);k(n,m)}})))},rowKey:"index",loading:g,columns:E,dataSource:a,pagination:!1,scroll:{x:"max-content"}})),l.a.createElement(_c,{compName:"Filters",compKey:"positions",tags:m,visible:s,getCompData:k,invisible:function(){return c(!1)}}))},Jc=Ye.a.Title;Ye.a.Text;var Xc=function(){var e=Object(n.useState)(),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)({pNo:1,pSize:pe().pageSize}),d=Object(G.a)(u,2),m=(d[0],d[1],Object(n.useState)(null)),f=Object(G.a)(m,2),y=f[0],v=f[1],g=Object(n.useState)(!1),b=Object(G.a)(g,2),E=b[0],k=b[1],S=[Object(tt.a)({key:"name",dataIndex:"name",fixed:!0,title:"Resource Name",width:260},Ea("name","string",!0)),Object(tt.a)({key:"resourceType",dataIndex:"resourceType",title:"Resource Type",width:80},Ea("resourceType","string")),Object(tt.a)({key:"employmentType",dataIndex:"employmentType",title:"Employee Status",width:80},Ea("employmentType","string")),Object(tt.a)({key:"title",dataIndex:"title",title:"Title",width:250},Ea("title","string")),Object(tt.a)({key:"workType",dataIndex:"workType",title:"Type",width:100},Ea("workType","string")),Object(tt.a)({key:"workStatus",dataIndex:"workStatus",title:"Status",width:100},Ea("workStatus","string")),Object(tt.a)({key:"organization",dataIndex:"organization",width:200,title:"Organization Name"},Ea("organization","string")),Object(tt.a)({key:"milestone",dataIndex:"milestone",title:"Milestone",width:100},Ea("milestone","string")),Object(tt.a)({key:"position",dataIndex:"position",title:"Position Title",width:100},Ea("position","string")),Object(tt.a)({key:"bookingType",dataIndex:"bookingType",title:"Booking Type",width:80},Ea("bookingType","string")),Object(tt.a)({key:"skill",dataIndex:"skill",title:"Standard Skill",width:250},Ea("skill","string")),Object(tt.a)({key:"skillLevel",dataIndex:"skillLevel",title:"Standard Level",width:80},Ea("skillLevel","string")),Object(tt.a)({key:"buyRate",dataIndex:"buyRate",title:"Buy Rate (Hourly)",width:80,render:function(e){return ce(e)}},Ea("buyRate","number")),Object(tt.a)({key:"sellRate",dataIndex:"sellRate",title:"Sell Rate (Hourly)",width:80,render:function(e){return ce(e)}},Ea("sellRate","number")),Object(tt.a)({key:"startDate",dataIndex:"startDate",title:"Position Start Date",width:130,render:function(e){return me(e,!0,!0)}},Ea("startDate","date")),Object(tt.a)({key:"endDate",dataIndex:"endDate",title:"Position End Date",width:130,render:function(e){return me(e,!0,!0)}},Ea("endDate","date"))];Object(n.useEffect)((function(){C()}),[]);var C=function(e,t){k(!0),xc(e).then((function(a){a.success&&(r(a.data),e&&(c(!1),v(t))),k(!1)}))},j=function(){k(!0);var e=Yc(null!==y&&void 0!==y?y:{});xc(e,"/export").then((function(e){e.success&&Tc(e.data,"Workforce Allocations"),k(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Jc,{level:5},"Workforce Allocations")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:j},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return c(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:y,filterFunction:function(e,t){var a=Object(tt.a)({},y);a[t].value=e;var n=Yc(a);C(n,y)}})))},rowKey:"index",loading:E,columns:S,dataSource:a,pagination:!1,scroll:{x:"max-content"}})),l.a.createElement(_c,{compName:"Filters",compKey:"allocations",tags:y,visible:s,getCompData:C,invisible:function(){return c(!1)}}))},Zc=[Object(tt.a)({key:"projectTitle",dataIndex:"projectTitle",title:"Project Name",fixed:!0,width:"10%"},Ea("projectTitle","string")),Object(tt.a)({key:"organizationName",dataIndex:"organizationName",title:"Organisation",width:"10%"},Ea("organizationName","string")),Object(tt.a)({key:"projectManagerName",dataIndex:"projectManagerName",title:"Project Manager Name",width:"6%"},Ea("projectManagerName","string")),Object(tt.a)({key:"projectId",dataIndex:"projectId",title:"Project Code",align:"center",width:"4%",render:function(e){return"00".concat(e)}},Ea("projectId","number")),Object(tt.a)({key:"projectValue",dataIndex:"projectValue",title:"Total Contract Value",width:"5%",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("projectValue","number")),Object(tt.a)({key:"totalSell",dataIndex:"totalSell",title:"Total Actual Revenue",width:"5%",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("totalSell","number")),{key:"residualedRevenue",dataIndex:"residualedRevenue",title:"Residual Contract Value",width:"5%",render:function(e,t){var a,n;return ce(parseFloat(null!==(a=t.projectValue)&&void 0!==a?a:0)-parseFloat(null!==(n=t.totalSell)&&void 0!==n?n:0))},sorter:function(e,t){var a,n,l,r,o,i;return(null!==(a=parseFloat(null!==(n=e.projectValue)&&void 0!==n?n:0)-parseFloat(null!==(l=e.totalSell)&&void 0!==l?l:0))&&void 0!==a?a:0)-(null!==(r=parseFloat(null!==(o=t.projectValue)&&void 0!==o?o:0)-parseFloat(null!==(i=t.totalSell)&&void 0!==i?i:0))&&void 0!==r?r:0)}},Object(tt.a)({key:"YTDTotalSell",dataIndex:"YTDTotalSell",title:"YTD Actual Revenue",width:"5%",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("YTDTotalSell","number")),{key:"empty",dataIndex:"empty",width:"1%"}];var Qc=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(!1),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(null),v=Object(G.a)(y,2),g=v[0],b=v[1],E=Object(n.useState)(!1),k=Object(G.a)(E,2),S=k[0],C=k[1];Object(n.useEffect)((function(){Mu({contantColmuns:Zc,setColumn:c,spliceBtw:9,format:"currency"}),j()}),[]);var j=function(e,t){C(!0),Dc(e).then((function(a){a.success&&(r(a.data),e&&(f(!1),b(t))),C(!1)}))},O=function(){C(!0);var e=Yc(null!==g&&void 0!==g?g:{});Dc(e,"/export").then((function(e){e.success&&Tc(e.data,"FY Project Revenue Analysis"),C(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ye.a.Title,{level:5},"FY Project Revenue Analysis")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:O},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return f(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:g,filterFunction:function(e,t){var a=Object(tt.a)({},g);a[t].value=e;var n=Yc(a);j(n,g)}})))},columns:s,loading:S,rowKey:"projectId",dataSource:a,pagination:!1,scroll:{x:"180vw"},summary:function(e){return function(e){var t=["projectTitle","organizationName","projectManagerName","projectId","empty"];if(e.length>0)return l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,s.map((function(a,n){var r=a.key,o=0,i=!1;return t.includes(r)||(i=!0,e.forEach((function(e,t){var a,n;"residualedRevenue"===r?o+=null!==(a=e.projectValue-e.totalSell)&&void 0!==a?a:0:o+=null!==(n=e[r])&&void 0!==n?n:0}))),"projectId"===r?l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1,style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},"Total")):i?l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1,align:"center",style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},ue(o))):l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1})}))))}(e)}})),l.a.createElement(_c,{compName:"Filters",compKey:"projectRevenue",tags:g,visible:m,getCompData:j,invisible:function(){return f(!1)}}))},eu=[Object(tt.a)({key:"organizationName",dataIndex:"organizationName",fixed:!0,title:"Organisation",width:"10%"},Ea("organizationName","string")),Object(tt.a)({key:"organizationId",dataIndex:"organizationId",title:"Organisation Code",align:"center",width:"4%",render:function(e){return"00".concat(e)}},Ea("organizationId","number")),Object(tt.a)({key:"YTDTotalSell",dataIndex:"YTDTotalSell",title:"YTD Actual Revenue",width:"5%",render:function(e){return ce(null!==e&&void 0!==e?e:0)}},Ea("YTDTotalSell","number")),{key:"empty",dataIndex:"empty",width:"1%"}];var tu=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(!1),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(null),v=Object(G.a)(y,2),g=v[0],b=v[1],E=Object(n.useState)(!1),k=Object(G.a)(E,2),S=k[0],C=k[1];Object(n.useEffect)((function(){Mu({contantColmuns:eu,setColumn:c,spliceBtw:4,format:"currency"}),j()}),[]);var j=function(e,t){C(!0),Pc(e).then((function(a){a.success&&(r(a.data),e&&(f(!1),b(t))),C(!1)}))},O=function(){C(!0);var e=Yc(null!==g&&void 0!==g?g:{});Pc(e,"/export").then((function(e){e.success&&Tc(e.data,"FY Client Revenue Analysis"),C(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ye.a.Title,{level:5},"FY Client Revenue Analysis")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return O}},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return f(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:g,filterFunction:function(e,t){var a=Object(tt.a)({},g);a[t].value=e;var n=Yc(a);j(n,g)}})))},columns:s,loading:S,rowKey:"organizationId",dataSource:a,pagination:!1,scroll:{x:"170vw"},summary:function(e){return function(e){var t=["organizationName","organizationId","empty"];if(e.length>0)return l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,s.map((function(a,n){var r=a.key,o=0,i=!1;return t.includes(r)||(i=!0,e.forEach((function(e,t){var a,n;"residualedRevenue"===r?o+=null!==(a=e.projectsValue-e.totalSell)&&void 0!==a?a:0:o+=null!==(n=e[r])&&void 0!==n?n:0}))),"organizationId"===r?l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1,style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},"Total")):i?l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1,align:"center",style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},ue(o))):l.a.createElement(ea.a.Summary.Cell,{index:r+1,key:r+1})}))))}(e)}})),l.a.createElement(_c,{compName:"Filters",compKey:"clientRevenue",tags:g,visible:m,getCompData:j,invisible:function(){return f(!1)}}))},au=In.a.TabPane,nu=[Object(tt.a)({key:"employeeName",dataIndex:"employeeName",title:"Employee Name",width:"6%"},Ea("employeeName","string")),Object(tt.a)({key:"employeeCode",dataIndex:"employeeCode",title:"Employee Code",width:"3%",render:function(e){return"00".concat(e)}},Ea("employeeCode","string")),Object(tt.a)({key:"projectName",dataIndex:"projectName",title:"Project Name",width:"8%"},Ea("projectName","string")),Object(tt.a)({key:"projectCode",dataIndex:"projectCode",title:"Project Code",width:"3%",render:function(e){return"00".concat(e)}},Ea("projectCode","string")),Object(tt.a)({key:"purchaseOrder",dataIndex:"purchaseOrder",title:"PO No",align:"center",width:"4%"},Ea("purchaseOrder","number")),Object(tt.a)({key:"organizationName",dataIndex:"organizationName",title:"Organisation",width:"8%"},Ea("organizationName","number")),Object(tt.a)({key:"currentMonth",dataIndex:"currentMonth",title:"Sheet Hours This Month",width:"4%",render:function(e){return ue(null!==e&&void 0!==e?e:0)}},Ea("currentMonth","number")),Object(tt.a)({key:"currentYear",dataIndex:"currentYear",title:"YTD Completed Work",width:"4%",render:function(e){return ue(null!==e&&void 0!==e?e:0)}},Ea("currentYear","number")),{key:"empty",dataIndex:"empty",width:"1%"}];var lu=function(){var e,t,a,r,o=Object(n.useState)({}),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(K()()),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)([]),v=Object(G.a)(y,2),g=v[0],b=v[1],E=Object(n.useState)(!1),k=Object(G.a)(E,2),S=k[0],C=k[1],j=Object(n.useState)(null),O=Object(G.a)(j,2),x=O[0],w=O[1],I=Object(n.useState)(!1),D=Object(G.a)(I,2),P=D[0],T=D[1],N=Ee("dates"),R=N.start,A=N.end;Object(n.useEffect)((function(){Mu({compName:"timesheetSummary",contantColmuns:nu,setColumn:b,spliceBtw:9,width:"3%",format:"status",dataIndex:["months"]}),L({})}),[]);var F=function(e,t){T(!0),wc(e).then((function(a){a.success&&(c(a.data),e&&(C(!1),w(t))),T(!1)}))},z=function(e){var t=["employeeName","employeeCode","projectName","projectCode","purchaseOrder","organizationName","empty"];if(e.length>0)return l.a.createElement(ea.a.Summary,{fixed:"bottom"},l.a.createElement(ea.a.Summary.Row,null,g.map((function(a,n){var r=a.dataIndex,o=0,i=!1;return t.includes(r)||(i=!0,e.forEach((function(e,t){var a,n,l;2===r.length?o+=null!==(a=null===(n=e[r[0]][r[1]])||void 0===n?void 0:n.filteredHours)&&void 0!==a?a:0:o+=null!==(l=e[r])&&void 0!==l?l:0}))),"organizationName"===r?l.a.createElement(ea.a.Summary.Cell,{index:r+n,key:r+n,style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},"Total")):i?l.a.createElement(ea.a.Summary.Cell,{index:r+n,key:r+n,align:"center",style:{fontWeight:600}},l.a.createElement(Ye.a.Text,{strong:!0},ue(o))):l.a.createElement(ea.a.Summary.Cell,{index:r+n,key:r+n})}))))},L=function(e){var t,a=e.month,n=e.queryParam,l=void 0===n?"":n,r=e.tagsValues;l=l||Yc(null!==x&&void 0!==x?x:{}),a=null!==(t=a)&&void 0!==t?t:m;var o="startDate=".concat(R.format("YYYY-MM-DD"),"&endDate=").concat(A.format("YYYY-MM-DD"),"&currentDate=").concat(a.format("YYYY-MM-DD")).concat(l?"&".concat(l):"");F(o,r)};return l.a.createElement("div",null,l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(Ye.a.Title,{level:4},"Timesheets Summary")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){T(!0);var e=Yc(null!==x&&void 0!==x?x:{});wc(e,"/export").then((function(e){e.success&&Tc(e.data,"Timesheets Summary"),T(!1)}))}},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return C(!0)}},"Filters"))))),l.a.createElement(p.a,{gutter:[0,50]},l.a.createElement(h.a,{span:24},l.a.createElement(Bn.b,{title:"YTD Completed Hours",bordered:!0,column:1,size:"small",style:{width:"35%"},className:"describe"},l.a.createElement(Bn.b.Item,{label:""},l.a.createElement(ft.a,{picker:"month",value:m,style:{width:200},disabledDate:function(e){return e&&e<=R||e>=A},size:"small",format:"MMM YYYY",onChange:function(e){var t;e=null!==(t=e)&&void 0!==t?t:K()(),f(e),L({month:e})}})),l.a.createElement(Bn.b.Item,{label:"T&M"},ue(null===s||void 0===s?void 0:s.timeProjectTotalHours)),l.a.createElement(Bn.b.Item,{label:"Milestone"},ue(null===s||void 0===s?void 0:s.milestoneProjectTotalHours)),l.a.createElement(Bn.b.Item,{label:"Total Completed Hours"},ue((null!==(e=null===s||void 0===s?void 0:s.timeProjectTotalHours)&&void 0!==e?e:0)+(null!==(t=null===s||void 0===s?void 0:s.milestoneProjectTotalHours)&&void 0!==t?t:0))))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:x,filterFunction:function(e,t){var a=Object(tt.a)({},x);a[t].value=e;var n=Yc(a);F(n,x)}}))),l.a.createElement(In.a,{type:"card",style:{marginTop:"50px"}},l.a.createElement(au,{tab:"Time & Material",key:"timebase"},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(Ye.a.Title,{level:5},"Timesheet Data - T&M")},columns:g,loading:P,rowKey:"index",dataSource:null!==(a=null===s||void 0===s?void 0:s.timeProjectSummary)&&void 0!==a?a:[],pagination:!1,scroll:{x:"170vw"},summary:function(e){return z(e)}})),l.a.createElement(au,{tab:"Milestone",key:"milestone"},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(Ye.a.Title,{level:5},"Timesheet Data - Milestone")},columns:g,loading:P,rowKey:"index",dataSource:null!==(r=null===s||void 0===s?void 0:s.milestoneProjectSummary)&&void 0!==r?r:[],pagination:!1,scroll:{x:"170vw"},summary:function(e){return z(e)}}))),l.a.createElement(_c,{compName:"Filters",compKey:"timesheet_summary",tags:x,visible:S,getCompData:L,invisible:function(){return C(!1)}}))},ru=Ye.a.Title,ou=(Ye.a.Text,[Object(tt.a)({key:"employeeName",dataIndex:"employeeName",title:"Employee Name",width:"33.33%"},Ea("employeeName","string",!0)),Object(tt.a)({key:"employeeCode",dataIndex:"employeeCode",title:"Employee Code",width:"33.33%",render:function(e){return"00".concat(e)}},Ea("employeeCode","number")),Object(tt.a)({key:"totalHours",dataIndex:"totalHours",title:"Total Hours",width:"33.33%",render:function(e){return ue(null!==e&&void 0!==e?e:0)}},Ea("totalHours","number"))]),iu=[Object(tt.a)({key:"leaveType",dataIndex:"leaveType",title:"Leave Type"},Ea("leaveType","string",!0)),Object(tt.a)({key:"projectTitle",dataIndex:"projectTitle",title:"Project Title"},Ea("projectTitle","string")),Object(tt.a)({key:"projectCode",dataIndex:"projectCode",title:"Project Code",render:function(e){return e&&"00".concat(e)}},Ea("projectCode","number")),Object(tt.a)({key:"startDate",dataIndex:"startDate",title:"Start Date",render:function(e){return me(e,!0,!0)}},Ea("startDate","string")),Object(tt.a)({key:"endDate",dataIndex:"endDate",title:"End Date",render:function(e){return me(e,!0,!0)}},Ea("endDate","string")),Object(tt.a)({key:"hours",dataIndex:"hours",title:"Hours",render:function(e){return ue(null!==e&&void 0!==e?e:0)}},Ea("hours","string")),Object(tt.a)({key:"leaveStatus",dataIndex:"leaveStatus",title:"Status"},Ea("leaveStatus","string"))];var su=function(){var e=Object(n.useState)([]),t=Object(G.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),i=Object(G.a)(o,2),s=i[0],c=i[1],u=Object(n.useState)(null),d=Object(G.a)(u,2),m=d[0],f=d[1],y=Object(n.useState)(!1),v=Object(G.a)(y,2),g=v[0],b=v[1];Object(n.useEffect)((function(){E()}),[]);var E=function(e,t){b(!0),Ic(e).then((function(a){a.success&&(r(a.data),e&&(c(!1),f(t))),b(!1)}))},k=function(){b(!0);var e=Yc(null!==m&&void 0!==m?m:{});Ic(e,"/export").then((function(e){e.success&&Tc(e.data,"Leave Request Summary"),b(!1)}))};return l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(xa,{sticky:!0,title:function(){return l.a.createElement(p.a,{justify:"space-between"},l.a.createElement(h.a,null,l.a.createElement(ru,{level:5},"Leave Request Summary")),l.a.createElement(h.a,null,l.a.createElement(p.a,{justify:"end",gutter:5},l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:k},"Download CSV")),l.a.createElement(h.a,null,l.a.createElement(rt.a,{size:"small",onClick:function(){return c(!0)}},"Filters")))),l.a.createElement(h.a,{span:24},l.a.createElement(Oa,{filters:m,filterFunction:function(e,t){var a=Object(tt.a)({},m);a[t].value=e;var n=Yc(a);E(n,m)}})))},rowKey:"employeeCode",loading:g,columns:ou,dataSource:a,expandable:{rowExpandable:function(e){var t;return(null===e||void 0===e||null===(t=e.leaveRequests)||void 0===t?void 0:t.length)>0},expandedRowRender:function(e){return l.a.createElement(p.a,{justify:"center"},l.a.createElement(h.a,{span:23},l.a.createElement(xa,{dataSource:e.leaveRequests,rowKey:"leaveRequestId",columns:iu,className:"expandtable-margin"})))}},pagination:!1})),l.a.createElement(_c,{compName:"Filters",compKey:"leave_summary",tags:m,visible:s,getCompData:E,invisible:function(){return c(!1)}}))},cu=[{name:"INCOME/REVENUE",key:"INCOME/REVENUE",identifier:"revenue_total",className:"title-row"},{name:"Revenue - T&M Basis",identifier:"revenue_total",key:"Revenue - T&M Basis",className:"data-title-row",default:0,editable:!0},{name:"Revenue - Milestone Basis",identifier:"revenue_total",key:"Revenue - Milestone Basis",className:"data-title-row",default:0,editable:!0},{name:"Revnue - Other",identifier:"revenue_total",key:"Revnue - Other",className:"data-title-row",editable:!0},{name:"Revenue - Security Clearance Fee",identifier:"revenue_total",key:"Revenue - Security Clearance Fee",className:"data-title-row",editable:!0},{name:"Misc Income",identifier:"revenue_total",key:"Misc Income",className:"data-title-row",editable:!0},{name:"Adjustment",identifier:"revenue_total",key:"Revenue - Adjustment",className:"data-title-row",editable:!0},{},{className:"total-row",name:"TOTAL REVENUE",identifier:"revenue_total",key:"TOTAL REVENUE",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?yu(t[e]):"-"}}],uu=[{},{name:"COST OF SALES - COS",key:"COST OF SALES - COS cos",identifier:"cost_total",className:"title-row"},{name:"Salaries & Wages - Permanent",key:"Salaries & Wages - Permanent cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Salaries & Wages - Casual",key:"Salaries & Wages - Casual cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Superannuation - Permanent",key:"Superannuation - Permanent cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Superannuation - Casual",key:"Superannuation - Casual cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Bonus/STI",key:"Bonus/STI cos",className:"data-title-row",identifier:"cost_total",editable:!0},{name:"Superannuation on Bonus/STI",key:"Superannuation on Bonus/STI cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Employee Leave Entitlements AL/LSL",key:"Employee Leave Entitlements AL/LSL cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Training & Education",key:"Training & Education cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Recruitment Expenses",key:"Recruitment Expenses cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Staff amenities",key:"Staff amenities cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Fringe Benefits Tax",key:"Fringe Benefits Tax cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Subcontractor Services",key:"Subcontractor Services cos",identifier:"cost_total",className:"data-title-row",editable:!0},{name:"Payroll Tax",key:"Payroll Tax cos",className:"data-title-row",identifier:"cost_total",editable:!0},{name:"Security Clearance Sponsorship",key:"Security Clearance Sponsorship cos",className:"data-title-row",editable:!0},{name:"Travel - Client Funded",key:"Travel - Client Funded cos",className:"data-title-row",editable:!0},{name:"Travel - Milestone Inclusive",key:"Travel - Milestone Inclusive cos",className:"data-title-row",editable:!0},{name:"Membership Fee",key:"Membership Fee cos",className:"data-title-row",editable:!0},{},{},{className:"total-row",name:"TOTAL COST OF SALES - COS",key:"TOTAL COST OF SALES - COS cos",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?yu(t[e]):"-"}}],du=[{},{className:"total-row",name:"CONTRIBUTION MARGIN",key:"CONTRIBUTION MARGIN",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,hu(e,8,t)-hu(e,30,t)},render:function(e,t){return e=e.startsWith("FY")?"total":e,yu(t[e])}},{},{className:"total-row",name:"C.M. %",key:"C.M. %",renderCalculation:function(e,t){t=t.startsWith("FY")?"total":t;var a=hu(e,8,t);return a?(a-hu(e,30,t))/a*100:0},render:function(e,t){return e=e.startsWith("FY")?"total":e,yu(t[e],"float")}},{}],mu=[{},{name:"DIRECT OVERHEAD - DOH",key:"DIRECT OVERHEAD - DOH doh",className:"title-row"},{name:"Salaries & Wages - Permanent",key:"Salaries & Wages - Permanent doh",className:"data-title-row",editable:!0},{name:"Superannuation - Permanent",key:"Superannuation - Permanent doh",className:"data-title-row",editable:!0},{name:"Travel Allowances",key:"Travel Allowances doh",className:"data-title-row",editable:!0},{name:"Bonus/STI",key:"Bonus/STI doh",className:"data-title-row",editable:!0},{name:"Employee Leave Entitlements AL/LSL",key:"Employee Leave Entitlements AL/LSL doh",className:"data-title-row",editable:!0},{name:"Subcontractor Services",key:"Subcontractor Services doh",className:"data-title-row",editable:!0},{name:"Payroll Tax",key:"Payroll Tax doh",className:"data-title-row",editable:!0},{name:"Other Personnel Expenses",key:"Other Personnel Expenses doh",className:"data-title-row",editable:!0},{name:"Occupancy Expenses ",key:"Occupancy Expenses doh",className:"data-title-row",editable:!0},{name:"Equipment Expenses ",key:"Equipment Expenses doh",className:"data-title-row",editable:!0},{name:"Communication Expenses ",key:"Communication Expenses doh",className:"data-title-row",editable:!0},{name:"Outside Services Expenses ",key:"Outside Services Expenses doh",className:"data-title-row",editable:!0},{name:"Travel Expenses",key:"Travel Expenses doh",className:"data-title-row",editable:!0},{name:"Entertainment - Client ",key:"Entertainment - Client doh",className:"data-title-row",editable:!0},{name:"Entertainment - Staff ",key:"Entertainment - Staff doh",className:"data-title-row",editable:!0},{name:"Other General Expenses ",key:"Other General Expenses doh",className:"data-title-row",editable:!0},{},{className:"total-row",name:"TOTAL DIRECT OVERHEAD - DOH",key:"TOTAL DIRECT OVERHEAD - DOH doh"}],fu=[{},{className:"total-row",name:"EARNINGS BEFORE INCOME TAX - EBIT",key:"EARNINGS BEFORE INCOME TAX - EBIT",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,hu(e,8,t)-hu(e,30,t)-hu(e,54,t)},render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?yu(t[e]):"-"}},{},{name:"Interest Income",key:"Interst Income tax",className:"data-title-row",editable:!0},{name:"Interest Expense",key:"Interest Expense tax",operation:"-",className:"data-title-row",editable:!0},{name:"Indirect Overhead",key:"Indirect Overhead tax",operation:"-",className:"data-title-row",editable:!0},{name:"Other Income",key:"Other Income tax",className:"data-title-row",editable:!0}],pu=[{className:"total-row",name:"PROFIT BEFORE TAX",key:"PROFIT BEFORE TAX profit",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,hu(e,56,t)+hu(e,58,t)-hu(e,59,t)-hu(e,60,t)+hu(e,61,t)},render:function(e,t){return e=e.startsWith("FY")?"total":e,yu(t[e])}},{},{name:"Income Tax Expense",key:"Income Tax Expense profit",className:"data-title-row",editable:!0},{},{className:"total-row",name:"NET PROFIT",key:"NET PROFIT profit",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,hu(e,62,t)-hu(e,64,t)},render:function(e,t){return e=e.startsWith("FY")?"total":e,yu(t[e])}}],hu=function(e,t,a){if(!e||!e[t])return 0;var n=a?e[t][a]:e[t];return isNaN(parseFloat(n))?0:parseFloat(n)},yu=function(e,t){return"float"===t?"".concat(e<0?"(".concat(ue(Math.abs(e)),")"):ue(e)," %"):"".concat(e<0?"(".concat(ce(Math.abs(e)),")"):ce(e))},vu=["title","editable","children","dataIndex","key","record","indexing","handleSave"];function gu(){gu=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var bu=Ye.a.Title,Eu=l.a.createContext(null),ku=function(){console.log("setted focus");for(var e={},t=Object(ac.a)(Array,cu.concat(uu,du,mu,fu,pu)),a=0,n=1;n<t.length;n++){var l=t[n];l.editable&&(a&&(e[a.key]=l.key),a=l)}return e["Income Tax Expense profit"]="Revenue - Security Clearance Fee",e}(),Su=function(e){e.title;var t=e.editable,a=e.children,r=e.dataIndex,o=(e.key,e.record),i=e.indexing,s=e.handleSave,c=Object(ya.a)(e,vu),u=Object(n.useRef)(null),d=Object(n.useContext)(Eu),m=function(){var e=Object(dn.a)(gu().mark((function e(t){var a;return gu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.getFieldValue([o.key,r]),d.isFieldTouched([o.key,r]))try{s(i,r,a),setTimeout((function(){d.setFields([{name:[o.key,r],touched:!1}]),t&&d.getFieldInstance([ku[o.key],r]).focus()}),1e3)}catch(n){console.log("Save failed:",n)}else t&&d.getFieldInstance([ku[o.key],r]).focus();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=a;return t&&(f=l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(nt.a.Item,{style:{margin:0},name:[o.key,r]},l.a.createElement(yt.a,{ref:u,className:"table-inputNumber-border",controls:!1,size:"small",formatter:function(e){return Tt(e,"$")},parser:function(e){return Nt(e,"$")},onBlur:function(){return m()},onPressEnter:function(e){return m(!0)}}))))),l.a.createElement("td",c,f)};var Cu=function(){var e=nt.a.useForm(),t=Object(G.a)(e,1)[0],a=Ee("dates"),r=a.start,o=a.end,i=K()(o).format("[FY]YY"),s=(K()().subtract(1,"month").endOf("month"),Object(n.useState)([])),c=Object(G.a)(s,2),u=c[0],d=c[1],m=Object(n.useState)(!1),f=Object(G.a)(m,2),y=f[0],v=f[1],b=Object(n.useState)([{title:"Whole A$",dataIndex:"name",key:"name",width:250,onHeaderCell:function(){return{className:"whole"}},onCell:function(e){return{className:e.className}},fixed:"left"},{title:"".concat(i," Budget"),children:[{title:"Revenue AU$",children:[]}]}]),E=Object(G.a)(b,2),k=E[0],S=E[1];Object(n.useEffect)((function(){C(),function(e){var t=Ee("dates");t.start,t.end;return it.a.get("".concat(J,"/budgetReportLabel/"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=void 0===l?[]:l,o=a.message;he(o);var i={};if(n){var s,c=Object(g.a)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value,d=u.values;i[u.title]=d}}catch(m){c.e(m)}finally{c.f()}}return fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:i}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))}().then((function(e){e.success&&(j(e.data),t.setFieldsValue(e.data))}))}),[]);var C=function(){for(var e=Object(et.a)(k),t=[ju({year:"YTD",era:"",totalKey:"YTD"})],a=de(r);a.isSameOrBefore(o);a.add(1,"months")){var n={year:de(a,"MMM YY"),era:a.isBefore(K()(),"month")?"Actual":"Forecast"};t.push(ju(n,x))}t.push(ju({year:i,era:"Forcast",totalKey:"total"})),e[1].children[0].children=t,S(e)},j=function(e){var t=Object(ac.a)(Array,Object(et.a)(cu).concat(Object(et.a)(uu),Object(et.a)(du),Object(et.a)(mu),Object(et.a)(fu),Object(et.a)(pu)));t=t.map((function(t){return e[t.key]&&(t=Object(tt.a)(Object(tt.a)({},t),e[t.key])),t})),O(t)},O=function(e){var t,a,n,l=Object(et.a)(e),r=(null===k||void 0===k||null===(t=k[1])||void 0===t||null===(a=t.children)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.children)||[];r.forEach((function(e){var t=Object(G.a)(e.children,1)[0].dataIndex;l[8][t]=0,l[30][t]=0,l[55][t]=0;for(var a=0;a<l.length;a++)K()(t,"MMM YY",!0).isValid()&&(a<8?l[8][t]+=hu(l,a,t):a>8&&a<30?l[30][t]+=hu(l,a,t):a>34&&a<55&&(l[55][t]+=hu(l,a,t)))}));var o=[32,34,57,63,67];return r.forEach((function(e){var t=Object(G.a)(e.children,1)[0].dataIndex;o.forEach((function(e){var a,n,r;l[e]=Object(tt.a)(Object(tt.a)({},l[e]),{},Object(at.a)({},t,null===(a=l)||void 0===a||null===(n=a[e])||void 0===n||null===(r=n.renderCalculation)||void 0===r?void 0:r.call(n,l,t)))}))})),l=l.map((function(e){for(var t=0,a=0,n=0;n<r.length;n++){var l=Object(G.a)(r[n].children,1)[0],o=l.dataIndex,i=l.title;if(K()(o,"MMM YY",!0).isValid()){var s=+e[o]||0;a+=s,"Actual"===i&&(t+=s)}}return Object(tt.a)(Object(tt.a)({},e),{},{YTD:t,total:a})})),v(!1),d(l),!0},x=function(e,t,a,n){var l=Object(et.a)(u);return l[e][t]=a,O(l)},w={body:{cell:Su}},I=k.map((function e(t){var a=Object(tt.a)(Object(tt.a)({},t),{},{onCell:function(e,a){return{record:e,editable:"name"!==t.dataIndex&&!t.totalCol&&e.editable,dataIndex:t.dataIndex,title:t.title,indexing:a,handleSave:x}}});return t.children&&(a.children=t.children.map(e)),a}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{style:{backgroundColor:"#0463AC",paddingRight:15},justify:"space-between",align:"middle"},l.a.createElement(h.a,{span:28},l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(bu,{level:5,style:{color:"#fff",marginBottom:0,paddingLeft:5}},"Budget ",i)),l.a.createElement(h.a,{span:24},l.a.createElement(bu,{level:5,style:{color:"#fff",marginBottom:0,paddingLeft:5}},"Profit & Loss Statement ")))),l.a.createElement(h.a,null,l.a.createElement(lt.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return t.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(rt.a,{type:"primary",size:"small"},"Save")))),l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(nt.a,{form:t,component:!1,onFinish:function(e){var t;v(!0),(t=e,$.b.loading({content:"Updating Budget",key:2}),it.a.put("".concat(J,"/budgetReportLabel/updateReport/"),t,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=(a.data,a.message);return he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n&&$.b.success({content:"Budget Updated Successfully",key:2}),{success:n}})).catch((function(e){return ge(e,2,5)}))).then((function(e){v(!1)}))}},l.a.createElement(Eu.Provider,{value:t},l.a.createElement(ea.a,{components:w,bordered:!0,loading:y,size:"small",pagination:!1,rowKey:function(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.name},columns:I,rowClassName:function(e){return e.className},dataSource:u,className:"scroll-table fs-v-small full-width wih-report",scroll:{x:"max-content",y:"65vh"}}))))))},ju=function(e){var t=e.year,a=e.era,n=e.totalKey;return{title:t,align:"center",children:[{title:a,dataIndex:t,key:t,totalCol:!!n,width:100,align:"center",onCell:function(e){return{className:t.startsWith("FY")?"fin-total":""}},render:function(e,a,l){return a.render?a.render(t,a):n?a[n]?yu(a[n]):"-":e>=0||e<=0?ce(e):"total-row"===a.className?"-":void 0!==a.default?ce(a.default):""}}]}},Ou=[{},{name:"Cash Inflows",key:"Cash Inflows",className:"title-row"},{name:"Cash at Bank - Opening",key:"Cash at Bank - Opening inflows",className:"data-title-row",default:0,partialEdit:"Jul",editable:!0,render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?Du(t[e]):"-"}},{name:"Debtor Receipts",key:"Debtor Receipts inflows",className:"data-title-row",default:0,editable:!0},{name:"Other Inflows",key:"Other Inflows inflows",className:"data-title-row",editable:!0},{},{className:"total-row",name:"Total Inflows",key:"Total Inflows",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?Du(t[e]):"-"}}],xu=[{},{name:"Cash Outflows",key:"Cash Outflows outflows",className:"title-row"},{name:"Salary - Permanent",key:"Salary - Permanent outflows",className:"data-title-row",editable:!0},{name:"Salary - Casual",key:"Salary - Casual outflows",className:"data-title-row",editable:!0},{name:"Superannuation - Permanent",key:"Superannuation - Permanent outflows",className:"data-title-row",editable:!0},{name:"Superannuation - Casual",key:"Superannuation - Casual outflows",className:"data-title-row",editable:!0},{name:"Subcontractors",key:"Subcontractors outflows",className:"data-title-row",editable:!0},{name:"Payroll Tax",key:"Payroll Tax outflows",className:"data-title-row",editable:!0},{name:"Travel Claims",key:"Travel Claims outflows",className:"data-title-row",editable:!0},{name:"Rent",key:"Rent outflows",className:"data-title-row",editable:!0},{name:"Utilities",key:"Utilities outflows",className:"data-title-row",editable:!0},{name:"Office Supplies",key:"Office Supplies outflows",className:"data-title-row",editable:!0},{name:"Telephone & Mobiles",key:"Telephone & Mobiles outflows",className:"data-title-row",editable:!0},{name:"IT Expenses",key:"IT Expenses outflows",className:"data-title-row",editable:!0},{name:"Accounting Fee",key:"Accounting Fee outflows",className:"data-title-row",editable:!0},{name:"Insurance",key:"Insurance outflows",className:"data-title-row",editable:!0},{name:"Software Fee",key:"Software Fee outflows",className:"data-title-row",editable:!0},{name:"Business Travel",key:"Business Travel outflows",className:"data-title-row",editable:!0},{name:"Entertainments",key:"Entertainments outflows",className:"data-title-row",editable:!0},{name:"Other General Expense",key:"Other General Expense outflows",className:"data-title-row",editable:!0},{name:"ATO GST Payment",key:"ATO GST Payment outflows",className:"data-title-row",editable:!0},{name:"ATO PAYG W/Tax Payment",key:"ATO PAYG W/Tax Payment outflows",className:"data-title-row",editable:!0},{name:"ATO Income Tax Payment",key:"ATO Income Tax Payment outflows",className:"data-title-row",editable:!0},{name:"Other Outflows",key:"Other Outflows outflows",className:"data-title-row",editable:!0},{},{},{className:"total-row",name:"Total Outflows",key:"Total Outflows",render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?Du(t[e]):"-"}}],wu=[{},{className:"total-row",name:"Surplus (Shortffall)",key:"Surplus (Shortffall)",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,Iu(e,6,t)-Iu(e,33,t)},render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?Du(t[e]):"-"}},{className:"total-row",name:"Cash at Bank - Closing",key:"Cash at Bank - Closing",renderCalculation:function(e,t){return t=t.startsWith("FY")?"total":t,Iu(e,6,t)-Iu(e,33,t)},render:function(e,t){return t[e=e.startsWith("FY")?"total":e]?Du(t[e]):"-"}},{}],Iu=function(e,t,a){if(!e||!e[t])return 0;var n=a?e[t][a]:e[t];return isNaN(parseFloat(n))?0:parseFloat(n)},Du=function(e,t){return"float"===t?"".concat(e<0?"(".concat(ue(Math.abs(e)),")"):ue(e)," %"):"".concat(e<0?"(".concat(ce(Math.abs(e)),")"):ce(e))},Pu=["title","editable","children","dataIndex","key","record","indexing","handleSave"];function Tu(){Tu=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},l="function"==typeof Symbol?Symbol:{},r=l.iterator||"@@iterator",o=l.asyncIterator||"@@asyncIterator",i=l.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,a){return e[t]=a}}function c(e,t,a,l){var r=t&&t.prototype instanceof m?t:m,o=Object.create(r.prototype),i=new O(l||[]);return n(o,"_invoke",{value:k(e,a,i)}),o}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function m(){}function f(){}function p(){}var h={};s(h,r,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==t&&a.call(v,r)&&(h=v);var g=p.prototype=m.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){var l;n(this,"_invoke",{value:function(n,r){function o(){return new t((function(l,o){!function n(l,r,o,i){var s=u(e[l],e,r);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,i)}))}i(s.arg)}(n,r,l,o)}))}return l=l?l.then(o,o):o()}})}function k(e,t,a){var n="suspendedStart";return function(l,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===l)throw r;return w()}for(a.method=l,a.arg=r;;){var o=a.delegate;if(o){var i=S(o,a);if(i){if(i===d)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var s=u(e,t,a);if("normal"===s.type){if(n=a.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(n="completed",a.method="throw",a.arg=s.arg)}}}function S(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),d;var l=u(n,e.iterator,t.arg);if("throw"===l.type)return t.method="throw",t.arg=l.arg,t.delegate=null,d;var r=l.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:w}}function w(){return{value:void 0,done:!0}}return f.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,a,n,l,r){void 0===r&&(r=Promise);var o=new E(c(t,a,n,l),r);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(g),s(g,i,"Generator"),s(g,r,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var l=this.tryEntries.length-1;l>=0;--l){var r=this.tryEntries[l],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(i&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var l=this.tryEntries[n];if(l.tryLoc<=this.prev&&a.call(l,"finallyLoc")&&this.prev<l.finallyLoc){var r=l;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),j(a),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var l=n.arg;j(a)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:x(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),d}},e}var Nu=Ye.a.Title,Ru=l.a.createContext(null),Au=function(){for(var e={},t=Object(ac.a)(Array,Ou.concat(xu)),a=0,n=1;n<t.length;n++){var l=t[n];l.editable&&(a&&(e[a.key]=l.key),a=l)}return e["Other Outflows outflows"]="Debtor Receipts inflows",e}(),Fu=function(e){e.title;var t=e.editable,a=e.children,r=e.dataIndex,o=(e.key,e.record),i=e.indexing,s=e.handleSave,c=Object(ya.a)(e,Pu),u=Object(n.useRef)(null),d=Object(n.useContext)(Ru);r="Comments"===r?"description":r;var m=d.getFieldValue([null===o||void 0===o?void 0:o.key,r]),f=function(){var e=Object(dn.a)(Tu().mark((function e(t){var a;return Tu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.getFieldValue([o.key,r]),d.isFieldTouched([o.key,r]))try{s(i,r,a),setTimeout((function(){d.setFields([{name:[o.key,r],touched:!1}]),t&&d.getFieldInstance([Au[o.key],r]).focus()}),1e3)}catch(n){console.log("Save failed:",n)}else t&&d.getFieldInstance([Au[o.key],r]).focus();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=a;return t&&("description"===r?y=l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(Te.a,{title:m,placement:"top",destroyTooltipOnHide:!0},l.a.createElement(nt.a.Item,{style:{margin:0},initialValue:"",name:[o.key,"description"]},l.a.createElement(ht.a,{ref:u,className:"table-inputNumber-border",controls:!1,size:"small",onBlur:function(){return f()},onPressEnter:function(e){return f(!0)}}))))):(null===o||void 0===o?void 0:o.partialEdit)&&K()(r,"MMM YY").format("MMM")!==(null===o||void 0===o?void 0:o.partialEdit)||(y=l.a.createElement(p.a,null,l.a.createElement(h.a,null,l.a.createElement(nt.a.Item,{style:{margin:0},name:[o.key,r]},l.a.createElement(yt.a,{ref:u,className:"table-inputNumber-border",controls:!1,size:"small",formatter:function(e){return Tt(e,"$")},parser:function(e){return Nt(e,"$")},onBlur:function(){return f()},onPressEnter:function(e){return f(!0)}})))))),l.a.createElement("td",c,y)};var zu=function(){var e=nt.a.useForm(),t=Object(G.a)(e,1)[0],a=Ee("dates"),r=a.start,o=a.end,i=K()(o).format("[FY]YY"),s=Object(n.useState)([]),c=Object(G.a)(s,2),u=c[0],d=c[1],m=Object(n.useState)(!0),f=Object(G.a)(m,2),y=f[0],v=f[1],g=Object(n.useState)([{title:l.a.createElement(l.a.Fragment,null," ",l.a.createElement("div",null,"Month"),"Actual/Forecast"),dataIndex:"name",key:"name",width:250,onHeaderCell:function(){return{className:"whole"}},onCell:function(e){return{className:e.className}},fixed:"left"},{title:"",children:[{title:"",children:[]}]}]),b=Object(G.a)(g,2),E=b[0],k=b[1];Object(n.useEffect)((function(){S(),function(e){$.b.loading({content:"Calculating Cash Flow",key:1});var t=Ee("dates");t.start,t.end;return it.a.get("".concat(J,"/cashflowReportLabel/getReport"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.data,r=void 0===l?[]:l,o=a.message;return he(o),n&&$.b.loading({content:"Cash Flow",key:1}),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),{success:n,data:r}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}}))}().then((function(e){e.success&&(C(e.data),t.setFieldsValue(e.data))}))}),[]);var S=function(){for(var e=Object(et.a)(E),t=[Lu({year:"Comments"})],a=de(r);a.isSameOrBefore(o);a.add(1,"months")){var n={year:de(a,"MMM YY"),era:a.isBefore(K()(),"month")?"Actual":"Forecast"};t.push(Lu(n,O))}e[1].children[0].children=t,k(e)},C=function(e){var t=Object(ac.a)(Array,Object(et.a)(Ou).concat(Object(et.a)(xu),Object(et.a)(wu)));t=t.map((function(t){return e[t.key]&&(t=Object(tt.a)(Object(tt.a)({},t),e[t.key])),t})),j(t)},j=function(e){var t,a,n,l=Object(et.a)(e);return((null===E||void 0===E||null===(t=E[1])||void 0===t||null===(a=t.children)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.children)||[]).forEach((function(e){var t=Object(G.a)(e.children,1)[0].dataIndex;l[6][t]=0,l[33][t]=0;for(var a=0;a<l.length;a++)if(K()(t,"MMM YY",!0).isValid()){var n=Iu(l,a,t);if(a<6)l[6][t]+=n;else if(a>6&&a<33)l[33][t]+=n;else if(35===a){var r,o,i;l[35][t]=null===l||void 0===l||null===(r=l[35])||void 0===r||null===(o=(i=r).renderCalculation)||void 0===o?void 0:o.call(i,l,t)}else if(36===a){var s,c,u,d=null===l||void 0===l||null===(s=l[36])||void 0===s||null===(c=(u=s).renderCalculation)||void 0===c?void 0:c.call(u,l,t);l[36][t]=d;var m=K()(t,"MMM YY",!0).add(1,"month").format("MMM YY");l[2][m]=d}}})),d(l),v(!1),!0},O=function(e,t,a,n){v(!0);var l=Object(et.a)(u);return l[e][t]=a,j(l)},x={body:{cell:Fu}},w=E.map((function e(t){var a=Object(tt.a)(Object(tt.a)({},t),{},{onCell:function(e,a){return{record:e,editable:"name"!==t.dataIndex&&!t.totalCol&&e.editable,dataIndex:t.dataIndex,title:t.title,indexing:a,handleSave:O}}});return t.children&&(a.children=t.children.map(e)),a}));return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{style:{backgroundColor:"#0463AC",paddingRight:15},justify:"space-between",align:"middle"},l.a.createElement(h.a,{span:20},l.a.createElement(p.a,{style:{height:"48px"},align:"middle"},l.a.createElement(h.a,{span:24},l.a.createElement(Nu,{level:5,style:{color:"#fff",marginBottom:0,paddingLeft:5}},"Cashflow Forecast ",i)))),l.a.createElement(h.a,null,l.a.createElement(lt.a,{placement:"bottom",title:"Are you sure want to save new Settings?",onConfirm:function(){return t.submit()},okText:"Yes",cancelText:"No"},l.a.createElement(rt.a,{type:"primary",size:"small"},"Save")))),l.a.createElement(p.a,null,l.a.createElement(h.a,{span:24},l.a.createElement(nt.a,{form:t,component:!1,onFinish:function(e){for(var t in v(!0),e)e[t].description=e[t].description?e[t].description:"";var a;(a=e,$.b.loading({content:"Updating Cash Flow",key:2}),it.a.put("".concat(J,"/cashflowReportLabel/updateReport/"),a,{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=(a.data,a.message);return he(l),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization),n&&$.b.success({content:"Cash Flow Updated Successfully",key:2}),{success:n}})).catch((function(e){return ge(e,2,5)}))).then((function(e){v(!1)}))}},l.a.createElement(Ru.Provider,{value:t},l.a.createElement(ea.a,{components:x,bordered:!0,loading:y,size:"small",pagination:!1,rowKey:function(e){var t;return null!==(t=e.key)&&void 0!==t?t:e.name},columns:w,rowClassName:function(e){return e.className},dataSource:u,className:"scroll-table fs-v-small full-width wih-report",scroll:{x:"max-content",y:"65vh"}}))))))},Lu=function(e){var t=e.year,a=e.era,n=e.totalKey;return{title:t,align:"center",children:[{title:a,dataIndex:t,key:t,width:"Comments"===t?200:100,align:"center",onCell:function(e){return{className:t.startsWith("FY")?"fin-total":""}},render:function(e,a,r){return a.render?a.render(t,a):t.startsWith("FY")?a[n]?Du(a[n]):"-":e>=0||e<=0?ce(e):"total-row"===a.className?"-":void 0!==a.default?ce(a.default):l.a.createElement("span",{style:{color:"white"}},"-")}}]}},Mu=function(e){for(var t=e.date,a=e.contantColmuns,n=e.setColumn,l=e.spliceBtw,r=e.colRender,o=e.format,i=e.dataIndex,s=e.width,c=void 0===s?"5%":s,u=Ee("dates",t),d=u.start,m=u.end,f=[],p=de(d);p.isSameOrBefore(de(m));p.add(1,"months")){var h=de(p,"MMM YY");f.push(Object(tt.a)({key:h,dataIndex:i?[].concat(Object(et.a)(i),[h]):h,title:h,align:"center",width:c,render:function(e){var t;return e=r?null===(t=e)||void 0===t?void 0:t[r]:e,Bu(o,e)}},Ea(i?"".concat(i[0],".").concat(h,".").concat(r):"".concat(h,".").concat(r),"number")))}var y=Object(et.a)(a);y.splice.apply(y,[l,0].concat(f)),n(Object(et.a)(y))},Bu=function(e,t){return"currency"===e?ce(t):"float"===e?ue(t):"status"===e?_u(t):t},_u=function(e){return"-"===e||"N/A"===e?e:ue(e)},Yu=(f.a.Content,[{component:Ve,link:"/dashboard",key:"DASHBOARD",permission:"ALLOWED"},{component:Ns,link:"/profile",key:"PROFILE",permission:"ALLOWED"},{component:ps,link:"/calender"},{component:wn,link:"/admin/global-settings",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/tax-rates",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/calendars/holidays/:id",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/calendars",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/holiday-types",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/leave-categories",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/leave-policies",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/roles",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/standard-levels",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/skills",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/panels",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/expense-types",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/panels/skills/:id",key:"ADMIN_OPTIONS",permission:"READ"},{component:wn,link:"/admin/import-export",key:"ADMIN_OPTIONS",permission:"READ"},{component:Mn,link:"/organisations",key:"ORGANIZATIONS",permission:"READ"},{component:fl,link:"/organisations/:id/info",key:"ORGANIZATIONS",permission:"READ"},{component:wr,link:"/contacts",key:"CONTACT_PERSONS",permission:"READ"},{component:Pr,link:"/contacts/:id/info",key:"CONTACT_PERSONS",permission:"READ"},{component:Il,link:"/Employees",key:"USERS",permission:"READ"},{component:Gl,link:"/Employees/:id/info",key:"USERS",permission:"READ"},{component:Zl,link:"/Employee/:id/contracts",key:"USERS",permission:"READ"},{component:lr,link:"/Employee/:id/novated-lease",key:"USERS",permission:"READ"},{component:dr,link:"/sub-contractors",key:"USERS",permission:"READ"},{component:yr,link:"/sub-contractors/:id/info",key:"USERS",permission:"READ"},{component:Sr,link:"/sub-contractors/:id/contracts",key:"USERS",permission:"READ"},{component:Do,link:"/opportunities",key:"OPPORTUNITIES",permission:"READ"},{component:ni,link:"/opportunities/:proId/info",key:"OPPORTUNITIES",permission:"READ"},{component:is,link:"/opportunities/:proId/milestones",key:"OPPORTUNITIES",permission:"READ"},{component:Ki,link:"/opportunities/:proId/milestones/:mileId/expenses",key:"OPPORTUNITIES",permission:"READ"},{component:ii,link:"/opportunities/:proId/milestones/:mileId/resources",key:"OPPORTUNITIES",permission:"READ"},{component:di,link:"/projects",key:"PROJECTS",permission:"READ"},{component:Ci,link:"/projects/:proId/info",key:"PROJECTS",permission:"READ"},{component:Hi,link:"/projects/:proId/purchase-order",key:"PROJECTS",permission:"READ"},{component:is,link:"/projects/:proId/milestones",key:"PROJECTS",permission:"READ"},{component:Li,link:"/projects/:proId/schedules",key:"PROJECTS",permission:"READ"},{component:us,link:"/milestones-certificate",key:"PROJECTS",permission:"READ"},{component:Ki,link:"/projects/:proId/milestones/:mileId/expenses",key:"PROJECTS",permission:"READ"},{component:Ni,link:"/projects/:proId/milestones/:mileId/resources",key:"PROJECTS",permission:"READ"},{component:_i,link:"/projects/:proId/resources/rates/:id",key:"PROJECTS",permission:"READ"},{component:So,link:"/time-sheet",key:"TIMESHEETS",permission:"READ"},{component:lo,link:"/time-sheet-approval",key:"TIMESHEETS",permission:"APPROVAL,UNAPPROVAL"},{component:Oo,link:"/time-off"},{component:Qi,link:"/leave-request",key:"LEAVE_REQUESTS",permission:"READ"},{component:ns,link:"/approve-request",key:"LEAVE_REQUESTS",permission:"APPROVAL,UNAPPROVAL"},{component:As,link:"/training",permission:"ALLOWED"},{component:Qs,link:"/expense-sheets",key:"EXPENSES",permission:"READ"},{component:Vs,link:"/expense",key:"EXPENSES",permission:"READ"},{component:Xs,link:"/expense-sheet-approval",key:"EXPENSES",permission:"APPROVAL,UNAPPROVAL"},{component:Uc,link:"/report/unallocated-resources",key:"BENCH_RESOURCES",permission:"READ"},{component:$c,link:"/report/positions",key:"POSITIONS",permission:"READ"},{component:Wc,link:"/report/workforce-skills",key:"WORK_FORCE_SKILLS",permission:"READ"},{component:Xc,link:"/report/workforce-allocations",key:"WORK_ALLOCATION",permission:"READ"},{component:Qc,link:"/report/project-revenue-analysis",key:"PROJECT_REVENUE",permission:"READ"},{component:tu,link:"/report/client-revenue-analysis",key:"CLIENT_REVENUE",permission:"READ"},{component:lu,link:"/report/timesheet-summary",key:"TIMESHEET_SUMMARY",permission:"READ"},{component:su,link:"/report/leave-summary",key:"LEAVE_SUMMARY",permission:"READ"},{component:ec,link:"/calculator-permanent",key:"PERMANENT_CAL",permission:"ALLOWED"},{component:ec,link:"/calculator-casual",key:"CASUAL_CAL",permission:"ALLOWED"},{component:ec,link:"/calculator-contractor",key:"CONTRACTOR_CAL",permission:"ALLOWED"},{component:Ec,link:"/financial-outlook/forecast",key:"FORECASTING",permission:"READ"},{component:Cu,link:"/financial-outlook/budget",key:"FORECASTING",permission:"READ"},{component:zu,link:"/financial-outlook/cash-flow",key:"FORECASTING",permission:"READ"}]),Vu=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this)).getPageLink=function(){var e=pe().permissions,t=void 0===e?"{}":e;t=JSON.parse(t);var a=n.state.allowedRoutes;return Yu.forEach((function(e){var n;if("ALLOWED"===e.permission)a.push(e);else if(null===(n=t)||void 0===n?void 0:n[e.key]){var l,r=e.permission.split(","),o=Object(g.a)(r);try{for(o.s();!(l=o.n()).done;){var i=l.value;if(t[e.key][i]){a.push(e);break}}}catch(s){o.e(s)}finally{o.f()}}})),0===a.length&&n.setState({allowedRoutes:a}),a},n.state={allowedRoutes:[]},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.allowedRoutes;return l.a.createElement(i.d,null,(e.length>0?e:this.getPageLink()).map((function(e,t){return l.a.createElement(i.b,{exact:!0,path:e.link,component:e.component,key:t})})),l.a.createElement(i.a,{to:"/dashboard"}))}}]),a}(n.Component),qu=a(597).a.Countdown;var Hu=function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),r=a[0],o=a[1],s=36e5-((new Date).getTime()-parseInt(localStorage.getItem("jwtTimer")));return l.a.createElement("div",null,l.a.createElement(ta.a,{destroyOnClose:!0,closable:!1,keyboard:!1,maskClosable:!1,centered:!0,visible:e.visible,okText:"Refresh",onOk:function(){return e.refresh()},cancelText:"Logout Now",onCancel:function(){return $.b.loading({content:"Loading...",key:"logout"}),localStorage.clear(),$.b.info({content:"Logout successfully!",key:"logout"}),void o(!0)}},l.a.createElement(Rr.a,null)," Logging out in",l.a.createElement(qu,{onFinish:function(){localStorage.setItem("jwtExpired",!0),e.timeOut()},value:Date.now()+s,format:"mm:ss",style:{textAlign:"center"},valueStyle:{color:"red"}})),r&&l.a.createElement(i.a,{to:{pathname:"/"}}))},Uu=Ye.a.Title,Gu=ht.a.Password;var Wu=function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(!1),c=Object(G.a)(s,2),u=(c[0],c[1],nt.a.useForm()),d=Object(G.a)(u,1)[0];return l.a.createElement("div",null,l.a.createElement(ta.a,{destroyOnClose:!0,closable:!1,keyboard:!1,maskClosable:!1,centered:!0,visible:e.visible,okText:"Login",okButtonProps:{htmlType:"submit",form:"my-form"},cancelText:"Cancel",onCancel:function(){o(!0),localStorage.clear()}},l.a.createElement(Uu,{level:4,style:{textAlign:"center"}},"Login"),l.a.createElement(nt.a,{id:"my-form",form:d,onFinish:function(t){vs(t).then((function(t){(null===t||void 0===t?void 0:t.success)&&(d.resetFields(),e.close())}))},layout:"vertical"},l.a.createElement(nt.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your username!"}]},l.a.createElement(ht.a,null)),l.a.createElement(nt.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},l.a.createElement(Gu,null)))),r&&l.a.createElement(i.a,{to:{pathname:"/"}}))},Ku=(a(563),f.a.Content);var $u=function(e){var t=Object(n.useState)(!1),a=Object(G.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(!1),c=Object(G.a)(s,2),u=(c[0],c[1]),d=Object(n.useState)(!1),m=Object(G.a)(d,2),f=m[0],p=m[1];Object(n.useEffect)((function(){var e=localStorage.getItem("jwtTimer");(new Date).getTime()-parseInt(e)>36e5?(localStorage.setItem("jwtExpired",!0),p(!0)):setInterval((function(){var e=localStorage.getItem("jwtTimer");(new Date).getTime()-parseInt(e)>33e5&&"jwtExpired"!==Es()&&o(!0)}),6e4)}));var h=function(){it.a.get("".concat(J,"/helpers/refresh-token"),{headers:ye()}).then((function(e){var t,a=e.data,n=a.success,l=a.message;return he(l),n&&($.b.success({content:"Token Refresh Successfully"},5),fe(null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.authorization)),{success:n}})).catch((function(e){return{error:"Please login again!",success:!1,message:e.message}})).then((function(e){e.success?o(!1):(localStorage.clear(),u(!0),p(!1),u(!1))}))};return l.a.createElement("div",{className:"site-layour-frame"},l.a.createElement(Ku,{className:"site-layout-background layout-content-custom"},"jwtExpired"===Es()||!0===Es()?l.a.createElement(Vu,null):l.a.createElement(i.a,{to:{pathname:"/"}}),r&&l.a.createElement(Hu,{visible:r,refresh:function(){return h()},timeOut:function(){return u(!0),o(!1),p(!1),void u(!1)}})," ",l.a.createElement(Wu,{visible:"jwtExpired"===Es()||f,close:function(){localStorage.removeItem("jwtExpired"),u(!0),p(!1),u(!1)}})))},Ju=f.a.Header,Xu=f.a.Sider,Zu=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).toggle=function(){e.setState({collapsed:!e.state.collapsed})},e.state={collapsed:!0},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,n=this.state.collapsed;return l.a.createElement(f.a,{className:"setMinWidth"},l.a.createElement(Xu,{trigger:null,collapsible:!0,collapsed:n,theme:"light",breakpoint:"lg"},l.a.createElement("div",{className:"logo"},l.a.createElement(s.b,{to:"/dashboard"},n?l.a.createElement("div",{style:{height:"64px",padding:"12%"}},l.a.createElement("img",{src:"/z-s-avatar.png",alt:"Logo",style:{height:"42px"}})):l.a.createElement("div",{style:{height:"64px"}},l.a.createElement("img",{src:"/z-logo.png",alt:"Logo",width:"100%",style:{height:"64px"}})))),l.a.createElement(Ie,{activatePath:null===(e=this.props)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.pathname})),l.a.createElement(f.a,{className:"site-layout"},l.a.createElement(Ju,{className:"site-layout-background",style:{padding:0}},l.a.createElement(p.a,{justify:"start"},l.a.createElement("span",{className:"trigger",onClick:function(){a.toggle()}},n?l.a.createElement(y.a,null):l.a.createElement(v.a,null)),l.a.createElement(h.a,{flex:"auto"},l.a.createElement(_e,null)," "))),l.a.createElement($u,null)," "))}}]),a}(n.Component),Qu=a(115),ed=a.n(Qu),td=(Ye.a.Title,ht.a.Password);var ad=function(e){var t=(Object(i.g)().state||{from:{pathname:"/dashboard"}}).from,a=Object(n.useState)(!1),r=Object(G.a)(a,2),o=r[0],c=r[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){!0===Es()&&c(!0)};return l.a.createElement(p.a,{justify:"center",align:"middle",className:"app-login app-login-background",style:{backgroundImage:"url(".concat("/Z-avatar.svg",")")}},l.a.createElement(h.a,{span:8},l.a.createElement(p.a,{justify:"center",align:"middle",gutter:[24,10],className:"form-row"},l.a.createElement(h.a,{span:24,style:{backgroundImage:"url(".concat("/z-logo.png",")")},className:"app-title-image"}),l.a.createElement(h.a,{span:16,className:"txt-center"},l.a.createElement(nt.a,{wrapperCol:24,initialValues:{remember:!0},onFinish:function(e){vs(e).then((function(e){e&&e.success&&ut().then((function(e){e.success&&localStorage.setItem("pageSize",e.data.recordsPerPage),window.location.href="/dashboard"}))}))},layout:"vertical"},l.a.createElement(nt.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your username!"}]},l.a.createElement(ht.a,null)),l.a.createElement(nt.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},l.a.createElement(td,null)),l.a.createElement(nt.a.Item,null,l.a.createElement(rt.a,{type:"primary",htmlType:"submit"},"Login")),l.a.createElement(nt.a.Item,null,l.a.createElement(ed.a,{type:"secondary"},l.a.createElement(s.b,{to:"/forgot-password"}," Forgot Password "))),l.a.createElement(nt.a.Item,{noStyle:!0},l.a.createElement(ed.a,{type:"danger"},"If you are experiencing any problems, please contact support@timewize.au")))))),o&&l.a.createElement(i.a,{to:t}))};Ye.a.Title,ht.a.Password;var nd=function(e){var t=(Object(i.g)().state||{from:{pathname:"/dashboard"}}).from,a=Object(n.useState)(!1),r=Object(G.a)(a,2),o=r[0],c=r[1];Object(n.useEffect)((function(){u()}),[]);var u=function(){!0===Es()&&c(!0)};return l.a.createElement(p.a,{justify:"center",align:"middle",className:"app-login app-login-background",style:{backgroundImage:"url(".concat("/Z-avatar.svg",")")}},l.a.createElement(h.a,{span:8},l.a.createElement(p.a,{justify:"center",align:"middle",gutter:[24,10],className:"form-row"},l.a.createElement(h.a,{span:24,style:{backgroundImage:"url(".concat("/Z-logo.png",")")},className:"app-title-image"}),l.a.createElement(h.a,{span:16,className:"txt-center"},l.a.createElement(nt.a,{wrapperCol:24,initialValues:{remember:!0},onFinish:function(e){gs(e).then((function(e){e&&e.success&&(console.log(e),window.location.href="/login")}))},layout:"vertical"},l.a.createElement(nt.a.Item,{label:"Username",name:"email",rules:[{required:!0,message:"Please input your username!"}]},l.a.createElement(ht.a,null)),l.a.createElement(nt.a.Item,null,l.a.createElement(rt.a,{type:"primary",htmlType:"submit"},"Request Reset")),l.a.createElement(nt.a.Item,null,l.a.createElement(ed.a,{type:"secondary"},l.a.createElement(s.b,{to:"/login"}," Login "))),l.a.createElement(nt.a.Item,{noStyle:!0},l.a.createElement(ed.a,{type:"danger"},"If you are experiencing any problems, please contact support@timewize.com.au")))))),o&&l.a.createElement(i.a,{to:t}))},ld=(Ye.a.Title,ht.a.Password);var rd=function(e){var t=Object(i.g)().state,a=(t||{from:{pathname:"/dashboard"}}).from,r=Object(n.useState)(!1),o=Object(G.a)(r,2),s=o[0],c=o[1],u=Object(n.useState)(Object(i.h)().token),d=Object(G.a)(u,1)[0];Object(n.useEffect)((function(){m(),console.log(t)}),[]);var m=function(){!0===Es()&&c(!0)};return l.a.createElement(p.a,{justify:"center",align:"middle",className:"app-login app-login-background",style:{backgroundImage:"url(".concat("/Z-avatar.svg",")")}},l.a.createElement(h.a,{span:8},l.a.createElement(p.a,{justify:"center",align:"middle",gutter:[24,10],className:"form-row"},l.a.createElement(h.a,{span:24,style:{backgroundImage:"url(".concat("/Z-logo.png",")")},className:"app-title-image"}),l.a.createElement(h.a,{span:16,className:"txt-center"},l.a.createElement(nt.a,{wrapperCol:24,initialValues:{remember:!0},onFinish:function(e){bs(d,e).then((function(e){e&&e.success&&(console.log(e),window.location.href="/login")}))},layout:"vertical"},l.a.createElement(nt.a.Item,{label:"New Password",name:"password",rules:[{required:!0,message:"Please Enter your new password!"}]},l.a.createElement(ld,null)),l.a.createElement(nt.a.Item,{label:"Confirm New Password",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"Please Enter your new password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("Passwords do not match!")):Promise.resolve()}}}]},l.a.createElement(ld,null)),l.a.createElement(nt.a.Item,null,l.a.createElement(rt.a,{type:"primary",htmlType:"submit"},"Reset")),l.a.createElement(nt.a.Item,{noStyle:!0},l.a.createElement(ed.a,{type:"danger"},"If you are experiencing any problems, please contact support@timewize.com.au")))))),s&&l.a.createElement(i.a,{to:a}))};a(583);var od=function(){var e=[{name:"Login",path:"/",component:l.a.createElement(ad,null)},{name:"Forgot Password",path:"/forgot-password",component:l.a.createElement(nd,null)},{name:"Login",path:"/reset-password/:token",component:l.a.createElement(rd,null)}].map((function(e,t){return l.a.createElement(i.b,{exact:!0,path:e.path,key:t},e.component)}));return l.a.createElement(s.a,null,l.a.createElement(i.d,null,e,l.a.createElement(Zu,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(od,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[333,1,2]]]);
//# sourceMappingURL=main.9f87cb00.chunk.js.map